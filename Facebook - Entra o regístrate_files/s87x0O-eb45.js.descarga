if (self.CavalryLogger) { CavalryLogger.start_js(["MQwJ1"]); }

__d("FBRTCMessageType",[],(function(a,b,c,d,e,f){e.exports={JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,EXPERIMENT:12,APPROVAL:17}}),null);
__d("FundsAvailability",[],(function(a,b,c,d,e,f){e.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SUPPORT:"master/support",SEARCH:"master/search",WORK_NEW_CHAT:"master/work_new_chat"}}}),null);
__d("MNCommercePageSetting",[],(function(a,b,c,d,e,f){e.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("BonfireFeatureGating",["gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={canReceiveBonfireRingInterop:function(){return b("gkx")("678201")},shouldUseH264:function(){return b("gkx")("692620")},stillAroundEnabled:function(){return b("gkx")("678202")},showBulkUserOnboarding:function(){return b("gkx")("678204")},showDeleteAccountSetting:function(){return b("gkx")("678205")},showAudioSettings:function(){return b("gkx")("678206")},showLinkGeneration:function(){return b("gkx")("678207")}};e.exports=a}),null);
__d("PresenceViewerCapabilities",["ArbiterMixin","Bootloader","CurrentUser","PresenceConfig","debounceAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=Object.assign({},b("ArbiterMixin")),i=b("debounceAcrossTransitions")(function(){return h.inform("viewerChange")},0);function j(a){try{a=JSON.parse(a.payload);a.capabilityBitMask!==g&&i();a.capabilityBitMask!=null&&(g=a.capabilityBitMask)}catch(a){}}Object.assign(h,{get:function(){if(g!=null)return g;b("Bootloader").loadModules(["SkywalkerManager"],function(a){return a.subscribe("presence/fb/"+b("CurrentUser").getID(),j)},"PresenceViewerCapabilities");g=b("PresenceConfig").get("viewer_presence_capabilities");return g}});e.exports=h}),null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","SubscriptionsHandler","TypingStates","createObjectFrom","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){this._input=a,this._ignoreKeys={},this._getValueFn=b}Object.assign(a.prototype,b("ArbiterMixin"),{_timeout:7e3,_currentState:b("TypingStates").INACTIVE,init:function(){this.init=b("emptyFunction"),this.reset(),this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Event").listen(this._input,"keyup",this._update.bind(this)),b("Run").onUnload(this._onunload.bind(this)))},reset:function(){clearTimeout(this._checkTimer),this._checkTimer=null,this._lastKeystrokeAt=null,this._currentState=b("TypingStates").INACTIVE},setIgnoreKeys:function(a){this._ignoreKeys=b("createObjectFrom")(a)},destroy:function(){this._subscriptions.release()},_onunload:function(){this._currentState==b("TypingStates").TYPING&&this._transition(b("TypingStates").QUITTING)},_update:function(event){var a=b("Event").getKeyCode(event),c=this._currentState;if(!this._ignoreKeys[a]){a=this._getValueFn?this._getValueFn():b("Input").getValue(this._input);a.trim().length===0?c==b("TypingStates").TYPING&&this._transition(b("TypingStates").INACTIVE):c==b("TypingStates").TYPING?this._recordKeystroke():c==b("TypingStates").INACTIVE&&(this._transition(b("TypingStates").TYPING),this._recordKeystroke())}},_transition:function(a){this.reset(),this._currentState=a,this.inform("change",a)},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now(),this._checkTimer||(this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout))},_checkTyping:function(){var a=this._lastKeystrokeTime+this._timeout,c=Date.now();c>a?this._transition(b("TypingStates").INACTIVE):(clearTimeout(this._checkTimer),this._checkTimer=setTimeout(this._checkTyping.bind(this),a-c+10))}});e.exports=a}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","Keys","MercuryServerRequestsConfig","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/ajax/messaging/typ.php";function a(a,c,d,e,f,g,h){__p&&__p();if(!c)return;this.userID=a;this.input=c;this.source=d;this.threadID=f;this.pageID=h;this.remoteState=b("TypingStates").INACTIVE;this.notifyTimer=null;e=e||{};this.notifyDelay=e.notifyDelay||this.notifyDelay;this._typingDetector=new(b("TypingDetector"))(c,g);this._typingDetector.init(e);this._typingDetector.subscribe("change",this._stateChange.bind(this))}a.prototype.setUserAndThread=function(a,b){(this.userID!==a||this.threadID!==b)&&(this.resetState(),this.userID=a,this.threadID=b)};a.prototype.setIgnoreEnter=function(a){a=a?[b("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(a)};a.prototype.resetState=function(){this._notifyState(b("TypingStates").INACTIVE),this.remoteState=b("TypingStates").INACTIVE,this._typingDetector.reset(),b("clearTimeout")(this.notifyTimer),this.notifyTimer=null};a.prototype.destroy=function(){this.resetState(),this._typingDetector.destroy()};a.prototype._stateChange=function(a,c){c!=b("TypingStates").QUITTING?(b("clearTimeout")(this.notifyTimer),this.notifyTimer=b("setTimeoutAcrossTransitions")(b("shield")(this._notifyState,this,c),this.notifyDelay)):this._notifyState(c,!0)};a.prototype._notifyState=function(a,c){if(!this.userID&&!this.threadID||!b("ChatVisibility").isOnline()||a===this.remoteState||b("ifRequired")("ChannelConnection",function(a){return a.disconnected()},function(){return!0}))return;this._sendRequest(a,this.userID,c)};a.prototype._sendRequest=function(a,c,d){this.remoteState=a;a={typ:a,to:c,source:this.source,thread:this.threadID};var e=this.pageID?b("ActorURI").create(g,this.pageID):g;c=new(b("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,c)).setErrorHandler(b("emptyFunction")).setData(a).setURI(e).setAllowCrossPageTransition(!0).setOption("asynchronous_DEPRECATED",!d);b("MercuryServerRequestsConfig").msgrRegion&&c.setRequestHeader("X-MSGR-Region",b("MercuryServerRequestsConfig").msgrRegion);c.send()};a.prototype._onTypResponse=function(a,c){c=c.getPayload()||{};c.offline&&b("AvailableList").set(a,b("AvailableListConstants").OFFLINE,"typing_response")};Object.assign(a.prototype,{notifyDelay:1e3});e.exports=a}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null,CLEAR_ALL_REMINDERS:null});var g={Types:a,updateEventReminder:function(a,event,c,d){b("EventReminderDispatcher").dispatch({type:g.Types.UPDATE_EVENT_REMINDER,threadID:a,event:event,participantsEventStatus:d,eventID:c})},deleteEventReminder:function(a,c){b("EventReminderDispatcher").dispatch({type:g.Types.DELETE_EVENT_REMINDER,threadID:a,eventID:c})},clearAllReminders:function(a){b("EventReminderDispatcher").dispatch({type:g.Types.CLEAR_ALL_REMINDERS,threadID:a})}};e.exports=g}),null);
__d("EventReminderConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({INITIAL:"initial",GOING:"going",WATCHED:"watched",UNWATCHED:"unwatched"});b=Object.freeze({ASSOCIATED_EVENT:"ASSOCIATED_EVENT"});c=Object.freeze({GOING:"GOING",DECLINED:"DECLINED",INVITED:"INVITED"});d=Object.freeze({NO_ERROR:"NO_ERROR",PAST_TIME:"PAST_TIME",AFTER_ONE_YEAR:"AFTER_ONE_YEAR"});e.exports={EventGuestStates:a,EventPlanType:b,GuestStates:c,TimeErrorType:d}}),null);
__d("bs_caml_builtin_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=["Out_of_memory",0];b=["Sys_error",-1];c=["Failure",-2];d=["Invalid_argument",-3];e=["End_of_file",-4];var g=["Division_by_zero",-5],h=["Not_found",-6],i=["Match_failure",-7],j=["Stack_overflow",-8],k=["Sys_blocked_io",-9],l=["Assert_failure",-10],m=["Undefined_recursive_module",-11];a.tag=248;b.tag=248;c.tag=248;d.tag=248;e.tag=248;g.tag=248;h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;f.out_of_memory=a;f.sys_error=b;f.failure=c;f.invalid_argument=d;f.end_of_file=e;f.division_by_zero=g;f.not_found=h;f.match_failure=i;f.stack_overflow=j;f.sys_blocked_io=k;f.assert_failure=l;f.undefined_recursive_module=m}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=c[0].length+d|0;continue}else return d}}function h(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(d){var f=d[0],g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d[1];b=e;continue}else return 0}}function c(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function d(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{a[c]=d;return 0}}function e(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a[c]}function i(a,b){var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}function j(a){var b=new Array(a);for(var c=0,a=a-1|0;c<=a;++c)b[c]=0;return b}function k(b,c,d,e,a){if(e<=c){for(var f=0,h=a-1|0;f<=h;++f)d[f+e|0]=b[f+c|0];return 0}else{for(var f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0];return 0}}function l(a){return a.slice(0)}f.caml_array_dup=l;f.caml_array_sub=a;f.caml_array_concat=c;f.caml_make_vect=i;f.caml_make_float_vect=j;f.caml_array_blit=k;f.caml_array_get=e;f.caml_array_set=d}),null);
__d("bs_curry",["bs_caml_array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();while(!0){var d=c,e=a,f=e.length;f=f===0?1:f;var h=d.length;h=f-h|0;if(h===0)return e.apply(null,d);else if(h<0){c=b("bs_caml_array").caml_array_sub(d,f,-h|0);a=e.apply(null,b("bs_caml_array").caml_array_sub(d,0,f));continue}else return function(b,a){return function(c){return g(b,a.concat([c]))}}(e,d)}}function h(a,b,c){__p&&__p();if(c>7||c<0)return g(a,[b]);else switch(c){case 0:case 1:return a(b);case 2:return function(c){return a(b,c)};case 3:return function(c,d){return a(b,c,d)};case 4:return function(c,d,e){return a(b,c,d,e)};case 5:return function(c,d,e,f){return a(b,c,d,e,f)};case 6:return function(c,d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(c,d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function i(a,b){var c=a.length;if(c===1)return a(b);else return h(a,b,c)}function a(a){var b=a.length;if(b===1)return a;else return function(b){return i(a,b)}}function j(a,b,c,d){__p&&__p();if(d>7||d<0)return g(a,[b,c]);else switch(d){case 0:case 1:return g(a(b),[c]);case 2:return a(b,c);case 3:return function(d){return a(b,c,d)};case 4:return function(d,e){return a(b,c,d,e)};case 5:return function(d,e,f){return a(b,c,d,e,f)};case 6:return function(d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function k(a,b,c){var d=a.length;if(d===2)return a(b,c);else return j(a,b,c,d)}function c(a){var b=a.length;if(b===2)return a;else return function(b,c){return k(a,b,c)}}function l(a,b,c,d,e){__p&&__p();var f=0;if(e>7||e<0)return g(a,[b,c,d]);else switch(e){case 0:case 1:f=1;break;case 2:return g(a(b,c),[d]);case 3:return a(b,c,d);case 4:return function(e){return a(b,c,d,e)};case 5:return function(e,f){return a(b,c,d,e,f)};case 6:return function(e,f,g){return a(b,c,d,e,f,g)};case 7:return function(e,f,g,h){return a(b,c,d,e,f,g,h)}}if(f===1)return g(a(b),[c,d])}function m(a,b,c,d){var e=a.length;if(e===3)return a(b,c,d);else return l(a,b,c,d,e)}function d(a){var b=a.length;if(b===3)return a;else return function(b,c,d){return m(a,b,c,d)}}function n(a,b,c,d,e,f){__p&&__p();var h=0;if(f>7||f<0)return g(a,[b,c,d,e]);else switch(f){case 0:case 1:h=1;break;case 2:return g(a(b,c),[d,e]);case 3:return g(a(b,c,d),[e]);case 4:return a(b,c,d,e);case 5:return function(f){return a(b,c,d,e,f)};case 6:return function(f,g){return a(b,c,d,e,f,g)};case 7:return function(f,g,h){return a(b,c,d,e,f,g,h)}}if(h===1)return g(a(b),[c,d,e])}function o(a,b,c,d,e){var f=a.length;if(f===4)return a(b,c,d,e);else return n(a,b,c,d,e,f)}function e(a){var b=a.length;if(b===4)return a;else return function(b,c,d,e){return o(a,b,c,d,e)}}function p(a,b,c,d,e,f,h){__p&&__p();var i=0;if(h>7||h<0)return g(a,[b,c,d,e,f]);else switch(h){case 0:case 1:i=1;break;case 2:return g(a(b,c),[d,e,f]);case 3:return g(a(b,c,d),[e,f]);case 4:return g(a(b,c,d,e),[f]);case 5:return a(b,c,d,e,f);case 6:return function(g){return a(b,c,d,e,f,g)};case 7:return function(g,h){return a(b,c,d,e,f,g,h)}}if(i===1)return g(a(b),[c,d,e,f])}function q(a,b,c,d,e,f){var g=a.length;if(g===5)return a(b,c,d,e,f);else return p(a,b,c,d,e,f,g)}function r(a){var b=a.length;if(b===5)return a;else return function(b,c,d,e,f){return q(a,b,c,d,e,f)}}function s(a,b,c,d,e,f,h,i){__p&&__p();var j=0;if(i>7||i<0)return g(a,[b,c,d,e,f,h]);else switch(i){case 0:case 1:j=1;break;case 2:return g(a(b,c),[d,e,f,h]);case 3:return g(a(b,c,d),[e,f,h]);case 4:return g(a(b,c,d,e),[f,h]);case 5:return g(a(b,c,d,e,f),[h]);case 6:return a(b,c,d,e,f,h);case 7:return function(g){return a(b,c,d,e,f,h,g)}}if(j===1)return g(a(b),[c,d,e,f,h])}function t(a,b,c,d,e,f,g){var h=a.length;if(h===6)return a(b,c,d,e,f,g);else return s(a,b,c,d,e,f,g,h)}function u(a){var b=a.length;if(b===6)return a;else return function(b,c,d,e,f,g){return t(a,b,c,d,e,f,g)}}function v(a,b,c,d,e,f,h,i,j){__p&&__p();var k=0;if(j>7||j<0)return g(a,[b,c,d,e,f,h,i]);else switch(j){case 0:case 1:k=1;break;case 2:return g(a(b,c),[d,e,f,h,i]);case 3:return g(a(b,c,d),[e,f,h,i]);case 4:return g(a(b,c,d,e),[f,h,i]);case 5:return g(a(b,c,d,e,f),[h,i]);case 6:return g(a(b,c,d,e,f,h),[i]);case 7:return a(b,c,d,e,f,h,i)}if(k===1)return g(a(b),[c,d,e,f,h,i])}function w(a,b,c,d,e,f,g,h){var i=a.length;if(i===7)return a(b,c,d,e,f,g,h);else return v(a,b,c,d,e,f,g,h,i)}function x(a){var b=a.length;if(b===7)return a;else return function(b,c,d,e,f,g,h){return w(a,b,c,d,e,f,g,h)}}function y(a,b,c,d,e,f,h,i,j,k){__p&&__p();var l=0;if(k>7||k<0)return g(a,[b,c,d,e,f,h,i,j]);else switch(k){case 0:case 1:l=1;break;case 2:return g(a(b,c),[d,e,f,h,i,j]);case 3:return g(a(b,c,d),[e,f,h,i,j]);case 4:return g(a(b,c,d,e),[f,h,i,j]);case 5:return g(a(b,c,d,e,f),[h,i,j]);case 6:return g(a(b,c,d,e,f,h),[i,j]);case 7:return g(a(b,c,d,e,f,h,i),[j])}if(l===1)return g(a(b),[c,d,e,f,h,i,j])}function z(a,b,c,d,e,f,g,h,i){var j=a.length;if(j===8)return a(b,c,d,e,f,g,h,i);else return y(a,b,c,d,e,f,g,h,i,j)}function A(a){var b=a.length;if(b===8)return a;else return function(b,c,d,e,f,g,h,i){return z(a,b,c,d,e,f,g,h,i)}}f.app=g;f.curry_1=h;f._1=i;f.__1=a;f.curry_2=j;f._2=k;f.__2=c;f.curry_3=l;f._3=m;f.__3=d;f.curry_4=n;f._4=o;f.__4=e;f.curry_5=p;f._5=q;f.__5=r;f.curry_6=s;f._6=t;f.__6=u;f.curry_7=v;f._7=w;f.__7=x;f.curry_8=y;f._8=z;f.__8=A}),null);
__d("bs_belt_Id",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a[0];return[a]}function c(a){a=a[0];a=b("bs_curry").__2(a);return[a]}function d(a){return[a]}function e(a){a=b("bs_curry").__2(a);return[a]}function g(a){var b=a[0];a=a[1];return[b,a]}function h(a){var c=a[0];c=b("bs_curry").__1(c);a=a[1];a=b("bs_curry").__2(a);return[c,a]}function i(a,b){return[a,b]}function j(a,c){a=b("bs_curry").__1(a);c=b("bs_curry").__2(c);return[a,c]}f.MakeComparableU=a;f.MakeComparable=c;f.comparableU=d;f.comparable=e;f.MakeHashableU=g;f.MakeHashable=h;f.hashableU=i;f.hashable=j}),null);
__d("bs_caml_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[0];function a(a){a[1]=g[0];g[0]+=1;return a}function h(){g[0]+=1;return g[0]}function b(a){var b=h(0);a=[a,b];a.tag=248;return a}function c(a){if(a===void 0)return!1;else if(a.tag===248)return!0;else{a=a[0];if(a!==void 0)return a.tag===248;else return!1}}f.caml_set_oo_id=a;f.get_id=h;f.create=b;f.isCamlExceptionOrOpenVariant=c}),null);
__d("bs_js_exn",["bs_caml_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("bs_caml_exceptions").create("Js_exn.Error");function a(a){if(b("bs_caml_exceptions").isCamlExceptionOrOpenVariant(a))return a;else return[g,a]}function c(a){throw new Error(a)}function d(a){throw new EvalError(a)}function e(a){throw new RangeError(a)}function h(a){throw new ReferenceError(a)}function i(a){throw new SyntaxError(a)}function j(a){throw new TypeError(a)}function k(a){throw new URIError(a)}f.$$Error=g;f.internalToOCamlException=a;f.raiseError=c;f.raiseEvalError=d;f.raiseRangeError=e;f.raiseReferenceError=h;f.raiseSyntaxError=i;f.raiseTypeError=j;f.raiseUriError=k}),null);
__d("bs_block",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b.tag=a;return b}function b(a,b){return Object.defineProperty(b,Symbol["for"]("BsRecord"),{value:a})}function c(a,b,c){c.tag=b;return Object.defineProperty(c,Symbol["for"]("BsVariant"),{value:a})}function d(a,b){return Object.defineProperty(b,Symbol["for"]("BsVariant"),{value:a})}function e(a,b){return Object.defineProperty(b,Symbol["for"]("BsLocalModule"),{value:a})}function g(a,b){return Object.defineProperty(b,Symbol["for"]("BsPolyVar"),{value:a})}f.__=a;f.record=b;f.variant=c;f.simpleVariant=d;f.localModule=e;f.polyVar=g}),null);
__d("bs_js_types",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=typeof a;if(c==="undefined")return 3;else if(a===null)return 2;else if(c==="number")return b("bs_block").__(0,[a]);else if(c==="string")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(c==="function")return b("bs_block").__(2,[a]);else if(c==="object")return b("bs_block").__(3,[a]);else return b("bs_block").__(4,[a])}function c(a,b){switch(b){case 0:return typeof a==="undefined";case 1:return a===null;case 2:return typeof a==="boolean";case 3:return typeof a==="number";case 4:return typeof a==="string";case 5:return typeof a==="function";case 6:return typeof a==="object";case 7:return typeof a==="symbol"}}f.test=c;f.classify=a}),null);
__d("bs_caml_int32",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a/c|0}function c(a,c){if(c===0)throw b("bs_caml_builtin_exceptions").division_by_zero;else return a%c}function d(a){return(a&255)<<8|(a&65280)>>>8}function e(a){return(a&255)<<24|(a&65280)<<8|(a&16711680)>>>8|(a&4278190080)>>>24}var g=Math.imul||function(a,b){b|=0;return((a>>16)*b<<16)+(a&65535)*b|0},h=e;f.div=a;f.mod_=c;f.caml_bswap16=d;f.caml_int32_bswap=e;f.caml_nativeint_bswap=h;f.imul=g}),null);
__d("bs_caml_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a<b)return-1;else if(a===b)return 0;else return 1}function b(a,b){if(a)if(b)return 0;else return 1;else if(b)return-1;else return 0}function c(a,b){if(a===b)return 0;else if(a<b)return-1;else if(a>b||a===a)return 1;else if(b===b)return-1;else return 0}function d(a,b){if(a===b)return 0;else if(a<b)return-1;else return 1}function e(a,b){if(a)return b;else return a}function g(a,b){if(a<b)return a;else return b}function h(a,b){if(a<b)return a;else return b}function i(a,b){if(a<b)return a;else return b}function j(a,b){if(a<b)return a;else return b}function k(a,b){if(a<b)return a;else return b}function l(a,b){if(a)return a;else return b}function m(a,b){if(a>b)return a;else return b}function n(a,b){if(a>b)return a;else return b}function o(a,b){if(a>b)return a;else return b}function p(a,b){if(a>b)return a;else return b}function q(a,b){if(a>b)return a;else return b}var r=a,s=a;f.caml_int_compare=a;f.caml_bool_compare=b;f.caml_float_compare=c;f.caml_nativeint_compare=r;f.caml_string_compare=d;f.caml_int32_compare=s;f.caml_bool_min=e;f.caml_int_min=g;f.caml_float_min=h;f.caml_string_min=i;f.caml_nativeint_min=j;f.caml_int32_min=k;f.caml_bool_max=l;f.caml_int_max=m;f.caml_float_max=n;f.caml_string_max=o;f.caml_nativeint_max=p;f.caml_int32_max=q}),null);
__d("bs_caml_obj",["bs_block","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b=new Array(b);b.tag=a;return b}function c(a){var b=a.length|0,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];c.tag=a.tag|0;return c}function d(a,c){__p&&__p();var d=a.length|0;if(c<=0||c>d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Obj.truncate"];else if(d!==c){for(var e=c,d=d-1|0;e<=d;++e)a[e]=0;a.length=c;return 0}else return 0}function e(a){return b("bs_block").__(250,[a])}function g(a,b){var c=b.length|0;for(var d=0,c=c-1|0;d<=c;++d)a[d]=b[d];d=b.tag|0;if(d!==0){a.tag=d;return 0}else return 0}var h=function(a,b){for(var c in a)b(c)};function i(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return 0;else{var f=typeof e,g=typeof d,j=0;switch(f){case"boolean":if(g==="boolean")return b("bs_caml_primitive").caml_bool_compare(e,d);else j=1;break;case"function":if(g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"compare: functional value"];else j=1;break;case"number":if(g==="number")return b("bs_caml_primitive").caml_int_compare(e,d);else j=1;break;case"string":if(g==="string")return b("bs_caml_primitive").caml_string_compare(e,d);else return 1;case"undefined":return-1;default:j=1}if(j===1)switch(g){case"string":return-1;case"undefined":return 1;default:if(f==="boolean")return 1;else if(g==="boolean")return-1;else if(f==="function")return 1;else if(g==="function")return-1;else if(f==="number")if(d===null||d.tag===256)return 1;else return-1;else if(g==="number")if(e===null||e.tag===256)return-1;else return 1;else if(e===null)if(d.tag===256)return 1;else return-1;else if(d===null)if(e.tag===256)return-1;else return 1;else{j=e.tag|0;f=d.tag|0;if(j===250){a=e[0];continue}else if(f===250){c=d[0];continue}else if(j===256)if(f===256)return b("bs_caml_primitive").caml_int_compare(e[1],d[1]);else return-1;else if(j===248)return b("bs_caml_primitive").caml_int_compare(e[1],d[1]);else if(j===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(j!==f)if(j<f)return-1;else return 1;else{g=e.length|0;j=d.length|0;if(g===j)if(Array.isArray(e)){f=e;var k=d,l=0,m=g;while(!0){var n=l;if(n===m)return 0;else{var o=i(f[n],k[n]);if(o!==0)return o;else{l=n+1|0;continue}}}}else{o=e;n=d;l=[void 0];f=[void 0];var p=function(b,c){__p&&__p();var d=b[2],a=b[1];if(!Object.prototype.hasOwnProperty.call(a,c)||i(b[0][c],a[c])>0){b=d[0];if(b!==void 0&&c>=b)return 0;else{d[0]=c;return 0}}else return 0};k=[o,n,f];m=function(a){return function(b){return p(a,b)}}(k);k=[n,o,l];k=function(a){return function(b){return p(a,b)}}(k);h(o,m);h(n,k);o=l[0];m=f[0];if(o!==void 0)if(m!==void 0)return b("bs_caml_primitive").caml_string_compare(o,m);else return-1;else if(m!==void 0)return 1;else return 0}else if(g<j){n=e;k=d;l=0;f=g;while(!0){o=l;if(o===f)return-1;else{m=i(n[o],k[o]);if(m!==0)return m;else{l=o+1|0;continue}}}}else{g=e;m=d;o=0;l=j;while(!0){n=o;if(n===l)return 1;else{k=i(g[n],m[n]);if(k!==0)return k;else{o=n+1|0;continue}}}}}}}}}}function j(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===d)return!0;else{var f=typeof e;if(f==="string"||f==="number"||f==="boolean"||f==="undefined"||e===null)return!1;else{var g=typeof d;if(f==="function"||g==="function")throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: functional value"];else if(g==="number"||g==="undefined"||d===null)return!1;else{f=e.tag|0;g=d.tag|0;if(f===250){a=e[0];continue}else if(g===250){c=d[0];continue}else if(f===248)return e[1]===d[1];else if(f===251)throw[b("bs_caml_builtin_exceptions").invalid_argument,"equal: abstract value"];else if(f!==g)return!1;else if(f===256)return e[1]===d[1];else{g=e.length|0;f=d.length|0;if(g===f)if(Array.isArray(e)){f=e;var i=d,k=0;g=g;while(!0){var l=k;if(l===g)return!0;else if(j(f[l],i[l])){k=l+1|0;continue}else return!1}}else{l=e;k=d;f=[!0];i=function(a,b){return function(c){if(Object.prototype.hasOwnProperty.call(a,c))return 0;else{b[0]=!1;return 0}}}(k,f);g=function(a,b,c){return function(d){if(!Object.prototype.hasOwnProperty.call(a,d)||!j(b[d],a[d])){c[0]=!1;return 0}else return 0}}(l,k,f);h(l,i);f[0]&&h(k,g);return f[0]}else return!1}}}}}}function k(a,b){if(b!==null)return j(a,b);else return a===b}function l(a,b){if(b!==void 0)return j(a,b);else return a===b}function m(a,b){if(b==null)return a===b;else return j(a,b)}function n(a,b){return!j(a,b)}function o(a,b){return i(a,b)>=0}function p(a,b){return i(a,b)>0}function q(a,b){return i(a,b)<=0}function r(a,b){return i(a,b)<0}function s(a,b){if(i(a,b)<=0)return a;else return b}function t(a,b){if(i(a,b)>=0)return a;else return b}f.caml_obj_block=a;f.caml_obj_dup=c;f.caml_obj_truncate=d;f.caml_lazy_make_forward=e;f.caml_update_dummy=g;f.caml_compare=i;f.caml_equal=j;f.caml_equal_null=k;f.caml_equal_undefined=l;f.caml_equal_nullable=m;f.caml_notequal=n;f.caml_greaterequal=o;f.caml_greaterthan=p;f.caml_lessthan=r;f.caml_lessequal=q;f.caml_min=s;f.caml_max=t}),null);
__d("bs_caml_string",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return String.fromCharCode(a)}function c(a,c){if(c>=a.length||c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}function d(a){if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.create"];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=0;return c}}function e(a,b,c,d){if(c>0){for(var e=b,c=(c+b|0)-1|0;e<=c;++e)a[e]=d;return 0}else return 0}function g(a,b,c,d,e){__p&&__p();if(e>0){var f=a.length-b|0;if(e<=f){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);return 0}else{for(var g=0,h=f-1|0;g<=h;++g)c[d+g|0]=a.charCodeAt(b+g|0);for(var g=f,b=e-1|0;g<=b;++g)c[d+g|0]=0;return 0}}else return 0}function h(a,b,c,d,e){__p&&__p();if(e>0)if(a===c){var f=a,g=b,h=d,i=e;if(g<h){var j=(f.length-h|0)-1|0,k=i-1|0;k=j>k?k:j;for(var j=k;j>=0;--j)f[h+j|0]=f[g+j|0];return 0}else if(g>h){k=(f.length-g|0)-1|0;j=i-1|0;i=k>j?j:k;for(var j=0;j<=i;++j)f[h+j|0]=f[g+j|0];return 0}else return 0}else{k=a.length-b|0;if(e<=k){for(var g=0,h=e-1|0;g<=h;++g)c[d+g|0]=a[b+g|0];return 0}else{for(var j=0,i=k-1|0;j<=i;++j)c[d+j|0]=a[b+j|0];for(var f=k,g=e-1|0;f<=g;++f)c[d+f|0]=0;return 0}}else return 0}function i(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a.charCodeAt(d);return c}function j(a){__p&&__p();var b=a,c=0;a=a.length;var d="",e=a;if(c===0&&a<=4096&&a===b.length)return String.fromCharCode.apply(null,b);else{c=0;while(e>0){a=e<1024?e:1024;var f=new Array(a);h(b,c,f,0,a);d=d+String.fromCharCode.apply(null,f);e=e-a|0;c=c+a|0}return d}}function k(a){var b=a.length,c=new Array(b);for(var d=0,b=b-1|0;d<=b;++d)c[d]=a[d];return j(c)}function l(a){if(a>31)return a<127;else return!1}function m(a,b){return a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0}function n(a,b){return((a.charCodeAt(b)+(a.charCodeAt(b+1|0)<<8)|0)+(a.charCodeAt(b+2|0)<<16)|0)+(a.charCodeAt(b+3|0)<<24)|0}function o(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a.charCodeAt(c)}f.bytes_of_string=i;f.bytes_to_string=j;f.caml_is_printable=l;f.caml_string_of_char_array=k;f.caml_string_get=c;f.caml_create_string=d;f.caml_fill_string=e;f.caml_blit_string=g;f.caml_blit_bytes=h;f.caml_string_get16=m;f.caml_string_get32=n;f.string_of_char=a;f.get=o}),null);
__d("bs_char",["bs_caml_string","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Char.chr"];else return a}function c(a){__p&&__p();var c=0;if(a>=40)if(a!==92)c=a>=127?1:2;else return"\\\\";else if(a>=32)if(a>=39)return"\\'";else c=2;else if(a>=14)c=1;else switch(a){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:c=1;break;case 13:return"\\r"}switch(c){case 1:c=b("bs_caml_string").caml_create_string(4);c[0]=92;c[1]=48+(a/100|0)|0;c[2]=48+(a/10|0)%10|0;c[3]=48+a%10|0;return b("bs_caml_string").bytes_to_string(c);case 2:c=b("bs_caml_string").caml_create_string(1);c[0]=a;return b("bs_caml_string").bytes_to_string(c)}}function d(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function e(a){if(a>=97&&a<=122||a>=224&&a<=246||a>=248&&a<=254)return a-32|0;else return a}function g(a,b){return a-b|0}f.chr=a;f.escaped=c;f.lowercase=d;f.uppercase=e;f.compare=g}),null);
__d("bs_caml_utils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=String.prototype.repeat&&function(a,b){return b.repeat(a)}||function(a,b){__p&&__p();if(b.length==0||a==0)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");var c="";for(;;){(a&1)==1&&(c+=b);a>>>=1;if(a==0)break;b+=b}return c};f.repeat=a}),null);
__d("bs_caml_int64",["bs_caml_int32","bs_caml_utils","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[-2147483648,0],h=[2147483647,1],i=[0,1],j=[0,0],k=[-1,4294967295];function l(a){return(a&2147483648)!==0}function m(a,b){var c=b[1],d=a[1],e=d+c&4294967295;d=l(d)&&(l(c)||!l(e))||l(c)&&!l(e)?1:0;c=a[0]+b[0]+d&4294967295;return[c,e>>>0]}function n(a){var b=a[0]^-1;a=a[1]^-1;return[b,a>>>0]}function o(a,b){if(a[0]===b[0])return a[1]===b[1];else return!1}function a(a,b){if(b!==null)return o(a,b);else return!1}function c(a,b){if(b!==void 0)return o(a,b);else return!1}function d(a,b){if(b==null)return!1;else return o(a,b)}function p(a){if(o(a,g))return g;else return m(n(a),i)}function e(a,b){return m(a,p(b))}function q(a,b){if(b===0)return a;else{var c=a[1];if(b>=32)return[c<<(b-32|0),0];else{a=c>>>(32-b|0)|a[0]<<b;return[a,c<<b>>>0]}}}function r(a,b){__p&&__p();if(b===0)return a;else{var c=a[0],d=b-32|0;if(d===0)return[0,c>>>0];else if(d>0){var e=c>>>d;return[0,e>>>0]}else{e=c>>>b;c=c<<(-d|0)|a[1]>>>b;return[e,c>>>0]}}}function s(a,b){__p&&__p();if(b===0)return a;else{var c=a[0];if(b<32){var d=c>>b;a=c<<(32-b|0)|a[1]>>>b;return[d,a>>>0]}else{d=c>>(b-32|0);return[c>=0?0:-1,d>>>0]}}}function t(a){if(a[0]!==0||a[1]!==0)return!1;else return!0}function u(a,b){__p&&__p();while(!0){var c=b,d=a,e=0,f,h=d[0],i=0,k=0,l;if(h!==0||d[1]!==0)l=4;else return j;if(l===4)if(c[0]!==0||c[1]!==0)k=3;else return j;k===3&&(h!==-2147483648||d[1]!==0?i=2:(f=c[1],e=1));if(i===2){l=c[0];k=d[1];i=0;l!==-2147483648||c[1]!==0?i=3:(f=k,e=1);if(i===3){i=c[1];if(h<0)if(l<0){b=p(c);a=p(d);continue}else return p(u(p(d),c));else if(l<0)return p(u(d,p(c)));else{d=h>>>16;c=h&65535;h=k>>>16;k=k&65535;var m=l>>>16;l=l&65535;var n=i>>>16;i=i&65535;var o,q,r,s=k*i;r=(s>>>16)+h*i;q=r>>>16;r=(r&65535)+k*n;q=q+(r>>>16)+c*i;o=q>>>16;q=(q&65535)+h*n;o+=q>>>16;q=(q&65535)+k*l;o+=q>>>16;q=q&65535;o=o+(d*i+c*n+h*l+k*m)&65535;d=q|o<<16;i=s&65535|(r&65535)<<16;return[d,i>>>0]}}}if(e===1)if((f&1)===0)return j;else return g}}function v(a){var c=b("bs_caml_int32").caml_int32_bswap(a[1]);a=b("bs_caml_int32").caml_int32_bswap(a[0]);return[c,a>>>0]}function w(a,b){return[a[0]^b[0],(a[1]^b[1])>>>0]}function x(a,b){return[a[0]|b[0],(a[1]|b[1])>>>0]}function y(a,b){return[a[0]&b[0],(a[1]&b[1])>>>0]}function z(a,b){var c=b[0],d=a[0];if(d>c)return!0;else if(d<c)return!1;else return a[1]>=b[1]}function A(a,b){return!o(a,b)}function B(a,b){return!z(a,b)}function C(a,b){if(a[0]>b[0])return!0;else if(a[0]<b[0])return!1;else return a[1]>b[1]}function D(a,b){return!C(a,b)}function E(a,b){if(z(a,b))return b;else return a}function F(a,b){if(C(a,b))return a;else return b}function G(a){return a[0]*4294967296+a[1]}var H=Math.pow(2,32),I=Math.pow(2,63),J=-Math.pow(2,63);function K(a){__p&&__p();if(isNaN(a)||!isFinite(a))return j;else if(a<=J)return g;else if(a+1>=I)return h;else if(a<0)return p(K(-a));else{var b=a/H|0;a=a%H|0;return[b,a>>>0]}}function L(a,c){__p&&__p();while(!0){var d=c,e=a,f=e[0],h=0,l;if(d[0]!==0||d[1]!==0)l=2;else throw b("bs_caml_builtin_exceptions").division_by_zero;if(l===2)if(f!==-2147483648)if(f!==0||e[1]!==0)h=1;else return j;else if(e[1]!==0)h=1;else if(o(d,i)||o(d,k))return e;else if(o(d,g))return i;else{l=d[0];var n=s(e,1);n=q(L(n,d),1);var r;if(n[0]!==0||n[1]!==0)r=3;else if(l<0)return i;else return p(i);if(r===3){l=u(d,n);r=m(e,p(l));return m(n,L(r,d))}}if(h===1){l=d[0];if(l!==-2147483648||d[1]!==0)n=2;else return j;if(n===2)if(f<0)if(l<0){c=p(d);a=p(e);continue}else return p(L(p(e),d));else if(l<0)return p(L(e,p(d)));else{r=j;h=e;while(z(h,d)){n=b("bs_caml_primitive").caml_float_max(1,Math.floor(G(h)/G(d)));f=Math.ceil(Math.log(n)/Math.LN2);l=f<=48?1:Math.pow(2,f-48);e=K(n);f=u(e,d);while(f[0]<0||C(f,h))n-=l,e=K(n),f=u(e,d);t(e)&&(e=i);r=m(r,e);h=m(h,p(f))}return r}}}}function M(a,b){b=u(L(a,b),b);return m(a,p(b))}function N(a,b){var c=L(a,b);b=u(c,b);return[c,m(a,p(b))]}function O(a,c){var d=b("bs_caml_primitive").caml_nativeint_compare(a[0],c[0]);if(d===0)return b("bs_caml_primitive").caml_nativeint_compare(a[1],c[1]);else return d}function P(a){return[a<0?-1:0,a>>>0]}function Q(a){return a[1]|0}function R(a){__p&&__p();var c=function(a){return(a>>>0).toString(16)},d=a[0],e=a[1],f;if(d!==0||e!==0)f=1;else return"0";if(f===1)if(e!==0)if(d!==0){f=c(a[1]);e=8-f.length|0;if(e<=0)return c(a[0])+f;else return c(a[0])+(b("bs_caml_utils").repeat(e,"0")+f)}else return c(a[1]);else return c(a[0])+"00000000"}function S(a){return[2147483647&a[0],a[1]]}function T(a){a=new Int32Array([a[1],a[0]]);return new Float64Array(a.buffer)[0]}function U(a){a=new Float64Array([a]);a=new Int32Array(a.buffer);var b=a[1];b=b;a=a[0];a=a;return[b,a>>>0]}function V(a,b){var c=a.charCodeAt(b+4|0)<<32|a.charCodeAt(b+5|0)<<40|a.charCodeAt(b+6|0)<<48|a.charCodeAt(b+7|0)<<56;a=a.charCodeAt(b)|a.charCodeAt(b+1|0)<<8|a.charCodeAt(b+2|0)<<16|a.charCodeAt(b+3|0)<<24;return[c,a>>>0]}f.min_int=g;f.max_int=h;f.one=i;f.zero=j;f.not=n;f.of_int32=P;f.to_int32=Q;f.add=m;f.neg=p;f.sub=e;f.lsl_=q;f.lsr_=r;f.asr_=s;f.is_zero=t;f.mul=u;f.xor=w;f.or_=x;f.and_=y;f.swap=v;f.ge=z;f.eq=o;f.neq=A;f.lt=B;f.gt=C;f.le=D;f.equal_null=a;f.equal_undefined=c;f.equal_nullable=d;f.min=E;f.max=F;f.to_float=G;f.of_float=K;f.div=L;f.mod_=M;f.div_mod=N;f.compare=O;f.to_hex=R;f.discard_sign=S;f.float_of_bits=T;f.bits_of_float=U;f.get64=V}),null);
__d("bs_caml_format",["bs_curry","bs_caml_int32","bs_caml_int64","bs_caml_utils","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function h(a){__p&&__p();if(a>=65)if(a>=97)if(a>=123)return-1;else return a-87|0;else if(a>=91)return-1;else return a-55|0;else if(a>57||a<48)return-1;else return a-48|0}function i(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function j(a){var b=1,c=2,d=0;a[d]==="-"&&(b=-1,d=d+1|0);var e=a.charCodeAt(d);a=a.charCodeAt(d+1|0);e===48&&(a>=89?a!==98?a!==111?a===120&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0):a!==66?a!==79?a>=88&&(c=1,d=d+2|0):(c=0,d=d+2|0):(c=3,d=d+2|0));return[d,b,c]}function a(a){__p&&__p();var c=j(a),d=c[0],e=i(c[2]),f=4294967295,g=a.length,k=d<g?a.charCodeAt(d):0;k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];var l=function(c,d){__p&&__p();while(!0){var i=d,j=c;if(i===g)return j;else{var k=a.charCodeAt(i);if(k===95){d=i+1|0;continue}else{k=h(k);if(k<0||k>=e)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{j=e*j+k;if(j>f)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];else{d=i+1|0;c=j;continue}}}}}};c=c[1]*l(k,d+1|0);l=c|0;if(e===10&&c!==l)throw[b("bs_caml_builtin_exceptions").failure,"int_of_string"];return l}function c(a){__p&&__p();var c=j(a),d=c[2],e=c[0],f=b("bs_caml_int64").of_int32(i(d));c=b("bs_caml_int64").of_int32(c[1]);var g;switch(d){case 0:g=[536870911,4294967295];break;case 1:g=[268435455,4294967295];break;case 2:g=[429496729,2576980377];break;case 3:g=[2147483647,4294967295];break}var k=a.length;d=e<k?a.charCodeAt(e):0;d=b("bs_caml_int64").of_int32(h(d));if(b("bs_caml_int64").lt(d,[0,0])||b("bs_caml_int64").ge(d,f))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];var l=function(c,d){__p&&__p();while(!0){var e=d,i=c;if(e===k)return i;else{var j=a.charCodeAt(e);if(j===95){d=e+1|0;continue}else{j=b("bs_caml_int64").of_int32(h(j));if(b("bs_caml_int64").lt(j,[0,0])||b("bs_caml_int64").ge(j,f)||b("bs_caml_int64").gt(i,g))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];else{i=b("bs_caml_int64").add(b("bs_caml_int64").mul(f,i),j);d=e+1|0;c=i;continue}}}}};c=b("bs_caml_int64").mul(c,l(d,e+1|0));l=b("bs_caml_int64").or_(c,[0,0]);if(b("bs_caml_int64").eq(f,[0,10])&&b("bs_caml_int64").neq(c,l))throw[b("bs_caml_builtin_exceptions").failure,"int64_of_string"];return l}function k(a){switch(a){case 0:return 8;case 1:return 16;case 2:return 10}}function l(a){if(a>=65&&a<=90||a>=192&&a<=214||a>=216&&a<=222)return a+32|0;else return a}function m(a){__p&&__p();var c=a.length;if(c>31)throw[b("bs_caml_builtin_exceptions").invalid_argument,"format_int: format too long"];var d=["+","-"," ",!1,2,!1,0,!1,1,-1,"f"],e=0;while(!0){var f=e;if(f>=c)return d;else{var g=a.charCodeAt(f),h=0;if(g>=69)if(g>=88)if(g>=121)h=1;else switch(g-88|0){case 0:d[4]=1;d[7]=!0;e=f+1|0;continue;case 13:case 14:case 15:h=5;break;case 12:case 17:h=4;break;case 23:d[4]=0;e=f+1|0;continue;case 29:d[4]=2;e=f+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:h=1;break;case 32:d[4]=1;e=f+1|0;continue}else if(g>=72)h=1;else{d[5]=!0;d[7]=!0;d[10]=String.fromCharCode(l(g));e=f+1|0;continue}else{var i=g-32|0;if(i>25||i<0)h=1;else switch(i){case 3:d[3]=!0;e=f+1|0;continue;case 0:case 11:h=2;break;case 13:d[0]="-";e=f+1|0;continue;case 14:d[9]=0;i=f+1|0;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[9]=(b("bs_caml_int32").imul(d[9],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:h=1;break;case 16:d[2]="0";e=f+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:h=3;break}}switch(h){case 1:e=f+1|0;continue;case 2:d[1]=String.fromCharCode(g);e=f+1|0;continue;case 3:d[6]=0;i=f;while(function(b){return function(){var c=a.charCodeAt(b)-48|0;return c>=0&&c<=9}}(i)())d[6]=(b("bs_caml_int32").imul(d[6],10)+a.charCodeAt(i)|0)-48|0,i=i+1|0;e=i;continue;case 4:d[5]=!0;d[4]=2;e=f+1|0;continue;case 5:d[5]=!0;d[10]=String.fromCharCode(g);e=f+1|0;continue}}}}function n(a,b){__p&&__p();var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7];a=a[8];var k=b.length;h&&(a<0||d!=="-")&&(k=k+1|0);f&&(g===0?k=k+1|0:g===1&&(k=k+2|0));var l="";if(c==="+"&&e===" ")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;h&&(a<0?l=l+"-":d!=="-"&&(l=l+d));f&&g===0&&(l=l+"0");f&&g===1&&(l=l+"0x");if(c==="+"&&e==="0")for(var m=k,n=i-1|0;m<=n;++m)l=l+e;l=j?l+b.toUpperCase():l+b;if(c==="-")for(var h=k,a=i-1|0;h<=a;++h)l=l+" ";return l}function d(a,c){__p&&__p();if(a==="%d")return String(c);else{a=m(a);a=a;c=c;c=c<0?a[5]?(a[8]=-1,-c):c>>>0:c;c=c.toString(k(a[4]));if(a[9]>=0){a[2]=" ";var d=a[9]-c.length|0;d>0&&(c=b("bs_caml_utils").repeat(d,"0")+c)}return n(a,c)}}function e(a,c){__p&&__p();a=m(a);c=a[5]&&b("bs_caml_int64").lt(c,[0,0])?(a[8]=-1,b("bs_caml_int64").neg(c)):c;var d="",e=a[4];switch(e){case 0:e=[0,8];var f="01234567";if(b("bs_caml_int64").lt(c,[0,0])){var g=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(g,e);var h=b("bs_caml_int64").add([268435456,0],g[0]);g=g[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(h,[0,0])){var i=b("bs_caml_int64").div_mod(h,e);h=i[0];g=i[1];d=String.fromCharCode(f.charCodeAt(g[1]|0))+d}}else{i=b("bs_caml_int64").div_mod(c,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){i=b("bs_caml_int64").div_mod(g,e);g=i[0];h=i[1];d=String.fromCharCode(f.charCodeAt(h[1]|0))+d}}break;case 1:d=b("bs_caml_int64").to_hex(c)+d;break;case 2:i=[0,10];h="0123456789";if(b("bs_caml_int64").lt(c,[0,0])){f=b("bs_caml_int64").discard_sign(c);g=b("bs_caml_int64").div_mod(f,i);e=b("bs_caml_int64").div_mod(b("bs_caml_int64").add([0,8],g[1]),i);f=b("bs_caml_int64").add(b("bs_caml_int64").add([214748364,3435973836],g[0]),e[0]);g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d;while(b("bs_caml_int64").neq(f,[0,0])){e=b("bs_caml_int64").div_mod(f,i);f=e[0];g=e[1];d=String.fromCharCode(h.charCodeAt(g[1]|0))+d}}else{e=b("bs_caml_int64").div_mod(c,i);g=e[0];f=e[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d;while(b("bs_caml_int64").neq(g,[0,0])){c=b("bs_caml_int64").div_mod(g,i);g=c[0];f=c[1];d=String.fromCharCode(h.charCodeAt(f[1]|0))+d}}break}if(a[9]>=0){a[2]=" ";e=a[9]-d.length|0;e>0&&(d=b("bs_caml_utils").repeat(e,"0")+d)}return n(a,d)}function o(a,b){__p&&__p();a=m(a);var c=a[9]<0?6:a[9],d=b<0?(a[8]=-1,-b):b;b="";if(isNaN(d))b="nan",a[2]=" ";else if(isFinite(d)){var e=a[10];switch(e){case"e":b=d.toExponential(c);e=b.length;b[e-3|0]==="e"&&(b=b.slice(0,e-1|0)+("0"+b.slice(e-1|0)));break;case"f":b=d.toFixed(c);break;case"g":var f=c!==0?c:1;b=d.toExponential(f-1|0);e=b.indexOf("e");c=Number(b.slice(e+1|0))|0;if(c<-4||d>=1e21||d.toFixed().length>f){var g=e-1|0;while(b[g]==="0")g=g-1|0;b[g]==="."&&(g=g-1|0);b=b.slice(0,g+1|0)+b.slice(e);g=b.length;b[g-3|0]==="e"&&(b=b.slice(0,g-1|0)+("0"+b.slice(g-1|0)))}else{var h=f;if(c<0)h=h-(c+1|0)|0,b=d.toFixed(h);else while(function(){b=d.toFixed(h);return b.length>(f+1|0)}())h=h-1|0;if(h!==0){e=b.length-1|0;while(b[e]==="0")e=e-1|0;b[e]==="."&&(e=e-1|0);b=b.slice(0,e+1|0)}}break;default:}}else b="inf",a[2]=" ";return n(a,b)}var p=function(b,a){__p&&__p();var c=+b;if(b.length>0&&c===c)return c;b=b.replace(/_/g,"");c=+b;if(b.length>0&&c===c||/^[+-]?nan$/i.test(b))return c;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(b)){var d=b.indexOf("p");d=d==-1?b.indexOf("P"):d;var e=+b.substring(d+1);c=+b.substring(0,d);return c*Math.pow(2,e)}if(/^\+?inf(inity)?$/i.test(b))return Infinity;if(/^-inf(inity)?$/i.test(b))return-Infinity;a("float_of_string")};function q(a){return b("bs_curry")._2(p,a,g)}var r=d,s=d,t=a,u=a;f.caml_format_float=o;f.caml_format_int=d;f.caml_nativeint_format=r;f.caml_int32_format=s;f.caml_float_of_string=q;f.caml_int64_format=e;f.caml_int_of_string=a;f.caml_int32_of_string=t;f.caml_int64_of_string=c;f.caml_nativeint_of_string=u}),null);
__d("bs_caml_io",["bs_curry","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){return a+b}var g=["",function(a,b){a=b.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write)return process.stdout.write(b);else if(b[a]==="\n")return 0;else return 0}],h=["",function(a,b){a=b.length-1|0;if(b[a]==="\n")return 0;else return 0}];function c(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_in not implemented"]}function d(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_open_descriptor_out not implemented"]}function i(a){if(a[0]!==""){b("bs_curry")._2(a[1],a,a[0]);a[0]="";return 0}else return 0}var j=function(a){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(a),!0)};function k(a,b,c,d){__p&&__p();b=c===0&&d===b.length?b:b.slice(c,d);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&a===g)return process.stdout.write(b);else{c=b.lastIndexOf("\n");if(c<0){a[0]=a[0]+b;return 0}else{a[0]=a[0]+b.slice(0,c+1|0);i(a);a[0]=a[0]+b.slice(c+1|0);return 0}}}function e(a,b){return k(a,String.fromCharCode(b),0,1)}function l(a,c,d,e){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input ic not implemented"]}function m(){throw[b("bs_caml_builtin_exceptions").failure,"caml_ml_input_char not implemnted"]}function n(){return[g,[h,0]]}var o=void 0;f.$caret=a;f.stdin=o;f.stdout=g;f.stderr=h;f.caml_ml_open_descriptor_in=c;f.caml_ml_open_descriptor_out=d;f.caml_ml_flush=i;f.node_std_output=j;f.caml_ml_output=k;f.caml_ml_output_char=e;f.caml_ml_input=l;f.caml_ml_input_char=m;f.caml_ml_out_channels_list=n}),null);
__d("bs_caml_missing_polyfill",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a+" not implemented by BuckleScript yet\n";throw new Error(a)}f.not_implemented=a}),null);
__d("bs_caml_sys",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=typeof process==="undefined"?void 0:process;if(c!==void 0){c=c.env[a];if(c!==void 0)return c;else throw b("bs_caml_builtin_exceptions").not_found}else throw b("bs_caml_builtin_exceptions").not_found}function c(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)return a.uptime();else return-1}function d(){return[((Date.now()|0)^4294967295)*Math.random()|0]}function e(){return 127}function g(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)return a.cwd();else return"/"}function h(){var a=typeof process==="undefined"?void 0:process;if(a!==void 0)if(a.argv==null)return["",[""]];else return[a.argv[0],a.argv];else return["",[""]]}function i(a){var b=typeof process==="undefined"?void 0:process;if(b!==void 0)return b.exit(a);else return 0}function j(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_is_directory not implemented"]}function k(){throw[b("bs_caml_builtin_exceptions").failure,"caml_sys_file_exists not implemented"]}f.caml_sys_getenv=a;f.caml_sys_time=c;f.caml_sys_random_seed=d;f.caml_sys_system_command=e;f.caml_sys_getcwd=g;f.caml_sys_get_argv=h;f.caml_sys_exit=i;f.caml_sys_is_directory=j;f.caml_sys_file_exists=k}),null);
__d("bs_camlinternalFormatBasics",["bs_block"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(typeof a==="number")return 0;else switch(a.tag|0){case 0:return b("bs_block").__(0,[g(a[0])]);case 1:return b("bs_block").__(1,[g(a[0])]);case 2:return b("bs_block").__(2,[g(a[0])]);case 3:return b("bs_block").__(3,[g(a[0])]);case 4:return b("bs_block").__(4,[g(a[0])]);case 5:return b("bs_block").__(5,[g(a[0])]);case 6:return b("bs_block").__(6,[g(a[0])]);case 7:return b("bs_block").__(7,[g(a[0])]);case 8:return b("bs_block").__(8,[a[0],g(a[1])]);case 9:var c=a[0];return b("bs_block").__(9,[c,c,g(a[2])]);case 10:return b("bs_block").__(10,[g(a[0])]);case 11:return b("bs_block").__(11,[g(a[0])]);case 12:return b("bs_block").__(12,[g(a[0])]);case 13:return b("bs_block").__(13,[g(a[0])]);case 14:return b("bs_block").__(14,[g(a[0])])}}function h(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[h(a[0],c)]);case 1:return b("bs_block").__(1,[h(a[0],c)]);case 2:return b("bs_block").__(2,[h(a[0],c)]);case 3:return b("bs_block").__(3,[h(a[0],c)]);case 4:return b("bs_block").__(4,[h(a[0],c)]);case 5:return b("bs_block").__(5,[h(a[0],c)]);case 6:return b("bs_block").__(6,[h(a[0],c)]);case 7:return b("bs_block").__(7,[h(a[0],c)]);case 8:return b("bs_block").__(8,[a[0],h(a[1],c)]);case 9:return b("bs_block").__(9,[a[0],a[1],h(a[2],c)]);case 10:return b("bs_block").__(10,[h(a[0],c)]);case 11:return b("bs_block").__(11,[h(a[0],c)]);case 12:return b("bs_block").__(12,[h(a[0],c)]);case 13:return b("bs_block").__(13,[h(a[0],c)]);case 14:return b("bs_block").__(14,[h(a[0],c)])}}function i(a,c){__p&&__p();if(typeof a==="number")return c;else switch(a.tag|0){case 0:return b("bs_block").__(0,[i(a[0],c)]);case 1:return b("bs_block").__(1,[i(a[0],c)]);case 2:return b("bs_block").__(2,[a[0],i(a[1],c)]);case 3:return b("bs_block").__(3,[a[0],i(a[1],c)]);case 4:return b("bs_block").__(4,[a[0],a[1],a[2],i(a[3],c)]);case 5:return b("bs_block").__(5,[a[0],a[1],a[2],i(a[3],c)]);case 6:return b("bs_block").__(6,[a[0],a[1],a[2],i(a[3],c)]);case 7:return b("bs_block").__(7,[a[0],a[1],a[2],i(a[3],c)]);case 8:return b("bs_block").__(8,[a[0],a[1],a[2],i(a[3],c)]);case 9:return b("bs_block").__(9,[i(a[0],c)]);case 10:return b("bs_block").__(10,[i(a[0],c)]);case 11:return b("bs_block").__(11,[a[0],i(a[1],c)]);case 12:return b("bs_block").__(12,[a[0],i(a[1],c)]);case 13:return b("bs_block").__(13,[a[0],a[1],i(a[2],c)]);case 14:return b("bs_block").__(14,[a[0],a[1],i(a[2],c)]);case 15:return b("bs_block").__(15,[i(a[0],c)]);case 16:return b("bs_block").__(16,[i(a[0],c)]);case 17:return b("bs_block").__(17,[a[0],i(a[1],c)]);case 18:return b("bs_block").__(18,[a[0],i(a[1],c)]);case 19:return b("bs_block").__(19,[i(a[0],c)]);case 20:return b("bs_block").__(20,[a[0],a[1],i(a[2],c)]);case 21:return b("bs_block").__(21,[a[0],i(a[1],c)]);case 22:return b("bs_block").__(22,[i(a[0],c)]);case 23:return b("bs_block").__(23,[a[0],i(a[1],c)]);case 24:return b("bs_block").__(24,[a[0],a[1],i(a[2],c)])}}f.concat_fmtty=h;f.erase_rel=g;f.concat_fmt=i}),null);
__d("bs_pervasives",["bs_curry","bs_caml_io","bs_caml_sys","bs_caml_format","bs_caml_string","bs_caml_exceptions","bs_caml_missing_polyfill","bs_caml_builtin_exceptions","bs_camlinternalFormatBasics"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){throw[b("bs_caml_builtin_exceptions").failure,a]}function c(a){throw[b("bs_caml_builtin_exceptions").invalid_argument,a]}var g=b("bs_caml_exceptions").create("Pervasives.Exit");function d(a){if(a>=0)return a;else return-a|0}function e(a){return a^-1}var h=-2147483648;function i(a){if(a<0||a>255)throw[b("bs_caml_builtin_exceptions").invalid_argument,"char_of_int"];else return a}function j(a){if(a)return"true";else return"false"}function k(a){switch(a){case"false":return!1;case"true":return!0;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"bool_of_string"]}}function l(a){__p&&__p();var c=a.length,d=0;while(!0){var e=d;if(e>=c)return a+".";else{var f=b("bs_caml_string").get(a,e);if(f>=48)if(f>=58)return a;else{d=e+1|0;continue}else if(f!==45)return a;else{d=e+1|0;continue}}}}function m(a){return l(b("bs_caml_format").caml_format_float("%.12g",a))}function n(a,b){if(a)return[a[0],n(a[1],b)];else return b}var o=b("bs_caml_io").stdin,p=b("bs_caml_io").stdout,q=b("bs_caml_io").stderr;function r(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_out(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function s(a){return r([1,[3,[4,[7,0]]]],438,a)}function t(a){return r([1,[3,[4,[6,0]]]],438,a)}function u(){__p&&__p();var a=b("bs_caml_io").caml_ml_out_channels_list(0);while(!0){var c=a;if(c){try{b("bs_caml_io").caml_ml_flush(c[0])}catch(a){}a=c[1];continue}else return 0}}function v(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function w(a,c){return b("bs_caml_io").caml_ml_output(a,c,0,c.length)}function x(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function y(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"output_substring"];else return b("bs_caml_io").caml_ml_output(a,c,d,e)}function z(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_output_value")}function A(a){b("bs_caml_io").caml_ml_flush(a);return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function B(a){try{b("bs_caml_io").caml_ml_flush(a)}catch(a){}try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function C(a,c,d){return b("bs_caml_io").caml_ml_open_descriptor_in(b("bs_caml_missing_polyfill").not_implemented("caml_sys_open"))}function D(a){return C([0,[7,0]],0,a)}function E(a){return C([0,[6,0]],0,a)}function F(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"input"];else return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input")}function G(a,c,d,e){__p&&__p();while(!0){a=e;c=d;if(a<=0)return 0;else{var f=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");if(f===0)throw b("bs_caml_builtin_exceptions").end_of_file;else{e=a-f|0;d=c+f|0;continue}}}}function H(a,c,d,e){if(d<0||e<0||d>(c.length-e|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"really_input"];else return G(a,c,d,e)}function I(a,c){var d=b("bs_caml_string").caml_create_string(c);H(a,d,0,c);return b("bs_caml_string").bytes_to_string(d)}function J(a){__p&&__p();var c=function(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(e){var g=e[0],h=g.length;b("bs_caml_string").caml_blit_bytes(g,0,a,f-h|0,h);d=e[1];c=f-h|0;continue}else return a}},d=function(d,e){__p&&__p();while(!0){var f=e,g=d,h=b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_scan_line");if(h===0)if(g)return c(b("bs_caml_string").caml_create_string(f),f,g);else throw b("bs_caml_builtin_exceptions").end_of_file;else if(h>0){var i=b("bs_caml_string").caml_create_string(h-1|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");b("bs_caml_io").caml_ml_input_char(a);if(g){var j=(f+h|0)-1|0;return c(b("bs_caml_string").caml_create_string(j),j,[i,g])}else return i}else{j=b("bs_caml_string").caml_create_string(-h|0);b("bs_caml_missing_polyfill").not_implemented("caml_ml_input");e=f-h|0;d=[j,g];continue}}};return b("bs_caml_string").bytes_to_string(d(0,0))}function K(){try{return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}catch(a){return 0}}function L(a){return b("bs_caml_io").caml_ml_output_char(p,a)}function M(a){return w(p,a)}function N(a){return v(p,a)}function O(a){return w(p,String(a))}function P(a){return w(p,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function Q(){b("bs_caml_io").caml_ml_output_char(p,10);return b("bs_caml_io").caml_ml_flush(p)}function R(a){return b("bs_caml_io").caml_ml_output_char(q,a)}function S(a){return w(q,a)}function T(a){return v(q,a)}function U(a){return w(q,String(a))}function V(a){return w(q,l(b("bs_caml_format").caml_format_float("%.12g",a)))}function W(){b("bs_caml_io").caml_ml_output_char(q,10);return b("bs_caml_io").caml_ml_flush(q)}function X(){b("bs_caml_io").caml_ml_flush(p);return J(o)}function aa(){return b("bs_caml_format").caml_int_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ba(){return b("bs_caml_format").caml_float_of_string((b("bs_caml_io").caml_ml_flush(p),J(o)))}function ca(a){return a[1]}function da(a,c){return[b("bs_camlinternalFormatBasics").concat_fmt(a[0],c[0]),a[1]+("%,"+c[1])]}var Y=[u];function ea(a){var c=Y[0];Y[0]=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,0)};return 0}function Z(){return b("bs_curry")._1(Y[0],0)}function fa(a){Z(0);return b("bs_caml_sys").caml_sys_exit(a)}var ga=2147483647,ha=2220446049250313e-31,ia=b("bs_caml_io").caml_ml_flush,ja=b("bs_caml_io").caml_ml_output_char,ka=b("bs_caml_io").caml_ml_output_char;function la(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_output_int")}function ma(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out")}function na(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out")}function oa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function pa(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}var qa=b("bs_caml_io").caml_ml_input_char,ra=b("bs_caml_io").caml_ml_input_char;function sa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_input_int")}function ta(){return b("bs_caml_missing_polyfill").not_implemented("caml_input_value")}function ua(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in")}function va(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in")}function wa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size")}function xa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_close_channel")}function ya(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_set_binary_mode")}function $(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_out_64")}function za(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_out_64")}function Aa(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}function Ba(a,c){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_seek_in_64")}function Ca(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_pos_in_64")}function Da(){return b("bs_caml_missing_polyfill").not_implemented("caml_ml_channel_size_64")}$=[$,za,Aa,Ba,Ca,Da];f.invalid_arg=c;f.failwith=a;f.Exit=g;f.abs=d;f.max_int=ga;f.min_int=h;f.lnot=e;f.epsilon_float=ha;f.char_of_int=i;f.string_of_bool=j;f.bool_of_string=k;f.string_of_float=m;f.$at=n;f.stdin=o;f.stdout=p;f.stderr=q;f.print_char=L;f.print_string=M;f.print_bytes=N;f.print_int=O;f.print_float=P;f.print_newline=Q;f.prerr_char=R;f.prerr_string=S;f.prerr_bytes=T;f.prerr_int=U;f.prerr_float=V;f.prerr_newline=W;f.read_line=X;f.read_int=aa;f.read_float=ba;f.open_out=s;f.open_out_bin=t;f.open_out_gen=r;f.flush=ia;f.flush_all=u;f.output_char=ja;f.output_string=w;f.output_bytes=v;f.output=x;f.output_substring=y;f.output_byte=ka;f.output_binary_int=la;f.output_value=z;f.seek_out=ma;f.pos_out=na;f.out_channel_length=oa;f.close_out=A;f.close_out_noerr=B;f.set_binary_mode_out=pa;f.open_in=D;f.open_in_bin=E;f.open_in_gen=C;f.input_char=qa;f.input_line=J;f.input=F;f.really_input=H;f.really_input_string=I;f.input_byte=ra;f.input_binary_int=sa;f.input_value=ta;f.seek_in=ua;f.pos_in=va;f.in_channel_length=wa;f.close_in=xa;f.close_in_noerr=K;f.set_binary_mode_in=ya;f.LargeFile=$;f.string_of_format=ca;f.$caret$caret=da;f.exit=fa;f.at_exit=ea;f.valid_float_lexem=l;f.unsafe_really_input=G;f.do_at_exit=Z}),null);
__d("bs_list",["bs_curry","bs_caml_obj","bs_pervasives","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var b=0;a=a;while(!0){var c=a,d=b;if(c){a=c[1];b=d+1|0;continue}else return d}}function a(a){if(a)return a[0];else throw[b("bs_caml_builtin_exceptions").failure,"hd"]}function c(a){if(a)return a[1];else throw[b("bs_caml_builtin_exceptions").failure,"tl"]}function d(a,c){__p&&__p();if(c<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.nth"];else{a=a;c=c;while(!0){var d=c,e=a;if(e)if(d===0)return e[0];else{c=d-1|0;a=e[1];continue}else throw[b("bs_caml_builtin_exceptions").failure,"nth"]}}}function h(a,b){while(!0){var c=b,d=a;if(d){b=[d[0],c];a=d[1];continue}else return c}}function e(a){return h(a,0)}function i(a){if(a)return b("bs_pervasives").$at(a[0],i(a[1]));else return 0}function j(a,c){if(c){var d=b("bs_curry")._1(a,c[0]);return[d,j(a,c[1])]}else return 0}function k(a,c,d){if(d){var e=b("bs_curry")._2(c,a,d[0]);return[e,k(a+1|0,c,d[1])]}else return 0}function l(a,b){return k(0,a,b)}function m(a,c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){c=e[1];d=[b("bs_curry")._1(a,e[0]),f];continue}else return f}}function n(a,c){while(!0){var d=c;if(d){b("bs_curry")._1(a,d[0]);c=d[1];continue}else return 0}}function o(a,c){__p&&__p();var d=0;a=a;c=c;while(!0){var e=c,f=d;if(e){b("bs_curry")._2(a,f,e[0]);c=e[1];d=f+1|0;continue}else return 0}}function p(a,c,d){while(!0){var e=d,f=c;if(e){d=e[1];c=b("bs_curry")._2(a,f,e[0]);continue}else return f}}function q(a,c,d){if(c)return b("bs_curry")._2(a,c[0],q(a,c[1],d));else return d}function r(a,c,d){if(c)if(d){var e=b("bs_curry")._2(a,c[0],d[0]);return[e,r(a,c[1],d[1])]}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.map2"];else return 0}function s(a,c,d){__p&&__p();var e=0;c=c;d=d;while(!0){var f=d,g=c,h=e;if(g)if(f){d=f[1];c=g[1];e=[b("bs_curry")._2(a,g[0],f[0]),h];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.rev_map2"];else return h}}function t(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e){b("bs_curry")._2(a,f[0],e[0]);d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.iter2"];else return 0}}function u(a,c,d,e){__p&&__p();while(!0){var f=e,g=d,h=c;if(g)if(f){e=f[1];d=g[1];c=b("bs_curry")._3(a,h,g[0],f[0]);continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else if(f)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_left2"];else return h}}function v(a,c,d,e){if(c)if(d)return b("bs_curry")._3(a,c[0],d[0],v(a,c[1],d[1],e));else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else if(d)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.fold_right2"];else return e}function w(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0])){c=d[1];continue}else return!1;else return!0}}function x(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_curry")._1(a,d[0]))return!0;else{c=d[1];continue}else return!1}}function y(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0])){d=e[1];c=f[1];continue}else return!1;else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.for_all2"];else return!0}}function z(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f)if(e)if(b("bs_curry")._2(a,f[0],e[0]))return!0;else{d=e[1];c=f[1];continue}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else if(e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.exists2"];else return!1}}function A(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0],a))return!0;else{c=d[1];continue}else return!1}}function B(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0]===a)return!0;else{b=c[1];continue}else return!1}}function C(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_caml_obj").caml_equal(e[0],a))return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function D(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(e[0]===a)return e[1];else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function E(a,c){__p&&__p();while(!0){var d=c;if(d)if(b("bs_caml_obj").caml_equal(d[0][0],a))return!0;else{c=d[1];continue}else return!1}}function F(a,b){__p&&__p();while(!0){var c=b;if(c)if(c[0][0]===a)return!0;else{b=c[1];continue}else return!1}}function G(a,c){if(c){var d=c[1];c=c[0];if(b("bs_caml_obj").caml_equal(c[0],a))return d;else return[c,G(a,d)]}else return 0}function H(a,b){if(b){var c=b[1];b=b[0];if(b[0]===a)return c;else return[b,H(a,c)]}else return 0}function I(a,c){__p&&__p();while(!0){var d=c;if(d){var e=d[0];if(b("bs_curry")._1(a,e))return e;else{c=d[1];continue}}else throw b("bs_caml_builtin_exceptions").not_found}}function J(a){__p&&__p();return function(c){__p&&__p();var d=0;c=c;while(!0){var e=c,f=d;if(e){var g=e[1];e=e[0];if(b("bs_curry")._1(a,e)){c=g;d=[e,f];continue}else{c=g;continue}}else return h(f,0)}}}function K(a,c){__p&&__p();var d=0,e=0;c=c;while(!0){var f=c,g=e,i=d;if(f){var j=f[1];f=f[0];if(b("bs_curry")._1(a,f)){c=j;d=[f,i];continue}else{c=j;e=[f,g];continue}}else return[h(i,0),h(g,0)]}}function L(a){if(a){var b=a[0];a=L(a[1]);return[[b[0],a[0]],[b[1],a[1]]]}else return[0,0]}function M(a,c){if(a)if(c)return[[a[0],c[0]],M(a[1],c[1])];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else if(c)throw[b("bs_caml_builtin_exceptions").invalid_argument,"List.combine"];else return 0}function N(a,c,d){if(c)if(d){var e=d[0],f=c[0];if(b("bs_curry")._2(a,f,e)<=0)return[f,N(a,c[1],d)];else return[e,N(a,c,d[1])]}else return c;else return d}function O(a,c){__p&&__p();while(!0){var d=c,e=a;if(e===0)return d;else if(d){c=d[1];a=e-1|0;continue}else throw[b("bs_caml_builtin_exceptions").assert_failure,["list.ml",223,11]]}}function P(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0];if(b("bs_curry")._2(c,j,g)<=0)if(b("bs_curry")._2(c,g,i)<=0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)<=0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)<=0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(a){i=a[1];if(i){g=i[0];j=a[0];if(b("bs_curry")._2(c,j,g)<=0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=d>>1;g=d-i|0;j=O(i,a);f=e(i,a);d=e(g,j);i=f;a=d;g=0;while(!0){j=g;f=a;d=i;if(d)if(f){var k=f[0],l=d[0];if(b("bs_curry")._2(c,l,k)>0){g=[l,j];i=d[1];continue}else{g=[k,j];a=f[1];continue}}else return h(d,j);else return h(f,j)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0];if(b("bs_curry")._2(c,j,g)>0)if(b("bs_curry")._2(c,g,i)>0)return[j,[g,[i,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]];else if(b("bs_curry")._2(c,j,i)>0)return[g,[j,[i,0]]];else if(b("bs_curry")._2(c,g,i)>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}else f=1}else f=1}else if(d){i=d[1];if(i){g=i[0];j=d[0];if(b("bs_curry")._2(c,j,g)>0)return[j,[g,0]];else return[g,[j,0]]}else f=1}else f=1;if(f===1){i=e>>1;g=e-i|0;j=O(i,d);f=a(i,d);e=a(g,j);i=f;d=e;g=0;while(!0){j=g;f=d;e=i;if(e)if(f){var k=f[0],l=e[0];if(b("bs_curry")._2(c,l,k)<=0){g=[l,j];i=e[1];continue}else{g=[k,j];d=f[1];continue}}else return h(e,j);else return h(f,j)}}},f=g(d);if(f<2)return d;else return a(f,d)}function Q(c,d){__p&&__p();var a=function(d,a){__p&&__p();var f;if(d!==2)if(d!==3||!a)f=1;else{var g=a[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=a[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l<0)return[g,[i,0]];else return[i,[g,0]]}else if(k<0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l<0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k<0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l<0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k<0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(a){l=a[1];if(l){k=l[0];i=a[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g<0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=d>>1;l=d-j|0;g=O(j,a);k=e(j,a);i=e(l,g);f=k;d=i;j=0;while(!0){a=j;l=d;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,a];d=k;f=m;continue}else if(o>0){j=[n,a];f=m;continue}else{j=[i,a];d=k;continue}}else return h(g,a);else return h(l,a)}}},e=function(e,d){__p&&__p();var f;if(e!==2)if(e!==3||!d)f=1;else{var g=d[1];if(g){var i=g[1];if(i){i=i[0];g=g[0];var j=d[0],k=b("bs_curry")._2(c,j,g);if(k===0){var l=b("bs_curry")._2(c,g,i);if(l===0)return[g,0];else if(l>0)return[g,[i,0]];else return[i,[g,0]]}else if(k>0){l=b("bs_curry")._2(c,g,i);if(l===0)return[j,[g,0]];else if(l>0)return[j,[g,[i,0]]];else{k=b("bs_curry")._2(c,j,i);if(k===0)return[j,[g,0]];else if(k>0)return[j,[i,[g,0]]];else return[i,[j,[g,0]]]}}else{l=b("bs_curry")._2(c,j,i);if(l===0)return[g,[j,0]];else if(l>0)return[g,[j,[i,0]]];else{k=b("bs_curry")._2(c,g,i);if(k===0)return[g,[j,0]];else if(k>0)return[g,[i,[j,0]]];else return[i,[g,[j,0]]]}}}else f=1}else f=1}else if(d){l=d[1];if(l){k=l[0];i=d[0];g=b("bs_curry")._2(c,i,k);if(g===0)return[i,0];else if(g>0)return[i,[k,0]];else return[k,[i,0]]}else f=1}else f=1;if(f===1){j=e>>1;l=e-j|0;g=O(j,d);k=a(j,d);i=a(l,g);f=k;e=i;j=0;while(!0){d=j;l=e;g=f;if(g)if(l){k=l[1];i=l[0];var m=g[1],n=g[0],o=b("bs_curry")._2(c,n,i);if(o===0){j=[n,d];e=k;f=m;continue}else if(o<0){j=[n,d];f=m;continue}else{j=[i,d];e=k;continue}}else return h(g,d);else return h(l,d)}}},f=g(d);if(f<2)return d;else return a(f,d)}var R=b("bs_pervasives").$at,S=i,T=J,U=P,V=P;f.length=g;f.hd=a;f.tl=c;f.nth=d;f.rev=e;f.append=R;f.rev_append=h;f.concat=S;f.flatten=i;f.iter=n;f.iteri=o;f.map=j;f.mapi=l;f.rev_map=m;f.fold_left=p;f.fold_right=q;f.iter2=t;f.map2=r;f.rev_map2=s;f.fold_left2=u;f.fold_right2=v;f.for_all=w;f.exists=x;f.for_all2=y;f.exists2=z;f.mem=A;f.memq=B;f.find=I;f.filter=T;f.find_all=J;f.partition=K;f.assoc=C;f.assq=D;f.mem_assoc=E;f.mem_assq=F;f.remove_assoc=G;f.remove_assq=H;f.split=L;f.combine=M;f.sort=U;f.stable_sort=P;f.fast_sort=V;f.sort_uniq=Q;f.merge=N}),null);
__d("bs_bytes",["bs_char","bs_list","bs_curry","bs_caml_obj","bs_caml_int32","bs_caml_string","bs_caml_primitive","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=b("bs_caml_string").caml_create_string(a);b("bs_caml_string").caml_fill_string(d,0,a,c);return d}function c(a,c){var d=b("bs_caml_string").caml_create_string(a);for(var e=0,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}var g=[];function h(a){var c=a.length,d=b("bs_caml_string").caml_create_string(c);b("bs_caml_string").caml_blit_bytes(a,0,d,0,c);return d}function d(a){return b("bs_caml_string").bytes_to_string(h(a))}function e(a){return h(b("bs_caml_string").bytes_of_string(a))}function i(a,c,d){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.sub / Bytes.sub"];else{var e=b("bs_caml_string").caml_create_string(d);b("bs_caml_string").caml_blit_bytes(a,c,e,0,d);return e}}function j(a,c,d){return b("bs_caml_string").bytes_to_string(i(a,c,d))}function k(a,c,d){d=(a.length+c|0)+d|0;var e=b("bs_caml_string").caml_create_string(d);c=c<0?[-c|0,0]:[0,c];var f=c[1];c=c[0];d=b("bs_caml_primitive").caml_int_min(a.length-c|0,d-f|0);d>0&&b("bs_caml_string").caml_blit_bytes(a,c,e,f,d);return e}function l(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.fill / Bytes.fill"];else return b("bs_caml_string").caml_fill_string(a,c,d,e)}function m(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Bytes.blit"];else return b("bs_caml_string").caml_blit_bytes(a,c,d,e,f)}function n(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.blit / Bytes.blit_string"];else return b("bs_caml_string").caml_blit_string(a,c,d,e,f)}function o(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function p(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function q(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var h=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_bytes(d,0,h,0,d.length);var i=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_bytes(a,0,h,i[0],a.length);i[0]=i[0]+a.length|0;b("bs_caml_string").caml_blit_bytes(c,0,h,i[0],c.length);i[0]=i[0]+c.length|0;return 0},c[1]);return h}else return g}function r(a,c){var d=a.length,e=c.length,f=b("bs_caml_string").caml_create_string(d+e|0);b("bs_caml_string").caml_blit_bytes(a,0,f,0,d);b("bs_caml_string").caml_blit_bytes(c,0,f,d,e);return f}function s(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function t(a){var b=a.length,c=0;while(c<b&&s(a[c]))c=c+1|0;b=b-1|0;while(b>=c&&s(a[b]))b=b-1|0;if(b>=c)return i(a,c,(b-c|0)+1|0);else return g}function u(a){__p&&__p();var c=0;for(var d=0,e=a.length-1|0;d<=e;++d){var f=a[d];if(f>=32){var g=f-34|0;g=g>58||g<0?g>=93?4:1:g>57||g<1?2:1}else g=f>=11?f!==13?4:2:f>=8?2:4;c=c+g|0}if(c===a.length)return h(a);else{f=b("bs_caml_string").caml_create_string(c);c=0;for(var g=0,d=a.length-1|0;g<=d;++g){e=a[g];var i=0;if(e>=35)e!==92?e>=127?i=1:f[c]=e:i=2;else if(e>=32)e>=34?i=2:f[c]=e;else if(e>=14)i=1;else switch(e){case 8:f[c]=92;c=c+1|0;f[c]=98;break;case 9:f[c]=92;c=c+1|0;f[c]=116;break;case 10:f[c]=92;c=c+1|0;f[c]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:i=1;break;case 13:f[c]=92;c=c+1|0;f[c]=114;break}switch(i){case 1:f[c]=92;c=c+1|0;f[c]=48+(e/100|0)|0;c=c+1|0;f[c]=48+(e/10|0)%10|0;c=c+1|0;f[c]=48+e%10|0;break;case 2:f[c]=92;c=c+1|0;f[c]=e;break}c=c+1|0}return f}}function v(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function w(a,c){var d=c.length;if(d===0)return c;else{var e=b("bs_caml_string").caml_create_string(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function x(a){return v(b("bs_char").uppercase,a)}function y(a){return v(b("bs_char").lowercase,a)}function z(a,c){if(c.length===0)return c;else{var d=h(c);d[0]=b("bs_curry")._1(a,c[0]);return d}}function A(a){return z(b("bs_char").uppercase,a)}function B(a){return z(b("bs_char").lowercase,a)}function C(a,c,d,e){__p&&__p();while(!0){var f=d;if(f>=c)throw b("bs_caml_builtin_exceptions").not_found;else if(a[f]===e)return f;else{d=f+1|0;continue}}}function D(a,b){return C(a,a.length,0,b)}function E(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.index_from / Bytes.index_from"];else return C(a,e,c,d)}function F(a,c,d){__p&&__p();while(!0){var e=c;if(e<0)throw b("bs_caml_builtin_exceptions").not_found;else if(a[e]===d)return e;else{c=e-1|0;continue}}}function G(a,b){return F(a,a.length-1|0,b)}function H(a,c,d){if(c<-1||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rindex_from / Bytes.rindex_from"];else return F(a,c,d)}function I(a,c,d){var e=a.length;if(c<0||c>e)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.contains_from / Bytes.contains_from"];else try{C(a,e,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}function J(a,b){return I(a,0,b)}function K(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"String.rcontains_from / Bytes.rcontains_from"];else try{F(a,c,d);return!0}catch(a){if(a===b("bs_caml_builtin_exceptions").not_found)return!1;else throw a}}var L=b("bs_caml_obj").caml_compare,M=b("bs_caml_string").bytes_to_string,N=b("bs_caml_string").bytes_of_string;f.make=a;f.init=c;f.empty=g;f.copy=h;f.of_string=e;f.to_string=d;f.sub=i;f.sub_string=j;f.extend=k;f.fill=l;f.blit=m;f.blit_string=n;f.concat=q;f.cat=r;f.iter=o;f.iteri=p;f.map=v;f.mapi=w;f.trim=t;f.escaped=u;f.index=D;f.rindex=G;f.index_from=E;f.rindex_from=H;f.contains=J;f.contains_from=I;f.rcontains_from=K;f.uppercase=x;f.lowercase=y;f.capitalize=A;f.uncapitalize=B;f.compare=L;f.unsafe_to_string=M;f.unsafe_of_string=N}),null);
__d("bs_string",["bs_list","bs_bytes","bs_caml_int32","bs_caml_string","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").make(a,c))}function c(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").init(a,c))}function d(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").copy(b("bs_caml_string").bytes_of_string(a)))}function e(a,c,d){return b("bs_caml_string").bytes_to_string(b("bs_bytes").sub(b("bs_caml_string").bytes_of_string(a),c,d))}function g(a,c){__p&&__p();if(c){var d=c[0],e=[0],f=[0];b("bs_list").iter(function(a){e[0]=e[0]+1|0;f[0]=f[0]+a.length|0;return 0},c);var g=b("bs_caml_string").caml_create_string(f[0]+b("bs_caml_int32").imul(a.length,e[0]-1|0)|0);b("bs_caml_string").caml_blit_string(d,0,g,0,d.length);var h=[d.length];b("bs_list").iter(function(c){b("bs_caml_string").caml_blit_string(a,0,g,h[0],a.length);h[0]=h[0]+a.length|0;b("bs_caml_string").caml_blit_string(c,0,g,h[0],c.length);h[0]=h[0]+c.length|0;return 0},c[1]);return b("bs_caml_string").bytes_to_string(g)}else return""}function h(a,c){return b("bs_bytes").iter(a,b("bs_caml_string").bytes_of_string(c))}function i(a,c){return b("bs_bytes").iteri(a,b("bs_caml_string").bytes_of_string(c))}function j(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").map(a,b("bs_caml_string").bytes_of_string(c)))}function k(a,c){return b("bs_caml_string").bytes_to_string(b("bs_bytes").mapi(a,b("bs_caml_string").bytes_of_string(c)))}function l(a){a=a-9|0;if(a>4||a<0)return a===23;else return a!==2}function m(a){if(a===""||!(l(a.charCodeAt(0))||l(a.charCodeAt(a.length-1|0))))return a;else return b("bs_caml_string").bytes_to_string(b("bs_bytes").trim(b("bs_caml_string").bytes_of_string(a)))}function n(a){__p&&__p();var c=function(b){__p&&__p();while(!0){var c=b;if(c>=a.length)return!1;else{var d=a.charCodeAt(c);if(d>=32){d=d-34|0;if(d>58||d<0)if(d>=93)return!0;else{b=c+1|0;continue}else if(d>57||d<1)return!0;else{b=c+1|0;continue}}else return!0}}};if(c(0))return b("bs_caml_string").bytes_to_string(b("bs_bytes").escaped(b("bs_caml_string").bytes_of_string(a)));else return a}function o(a,c){return b("bs_bytes").index(b("bs_caml_string").bytes_of_string(a),c)}function p(a,c){return b("bs_bytes").rindex(b("bs_caml_string").bytes_of_string(a),c)}function q(a,c,d){return b("bs_bytes").index_from(b("bs_caml_string").bytes_of_string(a),c,d)}function r(a,c,d){return b("bs_bytes").rindex_from(b("bs_caml_string").bytes_of_string(a),c,d)}function s(a,c){return b("bs_bytes").contains(b("bs_caml_string").bytes_of_string(a),c)}function t(a,c,d){return b("bs_bytes").contains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function u(a,c,d){return b("bs_bytes").rcontains_from(b("bs_caml_string").bytes_of_string(a),c,d)}function v(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uppercase(b("bs_caml_string").bytes_of_string(a)))}function w(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").lowercase(b("bs_caml_string").bytes_of_string(a)))}function x(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").capitalize(b("bs_caml_string").bytes_of_string(a)))}function y(a){return b("bs_caml_string").bytes_to_string(b("bs_bytes").uncapitalize(b("bs_caml_string").bytes_of_string(a)))}var z=b("bs_caml_primitive").caml_string_compare,A=b("bs_bytes").fill,B=b("bs_bytes").blit_string;f.make=a;f.init=c;f.copy=d;f.sub=e;f.fill=A;f.blit=B;f.concat=g;f.iter=h;f.iteri=i;f.map=j;f.mapi=k;f.trim=m;f.escaped=n;f.index=o;f.rindex=p;f.index_from=q;f.rindex_from=r;f.contains=s;f.contains_from=t;f.rcontains_from=u;f.uppercase=v;f.lowercase=w;f.capitalize=x;f.uncapitalize=y;f.compare=z}),null);
__d("FBID.bs",["invariant","bs_js_exn","bs_string","bs_belt_Id","gkx","bs_js_types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("bs_string").compare;d=b("bs_belt_Id").MakeComparable([c]);e=d[0];function h(a){if(b("gkx")("678626")){b("bs_js_types").test(a,4)||g(0,3515,a);a!=="0"||g(0,3516,a);var c=/^[0-9]+$/;c.test(a)||g(0,3517,a)}return a}function a(a){try{return h(a)}catch(c){a=b("bs_js_exn").internalToOCamlException(c);if(a[0]===b("bs_js_exn").$$Error)return void 0;else throw a}}f.cmp=e;f.compare=c;f.ofString=a;f.ofStringExn=h}),null);
__d("ImageSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});e.exports=a}),null);
__d("PhotoResizeModeConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTAIN:"s",COVER:"p"})}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","MercuryServerDispatcher","PhotoResizeModeConst"],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null},this._callback=null}a.prototype.setFBID=function(a){"use strict";this._request.fbid=a;return this};a.prototype.setType=function(a){"use strict";if(![b("ImageSourceType").PROFILE_PICTURE,b("ImageSourceType").IMAGE].includes(a))throw new TypeError("ImageSourceRequest.setType: invalid type "+a);this._request.type=a;return this};a.prototype.setDimensions=function(a,b){"use strict";this._request.width=a;this._request.height=b;return this};a.prototype.setResizeMode=function(a){"use strict";if(![b("PhotoResizeModeConst").COVER,b("PhotoResizeModeConst").CONTAIN].includes(a))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+a);this._request.resize_mode=a;return this};a.prototype.setCallback=function(a){"use strict";this._callback=a;return this};a.prototype.send=function(){"use strict";__p&&__p();if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var a=h(),c=i(this._request);a.executeOrEnqueue(c,this._callback);if(a.getUnavailableResourcesFromRequest(c).length===1){b("MercuryServerDispatcher").trySend("/ajax/image_source.php",{requests:[this._request]});return!0}return!1};var g=null;function h(){__p&&__p();if(g)return g;var a=new(b("KeyedCallbackManager"))();g=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/image_source.php":{request_user_id:b("CurrentUser").getID(),mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,batch_function:function(a,b){var c;(c=a.requests).push.apply(c,b.requests);return a},handler:function(b,c){c=c.getData().requests;for(var d=0;d<c.length;++d)a.setResource(i(c[d]),b[d])}}});return a}function i(a){return[a.fbid,a.type,a.width,a.height,a.resize_mode].join("|")}e.exports=a}),null);
__d("MercuryAssert",["MercuryIDs"],(function(a,b,c,d,e,f){__p&&__p();e.exports={isParticipantID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_participant_id "+a)},allParticipantIDs:function(a){a.forEach(this.isParticipantID)},isUserParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="fbid")throw new Error("bad_user_id "+a)},isEmailParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(c.type!="email")throw new Error("bad_email_id "+a)},allThreadID:function(a){a.forEach(this.isThreadID)},isThreadID:function(a){if(!b("MercuryIDs").isValid(a))throw new Error("bad_thread_id "+a)}}}),null);
__d("bs_js_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function h(a){__p&&__p();if(a===void 0){var b=[g,0];b.tag=256;return b}else if(a!==null&&a[0]===g){b=a[1]+1|0;b=[g,b];b.tag=256;return b}else return a}function a(a){if(a===null||a===void 0)return void 0;else return h(a)}function b(a){if(a===void 0)return void 0;else return h(a)}function c(a){if(a===null)return void 0;else return h(a)}function i(a){if(a!==null&&a[0]===g){var b=a[1];if(b===0)return void 0;else return[g,b-1|0]}else return a}function d(a){if(a===void 0)return void 0;else return i(a)}function e(a){if(a===void 0)return void 0;else return i(a)[1]}f.nullable_to_opt=a;f.undefined_to_opt=b;f.null_to_opt=c;f.valFromOption=i;f.some=h;f.option_get=d;f.option_get_unwrap=e}),null);
__d("bs_js_null_undefined",["bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a==null)return a;else return b(a)}function c(a,b){if(a==null)return 0;else return b(a)}function d(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a)}e=d;f.bind=a;f.iter=c;f.fromOption=d;f.from_opt=e}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[b("bs_string").lowercase(a)]))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(h[a]))}function d(a){a=h[a];return a!==void 0}function e(a){a=g[b("bs_string").lowercase(a)];return a!==void 0}function i(a,c){b("MercuryAssert").isParticipantID(c);a=b("bs_string").lowercase(a);g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1939519269502621"};c.getQueryID=function(){"use strict";return"428938754303512"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("DisplayGenderConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessagingThreadType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);
__d("MercuryAttachmentContentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",PDF:"attach:pdf",RICHTEXT:"attach:richtext",SPREADSHEET:"attach:spreadsheet",PRESENTATION:"attach:presentation",ARCHIVE:"attach:archive",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("MessageSharedMediaIDStore.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a,b){g[a]=b;return 0}function b(a){a=g[a];if(a!==void 0)return a;else return null}f._store=g;f.setMessageIDForAttachmentID=a;f.getMessageIDForAttachmentID=b}),null);
__d("LeadGenInfoFieldTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",STORE_LOOKUP_WITH_TYPEAHEAD:"STORE_LOOKUP_WITH_TYPEAHEAD",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF",ID_AR_DNI:"ID_AR_DNI",ID_CL_RUT:"ID_CL_RUT",ID_CO_CC:"ID_CO_CC",ID_EC_CI:"ID_EC_CI",ID_PE_DNI:"ID_PE_DNI"})}),null);
__d("MNCommerceBubbleType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,OPEN_CANCEL_RIDE_MUTATION:3,POSTBACK:4,ACCOUNT_LINK:5,MANAGE_MESSAGES:6,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,SUBSCRIPTION_PRESELECT:10,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16})}),null);
__d("P2PPaymentRequestStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INITED:1,DECLINED:2,TRANSFER_INITED:3,TRANSFER_COMPLETED:4,TRANSFER_FAILED:5,CANCELED:6,EXPIRED:7})}),null);
__d("P2PTransferStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("PaymentModulesClient",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock"})}),null);
__d("ServicesCalendarSyncType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("bs_array",["bs_curry","bs_js_exn","bs_caml_array","bs_caml_exceptions","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(a===0)return[];else if(a<0)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.init"];else{var d=b("bs_caml_array").caml_make_vect(a,b("bs_curry")._1(c,0));for(var e=1,a=a-1|0;e<=a;++e)d[e]=b("bs_curry")._1(c,e);return d}}function c(a,c,d){var e=b("bs_caml_array").caml_make_vect(a,[]);for(var f=0,a=a-1|0;f<=a;++f)e[f]=b("bs_caml_array").caml_make_vect(c,d);return e}function g(a){var c=a.length;if(c===0)return[];else return b("bs_caml_array").caml_array_sub(a,0,c)}function d(a,c){var d=a.length;if(d===0)return g(c);else if(c.length===0)return b("bs_caml_array").caml_array_sub(a,0,d);else return a.concat(c)}function e(a,c,d){if(d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.sub"];else return b("bs_caml_array").caml_array_sub(a,c,d)}function h(a,c,d,e){if(c<0||d<0||c>(a.length-d|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.fill"];else{for(var f=c,c=(c+d|0)-1|0;f<=c;++f)a[f]=e;return 0}}function i(a,c,d,e,f){if(f<0||c<0||c>(a.length-f|0)||e<0||e>(d.length-f|0))throw[b("bs_caml_builtin_exceptions").invalid_argument,"Array.blit"];else return b("bs_caml_array").caml_array_blit(a,c,d,e,f)}function j(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._1(a,c[d]);return 0}function k(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._1(a,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._1(a,c[f]);return e}}function l(a,c){for(var d=0,e=c.length-1|0;d<=e;++d)b("bs_curry")._2(a,d,c[d]);return 0}function m(a,c){var d=c.length;if(d===0)return[];else{var e=b("bs_caml_array").caml_make_vect(d,b("bs_curry")._2(a,0,c[0]));for(var f=1,d=d-1|0;f<=d;++f)e[f]=b("bs_curry")._2(a,f,c[f]);return e}}function n(a){__p&&__p();var b=a.length-1|0,c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}function o(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=d+1|0;continue}else return d}}function p(a){__p&&__p();if(a){var c=b("bs_caml_array").caml_make_vect(o(0,a),a[0]),d=1;a=a[1];while(!0){var e=a,f=d;if(e){c[f]=e[0];a=e[1];d=f+1|0;continue}else return c}}else return[]}function q(a,c,d){c=c;for(var e=0,f=d.length-1|0;e<=f;++e)c=b("bs_curry")._2(a,c,d[e]);return c}function r(a,c,d){d=d;for(var e=c.length-1|0;e>=0;--e)d=b("bs_curry")._2(a,c[e],d);return d}var s=b("bs_caml_exceptions").create("Array.Bottom");function t(a,c){__p&&__p();var d=function(d,e){__p&&__p();var f=((e+e|0)+e|0)+1|0,g=f;if((f+2|0)<d){b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0&&(g=f+1|0);b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),b("bs_caml_array").caml_array_get(c,f+2|0))<0&&(g=f+2|0);return g}else if((f+1|0)<d&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,f),b("bs_caml_array").caml_array_get(c,f+1|0))<0)return f+1|0;else if(f<d)return f;else throw[s,e]},e=function(e,f,g){__p&&__p();try{e=e;f=f;var h=g;while(!0){var i=f,j=d(e,i);if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,j),h)>0){b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,j));f=j;continue}else return b("bs_caml_array").caml_array_set(c,i,h)}}catch(a){j=b("bs_js_exn").internalToOCamlException(a);if(j[0]===s)return b("bs_caml_array").caml_array_set(c,j[1],g);else throw j}},f=function(a,e){__p&&__p();try{a=a;e=e;while(!0){var f=e,g=d(a,f);b("bs_caml_array").caml_array_set(c,f,b("bs_caml_array").caml_array_get(c,g));e=g;continue}}catch(a){f=b("bs_js_exn").internalToOCamlException(a);if(f[0]===s)return f[1];else throw f}},g=function(e,f){__p&&__p();while(!0){var d=e,g=(d-1|0)/3|0;if(d===g)throw[b("bs_caml_builtin_exceptions").assert_failure,["array.ml",173,4]];if(b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(c,g),f)<0){b("bs_caml_array").caml_array_set(c,d,b("bs_caml_array").caml_array_get(c,g));if(g>0){e=g;continue}else return b("bs_caml_array").caml_array_set(c,0,f)}else return b("bs_caml_array").caml_array_set(c,d,f)}},h=c.length;for(var i=((h+1|0)/3|0)-1|0;i>=0;--i)e(h,i,b("bs_caml_array").caml_array_get(c,i));for(var i=h-1|0;i>=2;--i){e=b("bs_caml_array").caml_array_get(c,i);b("bs_caml_array").caml_array_set(c,i,b("bs_caml_array").caml_array_get(c,0));g(f(i,0),e)}if(h>1){e=b("bs_caml_array").caml_array_get(c,1);b("bs_caml_array").caml_array_set(c,1,b("bs_caml_array").caml_array_get(c,0));return b("bs_caml_array").caml_array_set(c,0,e)}else return 0}function u(a,c){__p&&__p();var d=function(d,e,f,g,h,j,k){__p&&__p();e=d+e|0;h=g+h|0;var l=d;d=b("bs_caml_array").caml_array_get(c,d);var m=g;g=b("bs_caml_array").caml_array_get(f,g);k=k;while(!0){var n=k,o=g,p=m,q=d,r=l;if(b("bs_curry")._2(a,q,o)<=0){b("bs_caml_array").caml_array_set(j,n,q);q=r+1|0;if(q<e){k=n+1|0;d=b("bs_caml_array").caml_array_get(c,q);l=q;continue}else return i(f,p,j,n+1|0,h-p|0)}else{b("bs_caml_array").caml_array_set(j,n,o);q=p+1|0;if(q<h){k=n+1|0;g=b("bs_caml_array").caml_array_get(f,q);m=q;continue}else return i(c,r,j,n+1|0,e-r|0)}}},e=function(d,e,f,g){for(var h=0,g=g-1|0;h<=g;++h){var i=b("bs_caml_array").caml_array_get(c,d+h|0),j=(f+h|0)-1|0;while(j>=f&&b("bs_curry")._2(a,b("bs_caml_array").caml_array_get(e,j),i)>0)b("bs_caml_array").caml_array_set(e,j+1|0,b("bs_caml_array").caml_array_get(e,j)),j=j-1|0;b("bs_caml_array").caml_array_set(e,j+1|0,i)}return 0},f=function a(f,g,h,i){if(i<=5)return e(f,g,h,i);else{var b=i/2|0;i=i-b|0;a(f+b|0,g,h+b|0,i);a(f,c,f+i|0,b);return d(f+i|0,b,g,h+b|0,i,g,h)}},g=c.length;if(g<=5)return e(0,c,0,g);else{var h=g/2|0;g=g-h|0;var j=b("bs_caml_array").caml_make_vect(g,b("bs_caml_array").caml_array_get(c,0));f(h,j,0,g);f(0,c,g,h);return d(g,h,j,0,g,c,0)}}var v=c,w=b("bs_caml_array").caml_array_concat,x=u;f.init=a;f.make_matrix=c;f.create_matrix=v;f.append=d;f.concat=w;f.sub=e;f.copy=g;f.fill=h;f.blit=i;f.to_list=n;f.of_list=p;f.iter=j;f.map=k;f.iteri=l;f.mapi=m;f.fold_left=q;f.fold_right=r;f.sort=t;f.stable_sort=u;f.fast_sort=x}),null);
__d("bs_belt_Option",["bs_curry","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else throw new Error("getExn")}function g(a,c,d){if(a!==void 0)return d(b("bs_js_primitive").valFromOption(a));else return c}function c(a,c,d){return g(a,c,b("bs_curry").__1(d))}function h(a,c){if(a!==void 0)return b("bs_js_primitive").some(c(b("bs_js_primitive").valFromOption(a)))}function d(a,c){return h(a,b("bs_curry").__1(c))}function i(a,c){if(a!==void 0)return c(b("bs_js_primitive").valFromOption(a))}function e(a,c){return i(a,b("bs_curry").__1(c))}function j(a,c){if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return c}function k(a){return a!==void 0}function l(a){return a===void 0}function m(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_js_primitive").valFromOption(a),b("bs_js_primitive").valFromOption(c));else return!1;else return c===void 0}function n(a,c,d){return m(a,c,b("bs_curry").__2(d))}function o(a,c,d){if(a!==void 0)if(c!==void 0)return d(b("bs_js_primitive").valFromOption(a),b("bs_js_primitive").valFromOption(c));else return 1;else if(c!==void 0)return-1;else return 0}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}f.getExn=a;f.mapWithDefaultU=g;f.mapWithDefault=c;f.mapU=h;f.map=d;f.flatMapU=i;f.flatMap=e;f.getWithDefault=j;f.isSome=k;f.isNone=l;f.eqU=m;f.eq=n;f.cmpU=o;f.cmp=p}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","bs_string","bs_caml_array","bs_belt_Option","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("bs_array").map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}},a)}function i(a){return b("bs_array").map(function(a){var c=a.url;c=c==null?null:new(b("URI"))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}},a)}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function j(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function k(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function l(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function m(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function n(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function o(a){return{name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,uri:a.uri}}function p(a){return{url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function q(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:h(a.call_to_actions)}}function r(a){__p&&__p();var c=function(a){a=a.page_call_to_action;if(a==null)return void 0;else return a.id},d=function(a){a=a.page_call_to_action;if(a==null)return!1;else{a=a.component_flow_service_config;return!(a==null)}},e=a.page;c=e==null?[void 0,void 0,void 0,!1]:[e.id,b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("ServicesCalendarSyncType")[e.calendar_sync_type])),c(e),d(e)];d=a.native_component_flow_request;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.product_item,l=d.product_item,m=d.product_item,n=d.product_item,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}n=d.user;var p=d.user,q=d.job_application,r=d.user,s;if(r==null)s=void 0;else{r=r.profile_picture;s=r==null?void 0:r.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,hasSavedToCalendar:d.has_saved_to_calendar,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},price:k==null?null:k.experimental_freeform_price,duration:l==null?null:l.duration_in_seconds,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,serviceName:m==null?null:m.name,serviceProfilePic:o,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,userID:n==null?void 0:n.id,username:p==null?void 0:p.short_name,jobApplicationID:q==null?void 0:q.id,userProfilePic:s}}r=a.message_bubble_type;var t;switch(r){case"CANCELLED":t=["Cancelled",g._("Cancelada")];break;case"DECLINED":t=["Declined",g._("Rechazada")];break;case"REQUESTED":t=["Requested",g._("Solicitada")];break;case"SCHEDULEED":t=["Scheduled",g._("Programada")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}return{id:a.id,pageID:c[0],calendarSyncType:c[1],ctaID:c[2],hasServiceConfig:c[3],userID:a.user.id,status:t[0],statusLabel:t[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e}}function s(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:b("bs_array").map(function(a){return{start:a.start,end:a.end}},a.formatted_available_time_ranges),has_booking_request_created:a.has_booking_request_created}}function t(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function u(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function v(a){return{name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").FILE,url:a.playable_url,extension:a.extension,filesize:a.filesize}}function w(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:h(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function x(a){var c=b("bs_array").map(w,a.business_items.nodes),d=h(a.call_to_actions);return{message:a.message,call_to_actions:d,items:c}}function y(a){return{message:a.message,call_to_actions:h(a.call_to_actions),items:b("bs_array").map(w,a.promotion_items.nodes)}}function z(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:b("bs_array").map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}},a.adjustments),cancellation_url:a.cancellation_url,items:b("bs_array").map(w,a.items.nodes),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceBubbleType")[a.messenger_commerce_bubble_type])),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function A(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("PaymentModulesClient")[c.payment_modules_client])),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:b("bs_array").map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:b("bs_array").map(function(a){return a.uri},a.images),quantity:a.quantity}},c.item_list),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var B=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function C(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function D(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function E(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function F(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.memo_images),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.photos),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PTransferStatus")[a.transfer_status])),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("FundsAvailability")[a.funds_availability])),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function G(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentRequestStatus")[a.request_status]));e=a.transfer;e=e==null?[null,""]:[F(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function H(a){var c=G({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:b("bs_array").map(G,a.individual_requests)};return Object.assign(c,a)}function I(a,c){__p&&__p();var d=c.media,e=d==null?null:d.animated_image,f=d==null?null:d.image,g={};b("bs_array").iter(function(b){var a=b.value;g[b.key]=a==null?null:a.text;return 0},c.properties);var h=c.target,w;if(h==null)w=null;else switch(h.tag|0){case 0:w=D(h[0]);break;case 1:w=E(h[0]);break;case 2:w=F(h[0]);break;case 3:w=H(h[0]);break;case 4:w=A(a,h[0]);break;case 7:w=y(h[0]);break;case 8:w=x(h[0]);break;case 10:w=B(h[0]);break;case 11:w=t(h[0]);break;case 12:w=C(a,h[0]);break;case 13:w=r(h[0]);break;case 14:w=s(h[0]);break;case 15:var G=h[0],I=G.genie_sender;I=I==null?[null,null]:[I.messaging_actor.id,I.messaging_actor.name];var K=I[0];G=G.story_attachment;G=G==null?null:J(a,{legacy_attachment_id:K,story_attachment:{action_links:G.action_links,messaging_attribution:G.messaging_attribution,messenger_call_to_actions:G.messenger_call_to_actions,xma_layout_info:G.xma_layout_info,deduplication_key:G.deduplication_key,description:G.description,media:G.media,properties:G.properties,source:G.source,style_list:G.style_list,title_with_entities:G.title_with_entities,url:G.url,subattachments:[],target:null}});w={genie_id:K,genie_name:I[1],attachment:G};break;case 17:w=l(h[0]);break;case 19:w=q(h[0]);break;case 20:w=m(h[0]);break;case 21:w=n(h[0]);break;case 22:w=z(h[0]);break;case 24:w=k(h[0]);break;case 25:w=j(a,h[0]);break;case 38:w=u(h[0]);break;case 39:w=v(h[0]);break;case 40:w=o(h[0]);break;case 41:w=p(h[0]);break;default:w=h[0]}K=c.target;I=!(K==null)&&K.tag===7?0:null;G=c.description;a=c.source;h=c.title_with_entities;return{description:G==null?null:G.text,media:{animated_image:e==null?null:e.uri,animated_image_size:e==null?{height:null,width:null}:{height:e.height,width:e.width},image:f==null?null:f.uri,image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},duration:d==null?null:d.playable_duration,playable:d==null?null:d.is_playable,source:d==null?null:d.playable_url},source:a==null?null:a.text,style_list:c.style_list,title:h==null?null:h.text,action_links:i(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:b("bs_array").map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}},c.messenger_call_to_actions),xma_layout_info:c.xma_layout_info,properties:g,uri:c.url,deduplication_key:c.deduplication_key,target:w,label:I}}function J(a,c){var d=c.story_attachment,e;if(d==null)e=null;else{c={share_id:c.legacy_attachment_id,subattachments:b("bs_array").map(function(b){return I(a,b)},d.subattachments)};d={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};e=Object.assign(c,I(a,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:e,thumbnail_url:null}}f._getCallToActions=h;f._getActionLinks=i;f._getColor=a;f._getLogo=c;f._getPageTarget=j;f._getGroupCommerceProductItemTarget=k;f._getExternalSongTarget=l;f._getAgentSuggestionItemTarget=m;f._getFundraiserTarget=n;f._getWhatsappFileTarget=o;f._getWhatsAppMessageVideoTarget=p;f._getRetailItemTarget=q;f._getPagesPlatformBookingMessageTarget=r;f._getServicesAppointmentAvailabilityTarget=s;f._getMessageLiveLocationTarget=t;f._getWhatsAppMessageImageTarget=u;f._getWhatsAppMessageAudioTarget=v;f._getBusinessRetailItem=w;f._getMessengerBusinessMessageTarget=x;f._getMessengerRetailPromotionTarget=y;f._getMessengerRetailReceiptTarget=z;f._getPagesPlatformAttachmentTarget=A;f._getPagesPlatformLeadGenInfoTarget=B;f._getQuickInviteTarget=C;f._getCrisisListingTarget=D;f._getMoneyTransferTarget=E;f._getP2PTransferTarget=F;f._getP2PTransferRequestTarget=G;f._getP2PTransferRequestWithIndividualRequests=H;f.transformStoryAttachment=I;f.getExtensibleAttachmentPayload=J}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_array","bs_caml_primitive","MercuryAttachmentType","MessageSharedMediaIDStore.bs","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a.is_malicious)return{app_attribution:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:b("MercuryAttachmentType").ERROR,error_msg:g._("Este archivo adjunto se ha marcado como malicioso."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}e=a.url;return{app_attribution:d,icon_type:a.content_type,metadata:null,name:a.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e==null?null:e,attach_type:b("MercuryAttachmentType").FILE,error_msg:void 0,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}}function i(a,c,d){__p&&__p();var e=a.chat_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=e[0],g=a.chat_image;g=g==null?null:{width:g.width,height:g.height};var h=a.large_image;h=h==null?[null,null]:[h.uri,{width:h.width,height:h.height}];var i=a.inbox_image;i=i==null?[null,null]:[i.uri,{width:i.width,height:i.height}];var j=a.attribution_app,k;if(j==null)k=null;else{var l=j.square_logo;k={id:j.id,icon_url:l==null?null:l.uri,metadata:a.attribution_metadata,name:j.name}}return{app_attribution:k,attach_type:b("MercuryAttachmentType").VIDEO,name:a.filename,url:a.playable_url,rel:"async",preview_url:f,preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").VIDEO,metadata:{fbid:a.legacy_attachment_id,render_as_sticker:a.video_type==="SPEAKING_STICKER",dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y},duration:a.playable_duration_in_ms,large_size:h[1],large_preview:h[0],chat_size:g,chat_preview:f,inbox_size:i[1],inbox_preview:i[0],pageid:d?c:void 0},thumbnail_url:f,share:null}}function j(a){var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}return{app_attribution:d,attach_type:b("MercuryAttachmentType").FILE,name:a.filename,url:a.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").MUSIC,metadata:{duration:a.playable_duration_in_ms,isVoicemail:a.is_voicemail?"1":"0",type:a.audio_type==="VOICE_MESSAGE"?"fb_voice_message":a.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}function k(a,c,d){__p&&__p();var e=a.preview_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=a.animated_image;f=f==null?null:f.uri;var g=a.attribution_app,h;if(g==null)h=null;else{var i=g.square_logo;h={id:g.id,icon_url:i==null?null:i.uri,metadata:a.attribution_metadata,name:g.name}}return{app_attribution:h,attach_type:b("MercuryAttachmentType").ANIMATED_IMAGE,name:a.filename,url:f,rel:"async",preview_url:e[0],preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,image:f,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y)),pageid:d?c:void 0},thumbnail_url:f,share:null}}function l(a){__p&&__p();var c=a.original_extension==="gif"?b("MercuryAttachmentType").ANIMATED_IMAGE:a.render_as_sticker?b("MercuryAttachmentType").THIRDPARTYSTICKER:b("MercuryAttachmentType").PHOTO,d=a.preview;d=d==null?[null,null,null]:[d.uri,d.width,d.height];if(c===b("MercuryAttachmentType").PHOTO){var e=a.large_preview;e=e==null?[null,null,null]:[e.uri,e.width,e.height]}else e=[null,null,null];var f=a.attribution_app,g;if(f==null)g=null;else{var h=f.square_logo;g={id:f.id,icon_url:h==null?null:h.uri,metadata:a.attribution_metadata,name:f.name}}h=a.thumbnail;return{app_attribution:g,attach_type:c,name:a.filename,url:null,rel:"async",preview_url:d[0],preview_width:d[1],preview_height:d[2],large_preview_url:e[0],large_preview_width:e[1],large_preview_height:e[2],icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y))},thumbnail_url:h==null?null:h.uri,share:null,photo_encodings:a.photo_encodings}}function m(a,c){__p&&__p();var d=a,e=c;if(a>=c){a=b("bs_caml_primitive").caml_float_min(120,d/2);c=a/(d/2);return[a|0,e/2*c|0]}else{a=b("bs_caml_primitive").caml_float_min(120,e/2);c=a/(e/2);return[d/2*c|0,a|0]}}function n(a){var c=m(a.width,a.height),d=a.pack,e=a.sprite_image,f=a.sprite_image_2x,g=a.padded_sprite_image,h=a.padded_sprite_image_2x;return{app_attribution:null,attach_type:b("MercuryAttachmentType").STICKER,name:null,url:a.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:a.label,stickerID:a.id,packID:d==null?null:d.id,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerRow:a.frame_count>1?a.frames_per_row:1,framesPerCol:a.frame_count>1?a.frames_per_column:1,height:c[1],width:c[0],spriteURI:e==null?null:e.uri,spriteURI2x:f==null?null:f.uri,paddedSpriteURI:g==null?null:g.uri,paddedSpriteURI2x:h==null?null:h.uri,thumbnail_url:null,share:null}}}function o(a,c){if(c==null)return 0;else return b("MessageSharedMediaIDStore.bs").setMessageIDForAttachmentID(a,c)}function a(a,c,d,e){__p&&__p();var f=[],g=c.extensible_attachment;g==null||f.push(b("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(a,g));g=c.sticker;g==null||f.push(n(g));g=c.blob_attachments;g==null||b("bs_array").iter(function(b){__p&&__p();switch(b.tag|0){case 0:var c=b[0];o(c.legacy_attachment_id,d);f.push(l(c));return 0;case 1:c=b[0];o(c.legacy_attachment_id,d);f.push(k(c,a,e));return 0;case 2:f.push(j(b[0]));return 0;case 3:c=b[0];o(c.legacy_attachment_id,d);f.push(i(c,a,e));return 0;case 4:f.push(h(b[0]));return 0}},g);return f}f._getFilePayload=h;f._getVideoPayload=i;f._getAudioPayload=j;f._getAnimatedImagePayload=k;f._getImagePayload=l;f._getStickerDimensions=m;f._getStickerPayload=n;f._storeAttachmentMapping=o;f.transformAttachment=a}),null);
__d("MessengerGroupAdminType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REGULAR_ADMIN:0,GROUP_CREATOR:1,CHAT_SUPER_ADMIN:2})}),null);
__d("MessengerGroupsSyncStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_OPT_IN:"PENDING_OPT_IN",OPT_IN:"OPT_IN",PENDING_OPT_OUT:"PENDING_OPT_OUT",OPT_OUT:"OPT_OUT",UNSET:"UNSET",UNSUPPORTED:"UNSUPPORTED"})}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",INSTANT_GAMES_TOURNAMENT_UPDATE:"instant_games_tournament_update",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",FORM_PROGRESS:"form_progress",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MercuryActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",ADD_GROUP_ADMINS:"ma-type:add_group_admins",PROMOTE_GROUP_ADMINS:"ma-type:promote-group-admins",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",UPDATE_SNIPPET:"ma-type:update-snippet",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_PINNED_STATUS:"ma-type:change-pinned-status",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",REPLACE_MESSAGE:"ma-type:replace-message",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UNWRAP_MESSAGE:"ma-type:unwrap-message",JOINABLE_MODE:"ma-type:joinable-mode",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",IS_PIN_PROTECTED:"ma-type:is_pin_protected",REACTION_UPDATE:"ma-type:reaction-update",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_COMM_STATUS:"ma-type:update-comm-status",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner",MONTAGE_DIRECT_EXPIRE:"ma-type:montage-direct-expire",GROUPS_SYNC_STATUS_CHANGED:"ma-type:groups-sync-status-changed",GROUPS_SYNC_METADATA_UPDATE:"ma-type:groups-sync-metadata-update",DESCRIPTION_CHANGED:"ma-type:description-changed",UPDATE_THREAD_THEME:"ma-type:update-thread-theme",UPDATE_JOINABLE_LINK:"ma-type:update-joinable-link",CREATE_OMNI_M_SUGGESTIONS:"ma-type:create-omni-m-suggestions",DELETE_MONTAGE_MESSAGES:"ma-type:delete-montage-messages",NEW_MONTAGE_MESSAGE:"ma-type:new-montage-message",UNSUBSCRIBE_STATUS_UPDATE:"ma-type:unsubscribe-status-update",REMOVE_MESSAGE:"ma-type:remove-message"})}),null);
__d("MercuryLogMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("MessagingGenericAdminTextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",ALOHA_CALL_INVITE:"aloha_call_invite",MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",ADMIN_TEXT_WITH_LINK:"admin_text_with_link",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",INSTANT_GAME_WORLD_CUP_INTRO:"intant_games_world_cup_intro",INSTANT_GAME_CUSTOM_UPDATE_NUX_ADMIN_MESSAGE:"instant_game_custom_update_nux_admin_message",INSTANT_GAME_OFFLINE_MATCH_INTRO:"instant_game_offline_match_intro",INSTANT_GAME_TOURNAMENT_REMINDER:"instant_game_tournament_reminder",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_GROUP_DESCRIPTION_UPDATE_V2:"messenger_group_description_update_v2",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",WORK_BOT_INSTALLED:"work_bot_installed",WORK_NEW_MULTI_COMPANY_CHAT:"work_new_multi_company_chat",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",NEO_PARENT_UNLOCK_STICKER:"neo_parent_unlock_sticker",CHANGE_FAVORITE_COLOR:"change_favorite_color",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",MARKETPLACE_SERVICES_INITIAL_MESSAGE_CONTEXT:"marketplace_services_initial_message_context",LINK_CTA:"link_cta",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",SUPPORT_BOT_SESSION_AGENT_JOIN:"support_bot_session_agent_join",SUPPORT_BOT_SESSION_AGENT_LEAVE:"support_bot_session_agent_leave",SUPPORT_BOT_SESSION_END:"support_bot_session_end",SUPPORT_BOT_CALL_BEGIN:"support_bot_call_begin",SUPPORT_BOT_CALL_END:"support_bot_call_end",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",MESSENGER_TURN_ON_MESSAGES:"messenger_turn_on_messages",MESSENGER_TURN_OFF_MESSAGES:"messenger_turn_off_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",MENTORSHIP_PROGRAM_MATCH:"mentorship_program_match",MENTORSHIP_PROGRAM_LEAVE:"mentorship_program_leave",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match",AUTOMATIC_TRANSLATION_ENABLED:"automatic_translation_enabled",AUTOMATIC_TRANSLATION_DISABLED:"automatic_translation_disabled",MESSENGER_ROOM_MIGRATION:"messenger_room_migration",PAGE_ADMIN_RESPONSIVENESS_REMINDER:"page_admin_responsiveness_reminder",MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:"messenger_growth_generic_admin_text",MESSENGER_TALK_TO_YOUR_MOM_REMINDER:"messenger_talk_to_your_mom_reminder",PAYMENT_INCENTIVE_RECEIVED:"payment_incentive_received",PAGES_THREAD_REMINDER:"pages_thread_reminder",MESSENGER_PLATFORM_PERSONA_LEAVE_THREAD:"messenger_platform_persona_leave_thread",STORY_REPLY_CONTEXT:"story_reply_context",PAGES_AUTOMATED_RESPONSE_RECOMMENDATION:"pages_automated_response_recommendation",PAGES_AUTOMATED_RESPONSE_SMART_REPLY:"pages_automated_response_smart_reply",MESSENGER_ICEBREAKER_VOTE_CAST:"messenger_icebreaker_vote_cast",PARTIES_PRESENCE:"parties_presence",PAGE_THREAD_ADMIN_ASSIGNMENT_TEXT:"page_thread_admin_assignment_text",RTC_INSTANT_ACTIVITY_LIFECYCLE:"rtc_instant_activity_lifecycle",SHIBA_MOCK_BOT_RESTART_CHAT_TEXT:"shiba_mock_bot_restart_chat_text",MARKETPLACE_RENTALS_INITIAL_MESSAGE:"marketplace_rentals_initial_message",MARKETPLACE_RENTALS_SENDER_INFO:"marketplace_rentals_sender_info",PAGES_MARK_AS_PAID_NEW:"pages_mark_as_paid_new",MESSENGER_BUSINESS_REPORT_SPAM:"messenger_business_report_spam",MESSENGER_BUSINESS_REPORT_INAPPROPRIATE:"messenger_business_report_inappropriate",MESSENGER_BUSINESS_REPORT_OTHER_ABUSE:"messenger_business_report_other_abuse",FRIENDED_IN_MESSENGER:"friended_in_messenger",MARKETPLACE_REPLY_REMINDER:"marketplace_reply_reminder",VOD_CONVERSATION_SEND_MESSAGE:"vod_conversation_send_message",SENT_UNCONNECTED_MESSAGE:"sent_unconnected_message",MESSENGER_SHARED_WITH:"messenger_shared_with",PAGE_USER_MESSENGER_CONNECTED:"page_user_messenger_connected",FB_ONLY_BOT_TEXT:"fb_only_bot_text",MESSENGER_SCHOOL_CHAT_AUTO_ADD_USER:"messenger_school_chat_auto_add_user",LIVING_ROOM_MESSAGE:"living_room_message"})}),null);
__d("MessagingSourceEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_INBOX:"source:internal:test_inbox",INTERNAL_TEST_PENDING:"source:internal:test_pending",INTERNAL_TEST_OTHER:"source:internal:test_other",INTERNAL_TEST_ML_ONLY:"source:internal:test_ml_only",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",PTX:"source:ptx",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",WORK_ACTIVATION_CARD_GENERAL_GROUP_CHAT:"source:work:activation_card_general_group_chat",SCHOOL_COMMUNITY:"source:school_community",BELL_RESEARCH:"source:bell_research",BELL_MESSENGER_LINKED:"source:bell_messenger_linked",PROFILE_MEET_NEW_FRIENDS:"source:profile_meet_new_friends",PROFILE_MEET_NEW_FRIENDS_REPLY:"source:profile_meet_new_friends_reply",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES_GAME_UPDATE:"source:instant_games_game_updates",INSTANT_GAMES_MATCH_MAKING:"source:instant_games_match_making",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",CREATOR_STUDIO:"source:creator_studio",FB_GROUP_ADMINSHIP_SYNC:"source:fbgroup:adminship_sync",FB_GROUP_CHAT_MUTE_MEMBER:"source:fbgroup:mute_member",MESSENGER_ADS_PARTIAL_AUTOMATED_REMINDER:"source:ads_partial_automated:reminder",MENTORSHIP:"source:mentorship",VOD_CONVERSATION:"source:vod_conversation",LOCAL_SEARCH_SERVICES:"source:local_search_services",YOUTH_VAULT:"source:youth_vault"})}),null);
__d("MercuryMessageSourceTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile",WORK_DESKTOP:"source:workchat:desktop"})}),null);
__d("MessagingTagUtils",["MercuryMessageSourceTags","MessagingSourceEnum","MessagingTagConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set(Object.values(b("MessagingSourceEnum")));function a(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return e}return b("MessagingSourceEnum").UNKNOWN}function h(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.split(b("MessagingTagConstants").app_id_root);if(e.length>1)return e[1].trim()}return null}function c(a,c){var d=[],e=h(a);e&&b("MessagingTagConstants").orca_app_ids.indexOf(e)!==-1&&d.push(b("MercuryMessageSourceTags").MESSENGER);b("MessagingTagConstants").chat_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").CHAT);b("MessagingTagConstants").email_source===c&&d.push(b("MercuryMessageSourceTags").EMAIL);b("MessagingTagConstants").mobile_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").MOBILE);a.indexOf(b("MessagingSourceEnum").WORKPLACE_CHAT_DESKTOP)!==-1&&d.push(b("MercuryMessageSourceTags").WORK_DESKTOP);return d}e.exports={getSourceFromTags:a,getSourceTags:c}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("StoryAttachmentStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",VOTER_REGISTRATION_SHARE:"voter_registration_share",ELECTION_BALLOT_CONFIG:"election_ballot_config",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",PHOTO_LINK_SHARE_WITH_INSTAGRAM_CONTEXT:"photo_link_share_with_instagram_context",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",TRANSACTION_INVOICE:"transaction_invoice",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",MESSENGER_NATIVE_TEMPLATES:"messenger_native_templates",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",MESSENGER_GROUP_JOINABLE_LINK_V2:"messenger_group_joinable_link_v2",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",INSTANT_GAMES_LEADERBOARD_UPDATE:"instant_games_leaderboard_update",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",MFS_TIME_SENSITIVE_ATTACHMENT:"mfs_time_sensitive_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LIVE_ELECTION_RESULTS:"live_election_results",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FUN_FACT_STACK:"fun_fact_stack",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",PAGE_ANNOUNCEMENT:"page_announcement",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",NEO_VIDEO_PROMPT:"NEO_VIDEO_PROMPT",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",FUNDRAISER_FB_SEEDING_GIFT:"fundraiser_fb_seeding_gift",BREAKING_NEWS:"breaking_news",VIDEO_REQUEST:"video_request",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",VOTING_INFO:"voting_info",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue",GROUP_ACCEPT_RULE_TO_UNMUTE:"group_accept_rule_to_unmute",PYI_ATTACHMENTS:"pyi_attachments",SHOW_CLICK_TO_WATCH_TAB:"show_click_to_watch_tab",SHOW_CLICK_TO_WATCH_TAB_V2:"show_click_to_watch_tab_v2",SHOW_CLICK_TO_WATCH_TAB_V3:"show_click_to_watch_tab_v3",SHOW_CLICK_TO_WATCH_TAB_V4:"show_click_to_watch_tab_v4",SHOW_MASKED:"show_masked",SHOW_CONTINUE_WATCHING:"show_continue_watching",WATCH_CLICK_STORY_HEADER_TO_WATCH_TAB:"watch_click_story_header_to_watch_tab",FOX_ALBUM:"fox_album",TOOL_SHARE:"tool_share",PHONE_REMOVED_ACTION_LIST:"phone_removed_action_list",AMP:"amp",LDP_APP_INSTANCE:"ldp_app_instance",PAGE_RECOMMENDATION_V2:"page_recommendation_v2",PLAY_WITH_FRIENDS:"play_with_friends",BLOOD_REQUEST:"blood_request",HIGH_SCHOOL_COMMUNITY_INVITE:"high_school_community_invite",CIVIC_ACTION_POST:"civic_action_post",SCHEDULED_LIVE_VIDEO:"scheduled_live_video",GAMESHOW:"gameshow",GAMESHOW_INVITE:"gameshow_invite",MK_FRIEND_REQUEST:"mk_friend_request",GOODWILL_PHOTO_CIRCLE:"goodwill_photo_circle",SERVICES_APPOINTMENT_AVAILABILITY:"services_appointment_availability",NEO_SOCIAL_INVITATION:"neo_social_invitation",NEO_KID_INVITATION:"neo_kid_invitation",GROUP_SELL_PRODUCT_ITEM_CONDENSED:"group_sell_product_item_condensed",GROUP_SELL_PRODUCT_ITEM_MARK_AS_PENDING:"group_sell_product_item_mark_as_pending",GAMES_VIDEO:"games_video",MOVIE_WITH_SHOWTIMES:"movie_with_showtimes",VERTICAL_MULTI_ATTACHMENT:"vertical_multi_attachment",GROUP_SAFETY_HUB:"group_safety_hub",NEWS_STORYLINE:"news_storyline",EVENT_TICKET_REQUEST:"event_ticket_request",GROUP_APPLICATION:"group_application",MESSAGE_MULTIPLE_LOCATIONS:"message_multiple_locations",TODO_LIST:"todo_list",PERSONAL_REMINDER:"personal_reminder",ARTICLE_MESSAGE:"article_message",PERSONAL_REMINDER_LIST:"personal_reminder_list",GAMES_APP:"games_app",GAMES_APP_SHARED:"games_app_shared",MONTAGE_MEDIA_EFFECT:"montage_media_effect",GROUPS_VOTER_REGISTRATION_DRIVE:"groups_voter_registration_drive",MONTAGE_SHARE:"montage_share",WHATSAPP_MESSAGE_ATTACHMENT:"whatsapp_message_attachment",INSTAGRAM_DIRECT_MESSAGE_ATTACHMENT:"instagram_direct_message_attachment",GROUP_APPLICATION_CTA:"group_application_cta",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",SCHEDULED_LIVING_ROOM:"scheduled_living_room",STORY_ADS_SURVEY:"story_ads_survey",MESSENGER_FORM_PROGRESS_ATTACHMENT:"messenger_form_progress_attachment",VIDEO_COMMERCE_INTEREST:"video_commerce_interest",PAGES_COMMERCE_BUYER_INTENT:"pages_commerce_buyer_intent",FLEXIBLE_RATIO_IMAGE_SHARE:"flexible_ratio_image_share",BREAKING_NEWS_STORY_GALLERY:"breaking_news_story_gallery",BRANDING_PLAYABLE_AD:"branding_playable_ad",PAGE_SURFACE_MENU_ITEM:"page_surface_menu_item",CIVIC_PROPOSAL:"civic_proposal",VIDEO_LIVING_ROOM_MESSENGER:"video_living_room_messenger",IMAGE_SHARE_NO_OVERLAY:"image_share_no_overlay",JOIN_GROUP_CTA:"join_group_cta",ASSISTANT_CONTACT_INFO:"assistant_contact_info",NEO_DRAW_AND_GUESS_GAME_REQUEST:"neo_draw_and_guess_game_request",LOCAL_ASSOCIATION_GROUP_INTRO:"local_association_group_intro",SOCIAL_LEARNING_UNIT_CREATED:"social_learning_unit_created"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a.__typename==="GroupPollExtensibleMessageAdminText"){var e=a.question,f;if(e==null)f=[{},null];else{var g=Object.assign({},e);Object.assign(g,{total_count:a.total_count,options:b("bs_array").map(function(a){var c=Object.assign({},a);return Object.assign(c,{total_count:a.voters.nodes.length,voters:b("bs_array").map(function(a){return a.id},a.voters.nodes)})},e.options.nodes)});f=[g,e.id]}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{event_type:b("bs_string").lowercase(a.event_type),question_id:f[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(JSON.stringify(f[0])))}}}else if(a.__typename==="InstantGameUpdateExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{game_id:b("getByPath")(a,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("InstantGameUpdateXMATUpdateType")[a.update_type])),collapsed_text:a.collapsed_text,expanded_text:a.expanded_text,leaderboard_json:a.leaderboard_json,cta_url:b("getByPath")(a,["instant_game_update_data","cta_url"]),cta_title:b("getByPath")(a,["instant_game_update_data","cta_title"]),custom_image_url:b("getByPath")(a,["instant_game_update_data","photo","image","uri"]),template:b("getByPath")(a,["instant_game_update_data","template"])}};else if(a.__typename==="MessengerAdContextAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_url:a.ad_url}};else if(a.__typename==="AdExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_client_token:a.ad_client_token,ad_id:a.ad_id,ad_preferences_link:a.ad_preferences_link,ad_properties:a.ad_properties}};else if(a.__typename==="ThemeColorExtensibleMessageAdminText"||a.__typename==="ThreadIconExtensibleMessageAdminText"||a.__typename==="ThreadNicknameExtensibleMessageAdminText"||a.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||a.__typename==="AddContactExtensibleMessageAdminText"||a.__typename==="RtcCallLogExtensibleMessageAdminText"||a.__typename==="GameScoreExtensibleMessageAdminText"||a.__typename==="MessengerCallLogExtensibleMessageAdminText"||a.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||a.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||a.__typename==="PartiesInviteExtensibleMessageAdminText"||a.__typename==="AppointmentReminderExtensibleMessageAdminText"||a.__typename==="LinkCTAExtensibleMessageAdminText"||a.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||a.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||a.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||a.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||a.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||a.__typename==="WorkBotInstalledExtensibleMessageAdminText")g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:Object.assign({},a)};else if(a.__typename==="LightweightEventCreateExtensibleMessageAdminText"||a.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||a.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||a.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||a.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){e=a.event_reminder;if(e==null)f=void 0;else{var h=e.lightweight_event_creator;h=h==null?void 0:h.id;var i=e.location_page;i=i==null?void 0:i.id;var j=e.timezone_id;j=j==null?void 0:j.timezone;var k=e.location_coordinates;k=k==null?{latitude:void 0,longitude:void 0}:k;var l=e.event_reminder_members;l=l==null?void 0:l.edges;f={event_creator_id:h,event_id:e.id,event_location_id:i,event_location_name:e.location_name,event_seconds_to_notify_before:e.seconds_to_notify_before,event_time:e.time,event_end_time:e.end_time,event_timezone:j,event_title:e.event_title,event_type:e.lightweight_event_type,event_track_rsvp:e.allows_rsvp,latitude:k.latitude,longitude:k.longitude,guest_state_list:l,guest_id:a.guest_id,guest_status:a.guest_status}}g={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:f}}else g=a.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:{ad_url:a.ad_url,should_show_url:a.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[c])),untypedData:void 0};return{log_message_body:d,log_message_data:g,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function h(a){return b("bs_array").map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a},a)}function i(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(15,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(16,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(17,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(18,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(19,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(20,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(21,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(22,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(23,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(24,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(25,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(26,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(27,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(28,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(30,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(31,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(32,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="TicketOrderAttachment"?b("bs_block").__(34,[{ticket_order_id:c.ticket_order_id,ticket_order:c.ticket_order,event:c.event}]):c.__typename==="EventTicketRequest"?b("bs_block").__(35,[{id:c.id,guest_notes:c.guest_notes,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(33,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(36,[{id:c.id,field_data:c.field_data}]):c.__typename==="WhatsAppMessageAudio"?b("bs_block").__(39,[{filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(37,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WhatsAppMessageImage"?b("bs_block").__(38,[{preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WhatsAppMessageFile"?b("bs_block").__(40,[{name:c.name,is_malicious:c.is_malicious,uri:c.uri}]):c.__typename==="WhatsAppMessageVideo"?b("bs_block").__(41,[{playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(42,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(43,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(44,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(45,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="Story"?b("bs_block").__(46,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(47,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(48,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):null;return{description:a.description,media:a.media,source:a.source,style_list:h(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function j(a){var c=i({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(c==null)return null;else{a=b("bs_array").map(i,a.subattachments);return Object.assign({subattachments:a},c)}}function k(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||b("bs_array").iter(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else return 0},a);return c}function l(a){__p&&__p();a=a.message;if(a==null)return[];else{var c=[];b("bs_array").iter(function(a){__p&&__p();var b=a.entity;if(b==null)return 0;else{var d=b.id;b=b.thread_key;if(d==null)if(b==null)return 0;else{b=b.thread_fbid;if(b==null)return 0;else{c.push({id:b,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{c.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}},a.ranges);return c}}function m(a,c,d,e){__p&&__p();var f={};b("bs_array").iter(function(a){f[a.user.id]=a.reaction;return 0},c.message_reactions);var h=b("FBIDCheck").isUser_deprecated(c.message_sender.id),i=h?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;h=h?b("MessagingTagUtils").getSourceTags(c.tags_list,i):[];var n=c.message_id,o=c.commerce_message_type,p=c.customizations,q=c.replied_to_message,r;if(q==null)r=null;else{var s=q.message;r=s==null?{status:q.status,message:null}:{status:q.status,message:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").some(m(a,s,d,e)))}}q=c.error_data;s=c.unsent_timestamp_precise;s=!(s==null)&&s!=="0"?b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(s)):null;o={thread_id:d.thread_id,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:n,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:o==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceMessageType")[o])),customizations:p==null?[]:p,source:i,source_tags:h,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:r,skip_bump_thread:!1,profile_ranges:l(c),reactions:f,error_data:q==null?null:{description:q.description},removed_timestamp:s,has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null};if(c.__typename==="UserMessage"){p=k(c);i=c.extensible_attachment;if(i==null)h=null;else{r=i.story_attachment;h={legacy_attachment_id:i.legacy_attachment_id,story_attachment:r==null?null:j(r)}}q=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:h,blob_attachments:p,sticker:c.sticker},n,e);s=c.message;i=c.page_admin_sender;Object.assign(o,{body:s==null?null:s.text,creator_info:i==null?null:{creatorID:i.admin_id,creatorName:i.name,creatorType:i.sender_type,labelType:i.label_type,pageID:i.page_id,profileURI:i.profile_uri},subject:null,has_attachment:q.length>0,attachments:q,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){r=c.__typename;a=r==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;h=c.message_sender.id;p=d.other_user_fbid;n=p==null?null:b("MercuryIDs").getParticipantIDFromUserID(h===p?b("CurrentUser").getID():p);e=c.answered;Object.assign(o,{log_message_type:a,log_message_data:{answered:e==null?!1:e,caller:b("MercuryIDs").getParticipantIDFromUserID(h),callee:n},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(o,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){s=c.image_with_metadata;if(s==null)i=null;else{q=s.preview;i={preview_url:q==null?null:q.uri,metadata:{fbid:s.legacy_attachment_id,dimensions:String(s.original_dimensions.x)+(","+String(s.original_dimensions.y))}}}Object.assign(o,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:i},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){r=c.participants_added;Object.assign(o,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:r==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},r)},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){d=c.participants_removed;Object.assign(o,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:d==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},d)},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){p=c.extensible_message_admin_text;a=c.extensible_message_admin_text_type;p==null?a==null||Object.assign(o,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[a])),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):a==null||Object.assign(o,g(p,a,c.snippet))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){e=c.p2p_sender;h=c.p2p_receiver;n=c.amount;q=c.message_type;Object.assign(o,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:e==null?null:b("MercuryIDs").getParticipantIDFromUserID(e.id),receiverId:h==null?null:b("MercuryIDs").getParticipantIDFromUserID(h.id),formattedAmount:n==null?null:n.formatted,subtype:q==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentLogMessageSubtype")[q]))},log_message_type:b("MercuryLogMessageType").ORION})}return o}f._getGenericAdminTextMessage=g;f._getStyleList=h;f.unsafeCastExtensibleAttachmentWithoutSubattachments=i;f.unsafeCastExtensibleAttachment=j;f.unsafeCastBlobAttachments=k;f._getProfileRanges=l;f.transformMessage=m}),null);
__d("MessengerObjectAssociationType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null})}),null);
__d("MessengerThreadCannotReplyReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","GenderConst","bs_js_primitive","WorkModeConfig","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function i(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("WorkModeConfig").is_work_user;e=e?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";d=new(b("URI"))(c).setDomain(e)}c=a.profile_picture;e=a.group_general_chat;var f=a.group_events,g=a.group_saves;return{id:a.id,name:a.name,action_link:d,profile_picture:c==null?null:{uri:c.uri},group_general_chat:e==null?null:{id:e.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count}}}}function j(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return{id:a.id,name:a.name,color:a.color}},a.custom_thread_tags.nodes),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:c}}}function k(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function l(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function m(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function n(a){if(!(a==null)&&a!=="")return m(a);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=g._("Usuario de Facebook");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_verified:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,availability_status:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wa_group_admins:[],wa_group_creation_time:null,wa_group_participant_count:null,wa_group_participants:[]}}function o(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("WorkModeConfig").is_work_user;g=g?b("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";f=new(b("URI"))(e).getUnqualifiedURI().setDomain(g).setProtocol("https").toString()}e=a.__typename;var h;switch(e){case"MessengerCallGuestUser":h=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":h=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}g=a.accepts_messenger_user_feedback;e=a.is_viewer_friend;var i=a.is_viewer_managing_parent,j=a.is_messenger_user,k=a.is_aloha_proxy_confirmed,l=a.is_verified,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:!(q==null)&&q.length!==0?""+(String(q)+(" \u2022 "+(String(s)+""))):s}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=!(q==null)&&!(t==null)&&t.type===b("WorkForeignEntityType").FOREIGN?q:null}t=a.work_info;q=a.is_employee;var u=a.work_foreign_entity_info,v=a.wa_group_creation_time,w=a.wa_group_participants,x=a.wa_group_participants,y=a.wa_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.short_name),a.name),user_type:h,vanity:a.username,accepts_messenger_user_feedback:g==null?!1:g,is_friend:e==null?!1:e,is_viewer_managing_parent:i==null?!1:i,is_messenger_user:j==null?!1:j,is_aloha_proxy_confirmed:k==null?!1:k,is_business_enabled:a.__typename==="Page",is_verified:l==null?!1:l,is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,availability_status:t==null?null:t.availability_status,employee:q==null?!1:q,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:u==null?null:u,timezone:null,wa_group_creation_time:v==null?null:v,wa_group_participant_count:w==null?null:w.count,wa_group_participants:x==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},x.nodes),wa_group_admins:y==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},y.nodes)}}function p(a){return b("bs_array").map(function(a){return o(a.node.messaging_actor)},a.all_participants.edges)}function q(a,c){__p&&__p();c=c.read_receipts;if(c==null)return void 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return b("bs_js_primitive").some(d)}}function r(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function s(a,c,d){var e=c.messages;if(e==null)return void 0;else return b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)}function t(a,c,d){__p&&__p();var e=b("bs_array").map(function(c){var d=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),e=c.extensible_attachment,f;if(e==null)f=null;else{var a=e.story_attachment;f={legacy_attachment_id:e.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}return{message_id:c.message_id,snippet:c.snippet,message_sender:c.message_sender,timestamp_precise:c.timestamp_precise,commerce_message_type:c.commerce_message_type,extensible_attachment:f,blob_attachments:d,sticker:c.sticker,extensible_message_admin_text:c.extensible_message_admin_text}},c.last_message.nodes);e={thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var g=c.emoji;f=[n(c.outgoing_bubble_color),g==null?null:{emoji:g},l(c.participant_customizations)]}g=f[0];c=e.theme;if(c==null)g=[g,g,g,[],null];else{var o=c.gradient_colors.length,p=m(c.fallback_color),q=b("FBID.bs").ofString(c.id);q=q!==void 0?b("bs_js_primitive").valFromOption(q):null;if(o>0&&b("ChatConfig").get("chat_tab_has_gradients")){c=b("bs_array").map(m,c.gradient_colors);g=[p,b("bs_caml_array").caml_array_get(c,0),b("bs_caml_array").caml_array_get(c,o-1|0),c,q]}else g=[p,p,p,[],q]}o=e.page_comm_item;c=o==null?[null,null,null,null,null]:[o.comm_status,o.comm_source_id,o.id,o.subtitle,o.comm_item_owners];p=e.last_message.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_message.nodes,0)):void 0;q=e.last_read_receipt.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)):void 0;if(p!==void 0){o=b("bs_js_primitive").valFromOption(p);a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},o.message_id,d)}else a=[];if(p!==void 0){o=b("bs_js_primitive").valFromOption(p).extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=e.cannot_reply_reason;var r=e.thread_key.other_user_id;if(r==null){var s=e.thread_key.thread_fbid;s=s==null?null:s}else s=r;r=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},e.thread_admins);r=b("bs_array").fold_left(function(b,c){var d=c.node.messaging_actor.id;c=c.admin_type;var a=b[d];c==null||a!==void 0&&(b[d]=c);return b},r,e.all_participants.edges);var t=e.thread_queue_metadata,u=e.thread_type,v=e.montage_thread,w=e.image,x=e.thread_key.other_user_id,y=e.thread_queue_metadata,z=e.name,A=e.associated_object,B;if(A==null)B=null;else{A=A.group_general_chat;if(A==null||s==null)B=null;else{A=A.id===s;B=A?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}A=e.rtc_call_data;var C;if(A==null)C=null;else{var D=A.initiator;C={call_state:A.call_state,server_info_data:A.server_info_data,initiator_fbid:D==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(D.id))}}A=e.marketplace_thread_data;if(A==null)D=null;else{var E=A.for_sale_item,F;if(E==null)F=null;else{var G=E.id,H=E.formatted_price,I=E.location,J;if(I==null)J=null;else{I=I.reverse_geocode;J={reverse_geocode:I==null?null:{city:I.city,state:I.state}}}I=E.primary_photo;var K;if(I==null)K=null;else{I=I.image;K=I==null?null:I.uri}F={id:G==null?0:b("bs_caml_format").caml_float_of_string(G),story_id:E.story_id,title:E.group_commerce_item_title,price:H==null?null:H.text,location:J,is_sold:E.is_sold,image_uri:K,url:E.url}}I=A.buyer;G=A.seller;D={for_sale_item:F,buyer_fbid:I==null?0:b("bs_caml_format").caml_float_of_string(I.id),seller_fbid:G==null?0:b("bs_caml_format").caml_float_of_string(G.id)}}H=e.group_approval_queue;J=e.work_groups_sync_metadata;if(J==null)K=null;else{E=J.fb_group;K=E==null?null:E}A=e.linked_mentorship_programs;return{admins:r,approval_mode:e.approval_mode,approval_queue_ids:t==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},t.approval_requests.nodes),can_reply:o==null,cannot_reply_reason:e.cannot_reply_reason,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[u])),page_unsubscribe_status:e.page_unsubscribe_status,participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o==null?!1:o===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT,has_montage:!(v==null),image_src:w==null?null:w.uri,is_archived:e.has_viewer_archived,is_pinned:e.is_pinned,is_page_follow_up:e.is_page_follow_up,is_page_unresponded_thread:e.is_page_unresponded_thread,is_canonical_user:k(e),is_canonical:!(x==null),is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:!(y==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:p!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(p).timestamp_precise):0,last_message_id:null,last_message_type:p!==void 0?b("bs_js_primitive").valFromOption(p).commerce_message_type:null,last_read_timestamp:q!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(q).timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:h(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=h(b);return a},{},e.event_reminders.nodes),message_count:e.message_count,mute_until:e.mute_until,name:z==null?"":z,object_association_type:B,other_user_fbid:e.thread_key.other_user_id,page_thread_info:j(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)},e.all_participants.edges),participants_event_status:e.participants_event_status,read_only:o==null?!1:o===b("MessengerThreadCannotReplyReason").READ_ONLY,recipients_loadable:o==null?!0:o!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:p!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(p).message_sender.messaging_actor.id):null,snippet:p!==void 0?b("bs_js_primitive").valFromOption(p).snippet:null,thread_fbid:s,thread_id:"",timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:C,marketplace_thread_data:D,associated_object:i(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:H==null?null:H.nodes,game_id:d,admin_model_status:e.admin_model_status_string,groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),work_associated_group:K,description:e.description,joinable_link:e.joinable_link,linked_mentorship_programs:A==null?null:A}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=o;f.transformParticipants=p;f.transformReadReceipts=q;f.transformDeliveryReceipts=r;f.transformMessages=s;f.transformThread=t}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","bs_array","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();b("bs_array").iter(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}},c.messaging_actors);c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_caml_obj","BanzaiODS","MercuryIDs","bs_js_primitive","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(){return g._("Usuario de Facebook")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=i[c];if(d!==void 0){i[c]=b("ImmutableObject").set(d,a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var b=i[a];if(b!==void 0){d[a]=b;return 0}else{e.push(a);return 0}});if(e.length===0){c(d);return null}else{var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=k[a];if(d!==void 0){var e=d[0],c={};e.forEach(function(b){var a=i[b];if(a!==void 0){c[b]=a;return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(){b("BanzaiODS").bumpEntityKey("messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=d[a];if(d!==void 0)return b("bs_curry")._1(c,d);else return 0})}function e(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(i[a]))}function q(a){return b("bs_curry")._2(l,k,a)}function r(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_js_primitive").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function s(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=e[a];d!==void 0&&(e[a]=b("ImmutableObject").set(d,{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).forEach(function(a){var c=e[a];if(c!==void 0){var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_js_primitive").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return r(a,d,j)}else return r(a,d,j)});return 0});return{remove:function(){f[0]=!0;if(g==null)return 0;else return q(g)}}}function t(a,c,d){return s(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function u(a,c){return t(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},0)}function v(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=e;f.getMulti=p;f.removeCallback=q;f.getBigImageMultiWithSize=s;f.getBigImageMulti=t;f.getOrderedBigImageMulti=u;f.getIDFromVanityOrFBID=v}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","MercuryIDs","MessengerParticipants.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("EventReminderConstants").EventGuestStates,h=b("EventReminderConstants").GuestStates;function a(a){this.$1=a,this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=new Map(),this.$6=new Map(),this.$7=new Map()}a.prototype.setAllMembers=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,h.INVITED);var d=[],e=[],f=[],g=[];for(var i in a){d.push(b("MercuryIDs").getParticipantIDFromUserID(i));var j=a[i];i===b("CurrentUser").getID()&&this.$2.set(c,j);var k={fbid:i,guestState:j,imageSrc:""};j===h.GOING?e.push(k):j===h.DECLINED?f.push(k):g.push(k)}j=e.concat(f,g);this.$3.set(c,j);this.$4.set(c,e);this.$7.set(c,!1);this.$8(c,d,j)};a.prototype.setAllMembersOfAssociatedEvent=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,g.INITIAL);var d=[],e=[],f=[],h=[];a.map(function(a){d.push(b("MercuryIDs").getParticipantIDFromUserID(a.participant_id));var i=a.participant_id.toString();a=a.event_status||g.INITIAL;i===b("CurrentUser").getID()&&this.$2.set(c,a);i={fbid:i,guestState:a,imageSrc:""};a===g.GOING?e.push(i):a===g.WATCHED?f.push(i):h.push(i)},this);a=e.concat(f,h);this.$3.set(c,a);this.$4.set(c,e);this.$5.set(c,f);this.$6.set(c,h);this.$7.set(c,!1);this.$8(c,d,a)};a.prototype.clearMembers=function(a){this.$2["delete"](a),this.$3["delete"](a),this.$4["delete"](a),this.$5["delete"](a),this.$6["delete"](a)};a.prototype.getAllMembers=function(a){return this.$3.get(a)};a.prototype.getGoingMembers=function(a){return this.$4.get(a)};a.prototype.getInterestedMembers=function(a){return this.$5.get(a)};a.prototype.getSelfGuestState=function(a){return!this.$2.has(a)?h.INVITED:this.$2.get(a)};a.prototype.getProfileImagesLoaded=function(a){return!!this.$7.get(a)};a.prototype.$8=function(a,c,d){b("MessengerParticipants.bs").getBigImageMulti(c,function(c){for(var e=0;e<d.length;e++)d[e].fbid&&(d[e].imageSrc=c[b("MercuryIDs").getParticipantIDFromUserID(d[e].fbid)]);this.$7.set(a,!0);this.$1.__emitChange()}.bind(this))};e.exports=a}),null);
__d("LightweightEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EVENT:"EVENT",CALL:"CALL",DIRECT_M:"DIRECT_M",M_REMINDER:"M_REMINDER",M_PERSONAL_REMINDER:"M_PERSONAL_REMINDER"})}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","EventRemindersGating","FluxStore","LightweightEventType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("EventReminderConstants").EventPlanType;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("EventReminderDispatcher")),this.$EventReminderStateStore1={},this.$EventReminderStateStore2={},this.$EventReminderStateStore3=new Map(),this.$EventReminderStateStore4=new Map()}a.prototype.getEvent=function(a,b){b=b||a;return this.$EventReminderStateStore1[a]?this.$EventReminderStateStore1[a][b]:void 0};a.prototype.getSingleEventByThreadID=function(a){return this.$EventReminderStateStore2[a]};a.prototype.getEventsByThreadID=function(a){return this.$EventReminderStateStore1[a]};a.prototype.getEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getAllMembers(b)};a.prototype.getSelfGuestState=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getSelfGuestState(b)};a.prototype.getNumOfGoingMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getGoingMembers(b);return a?a.length:0};a.prototype.getNumOfInterestedMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getInterestedMembers(b);return a?a.length:0};a.prototype.getProfileImagesLoaded=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return!a?!1:a.getProfileImagesLoaded(b)};a.prototype.shouldShowCTA=function(a,b,c){return!1};a.prototype.clearEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a&&a.clearMembers(b)};a.prototype.getTransformedEvent=function(event){if(event.room_type==="EVENT"){var a=event.event_place&&event.event_place.name,b=event.event_place&&event.event_place.address&&event.event_place.address.single_line_full_address;return{allowRSVP:!0,eventDate:event.start_timestamp,eventName:event.name,eventLocationName:a,eventLocationAddress:b,eventID:event.id.toString(),eventType:h.ASSOCIATED_EVENT,exists:!0}}return{allowRSVP:!!event.track_rsvp,eventDate:event.event_time,eventName:event.title,eventLocationName:event.location_name,eventLocationAddress:event.location_address,eventID:event.oid.toString(),eventType:event.event_type,exists:!0}};a.prototype.__onDispatch=function(a){__p&&__p();var c=b("EventReminderActions").Types,d=a.threadID,e=a.eventID||a.threadID;this.$EventReminderStateStore3.get(d)||this.$EventReminderStateStore3.set(d,new(b("EventReminderMembersMap"))(this));var f=this.$EventReminderStateStore3.get(d);this.$EventReminderStateStore1[d]===void 0&&(this.$EventReminderStateStore1[d]={});switch(a.type){case c.UPDATE_EVENT_REMINDER:var event=a.event;this.$EventReminderStateStore1[d][e]=this.getTransformedEvent(event);this.$EventReminderStateStore1[d][e].eventType!==b("LightweightEventType").M_REMINDER&&(this.$EventReminderStateStore2[d]=this.$EventReminderStateStore1[d][e]);this.$EventReminderStateStore1[d][e].allowRSVP&&(event.room_type==="EVENT"?f&&f.setAllMembersOfAssociatedEvent(a.participantsEventStatus,e):f&&f.setAllMembers(event.event_members,e));break;case c.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[d][e]&&(this.$EventReminderStateStore1[d][e].exists=!1,this.clearEventMembers(d,e));this.$EventReminderStateStore2[d]&&this.$EventReminderStateStore2[d].eventID===e&&(this.$EventReminderStateStore2[d].exists=!1);break;case c.CLEAR_ALL_REMINDERS:delete this.$EventReminderStateStore1[d];delete this.$EventReminderStateStore2[d];break}this.__emitChange()};a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercuryMessageRenderLocations",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});e.exports=a}),null);
__d("MessengerFormattingUtils",["cx","Newline.react","React","ReactFragment","UnicodeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return{offset:a[1].length,length:b("UnicodeUtils").strlen(a[2])+2,innerOffset:1,innerText:a[2]}}function c(a){return{offset:0,length:b("UnicodeUtils").strlen(a[0]),innerOffset:b("UnicodeUtils").strlen(a[1]),innerText:a[2]}}f={pattern:/([\s_~\'\"(]|^)\*(\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s_~\'\"(]|^)\*(?:\S(?:.*?\S)??)\*(?=[\s_~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("b",null,a)},getRangeInMatch:a,recursivelyFormat:!0};g={pattern:/([\s*~\'\"(]|^)_(\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*~\'\"(]|^)_(?:\S(?:.*?\S)??)_(?=[\s*~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("i",null,a)},getRangeInMatch:a,recursivelyFormat:!0};var h={pattern:/([\s*_\'\"(]|^)~(\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_\'\"(]|^)~(?:\S(?:.*?\S)??)~(?=[\s*_,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("s",null,a)},getRangeInMatch:a,recursivelyFormat:!0};a={pattern:/([\s*_~\'\"(]|^)`(\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/g,nonCapturingPattern:/(?:[\s*_~\'\"(]|^)`(?:\S(?:.*?\S)??)`(?=[\s\w*_~,.;:!?\'\")]|$)/,formatter:function(a){return b("React").createElement("code",null,a)},getRangeInMatch:a,recursivelyFormat:!1};var i={pattern:/(```)([\s\S]+?)```/g,nonCapturingPattern:/(```)([\s\S]+?)```/,formatter:function(a){return b("React").createElement("code",null,a)},getRangeInMatch:c,recursivelyFormat:!1},j=function(a){a={blockquote1:b("React").createElement("blockquote",{className:"_pye"},b("React").createElement("div",{className:"_pyf"}),a),blockquote2:b("React").createElement(b("Newline.react"),null)};return b("ReactFragment").create(a)};c={pattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*?((\r\n)|\r|\n|$)/gm,nonCapturingPattern:/(^>>> ?)((.|(\r\n)|\r|\n)*?\S(.|(\r\n)|\r|\n)*?)^<<<\s*((\r\n)|\r|\n|$)/m,formatter:j,getRangeInMatch:c,recursivelyFormat:!0};j={pattern:/((^> )(.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/gm,nonCapturingPattern:/(^> (.*\S.*)((\r\n)|\r|\n)?)(^> ?(.*)((\r\n)|\r|\n)?)*/m,formatter:j,getRangeInMatch:function(a){var c=a[0],d=b("UnicodeUtils").strlen(c);a=b("UnicodeUtils").strlen(a[2]);return{offset:0,length:d,innerOffset:a,innerText:c.substring(a,d)}},recursivelyFormat:!0,getAdditionalInnerRanges:function(a){return m(a.innerText,[k]).map(function(b){return babelHelpers["extends"]({},b,{offset:b.offset+a.innerOffset,innerOffset:b.innerOffset+a.innerOffset})})}};var k={pattern:/(^> ?)(.*?$)/gm,nonCapturingPattern:/^> ?(.*?$)/m,formatter:function(a){return a},getRangeInMatch:function(a){return{offset:0,length:b("UnicodeUtils").strlen(a[0]),innerOffset:b("UnicodeUtils").strlen(a[1]),innerText:a[2]}},recursivelyFormat:!0},l=[f,g,h,i,a];b("gkx")("678602")&&(l.push(c),l.push(j));function d(a,b){b===void 0&&(b=l);for(var c=0;c<b.length;c++){var d=b[c].nonCapturingPattern;if(d.test(a))return!0}return!1}function m(a,c){__p&&__p();c===void 0&&(c=l);var d=[];for(var e=0;e<c.length;e++){var f=c[e];f.pattern.lastIndex=0;var g=void 0;while((g=f.pattern.exec(a))!=null){var h=f.getRangeInMatch(g),i=a.substr(0,g.index+h.offset);i=b("UnicodeUtils").strlen(i);i={offset:i,length:h.length,innerText:h.innerText,innerOffset:i+h.innerOffset,formatter:f.formatter,recursivelyFormat:f.recursivelyFormat};h=f.getAdditionalInnerRanges?f.getAdditionalInnerRanges(i):[];d.push(i);d=d.concat(h)}}return d}e.exports={defaultFormatConfigs:l,hasMatch:d,getRanges:m,formatConfigs:{bold:f,italic:g,strikethrough:h,blockcode:i,code:a,blockquote:c,multipleInlineBlockquote:j,singleInlineBlockquote:k}}}),null);
__d("MessengerMathUtils",["UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2,h=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,i=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function a(a){return h.test(a)}function c(a){return a.substring(g,a.length-g)}function d(a){i.lastIndex=0;return i.test(a)}function f(a,c){__p&&__p();c===void 0;c=[];i.lastIndex=0;var d;while((d=i.exec(a))!==null){var e=a.substring(0,d.index);e=b("UnicodeUtils").strlen(e);c.push({offset:e,length:b("UnicodeUtils").strlen(d[0]),math:!0})}return c}function j(a){var b=a.length,c=0,d=0;for(var e=0;e<b;e++)a[e]==="\\"?a.slice(e,e+6)==="\\begin"?(c+=2,d=Math.max(d,c)):a.slice(e,e+4)==="\\end"?c-=2:e++:a[e]==="{"?(c++,d=Math.max(d,c)):a[e]==="}"&&c--;return d}e.exports={MATH_DELIMITER_LENGTH:g,isMathBlock:a,hasInlineMath:d,getInlineMathRanges:f,getMathBlockInner:c,getMaxBraceDepth:j}}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function(a,b,c,d,e,f){"use strict";a=b("EmojiStaticConfig").sizeMap;c=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"});d={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"};f=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"});b=[983040];var g="hot_emoji_source",h="hot_emoji_size",i="emoji_like",j="\ud83d\udc4d",k=[128077];e.exports={FB_THUMBS_UP_EMOJI:b,size:c,sizeMap:a,sizeMapTransfer:d,source:f,SOURCE_TAG_PREFIX:g,TAG_PREFIX_NEW:h,TAG_PREFIX_OLD:i,THUMBS_UP_EMOJI:j,THUMBS_UP_EMOJI_CODES:k}}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("MessengerEmojiTransitionMapping.bs",["bs_caml_array","EmojiFormat.bs","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f3cc":case"1f46e":case"1f46f":case"1f471":case"1f473":case"1f477":case"1f481":case"1f482":case"1f486":case"1f487":case"1f575":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64d":case"1f64e":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"26f9":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){if(a===9792)return!0;else return a===9794}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-2|0);else return i(a.slice(0,a.length-3|0))}else return a}function n(a,b){__p&&__p();if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([8205,b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function a(a){return n(a,9792)}function c(a){return m(b("SkinToneEmoji.bs").removeTone(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a))))}function e(a){a=b("EmojiFormat.bs").codeArrayToCodeString(m(b("SkinToneEmoji.bs").removeTone(a)));switch(a){case"1f46a":case"1f48f":case"1f491":return!0;default:return!1}}var o=65039,p=9792,q=9794,r=8205;f.emoji_modifier_code=o;f.gender_female=p;f.gender_male=q;f.zero_join=r;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isGenderModifier=k;f.getGender=l;f.removeGender=m;f.applyGender=n;f.makeFemale=a;f.removeAllModifiers=c;f.hasGender=d;f.isBlacklisted=e}),null);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","FBEmojiAliases","Image.react","MessengerEmojiTransitionMapping.bs","MessengerHotlikeEmoji.bs","MessengerSupportedEmoji","React","SupportedFBEmoji","Utf16","gkx","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/_fe0f/g,i=new RegExp("(\r\n|[ \r\n]|s)");a={getSupportedEmojiKey:function(a){__p&&__p();if(!a)return null;var c=null,d=this.parse(a);if(d.length===1&&d[0].length===a.length){a=d[0].emoji.map(function(a){return b("Utf16").decode(a)});c=a.map(function(a){return a.toString(16)}).join("_").replace(h,"")}if(c){d=b("FBEmojiAliases")[c];d&&(c=d.replace(h,""))}return this.isSupportedEmojiKey(c)?c:null},isSupportedEmoji:function(a){return!!this.getSupportedEmojiKey(a)},isSupportedEmojiKey:function(a){if(!a)return!1;return!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?!!b("SupportedFBEmoji")[function(a){var c=b("FBEmojiAliases")[a];return c?c.replace(h,""):a}(a)]:!!b("MessengerSupportedEmoji").emoji[a]},isMessengerSupportedEmojiKey:function(a){return!!(a&&b("MessengerSupportedEmoji").emoji[a])},getSupportedEmojiCodesArray:function(a){__p&&__p();if(!a)return null;var c=this.parse(a);if(c.length===1&&c[0].length===a.length){a=c[0].emoji.map(function(a){return b("Utf16").decode(a)});c=a.map(function(a){return a.toString(16)}).join("_").replace(h,"");if(this.isSupportedEmojiKey(c))return a}return null},getEmojiKeyFromCodes:function(a){a=a.map(function(a){return a.toString(16)}).join("_").replace(h,"");var c=b("FBEmojiAliases")[a];return c?c.replace(h,""):a},getClassSizeMap:function(){var a,c=b("EmojiLikeConstants").size;return a={},a[c.XSMALL]="_2560",a[c.SMALL]="_1ifu",a[c.MEDIUM]="_19_r",a[c.LARGE]="_19_s",a},getEmojiMatchObj:function(a){a=this.parse(a,1);if(a.length!==1)return null;var c=a[0].emoji,d=a[0].emoji.map(function(a){return b("Utf16").decode(a)});b("MessengerEmojiTransitionMapping.bs").hasGender(d)&&!b("MessengerEmojiTransitionMapping.bs").getGender(d)&&(d=b("MessengerEmojiTransitionMapping.bs").makeFemale(d));d=d.map(function(a){return a.toString(16)}).join("_").replace(h,"");return{emoji_key:d,emoji_str:c.join(""),is_supported:this.isSupportedEmojiKey(d),offset:a[0].offset,length:a[0].length}},getNewEmojiData:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[c];c=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):b("EmojiImageURL").getFBEmojiURL(a,c);return{emoji:b("React").createElement(b("Image.react"),{className:d,src:c}),emoji_key:a,url:c}},getHotLikeEmojiDataTransition:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a,!0);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);var e=c===b("EmojiLikeConstants").size.MEDIUM?b("EmojiLikeConstants").size.LARGE:c;b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[e];e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):b("EmojiImageURL").getFBEmojiURL(a,c);return{emoji:b("React").createElement(b("Image.react"),{className:d,src:e}),emoji_key:a,url:e}},getHotLikeEmojiData:function(a,c){__p&&__p();if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var d=this.getClassSizeMap();c=this.transferSize(c);var e=c===b("EmojiLikeConstants").size.MEDIUM?b("EmojiLikeConstants").size.LARGE:c;b("EmojiLikeConstants").sizeMap[c]||(c=b("EmojiLikeConstants").size.XSMALL);d=b("joinClasses")(d[c],"_1ift");c=b("EmojiLikeConstants").sizeMap[e];e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?b("EmojiImageURL").getMessengerURL(a,c):b("EmojiImageURL").getFBEmojiURL(a,c);return{emoji:b("React").createElement(b("Image.react"),{className:d,src:e}),emoji_key:a,url:e}},getEmojiOnlyContents:function(a){__p&&__p();a=a||"";var c=[];while(a.length>0&&a.trim().length>0){var d=i.exec(a),e="";while(d&&d.length&&d.index===0)e+=d[0],a=a.replace(i,""),d=i.exec(a);e.length>0&&c.push({text:e});d=b("EmoticonEmojiList").noncapturingRegexp.exec(a);if(d&&d.index===0){e=b("EmoticonEmojiList").names[d[1]];e=b("EmoticonEmojiList").emote2emojis[e];c.push({emojiKey:e,text:d[1]});a=a.replace(d[1],"")}else{d=this.getEmojiMatchObj(a);if(d&&d.is_supported)c.push({emojiKey:d.emoji_key,text:d.emoji_str}),a=a.replace(d.emoji_str,"");else return null}}return c},getUrl:function(a,c){a=a.replace(h,"");c=this.transferSize(c);if(b("gkx")("678639")&&!b("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)){var d=b("FBEmojiAliases")[a];d&&(a=d.replace(h,""));return!this.isSupportedEmojiKey(a)?null:b("EmojiImageURL").getFBEmojiURL(a,b("EmojiLikeConstants").sizeMap[c])}return!b("MessengerSupportedEmoji").emoji[a]?null:b("EmojiImageURL").getMessengerURL(a,b("EmojiLikeConstants").sizeMap[c])},containsEmoji:function(a){return this.parse(a,1).length===1},parse:function(a,c){return b("EmojiRenderer").parse(a,c)},transferSize:function(a){return b("EmojiLikeConstants").sizeMapTransfer[a]||a}};e.exports=a}),null);
__d("P2PTriggersUtils",["P2PGKValues"],(function(a,b,c,d,e,f){var g=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/;a={canSeeTriggers:function(a){return!b("P2PGKValues").P2PEnabled?!1:!0},getMatches:function(a){return a.match(g)}};e.exports=a}),null);
__d("RedditLinkMatcher",[],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("(^|\\s)(\\/[ru]\\/\\w{1,21})(?:\\b)","i");a=function(a){a=g.exec(a);return a===null?null:{lnk:a[2],idx:a.index+a[1].length}};b=function(a){return g.exec(a)!==null};c={match:a,isMatch:b};e.exports=c}),null);
__d("RedditLinkRanges",["RedditLinkMatcher","UnicodeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={REDDIT_PREFIX:"https://old.reddit.com",get:function(a,c){__p&&__p();c===void 0&&(c=0);var d=a.substr(c),e=b("RedditLinkMatcher").match(d);if(!e)return[];var f=e.lnk;e=e.idx;d=b("UnicodeUtils").strlen(d.substr(0,e));c+=d;e="";switch(f[1].toLowerCase()){case"r":e=this.REDDIT_PREFIX+f;break;case"u":e=this.REDDIT_PREFIX+f;break;default:return[]}d=f.length;f=[{offset:c,length:d,entity:{url:e}}];return f.concat(this.get(a,c+d))}};e.exports=a}),null);
__d("TextWithEntitiesMetadataType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,CONCEPT:1,INTENT:2})}),null);
__d("shouldAddMRefParam",["isFacebookURI"],(function(a,b,c,d,e,f){a=function(a){if(!b("isFacebookURI")(a)||a.getFragment())return!1;return/^\/events\//.test(a.getPath())?!0:!1};e.exports=a}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","CurrentUser","DateConsts","EmojiRenderer","EmoticonEmojiList","EmoticonsList","EventRemindersGating","EventReminderStateStore","JSResource","Link.react","LinkRanges","MercuryIDs","MercuryMessageRenderLocations","MessengerContactActions.bs","MessengerFormattingUtils","MessengerMathUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","RedditLinkMatcher","RedditLinkRanges","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","requireWeak","shouldAddMRefParam"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("LinkRanges").module,k=b("MessengerContactActions.bs").actions;c=b("React").PropTypes;var l=function(){l=b("emptyFunction"),b("ifRequired")("ChatAppActions",function(a){a.setInitialDisplayDone()})};d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.interpolator=function(a,c){__p&&__p();if(c.className)return b("React").createElement("span",{className:c.className},a);if(c.math)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),body:this.$4(a),fallbackBody:a,inline:!0,stripDelimiters:!0,className:"_1e4d _1e4e"});if(c.id){var d={};!b("CurrentUser").isWorkUser()&&!this.props.isFromViewer&&this.props.threadCustomColor&&(d.color=this.props.threadCustomColor);var e=this.props.onContactSelect,f=this.props.threadID?b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)===c.id:!1,g=new(b("URI"))("/ajax/hovercard/user.php").setQueryData({id:c.id}),h=b("gkx")("678279");g=b("React").createElement(b("Link.react"),{className:"_ih-"+(b("CurrentUser").isWorkUser()&&c.id===b("CurrentUser").getID()?" _1zle":""),href:f?"#":c.url,"data-hovercard":h?g:null,style:d,onClick:e&&!f?function(a){this.$3(e,c,a)}.bind(this):b("emptyFunction")},a);b("gkx")("678278")&&!f&&e&&!h&&(typeof a==="string"&&(c.contactName=a&&a.replace("@","")),g=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:g,avatar:g,contact:c,showSendMessageItem:!0,onAction:this.props.onContactSelect}));return g}if(c.formatter)if(c.recursivelyFormat){d=this.renderBody(c.innerText,!0,c.innerOffset);return c.formatter(d)}else return c.formatter(c.innerText);if(c.entity&&c.entity.url){f=new(b("URI"))(c.entity.url.replace(/#+$/,""));b("shouldAddMRefParam")(f)&&f.addQueryData({__mref:"mb"});h=f.toString();if(b("URI").isValidURI(h))return b("React").createElement(b("Link.react"),{href:{url:h,shimhash:c.entity.shimhash},s:c.entity.s,target:"_blank"},a);else return a}if(!c.entity){g=typeof c.type==="number"?c.type:b("TextWithEntitiesMetadataType")[c.type];switch(g){case b("TextWithEntitiesMetadataType").NONE:return b("React").createElement("span",{className:"_2y9",title:JSON.stringify(c.data)},a);case b("TextWithEntitiesMetadataType").CONCEPT:return this.renderConceptMetadata(a,c.data);case b("TextWithEntitiesMetadataType").INTENT:return this.renderIntentMetadata(a,c.data);default:return a}}return a}.bind(this),this.state=this.parseMessageBody(a)}a.prototype.UNSAFE_componentWillReceiveProps=function(a){(this.props.body!==a.body||this.props.metaRanges!==a.metaRanges||this.props.ranges!==a.ranges)&&this.setState(this.parseMessageBody(a))};a.prototype.parseMessageBody=function(a){__p&&__p();var c=(a.body||"").replace(/\s+$/,""),d=this.$1(a.metaRanges||[]);d={normalizedBody:c,isEncrypted:!1,isMathBlock:!1,isRichText:!1,ranges:[],filteredMetaRanges:d};if(c.length===0)return d;if(c.startsWith("?OTR")){d.isEncrypted=!0;return d}if(b("MessengerMathUtils").isMathBlock(c)){d.isMathBlock=!0;return d}var e=a.ranges,f=a.metaRanges;f=e&&e.length||f&&f.length||b("EmoticonsList").noncapturingRegexp.test(c)||b("EmojiRenderer").containsEmoji(c)||b("URLMatcher").match(c)||j&&j.hasMatch(c)||b("RedditLinkMatcher").isMatch(c)||this.$2(c,a)||b("MessengerSupportedEmojiUtils").containsEmoji(c)||b("EmoticonEmojiList").noncapturingRegexp.test(c)||b("MessengerFormattingUtils").hasMatch(c)||b("MessengerMathUtils").hasInlineMath(c);if(!f)return d;d.isRichText=!0;e&&e.length===1&&e[0].className==="__in"&&(e=b("getURLRanges")(c).concat(e));e=e||[];e=e.concat(b("getURLRanges")(c));j&&(e=e.concat(j.get(c)));e=e.concat(b("RedditLinkRanges").get(c));e=e.concat(b("MessengerFormattingUtils").getRanges(c));e=e.concat(b("MessengerMathUtils").getInlineMathRanges(c));d.ranges=e.filter(function(a){return a!=void 0});return d};a.prototype.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};a.prototype.$3=function(a,c,d){b("gkx")("678278")?d.preventDefault():a(k.MESSAGE,c,d)};a.prototype.$4=function(a){if(this.props.isFromViewer)return"\\color{#fff}{"+b("MessengerMathUtils").getMathBlockInner(a)+"}";else return b("MessengerMathUtils").getMathBlockInner(a)};a.prototype.renderConceptMetadata=function(a,b){if(!b)return a;return b.intent_name||b.name?this.renderIntentMetadata(a,b):a};a.prototype.renderIntentMetadata=function(a,c){__p&&__p();if(!c)return a;var d=c.intent_name||c.name;switch(d){case"request_time":return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});case"timestamp":if(this.$5(c.value)&&b("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null,a),data:c,text:a,threadID:this.props.threadID});return a;default:return a}};a.prototype.renderIntentCTA=function(a){__p&&__p();if(a){var c=a.intent_name||a.name;switch(c){case"request_time":return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ServicesRequestTimeIntentCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,isFromViewer:this.props.isFromViewer,threadID:this.props.threadID});case"create_event":b("requireWeak")("EventReminderActionsLogger",function(a){a.logTriggerOnTriggerCTA()});c=this.props.threadID;var d=c&&this.$5(a.timestamp)&&b("EventReminderStateStore").shouldShowCTA(c,a.confidence);if(!d)return null;if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,threadID:c});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("span",null),data:a,threadID:c})}}return null};a.prototype.renderCTAs=function(a){var c=null;if(a.length>0){a=a[0]||{};var d=typeof a.type==="number"?a.type:b("TextWithEntitiesMetadataType")[a.type];switch(d){case b("TextWithEntitiesMetadataType").CONCEPT:case b("TextWithEntitiesMetadataType").INTENT:c=this.renderIntentCTA(a.data);break}}return c};a.prototype.renderBody=function(a,c,d){__p&&__p();c===void 0&&(c=!1);d===void 0&&(d=0);var e=this.state,f=e.isRichText,g=e.ranges;e=e.filteredMetaRanges;var h=b("UnicodeUtils").strlen(a);if(!f)return b("React").createElement("span",{className:this.props.className},a);c&&(g=g.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}),e=e.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}));f={className:this.props.className,interpolator:this.interpolator,metaRanges:e,ranges:g,renderEmoji:!0,renderEmoticons:!0,text:a};if(this.$2(a)){e=b("React").createElement(b("TextWithEntities.react"),f);return b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:e,bootloadLoader:b("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},f,{getMessengerEmote:this.$6,isSupportedEmoji:this.$7,threadID:this.props.threadID}))}g=b("React").createElement(b("MessengerTextWithEntities.react"),f);if(c)return g;a=this.renderCTAs(this.props.metaRanges||[]);return!a?g:b("React").createElement("span",null,g,a)};a.prototype.render=function(){__p&&__p();var a=this.state,c=a.normalizedBody,d=a.isEncrypted;a=a.isMathBlock;if(c.length===0)return null;l();if(this.props.plainText)return b("React").createElement("span",null,c);else if(d)return b("React").createElement("span",{className:"_89h"},h._("[mensaje encriptado]"));else if(a)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").createElement("div",null,c),body:this.$4(c),fallbackBody:c,stripDelimiters:!0,className:"_1e4d"});else return this.renderBody(c)};a.prototype.$7=function(a){return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)};a.prototype.$6=function(a){a=b("EmoticonEmojiList").emote2emojis[a];return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)?a:null};a.prototype.$5=function(a){a=new Date(a*b("DateConsts").MS_PER_SEC);var c=new Date(Date.now()+5*b("DateConsts").MS_PER_MIN),d=new Date(new Date().setFullYear(new Date().getFullYear()+1));return a>c&&a<d};a.prototype.$1=function(a){var b=a.filter(function(a){return a.data&&(a.data.intent_name==="create_event"||a.data.name==="create_event")});return b.length!==0?b:a};a.prototype.$2=function(a,c){c===void 0&&(c=this.props);return!!(c.threadID&&b("P2PTriggersUtils").canSeeTriggers(c.threadID)&&b("P2PTriggersUtils").getMatches(a))};a.propTypes={body:c.string,customLike:c.object,isFromViewer:c.bool,metaRanges:c.array,ranges:c.array,threadCustomColor:c.string,threadID:c.string,onContactSelect:c.func,renderLocation:c.oneOf([b("MercuryMessageRenderLocations").CHAT,b("MercuryMessageRenderLocations").MESSENGER,b("MercuryMessageRenderLocations").PAGES])};e.exports=a}),null);
__d("MercuryErrorType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercuryMessageDeliveryState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});e.exports=a}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function(a,b,c,d,e,f){"use strict";var g="fbid:"+b("CurrentUser").getID();a={getID:function(){return g},isViewer:function(a){b("MercuryAssert").isParticipantID(a);return a===g}};e.exports=a}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}function c(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.isSomeTrue=b;f.optionBoolToBool=c}),null);
__d("bs_js_json",["bs_block","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=typeof a;if(c==="string")return b("bs_block").__(0,[a]);else if(c==="number")return b("bs_block").__(1,[a]);else if(c==="boolean")if(a===!0)return 1;else return 0;else if(a===null)return 2;else if(Array.isArray(a))return b("bs_block").__(3,[a]);else return b("bs_block").__(2,[a])}function c(a,b){switch(b){case 0:return typeof a==="string";case 1:return typeof a==="number";case 2:if(a!==null&&typeof a==="object")return!Array.isArray(a);else return!1;case 3:return Array.isArray(a);case 4:return typeof a==="boolean";case 5:return a===null}}function d(a){if(typeof a==="string")return a}function e(a){if(typeof a==="number")return a}function g(a){if(typeof a==="object"&&!Array.isArray(a)&&a!==null)return b("bs_js_primitive").some(a)}function h(a){if(Array.isArray(a))return a}function i(a){if(typeof a==="boolean")return a}function j(a){if(a===null)return null}f.classify=a;f.test=c;f.decodeString=d;f.decodeNumber=e;f.decodeObject=g;f.decodeArray=h;f.decodeBoolean=i;f.decodeNull=j}),null);
__d("MessengerMessage.bs",["URI","bs_array","Utils.bs","bs_js_json","bs_caml_obj","bs_js_primitive","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function c(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function d(a){__p&&__p();var c=a.ranges;if(c==null)return 0;else{c=b("bs_array").map(function(c){__p&&__p();var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(b("URI"))(e);e=b("isMessengerDotComURI")(b("URI").getRequestURI());var f=d.getDomain();if(e&&(f==null||f===""))e=1;else return c;if(e===1)return Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}},c);Object.assign(a,{ranges:c});return 0}}function e(){return!0}function g(a){return a.filter(function(){return!0})}function h(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function i(a){return b("bs_caml_obj").caml_equal(a.author,b("MercuryViewer").getID())}function j(a){return!i(a)}function k(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function l(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function m(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function n(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function o(a){a=a.error_data;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.description)}function p(a,c){__p&&__p();if(n(a))return b("MercuryMessageDeliveryState").ERROR;else if(k(a))return b("MercuryMessageDeliveryState").SENDING;else if(l(a)){a=a.timestamp<=c;if(a)return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").SENT}else return b("MercuryMessageDeliveryState").UNKNOWN}function q(a){__p&&__p();try{a=b("bs_js_primitive").some(JSON.parse(a))}catch(b){a=void 0}if(a!==void 0){a=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(a));if(typeof a==="number"||a.tag!==2)return void 0;else{a=a[0].persona;if(a!==void 0){a=b("bs_js_json").classify(a);if(typeof a==="number"||a.tag!==2)return void 0;else return b("bs_js_primitive").some(a[0])}else return void 0}}}function r(a){__p&&__p();if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=q(a);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);var c=a.id,d=a.name;a=a.profile_picture_url;if(c!==void 0&&d!==void 0&&a!==void 0)return{id:c,name:d,profile_picture_url:a};else return null}else return null}}}function s(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function t(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(b==null||!b)b=1;else return!1;if(b===1)if(!(c==null)||!(d==null)||a)return!0;else return!1}f.isLocalMessage=a;f.isTitanMessage=c;f.finalizeRanges=d;f.canSaveMessage=e;f.getSavedMessages=g;f.shouldSortForPayloadSource=h;f.isOutbound=i;f.isInbound=j;f.isSending=k;f.isSent=l;f.compare=m;f.hasError=n;f.getError=o;f.getDeliveryState=p;f.getPersonaData=q;f.getPersona=r;f.isErrorLogMessage=s;f.hasServerTimestamp=t}),null);
__d("MercuryErrorInfo",["fbt","MercuryErrorType","MessengerMessage.bs"],(function(a,b,c,d,e,f,g){var h={getMessage:function(a){var b="";h.isConnectionError(a)?(b=g._("Este mensaje no se ha enviado.").toString(),h.isTransient(a)&&(b=g._("{message} Comprueba tu conexi\u00f3n a internet y haz clic para intentarlo de nuevo.",[g._param("message",b)]).toString())):(a&&a.description?b=a.description:b=g._("No se ha podido enviar este mensaje.").toString(),h.isTransient(a)&&(b=g._("{message} Haz clic para volver a realizar el env\u00edo.",[g._param("message",b)]).toString()));return b},isConnectionError:function(a){return a&&a.type==b("MercuryErrorType").TRANSPORT?a.code===1001||a.code===1004||a.code===1006:!1},isTransient:function(a){return a&&a.is_transient},isPermanent:function(a){return a?!this.isTransient(a):!1},hasErrorStatus:function(a){return b("MessengerMessage.bs").hasError(a)}};e.exports=h}),null);
__d("MercuryTypeaheadConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_NON_FRIENDS_EXTRA_FETCH:3,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_USERS_MAX:13,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("MessengerDispatcher",["Dispatcher_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("Dispatcher_DEPRECATED"))()}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MercuryTypeaheadConstants","MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),i=b("LogHistory").getInstance("messenger_actions"),j={Types:h,changeDetailView:function(a){l(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){l(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectThread:function(a,c){__p&&__p();if(c===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE){!a&&g(0,5146);c=b("MercuryIDs").getUserIDFromThreadID(a);!c&&g(0,5147);var d=new(b("URI"))(),e=d.getQualifiedURI().getSubdomain();d.setDomain("facebook.com").setSubdomain(e).setPath("/"+c).setProtocol("https");window.open(d,"_blank");return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:h.SELECT_THREAD,threadID:a});l(function(c){return c.activeThreadID!==a?{activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null}:null})},changeState:function(a){b("MessengerDispatcher").dispatch({type:h.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a){l(function(b){return b.folder!==a?{folder:a}:null})},changeFilter:function(a){l(function(b){return b.filter!==a?{filter:a}:null})},changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQueryAll:function(a){l(function(c){return c.queryAll!==a?{query:a,masterView:b("MessengerView").MASTER.SEARCH}:null})},changeMid:function(a){l(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){l(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){i.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){i.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:j.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:j.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(b("URI"))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("JSSet.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Array.from(a.values())}f.values=a}),null);
__d("MercuryTagHelper",[],(function(a,b,c,d,e,f){"use strict";a={get:function(a,b){a=a.find(function(a){return a.startsWith(b)});return a==null?a:a.substr(a.indexOf(":")+1)}};e.exports=a}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","MercuryTagHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){!a.tags?a.tags=[g(b)]:a.tags.push(g(b));return a}function g(a){var c=b("EmojiLikeConstants").TAG_PREFIX_NEW;return c+":"+a}function c(a,b){!a.tags?a.tags=[h(b)]:a.tags.push(h(b));return a}function h(a){return b("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+a}function d(a){return i(a)!=null}function i(a){if(!a.tags)return null;var c=b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_NEW);return c?c:b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_OLD)}e.exports={getEmojiSize:i,isEmojiLike:d,setEmojiSize:a,setEmojiSource:c}}),null);
__d("MercuryAttachment",["cx","EmojiLikeUtils","MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType","StoryAttachmentStyle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){return a===Object(a)},i="_1c_u",j=new Set([b("MercuryAttachmentType").ANIMATED_IMAGE,b("MercuryAttachmentType").PHOTO,b("MercuryAttachmentType").VIDEO,b("MercuryAttachmentType").THIRDPARTYSTICKER]),k={getAttachIconClass:function(a){__p&&__p();switch(a){case b("MercuryAttachmentContentType").PHOTO:return"_y2-";case b("MercuryAttachmentContentType").VIDEO:return"_y2_";case b("MercuryAttachmentContentType").MUSIC:return"_y30";case b("MercuryAttachmentContentType").VOICE:return"_y31";case b("MercuryAttachmentContentType").TEXT:return"_y32";case b("MercuryAttachmentContentType").PDF:return"_1k9k";case b("MercuryAttachmentContentType").RICHTEXT:return"_1k9l";case b("MercuryAttachmentContentType").SPREADSHEET:return"_1k9p";case b("MercuryAttachmentContentType").PRESENTATION:return"_1k9r";case b("MercuryAttachmentContentType").ARCHIVE:return"_1k9s";case b("MercuryAttachmentContentType").MSWORD:return"_y33";case b("MercuryAttachmentContentType").MSXLS:return"_y34";case b("MercuryAttachmentContentType").MSPPT:return"_y35"}return"_y36"},getAttachIconClassByMime:function(a){return this.getAttachIconClass(this.getAttachTypeByMime(a))},getAttachTypeByMime:function(a){__p&&__p();if(!a)return b("MercuryAttachmentContentType").UNKNOWN;if(a.startsWith("image"))return b("MercuryAttachmentContentType").PHOTO;else if(a.startsWith("video"))return b("MercuryAttachmentContentType").VIDEO;else if(a.startsWith("audio"))return b("MercuryAttachmentContentType").MUSIC;else if(a.startsWith("text/plain"))return b("MercuryAttachmentContentType").TEXT;else if(a=="text/pdf"||a=="application/pdf"||a=="application/vnd.pdf"||a=="application/x-pdf")return b("MercuryAttachmentContentType").PDF;else if(a=="text/richtext"||a=="application/rtf"||a=="application/x-iwork-pages-sffkey")return b("MercuryAttachmentContentType").RICHTEXT;else if(a=="text/csv"||a=="application/x-iwork-numbers-sffkey")return b("MercuryAttachmentContentType").SPREADSHEET;else if(a=="application/x-iwork-keynote-sffkey")return b("MercuryAttachmentContentType").PRESENTATION;else if(a=="application/vnd.ms-cab-compressed"||a=="application/x-7z-compressed"||a=="application/x-ace-compressed"||a=="application/x-apple-diskimage"||a=="application/x-compress"||a=="application/x-compressed"||a=="application/x-gzip"||a=="application/x-rar-compressed"||a=="application/x-tar"||a=="application/x-zip-compressed"||a=="application/zip")return b("MercuryAttachmentContentType").ARCHIVE;else if(a=="application/msword"||a.startsWith("application/vnd.ms-word")||a.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return b("MercuryAttachmentContentType").MSWORD;else if(a.startsWith("application/vnd.ms-excel")||a.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return b("MercuryAttachmentContentType").MSXLS;else if(a.startsWith("application/vnd.ms-powerpoint")||a.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return b("MercuryAttachmentContentType").MSPPT;else return b("MercuryAttachmentContentType").UNKNOWN},convertRaw:function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(e.attach_type===b("MercuryAttachmentType").PHOTO)c.push(e);else if(e.filename){var f=k.getAttachTypeByMime(e.filetype),g={};g.attach_type=b("MercuryAttachmentType").FILE;g.name=e.filename;g.icon_type=f;g.url="";c.push(g)}}return c},get:function(a){__p&&__p();var c=[];a.attachments?c=a.attachments:a.raw_attachments&&(c=this.convertRaw(a.raw_attachments));var d=b("EmojiLikeUtils").getEmojiSize(a);d&&(c=c.concat([{attach_type:b("MercuryAttachmentType").EMOJI_LIKE,size:d}]));if(!(a.attachments&&a.attachments.length>0)){if(a.sticker_id)return c.concat([{attach_type:b("MercuryAttachmentType").STICKER}]);if(a.preview_attachments&&a.preview_attachments.length>0)return c.concat(a.preview_attachments)}return c},resizeContain:function(a,b){var c=a.width/a.height,d=b.width/b.height;if(d<c)return{width:Math.ceil(Math.min(a.height*d,b.width)),height:Math.ceil(Math.min(a.height,b.height))};else return{width:Math.ceil(Math.min(a.width,b.width)),height:Math.ceil(Math.min(a.width/d,b.height))}},isBubblePreferred:function(a){return this.isFileAttachment(a)},isPhotoAttachment:function(a){return!!(a.attach_type==b("MercuryAttachmentType").PHOTO||a.attach_type==b("MercuryAttachmentType").ANIMATED_IMAGE||a.attach_type==b("MercuryAttachmentType").THIRDPARTYSTICKER||a.attach_type==b("MercuryAttachmentType").FILE&&a.preview_url)},isPhotoGroupAttachment:function(a){return j.has(a.attach_type)},isSinglePhotoGroupAttachment:function(a){return!!(a.attachments&&a.attachments.length===1&&a.attachments[0]&&this.isPhotoGroupAttachment(a.attachments[0]))},isVideoAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").VIDEO},isShareAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").SHARE},isFileAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").FILE},isErrorAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").ERROR},isStickerAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").STICKER},isEmojiLikeAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").EMOJI_LIKE},isVoiceAttachment:function(a){return!a.metadata?!1:a.metadata.type===b("MercuryAudioType").AudioClip||a.metadata.type===b("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function(a){return!!a.app_attribution},isLightweightActionAttachment:function(a){return!!(k.isShareAttachment(a)&&a.share&&a.share.target!=null&&a.share.target.lwa_type!=null)},isSingleVideoAttachment:function(a){a=this.get(a).filter(h).filter(function(a){return this.isVideoAttachment(a)}.bind(this));return a.length===1},isSharedVideoAttachment:function(a){a=a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list.indexOf(b("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSharedVideoAttachmentMessage:function(a){a=this.get(a).filter(h).filter(function(a){return this.isSharedVideoAttachment(a)||this.isGenieSharedVideoAttachment(a)}.bind(this));return a.length===1},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(i);return a&&a.length?a[0]:b}};e.exports=k}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={renderFilteredContent:function(a){if(a.is_filtered_content_bh)return g._("Este mensaje se ha eliminado porque incluye un enlace que infringe nuestras Normas comunitarias.");if(a.is_filtered_content_account)return g._("Este mensaje se ha eliminado temporalmente porque la cuenta del remitente requiere verificaci\u00f3n.");if(a.is_filtered_content_quasar)return g._("Este mensaje se ha eliminado porque incluye contenido bloqueado o da\u00f1ino.");return a.is_filtered_content_invalid_app?g._("Este mensaje se ha eliminado porque la aplicaci\u00f3n desde la que se env\u00eda est\u00e1 bloqueada y no puede enviar mensajes."):g._("Este mensaje se ha eliminado temporalmente porque es necesario verificar la cuenta del remitente, o se ha identificado como abusiva.")}};e.exports=a}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessagingTag").UNREAD;d=b("MessagingTag").GROUPS;function a(){return[g]}function c(a){return a===g}e="all";f.all=e;f.unread=g;f.groups=d;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={generateMessageID:function(a){a=a||Date.now();var c=b("randomInt")(0,4294967295),d=b("PresenceUtil").getSessionID();return"<"+a+":"+c+"-"+d+"@mail.projektitan.com>"},generateThreadID:function(a){return"root:"+g.generateOfflineThreadingID(a)},generateOfflineThreadingID:function(a){a=a||Date.now();var c=b("randomInt")(0,4294967295);c=("0000000000000000000000"+c.toString(2)).slice(-22);a=a.toString(2)+c;return h(a.slice(-63))}};function h(a){var b="";while(a!="0"){var c=0,d="";for(var e=0;e<a.length;e++)c=2*c+parseInt(a[e],10),c>=10?(d+="1",c-=10):d+="0";b=c.toString()+b;a=d.slice(d.indexOf("1"))}return b}e.exports=g}),null);
__d("MercuryMessageClientState",[],(function(a,b,c,d,e,f){a=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});e.exports=a}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var b=d[a];if(b!==void 0)return b;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("MercurySingletonProvider",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1={},this.$2=a}a.prototype.getForFBID=function(a){this.$1[a]||(this.$1[a]=new this.$2(a));return this.$1[a]};a.prototype.get=function(){return this.getForFBID(b("CurrentUser").getID())};a.mock=function(a){throw new Error("MercurySingletonProvider.mock() must only be used in tests.")};e.exports=a}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MercurySyncEventsProxy",["Arbiter","Bootloader","ChannelConstants","LogHistory","MercurySingletonProvider","MessengerMQTTConnectionEvents","MessengerMQTTGating","gkx","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_event_proxy"),h={DELTA:"DELTA",FAKE_DFF:"FAKE_DFF",FLOW:"FLOW",FLOW_REJECT:"FLOW_REJECT",INIT:"MercurySyncDeltaHandler/initSeqID",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",SHUTDOWN:"SHUTDOWN",TYP:"TYP"};i.getArbiterTypeForFBID=function(a,event){return a+"/"+event};i.getForFBID=function(a){return j.getForFBID(a)};i.get=function(){return j.get()};function i(a){this.$2=[],this.$3=[],this.$1=a,this.init()}i.prototype.getArbiterType=function(event){return i.getArbiterTypeForFBID(this.$1,event)};i.prototype.init=function(){__p&&__p();this.$2.forEach(function(a){return b("Arbiter").unsubscribe(a)});this.$3.forEach(function(a){return b("ifRequired")("ChannelConnection",function(b){return b.unsubscribe(a)})});var a=[],c=[],d=b("MessengerMQTTGating").isEnabled(),e=d?b("MessengerMQTTConnectionEvents").DELTA_EVENT:b("ChannelConstants").getArbiterType("delta");a.push(b("Arbiter").subscribe(e,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.DELTA)].concat(d))}.bind(this)),b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){return this.init()}.bind(this)));!d?(a.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflow"),function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.FLOW)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflowreject"),function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.FLOW_REJECT)].concat(d))}.bind(this))),b("Bootloader").loadModules(["ChannelConnection","ChannelConnectionEvents"],function(a,d){__p&&__p();c.push(a.subscribe(d.CONNECTED,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.CONNECTED)].concat(d))}.bind(this)),a.subscribe(d.RECONNECTING,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.RECONNECTING)].concat(d))}.bind(this)),a.subscribe(d.SHUTDOWN,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.SHUTDOWN)].concat(d))}.bind(this)))}.bind(this),"MercurySyncEventsProxy")):a.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECT,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.CONNECTED)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_DISCONNECT,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.SHUTDOWN)].concat(d))}.bind(this)),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECTING,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.RECONNECTING)].concat(d))}.bind(this)));a.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),function(a){g.debug("fakedff",JSON.stringify({fbid:this.$1}));for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.FAKE_DFF)].concat(d))}.bind(this)));d&&b("gkx")("678650")?a.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").TYP,function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.TYP)].concat(d))}.bind(this))):a.push(b("Arbiter").subscribe([b("ChannelConstants").getArbiterType("typ"),b("ChannelConstants").getArbiterType("ttyp")],function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b("Arbiter").inform.apply(b("Arbiter"),[this.getArbiterType(h.TYP)].concat(d))}.bind(this)));this.$2=a;this.$3=c};i.Events=h;var j=new(b("MercurySingletonProvider"))(i);e.exports=i}),null);
__d("MercuryThreadInfo",["MercuryIDs","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={canReply:function(a){return!!(a.is_subscribed&&(a.can_reply===void 0||a.can_reply)&&!a.has_email_participant&&!a.read_only)},getMuteSetting:function(a){return a.mute_until?a.mute_until:void 0},isEmptyLocalThread:function(a){return b("MercuryIDs").tokenize(a.thread_id).type==="root"&&!a.timestamp},isMuted:function(a){a=g.getMuteSetting(a);return a!=null&&(a>Date.now()/1e3||a===-1)},areMentionsMuted:function(a){return a.mentions_mute_mode===1},areReactionsMuted:function(a){return a.reactions_mute_mode===1},isNewEmptyLocalThread:function(a){return!!(g.isEmptyLocalThread(a)&&a.participants&&a.participants.length===0)},showComposer:function(a){return!!(a.is_subscribed&&(a.can_reply||!a.cannot_reply_reason||a.cannot_reply_reason===b("MessengerThreadCannotReplyReason").BLOCKED)&&!a.has_email_participant&&!a.read_only)},isColdOpen:function(a){return!!(a.is_canonical_user&&(a.message_count===0||!a.timestamp))}};e.exports=g}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("LogHistory").getInstance("mercury_informer");c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;a.get=function(){return i.get()};a.getForFBID=function(a){return i.getForFBID(a)};function a(a){g.constructor.call(this),this.$MercuryThreadInformer1=a,this.$MercuryThreadInformer2={},this.$MercuryThreadInformer3={},this.$MercuryThreadInformer4={},this.$MercuryThreadInformer5={},this.$MercuryThreadInformer6=!1,this.$MercuryThreadInformer7=!1,this.$MercuryThreadInformer8=!1,this.$MercuryThreadInformer9={},this.$MercuryThreadInformer10={},this.$MercuryThreadInformer11={},this.$MercuryThreadInformer12=0}a.prototype.updatedThread=function(a){this.$MercuryThreadInformer3[a]=!0,this.$MercuryThreadInformer13()};a.prototype.invalidatedThread=function(a){this.$MercuryThreadInformer4[a]=!0,this.$MercuryThreadInformer13()};a.prototype.deletedThread=function(a){this.$MercuryThreadInformer2[a]=!0,this.$MercuryThreadInformer13()};a.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=!0,this.$MercuryThreadInformer13()};a.prototype.changedThreadReadState=function(a,b,c){(!this.$MercuryThreadInformer5[a]||this.$MercuryThreadInformer5[a].timestamp<c)&&(this.$MercuryThreadInformer5[a]={mark_as_read:b,timestamp:c}),this.$MercuryThreadInformer13()};a.prototype.receivedMessage=function(a){b("MercuryAssert").isThreadID(a.thread_id);var c=a.thread_id;this.$MercuryThreadInformer9[c]||(this.$MercuryThreadInformer9[c]=[]);this.$MercuryThreadInformer9[c].push(a);this.updatedThread(c)};a.prototype.reorderedMessages=function(a,b){this.$MercuryThreadInformer10[a]={source:b},this.$MercuryThreadInformer13()};a.prototype.updatedMessage=function(a,b,c){this.$MercuryThreadInformer11[a]||(this.$MercuryThreadInformer11[a]={}),this.$MercuryThreadInformer11[a][b]={source:c},this.updatedThread(a)};a.prototype.synchronizeInforms=function(a){this.$MercuryThreadInformer12++;try{a()}catch(a){throw a}finally{this.$MercuryThreadInformer12--,this.$MercuryThreadInformer13()}};a.prototype.listen=function(a,b){return this.subscribe("threads-updated",function(c,d){d[a]&&b(a)})};a.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var a=this.$MercuryThreadInformer2,b=this.$MercuryThreadInformer3,c=this.$MercuryThreadInformer4,d=this.$MercuryThreadInformer5,e=this.$MercuryThreadInformer6,f=this.$MercuryThreadInformer7,g=this.$MercuryThreadInformer8,h=this.$MercuryThreadInformer9,i=this.$MercuryThreadInformer10,j=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=!1;this.$MercuryThreadInformer7=!1;this.$MercuryThreadInformer8=!1;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var k=Object.keys(b);(k.length||e)&&this.inform("threadlist-updated",k);k.length&&this.$MercuryThreadInformer14("threads-updated",b);for(var e in c){this.$MercuryThreadInformer14("thread-invalidated",c);break}for(var e in d){this.$MercuryThreadInformer14("thread-read-changed",d);break}for(e in a){this.$MercuryThreadInformer14("threads-deleted",a);break}f&&this.$MercuryThreadInformer14("unseen-updated",null);g&&this.$MercuryThreadInformer14("unread-updated",null);for(e in h){this.$MercuryThreadInformer14("messages-received",h);break}for(e in i){this.$MercuryThreadInformer14("messages-reordered",i);break}for(e in j){this.$MercuryThreadInformer14("messages-updated",j);break}}};a.prototype.$MercuryThreadInformer14=function(a,b){a==="threads-updated"&&h.debug(a,JSON.stringify(b)),this.inform(a,b)};var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("WorkplaceChatHelper",["ChannelConstants","PresenceViewerCapabilities","gkx"],(function(a,b,c,d,e,f){"use strict";a={isDesktopChatApp:function(){return window.workchat!==void 0},getAppID:function(){return window.workchat.appId},showWindow:function(){window.workchat.showWindow()},getScreenSharingSourceID:function(){return window.workchat.getScreenSharingSourceID()},stopScreenSharing:function(){return window.workchat.stopScreenSharing()},suppressChatIfActiveOnDesktop:function(){return(b("PresenceViewerCapabilities").get()&b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP)==b("ChannelConstants").CAPABILITY_ACTIVE_ON_DESKTOP_APP&&b("gkx")("678945")}};e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null},removeNotification:function(a){a=h.get(a);a&&a.close()}};b("Run").onUnload(a);e.exports=c}),null);
__d("MessengerFolders.bs",["MessagingTag","MercuryFoldersConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else return a.folder}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("ReasonReact.bs",["bs_curry","React","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){return 0}function h(){return 0}function i(){return!0}function j(){return"RenderNotImplemented"}function k(){return 0}function l(a){return a}function m(a,b){return 0}function n(a,c,d){var e=a.reasonProps;if(e==null)if(c!==void 0)return[b("bs_curry")._1(c,a)];else throw[b("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(d+" which didn't implement the JS->Reason React props conversion.")];else return e}function o(a){__p&&__p();return b("React").createClass({displayName:a,subscriptions:null,statics:{jsPropsToReason:void 0,getDerivedStateFromProps:function(c,d){__p&&__p();var e=this;e=e==null?void 0:e.jsPropsToReason;c=n(c,e,a);e=c[0];if(e[3]!==l){c=d.reasonState;e=b("bs_curry")._1(e[3],c);if(e===c)return null;else return{reasonState:e,reasonStateVersion:d.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:d.reasonStateVersionUsedToComputeSubelements}}else return null}},self:function(a,b){var c=this;return[c.handleMethod,a,b,c.sendMethod,c.onUnmountMethod]},getInitialState:function(){var c=this;c=n(c.props,c.jsPropsToReason,a);return{reasonState:b("bs_curry")._1(c[0][9],0)}},componentDidMount:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];if(e[4]!==h){d=d.state;d=d.reasonState;return b("bs_curry")._1(e[4],c.self(d,e[10]))}else return 0},componentDidUpdate:function(c,d){__p&&__p();var e=this,f=this,h=f.state;h=h.reasonState;var i=f.props,j=n(i,f.jsPropsToReason,a),k=j[0];if(k[5]!==g){i=c===i;i=i?j:n(c,f.jsPropsToReason,a);j=d.reasonState;c=e.self(h,k[10]);f=c[0];d=i[0][10];e=c[3];h=c[4];i=[f,j,d,e,h];return b("bs_curry")._1(k[5],[i,c])}else return 0},componentWillUnmount:function(){__p&&__p();var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;e[6]!==h&&b("bs_curry")._1(e[6],c.self(d,e[10]));d=c.subscriptions;if(d!==null){d.forEach(function(a){return b("bs_curry")._1(a,0)});return 0}else return 0},shouldComponentUpdate:function(c,d,e){__p&&__p();e=this;var f=this,g=f.props,h=n(f.props,f.jsPropsToReason,a);g=c===g;g=g?h:n(c,f.jsPropsToReason,a);c=g[0];g=d.reasonState;d=e.self(g,c[10]);if(c[7]!==i){e=f.state;g=e.reasonState;f=d[0];e=h[0][10];h=d[3];var j=d[4];f=[f,g,e,h,j];return b("bs_curry")._1(c[7],[f,d])}else return!0},onUnmountMethod:function(a){var b=this,c=b.subscriptions;if(c!==null){c.push(a);return 0}else{b.subscriptions=[a];return 0}},handleMethod:function(c){var d=this,e=this;return function(f){var g=e.state;g=g.reasonState;var h=n(e.props,e.jsPropsToReason,a);return b("bs_curry")._2(c,f,d.self(g,h[0][10]))}},sendMethod:function(c){__p&&__p();var d=this,e=this,f=n(e.props,e.jsPropsToReason,a);f=f[0];if(f[11]!==m){var g=[function(){return 0}],h=b("bs_curry")._1(f[11],c);return e.setState(function(a,c){__p&&__p();c=a.reasonState;c=b("bs_curry")._1(h,c);if(c===0)return null;else{var d;if(typeof c==="number")d=a;else switch(c.tag|0){case 0:d={reasonState:c[0]};break;case 1:g[0]=c[0];d=a;break;case 2:g[0]=c[1];d={reasonState:c[0]};break}if(d!==a)return d;else return null}},d.handleMethod(function(a,c){return b("bs_curry")._1(g[0],c)}))}else return 0},render:function(){var c=this,d=this,e=n(d.props,d.jsPropsToReason,a);e=e[0];d=d.state;d=d.reasonState;return b("bs_curry")._1(e[8],c.self(d,e[10]))}})}function a(a){return[a,o(a),[void 0],l,h,g,h,i,j,k,0,m,void 0]}var p=a,q=a,r=a,s=a;function c(a,c,d){a=a!==void 0?a:void 0;c=c!==void 0?c:void 0;var e=[d],f=d[12];if(f!==void 0)return b("bs_curry")._2(f,a,c);else return b("React").createElement(d[1],{key:a,ref:c,reasonProps:e})}function d(a,b){var c=a[1].prototype;c.jsPropsToReason=b;c=a[1];c.getDerivedStateFromProps=a[1].getDerivedStateFromProps.bind({jsPropsToReason:b});return a[1]}function e(a,c){var d=function(a){return b("bs_curry")._2(c,a,a.children)};d=d;var e=a[1].prototype;e.jsPropsToReason=d;return a[1]}var t=a("interop");function u(a,c,d){var e=function(e,f){var g=a,h=c,i=d;e=e;f=f;h=Object.assign(Object.assign({},h),{ref:f,key:e});f=[g,h].concat(i);return b("React").createElement.apply(null,f)};return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],e]}function v(a){if(typeof Event==="function")return new Event(a);else{var b=document.createEvent("Event");b.initEvent(a,!0,!0);return b}}function w(){__p&&__p();var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.pathname;switch(a){case"":case"/":return 0;default:a=a.slice(1);var b=a[a.length-1|0];b=b==="/"?a.slice(0,-1):a;a=b.split("/");b=a.length-1|0;var c=0;while(!0){var d=c,e=b;if(e<0)return d;else{c=[a[e],d];b=e-1|0;continue}}}}else return 0}function x(){var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.hash;switch(a){case"":case"#":return"";default:return a.slice(1)}}else return""}function y(){var a=typeof window==="undefined"?void 0:window;if(a!==void 0){a=a.location.search;switch(a){case"":case"?":return"";default:return a.slice(1)}}else return""}function z(a){var b=typeof history==="undefined"?void 0:history,c=typeof window==="undefined"?void 0:window;if(b!==void 0&&c!==void 0){b.pushState(null,"",a);c.dispatchEvent(v("popstate"));return 0}else return 0}function A(){return[w(0),x(0),y(0)]}function B(a){var c=typeof window==="undefined"?void 0:window;if(c!==void 0){var d=function(){return b("bs_curry")._1(a,A(0))};c.addEventListener("popstate",d);return d}else return function(){return 0}}function C(a){var b=typeof window==="undefined"?void 0:window;if(b!==void 0){b.removeEventListener("popstate",a);return 0}else return 0}function D(){return 0}function E(){return[D]}function F(a,b){if(b[0]===D){b[0]=a;return b}}function G(a){a[0]=D;return 0}function H(a,c){return b("bs_curry")._1(a[0],c)}function I(a,c){__p&&__p();var d=a!==void 0?a:function(a,b){return a===b},e=[void 0];return function(a){__p&&__p();var f=e[0];if(f!==void 0){f=f;if(b("bs_curry")._2(d,f[0],a))return f[1];else f=1}else f=1;if(f===1){f=b("bs_curry")._1(c,a);e[0]=[a,f];return f}}}function J(a){var b=[a];return function(a){var c=b[0];b[0]=a;return c}}a=[I,J];I=[z,B,C,A];J=[E,F,G,H];f.statelessComponent=p;f.statelessComponentWithRetainedProps=q;f.reducerComponent=r;f.reducerComponentWithRetainedProps=s;f.element=c;f.wrapReasonForJs=d;f.wrapReasonForJsWithChildren=e;f.wrapJsForReason=u;f.Router=I;f.RemoteAction=J;f.Props=a}),null);
__d("bs_js_int",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a===b}b=2147483647;c=-2147483648;f.equal=a;f.max=b;f.min=c}),null);
__d("bs_js_math",["bs_js_int"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return Math.ceil(a)}function c(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.ceil(a)}function d(a){return Math.floor(a)}function g(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.floor(a)}function e(a,b){return g(Math.random()*(b-a|0))+a|0}var h=c,i=g;f.unsafe_ceil=a;f.ceil_int=c;f.ceil=h;f.unsafe_floor=d;f.floor_int=g;f.floor=i;f.random_int=e}),null);
__d("bs_belt_Array",["bs_curry","bs_js_math","bs_js_primitive","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c>=0&&c<a.length)return b("bs_js_primitive").some(a[c])}function c(a,b){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 25, characters 6-12');return a[b]}function d(a,b,c){if(b>=0&&b<a.length){a[b]=c;return!0}else return!1}function e(a,b,c){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 31, characters 4-10');a[b]=c;return 0}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d;return 0}function h(a){var c=a.length;for(var d=0,e=c-1|0;d<=e;++d)g(a,d,b("bs_js_math").random_int(d,c));return 0}function i(a){a=a.slice(0);h(a);return a}function j(a){var b=a.length;a=a;var c=0;b=b;for(var d=0,e=(b/2|0)-1|0;d<=e;++d)g(a,c+d|0,((c+b|0)-d|0)-1|0);return 0}function k(a){var b=a.length,c=new Array(b);for(var d=0,e=b-1|0;d<=e;++d)c[d]=a[(b-1|0)-d|0];return c}function l(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}}function m(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b(d);return c}}function n(a,c){return m(a,b("bs_curry").__1(c))}function o(a,b){a=m(a,b);h(a);return a}function p(a,c){return o(a,b("bs_curry").__1(c))}function q(a,b){b=b-a|0;if(b<0)return[];else{var c=new Array(b+1|0);for(var d=0;d<=b;++d)c[d]=a+d|0;return c}}function r(a,b,c){__p&&__p();b=b-a|0;if(b<0||c<=0)return[];else{b=(b/c|0)+1|0;var d=new Array(b);a=a;for(var e=0,b=b-1|0;e<=b;++e)d[e]=a,a=a+c|0;return d}}function s(a,b){var c=a.length,d=b.length;c=c<d?c:d;d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=[a[e],b[e]];return d}function t(a,b,c){var d=a.length,e=b.length;d=d<e?d:e;e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=c(a[f],b[f]);return e}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){var c=a.length,d=b.length,e=new Array(c+d|0);for(var f=0,g=c-1|0;f<=g;++f)e[f]=a[f];for(var a=0,f=d-1|0;a<=f;++a)e[c+a|0]=b[a];return e}function w(a){__p&&__p();var b=a.length,c=0;for(var d=0,e=b-1|0;d<=e;++d)c=c+a[d].length|0;d=new Array(c);c=0;for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];for(var g=0,h=f.length-1|0;g<=h;++g)d[c]=f[g],c=c+1|0}return d}function x(a,c,d){__p&&__p();if(d<=0)return[];else{var e=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(e+c|0,0):c;e=e-c|0;e=e<d?e:d;if(e<=0)return[];else{d=new Array(e);for(var f=0,e=e-1|0;f<=e;++f)d[f]=a[c+f|0];return d}}}function y(a,c){var d=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(d+c|0,0):c;d=d-c|0;var e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=a[c+f|0];return e}function z(a,c,d,e){__p&&__p();if(d>0){var f=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(f+c|0,0):c;f=f-c|0;f=f<d?f:d;if(f>0){for(var d=c,c=(c+f|0)-1|0;d<=c;++d)a[d]=e;return 0}else return 0}else return 0}function A(a,b,c,d,e){if(d<=b){for(var f=0,g=e-1|0;f<=g;++f)c[f+d|0]=a[f+b|0];return 0}else{for(var f=e-1|0;f>=0;--f)c[f+d|0]=a[f+b|0];return 0}}function B(a,c,d,e,f){__p&&__p();var g=a.length,h=d.length;c=c<0?b("bs_caml_primitive").caml_int_max(g+c|0,0):c;e=e<0?b("bs_caml_primitive").caml_int_max(h+e|0,0):e;f=b("bs_caml_primitive").caml_int_min(f,b("bs_caml_primitive").caml_int_min(g-c|0,h-e|0));if(e<=c){for(var g=0,h=f-1|0;g<=h;++g)d[g+e|0]=a[g+c|0];return 0}else{for(var g=f-1|0;g>=0;--g)d[g+e|0]=a[g+c|0];return 0}}function C(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(a[c]);return 0}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(a[e]);return d}function F(a,c){return E(a,b("bs_curry").__1(c))}function G(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function H(a,c){return G(a,b("bs_curry").__1(c))}function I(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g,f)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function J(a,c){return I(a,b("bs_curry").__2(c))}function K(a,c){var d=a.length,e=new Array(d),f=0;for(var g=0,d=d-1|0;g<=d;++g){var h=a[g];h=c(h);h!==void 0&&(e[f]=b("bs_js_primitive").valFromOption(h),f=f+1|0)}e.length=f;return e}function L(a,c){return K(a,b("bs_curry").__1(c))}function M(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(c,a[c]);return 0}function N(a,c){return M(a,b("bs_curry").__2(c))}function O(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(e,a[e]);return d}function P(a,c){return O(a,b("bs_curry").__2(c))}function Q(a,b,c){b=b;for(var d=0,e=a.length-1|0;d<=e;++d)b=c(b,a[d]);return b}function aa(a,c,d){return Q(a,c,b("bs_curry").__2(d))}function R(a,b,c){b=b;for(var d=a.length-1|0;d>=0;--d)b=c(b,a[d]);return b}function ba(a,c,d){return R(a,c,b("bs_curry").__2(d))}function S(a,c,d,e){d=d;var f=b("bs_caml_primitive").caml_int_min(a.length,c.length);for(var f=f-1|0;f>=0;--f)d=e(d,a[f],c[f]);return d}function ca(a,c,d,e){return S(a,c,d,b("bs_curry").__3(e))}function T(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!0;else if(b(a[e])){d=e+1|0;continue}else return!1}}function da(a,c){return T(a,b("bs_curry").__1(c))}function U(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!1;else if(b(a[e]))return!0;else{d=e+1|0;continue}}}function ea(a,c){return U(a,b("bs_curry").__1(c))}function V(a,b,c,d,e){__p&&__p();while(!0){var f=c;if(f===e)return!0;else if(d(a[f],b[f])){c=f+1|0;continue}else return!1}}function W(a,c,d){return V(a,c,0,d,b("bs_caml_primitive").caml_int_min(a.length,c.length))}function fa(a,c,d){return W(a,c,b("bs_curry").__2(d))}function X(a,c,d){__p&&__p();var e=a,f=c,g=0;d=d;a=b("bs_caml_primitive").caml_int_min(a.length,c.length);while(!0){c=g;if(c===a)return!1;else if(d(e[c],f[c]))return!0;else{g=c+1|0;continue}}}function ga(a,c,d){return X(a,c,b("bs_curry").__2(d))}function Y(a,b,c){var d=a.length,e=b.length;if(d===e)return V(a,b,0,c,d);else return!1}function ha(a,c,d){return Y(a,c,b("bs_curry").__2(d))}function Z(a,b,c){__p&&__p();var d=a.length,e=b.length;if(d>e)return 1;else if(d<e)return-1;else{e=a;a=b;b=0;c=c;d=d;while(!0){var f=b;if(f===d)return 0;else{var g=c(e[f],a[f]);if(g===0){b=f+1|0;continue}else return g}}}}function ia(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,b){var c=a.length,d=0,e=0,f=new Array(c),g=new Array(c);for(var h=0,c=c-1|0;h<=c;++h){var i=a[h];b(i)?(f[d]=i,d=d+1|0):(g[e]=i,e=e+1|0)}f.length=d;g.length=e;return[f,g]}function ja(a,c){return $(a,b("bs_curry").__1(c))}function ka(a){var b=a.length,c=new Array(b),d=new Array(b);for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];c[e]=f[0];d[e]=f[1]}return[c,d]}f.get=a;f.getExn=c;f.set=d;f.setExn=e;f.shuffleInPlace=h;f.shuffle=i;f.reverseInPlace=j;f.reverse=k;f.make=l;f.range=q;f.rangeBy=r;f.makeByU=m;f.makeBy=n;f.makeByAndShuffleU=o;f.makeByAndShuffle=p;f.zip=s;f.zipByU=t;f.zipBy=u;f.unzip=ka;f.concat=v;f.concatMany=w;f.slice=x;f.sliceToEnd=y;f.fill=z;f.blit=B;f.blitUnsafe=A;f.forEachU=C;f.forEach=D;f.mapU=E;f.map=F;f.keepU=G;f.keep=H;f.keepWithIndexU=I;f.keepWithIndex=J;f.keepMapU=K;f.keepMap=L;f.forEachWithIndexU=M;f.forEachWithIndex=N;f.mapWithIndexU=O;f.mapWithIndex=P;f.partitionU=$;f.partition=ja;f.reduceU=Q;f.reduce=aa;f.reduceReverseU=R;f.reduceReverse=ba;f.reduceReverse2U=S;f.reduceReverse2=ca;f.someU=U;f.some=ea;f.everyU=T;f.every=da;f.every2U=W;f.every2=fa;f.some2U=X;f.some2=ga;f.cmpU=Z;f.cmp=ia;f.eqU=Y;f.eq=ha}),null);
__d("bs_belt_SortArray",["bs_curry","bs_belt_Array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b,c,d,e){__p&&__p();while(!0){var f=c,g=b;if(f>=d)return f;else{var h=a[f];if(e(h,g)){c=f+1|0;b=h;continue}else return f}}}function h(a,b){__p&&__p();var c=a.length;if(c===0||c===1)return c;else{var d=a[0],e=a[1];if(b(d,e)){var f=a,h=e,i=2,j=c,k=b;while(!0){var l=i,m=h;if(l>=j)return l;else{var n=f[l];if(k(m,n)){i=l+1|0;h=n;continue}else return l}}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){__p&&__p();var c=a.length;if(c===0)return!0;else{a=a;var d=0;b=b;c=c-1|0;while(!0){var e=d;if(e===c)return!0;else if(b(a[e],a[e+1|0])<=0){d=e+1|0;continue}else return!1}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p<d){i=m+1|0;c=a[p];k=p;continue}else return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0)}else{h[m]=n;p=o+1|0;if(p<g){i=m+1|0;f=e[p];l=p;continue}else return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0)}}}function k(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}else{b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}}else if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(s<d&&t<g){i=r;f=e[t];l=t;c=a[s];k=s;continue}else if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}}else{h[m]=n;p=o+1|0;t=m+1|0;if(p<g){i=t;f=e[p];l=p;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,t,d-q|0);return(t+d|0)-q|0}}}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){__p&&__p();c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q<c){b=a[q];j=q;continue}else return l}else if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(q<c&&m<f){h=o;e=d[m];k=m;b=a[q];j=q;continue}else return o}else{p=n+1|0;if(p<f){e=d[p];k=p;continue}else return l}}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r<d){i=p;c=a[r];k=r;continue}else return p}else if(n===0){r=q+1|0;p=o+1|0;if(r<d&&p<g){f=e[p];l=p;c=a[r];k=r;continue}else if(r===d)return m;else{b("bs_belt_Array").blitUnsafe(a,r,h,m,d-r|0);return(m+d|0)-r|0}}else{n=o+1|0;if(n<g){f=e[n];l=n;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0,e=e-1|0;g<=e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}return 0}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);else{var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}}function q(a,b){__p&&__p();var c=a.length;if(c<=5)return o(a,0,a,0,c,b);else{var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){__p&&__p();var d=a.length;if(d===0)return-1;else{var e=a[0];e=c(b,e);if(e<0)return-1;else{e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=a;a=0;d=d-1|0;b=b;c=c;while(!0){var f=d,g=a,h=(g+f|0)/2|0,i=e[h];i=c(b,i);if(i===0)return h;else if(i<0)if(f===h)if(c(e[g],b)===0)return g;else return-(f+1|0)|0;else{d=h;continue}else if(g===h)if(c(e[f],b)===0)return f;else return-(f+1|0)|0;else{a=h;continue}}}}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w=0,x=0;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("bs_belt_internalAVLset",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function j(a){return{value:a,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function l(a,b,c){__p&&__p();var d=a!==null?a.height:0,e=c!==null?c.height:0;if(d>(e+2|0)){var f=a.left,g=a.value,h=a.right;if(k(f,h))return i(f,g,i(h,b,c));else{var j=h.left,l=h.value;h=h.right;return i(i(f,g,j),l,i(h,b,c))}}else if(e>(d+2|0)){f=c.left;g=c.value;j=c.right;if(k(j,f))return i(i(a,b,f),g,j);else{l=f.left;h=f.value;f=f.right;return i(i(a,b,l),h,i(f,g,j))}}else return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.value}}function a(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function c(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.value}}function d(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function e(a){if(a!==null)return n(a)}function o(a,b){var c=a.left,d=a.right;a=a.value;if(c!==null)return l(o(c,b),a,d);else{b[0]=a;return d}}function p(a){return a===null}function q(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function r(a,b){__p&&__p();while(!0){var c=a;if(c!==null){r(c.left,b);b(c.value);a=c.right;continue}else return 0}}function s(a,c){return r(a,b("bs_curry").__1(c))}function t(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.value;e=e.right;b=c(t(f,d,c),g);a=e;continue}else return d}}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)&&v(c.left,b)){a=c.right;continue}else return!1;else return!0}}function w(a,c){return v(a,b("bs_curry").__1(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)||x(c.left,b))return!0;else{a=c.right;continue}else return!1}}function y(a,c){return x(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null)return l(z(a.left,b),a.value,a.right);else return j(b)}function A(a,b){if(a!==null)return l(a.left,a.value,A(a.right,b));else return j(b)}function B(a,b,c){__p&&__p();if(a!==null)if(c!==null){var d=a.height,e=c.height;if(d>(e+2|0))return l(a.left,a.value,B(a.right,b,c));else if(e>(d+2|0))return l(B(a,b,c.left),c.value,c.right);else return i(a,b,c)}else return A(a,b);else return z(c,b)}function C(a,b){if(a!==null)if(b!==null){var c=[b.value],d=o(b,c);return B(a,c[0],d)}else return a;else return b}function D(a,b){__p&&__p();if(a!==null){var c=a.value,d=D(a.left,b),e=d[1];d=d[0];var f=b(c);a=D(a.right,b);b=a[1];a=a[0];if(f)return[B(d,c,a),C(e,b)];else return[C(d,a),B(e,c,b)]}else return[null,null]}function E(a,c){return D(a,b("bs_curry").__1(c))}function F(a){var b=a.left;a=a.right;b=b!==null?F(b):0;a=a!==null?F(a):0;return(1+b|0)+a|0}function G(a){if(a!==null)return F(a);else return 0}function H(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d.value,H(d.right,c)];a=d.left;continue}else return c}}function I(a){return H(a,0)}function J(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLset.ml", line 302, characters 6-12');J(c);a=b;continue}else return 0}}function K(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.value;e=e.right;f=f!==null?K(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function L(a,b,c,d){__p&&__p();while(!0){var e=a,f=e.left,g=e.value;e=e.right;f!==null&&L(f,b,c,d);if(d(g)){f=b.forward;c[f]=g;b.forward=f+1|0}else{f=b.backward;c[f]=g;b.backward=f-1|0}if(e!==null){a=e;continue}else return 0}}function M(a,b,c,d){__p&&__p();while(!0){var e=b,f=a,g=f.left,h=f.value;f=f.right;g=g!==null?M(g,e,c,d):e;e=d(h)?(c[g]=h,g+1|0):g;if(f!==null){b=e;a=f;continue}else return e}}function N(b){if(b!==null){var a=F(b);a=new Array(a);K(b,0,a);return a}else return[]}function O(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=O(a,b,d),f=a[b-d|0];d=O(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b-1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b-1|0];f=a[b-2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function P(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=P(a,b,d),f=a[b+d|0];d=P(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b+1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b+1|0];f=a[b+2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function aa(a){return P(a,0,a.length)}function Q(a,b){__p&&__p();if(a!==null){var c=a.left,d=a.value,e=a.right,f=Q(c,b),g=b(d);b=Q(e,b);if(g)if(c===f&&e===b)return a;else return B(f,d,b);else return C(f,b)}else return null}function ba(a,c){return Q(a,b("bs_curry").__1(c))}function R(b,c){if(b!==null){var a=F(b);a=new Array(a);b=M(b,0,a,c);return P(a,0,b)}else return null}function ca(a,c){return R(a,b("bs_curry").__1(c))}function S(b,c){if(b!==null){var a=F(b),d=new Array(a),e=a-1|0,f={forward:0,backward:e};L(b,f,d,c);b=f.forward;return[P(d,0,b),O(d,e,a-b|0)]}else return[null,null]}function da(a,c){return S(a,b("bs_curry").__1(c))}function ea(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function T(a,b,c){__p&&__p();var d=G(a),e=G(b);if(d===e){a=q(a,0);b=q(b,0);c=c;while(!0){var f=b,g=a;if(g&&f){var h=f[0],i=g[0],j=c(i.value,h.value);if(j===0){b=q(h.right,f[1]);a=q(i.right,g[1]);continue}else return j}else return 0}}else if(d<e)return-1;else return 1}function fa(a,b,c){return T(a,b,c)===0}function U(b,c,a){__p&&__p();while(!0){var d=c,e=b;if(e!==null)if(d!==null){var f=e.left,g=e.value;e=e.right;var h=d.left,j=d.value;d=d.right;j=a(g,j);if(j===0)if(U(f,h,a)){c=d;b=e;continue}else return!1;else if(j<0)if(U(i(f,g,null),h,a)){b=e;continue}else return!1;else if(U(i(null,g,e),d,a)){b=f;continue}else return!1}else return!1;else return!0}}function ga(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.value,g=a(d,f);if(g===0)return b("bs_js_primitive").some(f);else{c=g<0?e.left:e.right;continue}}else return void 0}}function ha(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else return void 0}}function ia(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function ja(a){var b=W(a.left);a.left=b;return V(a)}function ka(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(ja(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(ka(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(a,b,c){__p&&__p();if(b!==null){var d=b.value;d=a(c,d);if(d===0)return b;else{var e=b.left,f=b.right;if(d<0){d=Z(a,e,c);b.left=d}else b.right=Z(a,f,c);return Y(b)}}else return j(c)}function la(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b,c)<0}),f;e>=0?f=P(c,0,e):(e=-e|0,f=O(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e)f=Z(a,f,c[e]);return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.value=b.value;return c}}var ma=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.minimum=a;f.minUndefined=c;f.maximum=d;f.maxUndefined=e;f.removeMinAuxWithRef=o;f.empty=ma;f.isEmpty=p;f.stackAllLeft=q;f.forEachU=r;f.forEach=s;f.reduceU=t;f.reduce=u;f.everyU=v;f.every=w;f.someU=x;f.some=y;f.joinShared=B;f.concatShared=C;f.keepSharedU=Q;f.keepShared=ba;f.keepCopyU=R;f.keepCopy=ca;f.partitionSharedU=D;f.partitionShared=E;f.partitionCopyU=S;f.partitionCopy=da;f.lengthNode=F;f.size=G;f.toList=I;f.checkInvariantInternal=J;f.fillArray=K;f.toArray=N;f.fromSortedArrayAux=P;f.fromSortedArrayRevAux=O;f.fromSortedArrayUnsafe=aa;f.has=ea;f.cmp=T;f.eq=fa;f.subset=U;f.get=ga;f.getUndefined=ha;f.getExn=ia;f.fromArray=la;f.addMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MutableSet",["bs_curry","bs_belt_SortArray","bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,a){__p&&__p();var e=c.value;e=a(d,e);if(e===0){var f=c.left,h=c.right;if(f!==null)if(h!==null){c.right=b("bs_belt_internalAVLset").removeMinAuxWithRootMutate(c,h);return b("bs_belt_internalAVLset").balMutate(c)}else return f;else return h}else if(e<0){f=c.left;if(f!==null){c.left=g(f,d,a);return b("bs_belt_internalAVLset").balMutate(c)}else return c}else{h=c.right;if(h!==null){c.right=g(h,d,a);return b("bs_belt_internalAVLset").balMutate(c)}else return c}}function a(a,b){__p&&__p();var c=a.data;if(c!==null){b=g(c,b,a.cmp);if(b!==c){a.data=b;return 0}else return 0}else return 0}function h(c,d,e,f,a){__p&&__p();while(!0){var h=e,i=c;if(h<f){var j=d[h];j=g(i,j,a);if(j!==null){e=h+1|0;c=j;continue}else return b("bs_belt_internalAVLset").empty}else return i}}function c(a,b){var c=a.data;if(c!==null){var d=b.length;a.data=h(c,b,0,d,a.cmp);return 0}else return 0}function i(c,d,e,a){__p&&__p();var f=c.value;f=a(d,f);if(f===0){e[0]=!0;var g=c.left,h=c.right;if(g!==null)if(h!==null){c.right=b("bs_belt_internalAVLset").removeMinAuxWithRootMutate(c,h);return b("bs_belt_internalAVLset").balMutate(c)}else return g;else return h}else if(f<0){g=c.left;if(g!==null){c.left=i(g,d,e,a);return b("bs_belt_internalAVLset").balMutate(c)}else return c}else{h=c.right;if(h!==null){c.right=i(h,d,e,a);return b("bs_belt_internalAVLset").balMutate(c)}else return c}}function d(a,b){var c=a.data;if(c!==null){var d=[!1];b=i(c,b,d,a.cmp);b!==c&&(a.data=b);return d[0]}else return!1}function j(c,d,e,a){__p&&__p();if(c!==null){var f=c.value;f=a(d,f);if(f===0)return c;else{var g=c.left,h=c.right;if(f<0){f=j(g,d,e,a);c.left=f}else c.right=j(h,d,e,a);return b("bs_belt_internalAVLset").balMutate(c)}}else{e[0]=!0;return b("bs_belt_internalAVLset").singleton(d)}}function e(a,b){var c=a.data,d=[!1];b=j(c,b,d,a.cmp);b!==c&&(a.data=b);return d[0]}function k(a,c){var d=a.data;c=b("bs_belt_internalAVLset").addMutate(a.cmp,d,c);if(c!==d){a.data=c;return 0}else return 0}function l(c,d,a){c=c;for(var e=0,f=d.length-1|0;e<=f;++e)c=b("bs_belt_internalAVLset").addMutate(a,c,d[e]);return c}function m(a,b){a.data=l(a.data,b,a.cmp);return 0}function n(a){return{cmp:a[0],data:b("bs_belt_internalAVLset").empty}}function o(a){a=a.data;return a===null}function p(a){return b("bs_belt_internalAVLset").minimum(a.data)}function q(a){return b("bs_belt_internalAVLset").minUndefined(a.data)}function r(a){return b("bs_belt_internalAVLset").maximum(a.data)}function s(a){return b("bs_belt_internalAVLset").maxUndefined(a.data)}function t(a,c){return b("bs_belt_internalAVLset").forEachU(a.data,c)}function u(a,c){return b("bs_belt_internalAVLset").forEachU(a.data,b("bs_curry").__1(c))}function v(a,c,d){return b("bs_belt_internalAVLset").reduceU(a.data,c,d)}function w(a,c,d){return v(a,c,b("bs_curry").__2(d))}function x(a,c){return b("bs_belt_internalAVLset").everyU(a.data,c)}function y(a,c){return b("bs_belt_internalAVLset").everyU(a.data,b("bs_curry").__1(c))}function z(a,c){return b("bs_belt_internalAVLset").someU(a.data,c)}function A(a,c){return b("bs_belt_internalAVLset").someU(a.data,b("bs_curry").__1(c))}function B(a){return b("bs_belt_internalAVLset").size(a.data)}function C(a){return b("bs_belt_internalAVLset").toList(a.data)}function D(a){return b("bs_belt_internalAVLset").toArray(a.data)}function E(a,c){return{cmp:c[0],data:b("bs_belt_internalAVLset").fromSortedArrayUnsafe(a)}}function F(a){return b("bs_belt_internalAVLset").checkInvariantInternal(a.data)}function G(a,c){c=c[0];return{cmp:c,data:b("bs_belt_internalAVLset").fromArray(a,c)}}function H(a,c){return b("bs_belt_internalAVLset").cmp(a.data,c.data,a.cmp)}function I(a,c){return b("bs_belt_internalAVLset").eq(a.data,c.data,a.cmp)}function J(a,c){return b("bs_belt_internalAVLset").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_internalAVLset").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_internalAVLset").getExn(a.data,c,a.cmp)}function M(a,c){var d=b("bs_belt_internalAVLset").toArray(a.data);a=a.cmp;c=b("bs_belt_SortArray").binarySearchByU(d,c,a);var e=d.length;if(c<0){var f=(-c|0)-1|0;return[[{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(d,0,f)},{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(d,f,e-f|0)}],!1]}else return[[{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(d,0,c)},{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(d,c+1|0,(e-c|0)-1|0)}],!0]}function N(a,c){return{cmp:a.cmp,data:b("bs_belt_internalAVLset").keepCopyU(a.data,c)}}function O(a,c){return N(a,b("bs_curry").__1(c))}function P(c,d){var a=c.cmp;c=b("bs_belt_internalAVLset").partitionCopyU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function Q(a,c){return P(a,b("bs_curry").__1(c))}function R(a,c){return b("bs_belt_internalAVLset").subset(a.data,c.data,a.cmp)}function S(c,d){__p&&__p();var a=c.cmp;c=c.data;d=d.data;if(c!==null)if(d!==null){var e=b("bs_belt_internalAVLset").lengthNode(c),f=b("bs_belt_internalAVLset").lengthNode(d),g=e+f|0,h=new Array(g);b("bs_belt_internalAVLset").fillArray(c,0,h);b("bs_belt_internalAVLset").fillArray(d,e,h);if(a(h[e-1|0],h[e])<0||a(h[g-1|0],h[0])<0)return{cmp:a,data:b("bs_belt_internalAVLset").empty};else{c=new Array(e<f?e:f);d=b("bs_belt_SortArray").intersectU(h,0,e,h,e,f,c,0,a);return{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(c,0,d)}}}else return{cmp:a,data:b("bs_belt_internalAVLset").empty};else return{cmp:a,data:b("bs_belt_internalAVLset").empty}}function T(c,d){__p&&__p();var a=c.cmp;c=c.data;d=d.data;if(c!==null)if(d!==null){var e=b("bs_belt_internalAVLset").lengthNode(c),f=b("bs_belt_internalAVLset").lengthNode(d),g=e+f|0,h=new Array(g);b("bs_belt_internalAVLset").fillArray(c,0,h);b("bs_belt_internalAVLset").fillArray(d,e,h);if(a(h[e-1|0],h[e])<0||a(h[g-1|0],h[0])<0)return{cmp:a,data:b("bs_belt_internalAVLset").copy(c)};else{d=new Array(e);g=b("bs_belt_SortArray").diffU(h,0,e,h,e,f,d,0,a);return{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(d,0,g)}}}else return{cmp:a,data:b("bs_belt_internalAVLset").copy(c)};else return{cmp:a,data:b("bs_belt_internalAVLset").empty}}function U(c,d){__p&&__p();var a=c.cmp;c=c.data;d=d.data;if(c!==null)if(d!==null){var e=b("bs_belt_internalAVLset").lengthNode(c),f=b("bs_belt_internalAVLset").lengthNode(d),g=e+f|0,h=new Array(g);b("bs_belt_internalAVLset").fillArray(c,0,h);b("bs_belt_internalAVLset").fillArray(d,e,h);if(a(h[e-1|0],h[e])<0)return{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(h,0,g)};else{g=new Array(g);h=b("bs_belt_SortArray").unionU(h,0,e,h,e,f,g,0,a);return{cmp:a,data:b("bs_belt_internalAVLset").fromSortedArrayAux(g,0,h)}}}else return{cmp:a,data:b("bs_belt_internalAVLset").copy(c)};else return{cmp:a,data:b("bs_belt_internalAVLset").copy(d)}}function V(a,c){return b("bs_belt_internalAVLset").has(a.data,c,a.cmp)}function W(a){return{cmp:a.cmp,data:b("bs_belt_internalAVLset").copy(a.data)}}var X=0,Y=0;f.Int=X;f.$$String=Y;f.make=n;f.fromArray=G;f.fromSortedArrayUnsafe=E;f.copy=W;f.isEmpty=o;f.has=V;f.add=k;f.addCheck=e;f.mergeMany=m;f.remove=a;f.removeCheck=d;f.removeMany=c;f.union=U;f.intersect=S;f.diff=T;f.subset=R;f.cmp=H;f.eq=I;f.forEachU=t;f.forEach=u;f.reduceU=v;f.reduce=w;f.everyU=x;f.every=y;f.someU=z;f.some=A;f.keepU=N;f.keep=O;f.partitionU=P;f.partition=Q;f.size=B;f.toList=C;f.toArray=D;f.minimum=p;f.minUndefined=q;f.maximum=r;f.maxUndefined=s;f.get=J;f.getUndefined=K;f.getExn=L;f.split=M;f.checkInvariantInternal=F}),null);
__d("MessengerPersistantViewerKeyedSubscriptionComponent.bs",["bs_block","bs_curry","bs_belt_Id","CurrentUser","ReasonReact.bs","bs_js_primitive","bs_caml_primitive","bs_belt_MutableSet"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=[0],d=function(a,c){return b("bs_caml_primitive").caml_int_compare(a[0],c[0])},e=b("bs_belt_Id").MakeComparable([d]),f={},g=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerPersistantViewerKeyedSubscriptionComponent("+(a[3]+")")),h=function(a,c){a=a!==void 0?b("bs_js_primitive").valFromOption(a):b("CurrentUser").getID();var d=f[a];if(d!==void 0)return b("ReasonReact.bs").RemoteAction[3](d[0],c);else{d=i(a,void 0,0);return b("ReasonReact.bs").RemoteAction[3](d[0],c)}},i=function(d,i,j){__p&&__p();j=i!==void 0?b("bs_js_primitive").valFromOption(i):b("ReasonReact.bs").RemoteAction[0](0);var k=b("bs_belt_MutableSet").make(e),l=[b("bs_curry")._1(a[0],d)];b("ReasonReact.bs").RemoteAction[1](function(c){var d=l[0];l[0]=b("bs_curry")._2(a[1],c,d);if(l[0]!==d)return b("bs_belt_MutableSet").forEach(k,function(a){return b("bs_curry")._1(a[1],l[0])});else return 0},j);i=function(a,d){__p&&__p();return[g[0],g[1],g[2],g[3],function(a){c[0]=c[0]+1|0;var d=c[0],e=b("bs_curry")._1(a[0],function(a,c){var d=c[2];if(d!==void 0&&!b("bs_curry")._2(d,c[1],a))return 0;else return b("bs_curry")._1(c[3],a)}),f=[d,e];b("bs_belt_MutableSet").add(k,f);return b("bs_curry")._1(a[4],function(){return b("bs_belt_MutableSet").remove(k,f)})},g[5],g[6],g[7],function(a){return b("bs_curry")._1(d,a[1])},function(){return l[0]},a,function(c,a){return b("bs_block").__(0,[c])},g[12]]};j=[j,i];f[d]=j;var m=b("bs_js_primitive").some(d);b("bs_curry")._2(a[2],d,function(a){return h(m,a)});return j};d=function(a,c,d){d=d!==void 0?b("bs_js_primitive").valFromOption(d):b("CurrentUser").getID();var e=f[d];if(e!==void 0)return b("bs_curry")._1(e[1],a);else return b("bs_curry")._1(i(d,c,0)[1],a)};return[g,d,h]}f.Make=a}),null);
__d("MessengerPersonas.bs",["bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var b=g[a.id];if(b!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[a]))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),h="MessengerSharedMedia";a={Types:g,Namespace:h,currentLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.CURRENT_LOADED,namespace:h,data:a})},deletePhotos:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.DELETE_PHOTOS,namespace:h,threadFBID:a,photoFBIDs:c})},loadCurrent:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_CURRENT,namespace:h,threadFBID:a,photoID:c})},loadMorePrevious:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_PREVIOUS,namespace:h,threadFBID:a,afterCursor:c,first:d})},loadMoreLatest:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_LATEST,namespace:h,threadFBID:a,beforeCursor:c,last:d})},previousLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.PREVIOUS_LOADED,namespace:h,data:a})},latestLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.LATEST_LOADED,namespace:h,data:a})}};e.exports=a}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","MessagingTag","ImmutableObject","MessengerJoinableModeType","MessengerObjectAssociationType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:void 0,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_fbid:null,thread_type:null,gradient_colors:[],joinable_link:null,linked_mentorship_programs:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("RemovedMessageTombstoneContent",["fbt","CurrentUser","GenderConst","IntlVariations","MercuryIDs","MessengerParticipants.bs","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getTombstoneContent:function(a,c){var d=b("MercuryIDs").getUserIDFromParticipantID(a.author);if(d===b("CurrentUser").getID())return this._getViewerAuthorFbt();d=c.get(a.author)&&c.get(a.author).short_name;c=c.get(a.author)&&c.get(a.author).gender;if(d)return this._getOtherAuthorFbt(d,c);else return this._getUnknownAuthorFbt()},getTombstoneContentForSnippet:function(a){var c=b("MercuryIDs").getUserIDFromParticipantID(a.author);if(c===b("CurrentUser").getID())return this._getViewerAuthorFbt().toString();c=b("MessengerParticipants.bs").getNow(a.author);a=c&&c.short_name;c=c&&c.gender;if(a)return this._getOtherAuthorFbt(a,c).toString();else return this._getUnknownAuthorFbt().toString()},_getViewerAuthorFbt:function(){return g._("Has eliminado un mensaje")},_getOtherAuthorFbt:function(a,c){return g._({"*":"{name} ha eliminado un mensaje"},[g._param("name",a,[1,c===b("GenderConst").FEMALE_SINGULAR?b("IntlVariations").GENDER_FEMALE:b("IntlVariations").GENDER_MALE])])},_getUnknownAuthorFbt:function(){return g._("Un contacto ha eliminado un mensaje")}};e.exports=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("XGroupsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/{idorvanity}/{?view}/{?post_id}/",{idorvanity:{type:"String",required:!0},view:{type:"Enum",enumType:1},post_id:{type:"Int"},rule_id:{type:"Int"},ref:{type:"String"},source_id:{type:"String"},notif_t:{type:"String"},nux:{type:"Enum",enumType:1},tip_id:{type:"Int"},feedback_id:{type:"FBID"},member_tag_id:{type:"FBID"},section:{type:"Enum",enumType:1},thread_id:{type:"String"},mentorship_profile_id:{type:"FBID"},autopopup_create_chat_dialog:{type:"Bool",defaultValue:!1},sorting_setting:{type:"String"},multi_events:{type:"String"},stories:{type:"Exists",defaultValue:!1},highlight_location:{type:"Exists",defaultValue:!1},highlight_sections:{type:"Exists",defaultValue:!1},highlight_groupapps:{type:"Exists",defaultValue:!1},highlight_pixel:{type:"Exists",defaultValue:!1},highlight_mentorship_option:{type:"Exists",defaultValue:!1},highlight_auto_approval:{type:"Exists",defaultValue:!1},highlight_page_member:{type:"Exists",defaultValue:!1},highlight_units_edit_bar:{type:"Exists",defaultValue:!1},queue:{type:"Enum",enumType:1},composer_prefill:{type:"String"},hide_workplace_pagelet:{type:"Bool",defaultValue:!1},permalink_add_comment_nux_shown:{type:"Bool",defaultValue:!1},comment_id:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{key:a.key,value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function j(a,b){return{key:a,value:b,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function a(a,b){if(a.value===b)return a;else return{key:a.key,value:b,height:a.height,left:a.left,right:a.right}}function l(a,b,c,d){__p&&__p();var e=a!==null?a.height:0,f=d!==null?d.height:0;if(e>(f+2|0)){var h=a.left,j=a.key,k=a.value,l=a.right;if(g(h)>=g(l))return i(h,j,k,i(l,b,c,d));else{var m=l.left,n=l.key,o=l.value;l=l.right;return i(i(h,j,k,m),n,o,i(l,b,c,d))}}else if(f>(e+2|0)){h=d.left;j=d.key;k=d.value;m=d.right;if(g(m)>=g(h))return i(i(a,b,c,h),j,k,m);else{n=h.left;o=h.key;l=h.value;h=h.right;return i(i(a,b,c,n),o,l,i(h,j,k,m))}}else return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.key}}function c(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function d(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.key}}function e(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function o(a){if(a!==null)return n(a)}function p(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return[b.key,b.value]}}function q(a){if(a!==null)return p(a)}function r(a){if(a!==null)return p(a)}function s(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return[b.key,b.value]}}function t(a){if(a!==null)return s(a)}function aa(a){if(a!==null)return s(a)}function u(a,b,c){var d=a.left,e=a.right,f=a.key;a=a.value;if(d!==null)return l(u(d,b,c),f,a,e);else{b[0]=f;c[0]=a;return e}}function ba(a){return a===null}function v(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function w(a,b){__p&&__p();if(a!==null){var c=w(a.left,b);if(c!==void 0)return c;else{c=a.key;var d=a.value,e=b(c,d);if(e)return[c,d];else{e=w(a.right,b);if(e!==void 0)return e;else return void 0}}}}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null){x(c.left,b);b(c.key,c.value);a=c.right;continue}else return 0}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a!==null){var c=y(a.left,b),d=b(a.value);b=y(a.right,b);return{key:a.key,value:d,height:a.height,left:c,right:b}}else return null}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null){var c=a.key,d=z(a.left,b),e=b(c,a.value);b=z(a.right,b);return{key:c,value:e,height:a.height,left:d,right:b}}else return null}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.key,h=e.value;e=e.right;b=c(A(f,d,c),g,h);a=e;continue}else return d}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)&&B(c.left,b)){a=c.right;continue}else return!1;else return!0}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)||C(c.left,b))return!0;else{a=c.right;continue}else return!1}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==null)return l(D(a.left,b,c),a.key,a.value,a.right);else return j(b,c)}function E(a,b,c){if(a!==null)return l(a.left,a.key,a.value,E(a.right,b,c));else return j(b,c)}function F(a,b,c,d){__p&&__p();if(a!==null)if(d!==null){var e=a.left,f=a.key,g=a.value,h=a.right,j=a.height,k=d.left,m=d.key,n=d.value,o=d.right,p=d.height;if(j>(p+2|0))return l(e,f,g,F(h,b,c,d));else if(p>(j+2|0))return l(F(a,b,c,k),m,n,o);else return i(a,b,c,d)}else return E(a,b,c);else return D(d,b,c)}function G(a,b){if(a!==null)if(b!==null){var c=[b.key],d=[b.value],e=u(b,c,d);return F(a,c[0],d[0],e)}else return a;else return b}function ja(a,c,d,e){if(d!==void 0)return F(a,c,b("bs_js_primitive").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a!==null){var c=a.key,d=a.value,e=H(a.left,b),f=b(c,d);a=H(a.right,b);if(f)return F(e,c,d,a);else return G(e,a)}else return null}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a!==null){var d=a.key,e=a.value,f=I(a.left,c);e=c(d,e);a=I(a.right,c);if(e!==void 0)return F(f,d,b("bs_js_primitive").valFromOption(e),a);else return G(f,a)}else return null}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){__p&&__p();if(a!==null){var c=a.key,d=a.value,e=J(a.left,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.right,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}else return[null,null]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.left;a=a.right;b=b!==null?K(b):0;a=a!==null?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==null)return K(a);else return 0}function M(a,b){__p&&__p();while(!0){var c=b,d=a;if(d!==null){var e=d.left,f=d.right,g=d.key;d=d.value;b=[[g,d],M(f,c)];a=e;continue}else return c}}function na(a){return M(a,0)}function N(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLtree.ml", line 385, characters 6-12');N(c);a=b;continue}else return 0}}function O(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key;e=e.right;f=f!==null?O(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function P(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.right;f=f!==null?P(f,d,c):d;c[f]=e.value;d=f+1|0;if(g!==null){b=d;a=g;continue}else return d}}function Q(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key,h=e.right;f=f!==null?Q(f,d,c):d;c[f]=[g,e.value];d=f+1|0;if(h!==null){b=d;a=h;continue}else return d}}function oa(b){if(b!==null){var a=K(b);a=new Array(a);Q(b,0,a);return a}else return[]}function pa(b){if(b!==null){var a=K(b);a=new Array(a);O(b,0,a);return a}else return[]}function qa(b){if(b!==null){var a=K(b);a=new Array(a);P(b,0,a);return a}else return[]}function R(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=R(a,b,d),f=a[b-d|0];d=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b-1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b-1|0];c=a[b-2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function S(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=S(a,b,d),f=a[b+d|0];d=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b+1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b+1|0];c=a[b+2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);c=c;d=d;while(!0){var g=b,h=a;if(h&&g){var i=g[0],j=h[0],k=c(j.key,i.key);if(k===0){var l=d(j.value,i.value);if(l===0){b=v(i.right,g[1]);a=v(j.right,h[1]);continue}else return l}else return k}else return 0}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);a=c;b=d;while(!0){c=f;d=e;if(d&&c){var g=c[0],h=d[0];if(a(h.key,g.key)===0&&b(h.value,g.value)){f=v(g.right,c[1]);e=v(h.right,d[1]);continue}else return!1}else return!0}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.key;f=a(d,f);if(f===0)return b("bs_js_primitive").some(e.value);else{c=f<0?e.left:e.right;continue}}else return void 0}}function va(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else return void 0}}function wa(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function xa(b,c,d,a){__p&&__p();while(!0){var e=b;if(e!==null){var f=e.key;f=a(c,f);if(f===0)return e.value;else{b=f<0?e.left:e.right;continue}}else return d}}function ya(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function za(a){var b=W(a.left);a.left=b;return V(a)}function Aa(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(za(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(Aa(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(b,c,d,a){__p&&__p();if(b!==null){var e=b.key;e=a(c,e);if(e===0){b.value=d;return b}else{var f=b.left,g=b.right;if(e<0){e=Z(f,c,d,a);b.left=e}else b.right=Z(g,c,d,a);return Y(b)}}else return j(c,d)}function Ba(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.key=b.key;return c}}var Ca=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.empty=Ca;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MapDict",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,h=a(d,f);if(h===0)return b("bs_belt_internalAVLtree").updateValue(c,e);else{var i=c.left,j=c.right;c=c.value;if(h<0)return b("bs_belt_internalAVLtree").bal(g(i,d,e,a),f,c,j);else return b("bs_belt_internalAVLtree").bal(i,f,c,g(j,d,e,a))}}else return b("bs_belt_internalAVLtree").singleton(d,e)}function h(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,g=a(d,f);if(g===0){var i=e(b("bs_js_primitive").some(c.value));if(i!==void 0)return b("bs_belt_internalAVLtree").updateValue(c,b("bs_js_primitive").valFromOption(i));else{i=c.left;var j=c.right;if(i!==null)if(j!==null){var k=[j.key],l=[j.value],m=b("bs_belt_internalAVLtree").removeMinAuxWithRef(j,k,l);return b("bs_belt_internalAVLtree").bal(i,k[0],l[0],m)}else return i;else return j}}else{k=c.left;l=c.right;m=c.value;if(g<0){i=h(k,d,e,a);if(k===i)return c;else return b("bs_belt_internalAVLtree").bal(i,f,m,l)}else{j=h(l,d,e,a);if(l===j)return c;else return b("bs_belt_internalAVLtree").bal(k,f,m,j)}}}else{g=e(void 0);if(g!==void 0)return b("bs_belt_internalAVLtree").singleton(d,b("bs_js_primitive").valFromOption(g));else return c}}function a(c,d,e,a){return h(c,d,b("bs_curry").__1(e),a)}function i(c,d,a){__p&&__p();var e=c.left,f=c.key,g=c.right,h=a(d,f);if(h===0)if(e!==null)if(g!==null){var j=[g.key],k=[g.value],l=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,j,k);return b("bs_belt_internalAVLtree").bal(e,j[0],k[0],l)}else return e;else return g;else if(h<0)if(e!==null){j=i(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLtree").bal(j,f,c.value,g)}else return c;else if(g!==null){k=i(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(e,f,c.value,k)}else return c}function c(c,d,a){if(c!==null)return i(c,d,a);else return b("bs_belt_internalAVLtree").empty}function d(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f[0],f[1],a)}return b}function j(c,d,e,a){__p&&__p();var f=c.left,g=c.key,h=c.value,i=c.right,k=a(d,g);if(k===0){e[0]=b("bs_js_primitive").some(h);return[f,i]}else if(k<0)if(f!==null){k=j(f,d,e,a);return[k[0],b("bs_belt_internalAVLtree").join(k[1],g,h,i)]}else return[b("bs_belt_internalAVLtree").empty,c];else if(i!==null){k=j(i,d,e,a);return[b("bs_belt_internalAVLtree").join(f,g,h,k[0]),k[1]]}else return[c,b("bs_belt_internalAVLtree").empty]}function e(c,d,a){if(c!==null){var e=[void 0];c=j(c,d,e,a);return[c,e[0]]}else return[[b("bs_belt_internalAVLtree").empty,b("bs_belt_internalAVLtree").empty],void 0]}function k(c,d,e,a){__p&&__p();if(c!==null)if(d!==null)if(c.height>=d.height){var f=c.left,g=c.key,h=c.value,i=c.right,l=[void 0],m=j(d,g,l,a);l=l[0];f=k(f,m[0],e,a);h=e(g,b("bs_js_primitive").some(h),l);l=k(i,m[1],e,a);return b("bs_belt_internalAVLtree").concatOrJoin(f,g,h,l)}else{i=d.left;m=d.key;f=d.value;g=d.right;h=[void 0];l=j(c,m,h,a);h=h[0];i=k(l[0],i,e,a);h=e(m,h,b("bs_js_primitive").some(f));f=k(l[1],g,e,a);return b("bs_belt_internalAVLtree").concatOrJoin(i,m,h,f)}else return b("bs_belt_internalAVLtree").keepMapU(c,function(a,c){return e(a,b("bs_js_primitive").some(c),void 0)});else if(d!==null)return b("bs_belt_internalAVLtree").keepMapU(d,function(a,c){return e(a,void 0,b("bs_js_primitive").some(c))});else return b("bs_belt_internalAVLtree").empty}function l(c,d,e,a){return k(c,d,b("bs_curry").__3(e),a)}function m(c,d,a){__p&&__p();var e=d.length;if(c!==null){c=c;d=d;var f=0;e=e;a=a;while(!0){var g=f,h=c;if(g<e){var j=d[g];j=i(h,j,a);if(j!==null){f=g+1|0;c=j;continue}else return j}else return h}}else return b("bs_belt_internalAVLtree").empty}var n=b("bs_belt_internalAVLtree").empty,o=b("bs_belt_internalAVLtree").isEmpty,p=b("bs_belt_internalAVLtree").has,q=b("bs_belt_internalAVLtree").cmpU,r=b("bs_belt_internalAVLtree").cmp,s=b("bs_belt_internalAVLtree").eqU,t=b("bs_belt_internalAVLtree").eq,u=b("bs_belt_internalAVLtree").findFirstByU,v=b("bs_belt_internalAVLtree").findFirstBy,w=b("bs_belt_internalAVLtree").forEachU,x=b("bs_belt_internalAVLtree").forEach,y=b("bs_belt_internalAVLtree").reduceU,z=b("bs_belt_internalAVLtree").reduce,A=b("bs_belt_internalAVLtree").everyU,B=b("bs_belt_internalAVLtree").every,C=b("bs_belt_internalAVLtree").someU,D=b("bs_belt_internalAVLtree").some,E=b("bs_belt_internalAVLtree").size,F=b("bs_belt_internalAVLtree").toList,G=b("bs_belt_internalAVLtree").toArray,H=b("bs_belt_internalAVLtree").fromArray,I=b("bs_belt_internalAVLtree").keysToArray,J=b("bs_belt_internalAVLtree").valuesToArray,K=b("bs_belt_internalAVLtree").minKey,L=b("bs_belt_internalAVLtree").minKeyUndefined,M=b("bs_belt_internalAVLtree").maxKey,N=b("bs_belt_internalAVLtree").maxKeyUndefined,O=b("bs_belt_internalAVLtree").minimum,P=b("bs_belt_internalAVLtree").minUndefined,Q=b("bs_belt_internalAVLtree").maximum,R=b("bs_belt_internalAVLtree").maxUndefined,S=b("bs_belt_internalAVLtree").get,T=b("bs_belt_internalAVLtree").getUndefined,U=b("bs_belt_internalAVLtree").getWithDefault,V=b("bs_belt_internalAVLtree").getExn,W=b("bs_belt_internalAVLtree").checkInvariantInternal,X=b("bs_belt_internalAVLtree").keepSharedU,Y=b("bs_belt_internalAVLtree").keepShared,Z=b("bs_belt_internalAVLtree").partitionSharedU,$=b("bs_belt_internalAVLtree").partitionShared,aa=b("bs_belt_internalAVLtree").mapU,ba=b("bs_belt_internalAVLtree").map,ca=b("bs_belt_internalAVLtree").mapWithKeyU,da=b("bs_belt_internalAVLtree").mapWithKey;f.empty=n;f.isEmpty=o;f.has=p;f.cmpU=q;f.cmp=r;f.eqU=s;f.eq=t;f.findFirstByU=u;f.findFirstBy=v;f.forEachU=w;f.forEach=x;f.reduceU=y;f.reduce=z;f.everyU=A;f.every=B;f.someU=C;f.some=D;f.size=E;f.toList=F;f.toArray=G;f.fromArray=H;f.keysToArray=I;f.valuesToArray=J;f.minKey=K;f.minKeyUndefined=L;f.maxKey=M;f.maxKeyUndefined=N;f.minimum=O;f.minUndefined=P;f.maximum=Q;f.maxUndefined=R;f.get=S;f.getUndefined=T;f.getWithDefault=U;f.getExn=V;f.checkInvariantInternal=W;f.remove=c;f.removeMany=m;f.set=g;f.updateU=h;f.update=a;f.mergeU=k;f.merge=l;f.mergeMany=d;f.keepU=X;f.keep=Y;f.partitionU=Z;f.partition=$;f.split=e;f.mapU=aa;f.map=ba;f.mapWithKeyU=ca;f.mapWithKey=da}),null);
__d("bs_belt_Map",["bs_curry","bs_belt_MapDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_MapDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_MapDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp;c=c.data;c=b("bs_belt_MapDict").removeMany(c,d,a);return{cmp:a,data:c}}function e(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").set(c.data,d,e,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeMany(c.data,d,a)}}function h(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").updateU(c.data,d,e,a)}}function i(a,c,d){return h(a,c,b("bs_curry").__1(d))}function j(c,d){var a=c.cmp;c=b("bs_belt_MapDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function k(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeU(c.data,d.data,e,a)}}function l(a,c,d){return k(a,c,b("bs_curry").__3(d))}function m(a){return{cmp:a[0],data:b("bs_belt_MapDict").empty}}function n(a){return b("bs_belt_MapDict").isEmpty(a.data)}function o(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,c)}function p(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,b("bs_curry").__2(c))}function q(a,c){return b("bs_belt_MapDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_MapDict").forEachU(a.data,b("bs_curry").__2(c))}function s(a,c,d){return b("bs_belt_MapDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__3(d))}function u(a,c){return b("bs_belt_MapDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_MapDict").everyU(a.data,b("bs_curry").__2(c))}function w(a,c){return b("bs_belt_MapDict").someU(a.data,c)}function x(a,c){return b("bs_belt_MapDict").someU(a.data,b("bs_curry").__2(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__2(c))}function A(c,d){var a=c.cmp;c=b("bs_belt_MapDict").partitionU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__2(c))}function C(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapU(a.data,c)}}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapWithKeyU(a.data,c)}}function F(a,c){return E(a,b("bs_curry").__2(c))}function G(a){return b("bs_belt_MapDict").size(a.data)}function H(a){return b("bs_belt_MapDict").toList(a.data)}function I(a){return b("bs_belt_MapDict").toArray(a.data)}function J(a){return b("bs_belt_MapDict").keysToArray(a.data)}function K(a){return b("bs_belt_MapDict").valuesToArray(a.data)}function L(a){return b("bs_belt_MapDict").minKey(a.data)}function M(a){return b("bs_belt_MapDict").minKeyUndefined(a.data)}function N(a){return b("bs_belt_MapDict").maxKey(a.data)}function O(a){return b("bs_belt_MapDict").maxKeyUndefined(a.data)}function P(a){return b("bs_belt_MapDict").minimum(a.data)}function Q(a){return b("bs_belt_MapDict").minUndefined(a.data)}function R(a){return b("bs_belt_MapDict").maximum(a.data)}function S(a){return b("bs_belt_MapDict").maxUndefined(a.data)}function T(a,c){return b("bs_belt_MapDict").get(a.data,c,a.cmp)}function U(a,c){return b("bs_belt_MapDict").getUndefined(a.data,c,a.cmp)}function V(a,c,d){return b("bs_belt_MapDict").getWithDefault(a.data,c,d,a.cmp)}function W(a,c){return b("bs_belt_MapDict").getExn(a.data,c,a.cmp)}function X(a,c){return b("bs_belt_MapDict").has(a.data,c,a.cmp)}function Y(a){return b("bs_belt_MapDict").checkInvariantInternal(a.data)}function Z(a,c,d){return b("bs_belt_MapDict").eqU(a.data,c.data,a.cmp,d)}function aa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,c,d){return b("bs_belt_MapDict").cmpU(a.data,c.data,a.cmp,d)}function ba(a,c,d){return $(a,c,b("bs_curry").__2(d))}function ca(a){return a.data}function da(a){a=a.cmp;return[a]}function ea(a,b){return{cmp:a[0],data:b}}var fa=0,ga=0,ha=0;f.Int=fa;f.$$String=ga;f.Dict=ha;f.make=m;f.isEmpty=n;f.has=X;f.cmpU=$;f.cmp=ba;f.eqU=Z;f.eq=aa;f.findFirstByU=o;f.findFirstBy=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.size=G;f.toArray=I;f.toList=H;f.fromArray=a;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.remove=c;f.removeMany=d;f.set=e;f.updateU=h;f.update=i;f.mergeMany=g;f.mergeU=k;f.merge=l;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.split=j;f.mapU=C;f.map=D;f.mapWithKeyU=E;f.mapWithKey=F;f.getData=ca;f.getId=da;f.packIdData=ea;f.checkInvariantInternal=Y}),null);
__d("bs_belt_internalMapString",["bs_curry","bs_js_primitive","bs_belt_SortArray","bs_caml_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function a(a,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(c===e)return b("bs_js_primitive").some(d.value);else{a=c<e?d.left:d.right;continue}}else return void 0}}function c(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else return void 0}}function d(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else throw new Error("getExn")}}function e(a,b,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(b===e)return d.value;else{a=b<e?d.left:d.right;continue}}else return c}}function h(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return!0;else{a=b<d?c.left:c.right;continue}}else return!1}}function i(a,c){__p&&__p();if(a!==null){var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)return b("bs_belt_internalAVLtree").bal(i(d,c),e,a.value,f);else return b("bs_belt_internalAVLtree").bal(d,e,a.value,i(f,c))}else return a}function j(a,c){__p&&__p();var d=c.left,e=c.key,f=c.value,g=c.right;if(a===e)return[d,b("bs_js_primitive").some(f),g];else if(a<e)if(d!==null){var h=j(a,d);return[h[0],h[1],b("bs_belt_internalAVLtree").join(h[2],e,f,g)]}else return[b("bs_belt_internalAVLtree").empty,void 0,c];else if(g!==null){h=j(a,g);return[b("bs_belt_internalAVLtree").join(d,e,f,h[0]),h[1],h[2]]}else return[c,void 0,b("bs_belt_internalAVLtree").empty]}function k(a,c){if(c!==null)return j(a,c);else return[b("bs_belt_internalAVLtree").empty,void 0,b("bs_belt_internalAVLtree").empty]}function l(a,c,d){__p&&__p();if(a!==null)if(a.height>=(c!==null?c.height:0)){var e=a.left,f=a.key,g=a.value,h=a.right,i=k(f,c);return b("bs_belt_internalAVLtree").concatOrJoin(l(e,i[0],d),f,d(f,b("bs_js_primitive").some(g),i[1]),l(h,i[2],d))}else e=1;else if(c!==null)e=1;else return b("bs_belt_internalAVLtree").empty;if(e===1)if(c!==null){f=c.left;g=c.key;h=c.value;i=c.right;e=k(g,a);return b("bs_belt_internalAVLtree").concatOrJoin(l(e[0],f,d),g,d(g,e[1],b("bs_js_primitive").some(h)),l(e[2],i,d))}else return 0}function m(a,c,d){return l(a,c,b("bs_curry").__3(d))}function n(a,c,d){__p&&__p();while(!0){var e=c,f=a;if(f&&e){var g=e[0],h=f[0],i=b("bs_caml_primitive").caml_string_compare(h.key,g.key);if(i===0){var j=d(h.value,g.value);if(j===0){c=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);a=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return j}else return i}else return 0}}function o(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return n(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else if(e<f)return-1;else return 1}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}function q(c,d,a){__p&&__p();while(!0){var e=d,f=c;if(f&&e){var g=e[0],h=f[0];if(h.key===g.key&&a(h.value,g.value)){d=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);c=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return!1}else return!0}}function r(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return q(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else return!1}function s(a,c,d){return r(a,c,b("bs_curry").__2(d))}function t(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){a.key=c;a.value=d;return a}else{var f=a.left,g=a.right;if(c<e){e=t(f,c,d);a.left=e}else a.right=t(g,c,d);return b("bs_belt_internalAVLtree").balMutate(a)}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function u(a){__p&&__p();var c=a.length;if(c===0)return b("bs_belt_internalAVLtree").empty;else{var d=b("bs_belt_SortArray").strictlySortedLengthU(a,function(a,b){return a[0]<b[0]}),e;d>=0?e=b("bs_belt_internalAVLtree").fromSortedArrayAux(a,0,d):(d=-d|0,e=b("bs_belt_internalAVLtree").fromSortedArrayRevAux(a,d-1|0,d));for(var d=d,c=c-1|0;d<=c;++d){var f=a[d];e=t(e,f[0],f[1])}return e}}var v=0,w=0,x=0;f.N=v;f.A=w;f.S=x;f.add=g;f.get=a;f.getUndefined=c;f.getExn=d;f.getWithDefault=e;f.has=h;f.remove=i;f.splitAux=j;f.split=k;f.mergeU=l;f.merge=m;f.compareAux=n;f.cmpU=o;f.cmp=p;f.eqAux=q;f.eqU=r;f.eq=s;f.addMutate=t;f.fromArray=u}),null);
__d("bs_belt_MapString",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree","bs_belt_internalMapString"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function h(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){var f=d(b("bs_js_primitive").some(a.value));if(f!==void 0)return b("bs_belt_internalAVLtree").updateValue(a,b("bs_js_primitive").valFromOption(f));else{f=a.left;var g=a.right;if(f!==null)if(g!==null){var i=[g.key],j=[g.value],k=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,i,j);return b("bs_belt_internalAVLtree").bal(f,i[0],j[0],k)}else return f;else return g}}else{i=a.left;j=a.right;k=a.value;if(c<e){f=h(i,c,d);if(i===f)return a;else return b("bs_belt_internalAVLtree").bal(f,e,k,j)}else{g=h(j,c,d);if(j===g)return a;else return b("bs_belt_internalAVLtree").bal(i,e,k,g)}}}else{f=d(void 0);if(f!==void 0)return b("bs_belt_internalAVLtree").singleton(c,b("bs_js_primitive").valFromOption(f));else return a}}function a(a,c,d){return h(a,c,b("bs_curry").__1(d))}function i(a,c){__p&&__p();var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)if(d!==null){g=i(d,c);if(g===d)return a;else return b("bs_belt_internalAVLtree").bal(g,e,a.value,f)}else return a;else if(f!==null){h=i(f,c);return b("bs_belt_internalAVLtree").bal(d,e,a.value,h)}else return a}function c(a,c){if(a!==null)return i(a,c);else return b("bs_belt_internalAVLtree").empty}function d(a,c){__p&&__p();var d=c.length;if(a!==null){a=a;c=c;var e=0;d=d;while(!0){var f=e,g=a;if(f<d){var h=c[f];h=i(g,h);if(h!==null){e=f+1|0;a=h;continue}else return h}else return g}}else return b("bs_belt_internalAVLtree").empty}function e(a,b){var c=b.length;a=a;for(var d=0,c=c-1|0;d<=c;++d){var e=b[d];a=g(a,e[0],e[1])}return a}var j=b("bs_belt_internalAVLtree").empty,k=b("bs_belt_internalAVLtree").isEmpty,l=b("bs_belt_internalMapString").has,m=b("bs_belt_internalMapString").cmpU,n=b("bs_belt_internalMapString").cmp,o=b("bs_belt_internalMapString").eqU,p=b("bs_belt_internalMapString").eq,q=b("bs_belt_internalAVLtree").findFirstByU,r=b("bs_belt_internalAVLtree").findFirstBy,s=b("bs_belt_internalAVLtree").forEachU,t=b("bs_belt_internalAVLtree").forEach,u=b("bs_belt_internalAVLtree").reduceU,v=b("bs_belt_internalAVLtree").reduce,w=b("bs_belt_internalAVLtree").everyU,x=b("bs_belt_internalAVLtree").every,y=b("bs_belt_internalAVLtree").someU,z=b("bs_belt_internalAVLtree").some,A=b("bs_belt_internalAVLtree").size,B=b("bs_belt_internalAVLtree").toList,C=b("bs_belt_internalAVLtree").toArray,D=b("bs_belt_internalMapString").fromArray,E=b("bs_belt_internalAVLtree").keysToArray,F=b("bs_belt_internalAVLtree").valuesToArray,G=b("bs_belt_internalAVLtree").minKey,H=b("bs_belt_internalAVLtree").minKeyUndefined,I=b("bs_belt_internalAVLtree").maxKey,J=b("bs_belt_internalAVLtree").maxKeyUndefined,K=b("bs_belt_internalAVLtree").minimum,L=b("bs_belt_internalAVLtree").minUndefined,M=b("bs_belt_internalAVLtree").maximum,N=b("bs_belt_internalAVLtree").maxUndefined,O=b("bs_belt_internalMapString").get,P=b("bs_belt_internalMapString").getUndefined,Q=b("bs_belt_internalMapString").getWithDefault,R=b("bs_belt_internalMapString").getExn,S=b("bs_belt_internalAVLtree").checkInvariantInternal,T=b("bs_belt_internalMapString").mergeU,U=b("bs_belt_internalMapString").merge,V=b("bs_belt_internalAVLtree").keepSharedU,W=b("bs_belt_internalAVLtree").keepShared,X=b("bs_belt_internalAVLtree").partitionSharedU,Y=b("bs_belt_internalAVLtree").partitionShared,Z=b("bs_belt_internalMapString").split,$=b("bs_belt_internalAVLtree").mapU,aa=b("bs_belt_internalAVLtree").map,ba=b("bs_belt_internalAVLtree").mapWithKeyU,ca=b("bs_belt_internalAVLtree").mapWithKey;f.empty=j;f.isEmpty=k;f.has=l;f.cmpU=m;f.cmp=n;f.eqU=o;f.eq=p;f.findFirstByU=q;f.findFirstBy=r;f.forEachU=s;f.forEach=t;f.reduceU=u;f.reduce=v;f.everyU=w;f.every=x;f.someU=y;f.some=z;f.size=A;f.toList=B;f.toArray=C;f.fromArray=D;f.keysToArray=E;f.valuesToArray=F;f.minKey=G;f.minKeyUndefined=H;f.maxKey=I;f.maxKeyUndefined=J;f.minimum=K;f.minUndefined=L;f.maximum=M;f.maxUndefined=N;f.get=O;f.getUndefined=P;f.getWithDefault=Q;f.getExn=R;f.checkInvariantInternal=S;f.remove=c;f.removeMany=d;f.set=g;f.updateU=h;f.update=a;f.mergeU=T;f.merge=U;f.mergeMany=e;f.keepU=V;f.keep=W;f.partitionU=X;f.partition=Y;f.split=Z;f.mapU=$;f.map=aa;f.mapWithKeyU=ba;f.mapWithKey=ca}),null);
__d("bs_belt_SetDict",["bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,a){__p&&__p();if(c!==null){var e=c.value,f=a(d,e);if(f===0)return c;else{var h=c.left,i=c.right;if(f<0){f=g(h,d,a);if(f===h)return c;else return b("bs_belt_internalAVLset").bal(f,e,i)}else{f=g(i,d,a);if(f===i)return c;else return b("bs_belt_internalAVLset").bal(h,e,f)}}}else return b("bs_belt_internalAVLset").singleton(d)}function h(c,d,a){__p&&__p();if(c!==null){var e=c.left,f=c.value,g=c.right,i=a(d,f);if(i===0)if(e!==null)if(g!==null){var j=[g.value],k=b("bs_belt_internalAVLset").removeMinAuxWithRef(g,j);return b("bs_belt_internalAVLset").bal(e,j[0],k)}else return e;else return g;else if(i<0){j=h(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLset").bal(j,f,g)}else{k=h(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLset").bal(e,f,k)}}else return c}function a(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f,a)}return b}function c(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f,a)}return b}function i(a,c,d){__p&&__p();var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)return[e,g];else if(h<0)if(e!==null){h=i(a,e,d);return[h[0],b("bs_belt_internalAVLset").joinShared(h[1],f,g)]}else return[b("bs_belt_internalAVLset").empty,c];else if(g!==null){h=i(a,g,d);return[b("bs_belt_internalAVLset").joinShared(e,f,h[0]),h[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function j(a,c,d,e){__p&&__p();var f=c.left,g=c.value,h=c.right,i=a(d,g);if(i===0){e[0]=!0;return[f,h]}else if(i<0)if(f!==null){i=j(a,f,d,e);return[i[0],b("bs_belt_internalAVLset").joinShared(i[1],g,h)]}else return[b("bs_belt_internalAVLset").empty,c];else if(h!==null){i=j(a,h,d,e);return[b("bs_belt_internalAVLset").joinShared(f,g,i[0]),i[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function d(c,d,a){if(c!==null){var e=[!1];a=j(a,c,d,e);return[a,e[0]]}else return[[b("bs_belt_internalAVLset").empty,b("bs_belt_internalAVLset").empty],!1]}function k(c,d,a){__p&&__p();if(c!==null)if(d!==null){var e=c.height,f=d.height;if(e>=f)if(f===1)return g(c,d.value,a);else{f=c.left;var h=c.value,j=c.right,l=i(a,d,h);return b("bs_belt_internalAVLset").joinShared(k(f,l[0],a),h,k(j,l[1],a))}else if(e===1)return g(d,c.value,a);else{f=d.left;h=d.value;j=d.right;l=i(a,c,h);return b("bs_belt_internalAVLset").joinShared(k(l[0],f,a),h,k(l[1],j,a))}}else return c;else return d}function l(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value;c=c.right;var g=[!1];d=j(a,d,f,g);e=l(e,d[0],a);c=l(c,d[1],a);if(g[0])return b("bs_belt_internalAVLset").joinShared(e,f,c);else return b("bs_belt_internalAVLset").concatShared(e,c)}else return b("bs_belt_internalAVLset").empty}function m(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value,g=c.right,h=[!1];d=j(a,d,f,h);e=m(e,d[0],a);g=m(g,d[1],a);if(h[0])return b("bs_belt_internalAVLset").concatShared(e,g);else return b("bs_belt_internalAVLset").joinShared(e,f,g)}else return c}e=b("bs_belt_internalAVLset").empty;var n=b("bs_belt_internalAVLset").fromArray,o=b("bs_belt_internalAVLset").fromSortedArrayUnsafe,p=b("bs_belt_internalAVLset").isEmpty,q=b("bs_belt_internalAVLset").has,r=b("bs_belt_internalAVLset").subset,s=b("bs_belt_internalAVLset").cmp,t=b("bs_belt_internalAVLset").eq,u=b("bs_belt_internalAVLset").forEachU,v=b("bs_belt_internalAVLset").forEach,w=b("bs_belt_internalAVLset").reduceU,x=b("bs_belt_internalAVLset").reduce,y=b("bs_belt_internalAVLset").everyU,z=b("bs_belt_internalAVLset").every,A=b("bs_belt_internalAVLset").someU,B=b("bs_belt_internalAVLset").some,C=b("bs_belt_internalAVLset").keepSharedU,D=b("bs_belt_internalAVLset").keepShared,E=b("bs_belt_internalAVLset").partitionSharedU,F=b("bs_belt_internalAVLset").partitionShared,G=b("bs_belt_internalAVLset").size,H=b("bs_belt_internalAVLset").toList,I=b("bs_belt_internalAVLset").toArray,J=b("bs_belt_internalAVLset").minimum,K=b("bs_belt_internalAVLset").minUndefined,L=b("bs_belt_internalAVLset").maximum,M=b("bs_belt_internalAVLset").maxUndefined,N=b("bs_belt_internalAVLset").get,O=b("bs_belt_internalAVLset").getUndefined,P=b("bs_belt_internalAVLset").getExn,Q=b("bs_belt_internalAVLset").checkInvariantInternal;f.empty=e;f.fromArray=n;f.fromSortedArrayUnsafe=o;f.isEmpty=p;f.has=q;f.add=g;f.mergeMany=a;f.remove=h;f.removeMany=c;f.union=k;f.intersect=l;f.diff=m;f.subset=r;f.cmp=s;f.eq=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.keepU=C;f.keep=D;f.partitionU=E;f.partition=F;f.size=G;f.toList=H;f.toArray=I;f.minimum=J;f.minUndefined=K;f.maximum=L;f.maxUndefined=M;f.get=N;f.getUndefined=O;f.getExn=P;f.split=d;f.checkInvariantInternal=Q}),null);
__d("bs_belt_Set",["bs_curry","bs_belt_SetDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_SetDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").add(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function e(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").mergeMany(c.data,d,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").removeMany(c.data,d,a)}}function h(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").union(c.data,d.data,a)}}function i(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").intersect(c.data,d.data,a)}}function j(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").diff(c.data,d.data,a)}}function k(c,d){var a=c.cmp;return b("bs_belt_SetDict").subset(c.data,d.data,a)}function l(c,d){var a=c.cmp;c=b("bs_belt_SetDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function m(a){return{cmp:a[0],data:b("bs_belt_SetDict").empty}}function n(a){return b("bs_belt_SetDict").isEmpty(a.data)}function o(a,c){var d=a.cmp;return b("bs_belt_SetDict").cmp(a.data,c.data,d)}function p(a,c){return b("bs_belt_SetDict").eq(a.data,c.data,a.cmp)}function q(a,c){return b("bs_belt_SetDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_SetDict").forEachU(a.data,b("bs_curry").__1(c))}function s(a,c,d){return b("bs_belt_SetDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}function u(a,c){return b("bs_belt_SetDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_SetDict").everyU(a.data,b("bs_curry").__1(c))}function w(a,c){return b("bs_belt_SetDict").someU(a.data,c)}function x(a,c){return b("bs_belt_SetDict").someU(a.data,b("bs_curry").__1(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_SetDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__1(c))}function A(a,c){c=b("bs_belt_SetDict").partitionU(a.data,c);a=a.cmp;return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__1(c))}function C(a){return b("bs_belt_SetDict").size(a.data)}function D(a){return b("bs_belt_SetDict").toList(a.data)}function E(a){return b("bs_belt_SetDict").toArray(a.data)}function F(a){return b("bs_belt_SetDict").minimum(a.data)}function G(a){return b("bs_belt_SetDict").minUndefined(a.data)}function H(a){return b("bs_belt_SetDict").maximum(a.data)}function I(a){return b("bs_belt_SetDict").maxUndefined(a.data)}function J(a,c){return b("bs_belt_SetDict").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_SetDict").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_SetDict").getExn(a.data,c,a.cmp)}function M(a,c){return b("bs_belt_SetDict").has(a.data,c,a.cmp)}function N(a,c){return{cmp:c[0],data:b("bs_belt_SetDict").fromSortedArrayUnsafe(a)}}function O(a){return a.data}function P(a){a=a.cmp;return[a]}function Q(a,b){return{cmp:a[0],data:b}}function R(a){return b("bs_belt_SetDict").checkInvariantInternal(a.data)}var S=0,T=0,U=0;f.Int=S;f.$$String=T;f.Dict=U;f.make=m;f.fromArray=a;f.fromSortedArrayUnsafe=N;f.isEmpty=n;f.has=M;f.add=d;f.mergeMany=e;f.remove=c;f.removeMany=g;f.union=h;f.intersect=i;f.diff=j;f.subset=k;f.cmp=o;f.eq=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.size=C;f.toArray=E;f.toList=D;f.minimum=F;f.minUndefined=G;f.maximum=H;f.maxUndefined=I;f.get=J;f.getUndefined=K;f.getExn=L;f.split=l;f.checkInvariantInternal=R;f.getData=O;f.getId=P;f.packIdData=Q}),null);
__d("bs_js_dict",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){delete a[b];return 0};function a(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function b(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=a[b[e]];return d}function c(a){__p&&__p();var b={};a=a;while(!0){var c=a;if(c){var d=c[0];b[d[0]]=d[1];a=c[1];continue}else return b}}function d(a){var b={},c=a.length;for(var d=0,c=c-1|0;d<=c;++d){var e=a[d];b[e[0]]=e[1]}return b}function e(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0,e=e-1|0;f<=e;++f){var g=d[f];c[g]=a(b[g])}return c}f.unsafeDeleteKey=g;f.entries=a;f.values=b;f.fromList=c;f.fromArray=d;f.map=e}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_block","bs_curry","JSSet.bs","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","bs_belt_Map","bs_belt_Set","bs_caml_obj","JSLogger","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","LogHistory","MercuryIDs","bs_pervasives","bs_belt_Option","ReasonReact.bs","bs_js_primitive","MessagingTag","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MercuryPayloadSource","MercuryThreadActions","MessengerThreadUtils.bs","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","bs_caml_builtin_exceptions","MercuryGlobalActionType","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessengerSharedMediaActions","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","RemovedMessageTombstoneContent","MercuryDisplayTimeFilterMessageRenderer","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return a[0]}function c(a){return a[1]}function d(a){return a[2]}function e(a){return a[3]}function h(a){return a[4]}function i(a){return a[5]}function j(a){return a[6]}function k(a){return a[8]}function l(a){return a[9]}function m(a){return a[10]}function n(a){return a[11]}function o(a){return a[12]}function p(a){return a[13]}function q(a){return a[14]}function r(a){return a[15]}function s(a){return a[16]}function t(a){return a[17]}function aa(a){return a[18]}function ba(a){var c={};b("bs_belt_Map").forEach(a,function(a,b){c[a]=b;return 0});return c}function ca(a){return ba(a[7])}function u(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}));return 0}var v=function(a,b){delete a[b];return 0};function da(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}else return a}function ea(c,a){var d=b("bs_caml_obj").caml_notequal(a.author,b("MercuryViewer").getID()),e=a.thread_id;if(d&&!(e==null)){d=da(c[6],e,a.author);if(d!==c[6])return[c[0],c[1],c[2],c[3],c[4],c[5],d,c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else return c}else return c}function fa(a,c){__p&&__p();var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var w=b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),x=b("MessengerFolders.bs").getSupportedFolders(0).concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);function ga(){var a={};x.forEach(function(b){var c={};w.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()};return 0});a[b]=c;return 0});return a}function ha(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c);return 0}function y(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function ia(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function z(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}function ja(a,c){__p&&__p();var d=new Map();c.forEach(function(a,b){d.set(a,b);return 0});return c.sort(function(c,e){__p&&__p();var f=b("bs_belt_Map").get(a[7],c),g=b("bs_belt_Map").get(a[7],e);if(f!==void 0&&g!==void 0){g=b("bs_js_primitive").valFromOption(g).timestamp-b("bs_js_primitive").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}else f=1;if(f===1){g=d.get(c);f=d.get(e);return b("bs_belt_Option").getExn(g==null?void 0:b("bs_js_primitive").some(g))-b("bs_belt_Option").getExn(f==null?void 0:b("bs_js_primitive").some(f))|0}})}function ka(a,b,c,d){__p&&__p();a=a[12][c];if(a!==void 0){var e=a[d];if(e!==void 0){b.forEach(function(a){if(e.existingIDs.has(a)){e.existingIDs["delete"](a);a=e.threadlist.indexOf(a);e.threadlist.splice(a,1);return 0}else return 0});return 0}else return 0}else return 0}function la(a,b,c,d){__p&&__p();x.forEach(function(e){if(e!==c)return ka(a,b,e,d);else return 0});var e=a[12][c];if(e!==void 0){e=e[d];e=e!==void 0?[e.threadlist,e.existingIDs]:[[],new Set()]}else e=[[],new Set()];var f=e[1],g=e[0];b.forEach(function(a){if(f.has(a))return 0;else{f.add(a);g.push(a);return 0}});return[ja(a,g),f]}function ma(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e.add(b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}var na=b("MessengerFolders.bs").getSupportedFolders(0).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED});function oa(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e["delete"](b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}function pa(a,c,d){var e=b("MessengerFolders.bs").getFromMeta(c);if(d!==e){na.includes(e)&&c.unread_count>0&&ma(a,e,b("bs_js_primitive").some(c.thread_id));if(na.includes(d))return oa(a,d,b("bs_js_primitive").some(c.thread_id));else return 0}else return 0}function qa(a,c){__p&&__p();var d=b("MessengerFolders.bs").getFromMeta(c);if(x.includes(d)){w.forEach(function(e){var f=a[12][d][e],g=f.existingIDs.has(c.thread_id);la(a,[c.thread_id],d,e);var h=b("bs_caml_obj").caml_equal(b("bs_caml_array").caml_array_get(f.threadlist,f.threadlist.length-1|0),c.thread_id);if(!f.reachedEnd&&!g&&h)return ka(a,[c.thread_id],d,e);else return 0});return 0}else return 0}function ra(a,c,d){__p&&__p();var e=b("bs_belt_Map").get(a[7],c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("MessengerFolders.bs").getFromMeta(e);if(f!==d){var g=e.comm_status;g=g==null?b("ImmutableObject").set(e,{folder:d}):d===b("MessagingTag").OTHER?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").SPAM}):d===b("MessagingTag").INBOX?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(e,{folder:d});e=b("bs_belt_Map").set(a[7],c,g);pa(a,g,f);qa(a,g);y(a[0],c);return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],e,a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}else return a}else return a}function A(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e));return 0}function sa(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a);return 0}function ta(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d);return 0}var ua=function(a,b){delete a[b];return 0};function B(a,c){var d=a[10].get(c);return b("bs_js_primitive").nullable_to_opt(a[9].get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_js_primitive").some(d),c)))}function C(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return B(c,a)});if(a)return d.slice().reverse();else return d}function va(a,c){return b("bs_belt_Array").keepMap(c,function(b){return B(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function D(a,b){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9].set(b[0],b[1]),a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function wa(b,a){b[10].set(a.message_id,a.message_id);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}var xa=function(a,b){delete a[b];return 0};function ya(c,d){__p&&__p();var a=c[15];Object.keys(d).forEach(function(e){__p&&__p();var f=d[e];if(f!==void 0){var g=f[0],h=g[2],i=g[1];g=a.get(g[0]);if(g==null)return 0;else{g=g[1];if(g.length>=(i+h|0)){b("bs_curry")._2(xa,d,e);return b("bs_curry")._1(f[1],C(!0,c,g.slice(i,i+h|0)))}else return 0}}else return 0});return 0}function za(d,c,e){__p&&__p();var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d[10].set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d[9].has(f);var h=d[0],i=d[1],j=d[2],k=d[3],l=d[4],m=d[5],n=d[6],o=d[7],p=d[8],q=d[9].set(f,a),r=d[10],s=d[11],t=d[12],aa=d[13],ba=d[14],ca=d[15],u=d[16],v=d[17];d=d[18];h=[h,i,j,k,l,m,n,o,p,q,r,s,t,aa,ba,ca,u,v,d];if(!g&&e[2]===1){i=b("MercuryIDs").isLocalThread(a.thread_id);j=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(a.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(ca.get(a))}),[i?1:0,[]]);k=a.thread_id;if(!(k==null)){l=va(h,[f].concat(j[1].filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));ca.set(k,[j[0],l])}ya(h,c[3][0])}return h}function Aa(b,c,a){b[11].set(c,a);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}function Ba(a,c){var d=c[1];c=c[0];var e=a[11].get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_js_primitive").some(e))||g(0,1777);a[11]["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function Ca(a,c){__p&&__p();var d=c[0],e=a[15].get(d);if(e==null)return a;else{var f=b("bs_array").map(function(a){return a.message_id},b("bs_belt_Array").keepMap(c[1],function(b){return B(a,b)})),g=va(a,e[1].filter(function(a){return f.indexOf(a)===-1}));a[15].set(d,[e[0],g]);ta(a[0],d,b("bs_js_null_undefined").fromOption(c[2]));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}}function Da(c,d){__p&&__p();var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c[15].get(d)),function(a){return b("bs_belt_Array").get(C(void 0,c,a[1]),0)});if(d!==void 0){var a=b("bs_js_primitive").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=d.removed_timestamp;if(f==null)if(a==null)return e;else{f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}else return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d),snippet_attachments:null,snippet_sender:null}}else return e}function Ea(a){__p&&__p();var c=a.attachments;if(c==null)return 0;else{c=b("bs_belt_Array").keepMap(c,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)&&b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.fbid)}});b("MessengerSharedMediaActions").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),c);return 0}}function Fa(d,c,e,f){__p&&__p();var g=e.client_message_id;if(g==null)return d;else{var h=B(d,g);if(h!==void 0){h=b("bs_js_primitive").valFromOption(h);var i=e.message_id,j=e.status;if(b("bs_caml_obj").caml_equal(h.status,b("MercuryActionStatus").SUCCESS))return d;else if(d[9].has(i)){var a=Object.assign(Object.assign({},h),e);A(d[0],a.thread_id,a.message_id,f);return D(d,[i,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS);a=a?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,i);d[10].set(g,i);h=Object.assign(h,{status:j,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments});b("MessengerMessage.bs").finalizeRanges(h);j=D(d,[i,h]);j[9].set(g,{});j[9]["delete"](g);a=h.thread_id;e=j[15].get(a);if(!(e==null)){var k=va(j,e[1]);j[15].set(a,[e[0],k])}A(j[0],h.thread_id,h.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(h);e=c[2].get(h.thread_id);a&&(e==null||c[2].set(h.thread_id,e-1|0));return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],j[9],j[10].set(g,i),j[11],j[12],j[13],j[14],j[15],j[16],j[17],j[18]]}}else return d}}function Ga(a,c,d){__p&&__p();if(d!==void 0&&b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(d),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)&&b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)){d=c.offline_threading_id;if(d==null||!b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(a[10].get(d)),d))d=1;else return Object.assign({},Object.assign(c,{client_message_id:c.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}));if(d===1){d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c.thread_id),function(c){return b("bs_belt_Map").get(a[7],c)});if(d!==void 0)return Object.assign(Object.assign({},c),{folder:b("bs_js_primitive").valFromOption(d).folder});else return c}}else return c}function Ha(c,a,d,e){__p&&__p();d=Ga(c,d,e);if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return Fa(c,a,d,e);else{var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_js_primitive").some(f),function(a){return b("bs_js_primitive").nullable_to_opt(c[10].get(a))});var g=B(c,d.message_id);if(f!==void 0||g!==void 0)return c;else{f=b("bs_caml_obj").caml_equal(e,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?wa(c,d):c;g=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);e=d.upload_id;g=g&&!(e==null)?Aa(f,e,d):f;e=b("MessengerMessage.bs").isErrorLogMessage(d);f=d.thread_id;e&&(f==null||(a[6][0][f]=!0));e=d.manual_retry_cnt;f=d.thread_id;e==null||!(f==null)&&e>0&&ta(g[0],f,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);e=za(g,a,[d.message_id,d,1]);sa(e[0],d);return e}}}var Ia=function(a,b){delete a[b];return 0};function Ja(a,c){__p&&__p();Object.keys(c).forEach(function(d){__p&&__p();var e=c[d];if(e!==void 0){var f=e[0],g=ba(f.reduce(function(d,e){var c=b("bs_belt_Map").get(a,e);if(c!==void 0)return b("bs_belt_Map").set(d,e,b("bs_js_primitive").valFromOption(c));else return d},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Object.keys(g).length===f.length){b("bs_curry")._2(Ia,c,d);return b("bs_curry")._1(e[1],g)}else return 0}else return 0});return 0}function E(c,a,d){a=a.specific_to_list;if(a==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),c]}else return a}function Ka(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=E(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:void 0,cannot_reply_reason:null,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],group_approval_queue:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,thread_fbid:null,thread_type:null,thread_id:d,participants:c,name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null})}function La(c,d,a,e){__p&&__p();e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return void 0;else{b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_js_primitive").some(b("bs_js_primitive").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_js_primitive").some(Ka(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return void 0}}function Ma(c,a,d){d=b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)?d==null?!0:!d:b("MessengerMessage.bs").hasServerTimestamp(a,d);if(c.server_timestamp!==0&&a.timestamp<c.server_timestamp)return d;else return!1}function Na(c,d,a,e){var f=a.offline_threading_id;if(!(f==null)&&d.server_timestamp!==0&&b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&f.length>0&&b("bs_caml_obj").caml_notequal(a.author,b("MercuryIDs").getParticipantIDFromUserID(c)))if(e.has(f))return!0;else{e.add(f);return!1}else return!1}function F(a,c,d){__p&&__p();var e=new Set(c.participants);Object.assign(c,{participants:Array.from(c.participants)});d.forEach(function(d){if(e.has(d))return 0;else{c.participants.push(d);if(b("bs_caml_obj").caml_equal(d,a)){Object.assign(c,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return 0}else return 0}});return 0}function Oa(a,c,d,e){__p&&__p();var f=new Set(e);Object.assign(d,{participants:d.participants.filter(function(a){return!f.has(a)})});e=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.admins));Object.assign(d,{admins:b("bs_array").fold_left(function(a,c){c=b("MercuryIDs").getUserIDFromParticipantID(c);if(!(c==null)){var d=a[c];d!==void 0&&b("bs_curry")._2(v,a,c)}return a},e,b("JSSet.bs").values(f))});f.has(a)&&Object.assign(d,{is_subscribed:!1});e=b("MercuryServerRequests").getForFBID(c);e.fetchThreadData([d.thread_id],null);return 0}function G(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_js_primitive").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function Pa(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a];return 0});c[a.guest_id]=a.guest_status;return c}var H=function(a,b){delete a[b];return 0};function Qa(a){__p&&__p();var c=[-1],d=[null],e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c[0]<0||c[0]>b)){c[0]=b;d[0]=a;return 0}else return 0});return d[0]}var I=function(a,b){delete a[b];return 0};function Ra(a,c,d,e,f){__p&&__p();d!==0&&z(a,c.thread_id,f,d);if(c.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(c.thread_id);return void 0}else{d=c.unread_count===0;if(d===f)return void 0;else{y(a,c.thread_id);return{unread_count:f?0:1}}}}function Sa(a,c,d,e,f){__p&&__p();var g=d.action_type;f=f==null?!1:f;(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(g,b("MercuryActionType").LOG_MESSAGE))&&((d.is_unread||d.skip_bump_thread)&&(c.unread_count===0&&d.skip_bump_thread||d.timestamp<=c.server_timestamp||Object.assign(c,{unread_count:c.unread_count+1|0})),Object.assign(c,{message_count:c.message_count+1|0,is_archived:!1}));var h=b("MercuryIDs").getParticipantIDFromUserID(a);if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.unread_count===0&&b("bs_caml_obj").caml_equal(d.author,h)&&d.timestamp>=c.last_read_timestamp&&!b("gkx")("702170")&&Object.assign(c,{last_read_timestamp:d.timestamp});var i=d.offline_threading_id;if(!(i==null)&&b("bs_caml_obj").caml_notequal(i,d.message_id)){Object.assign(c,{last_message_timestamp:d.timestamp});i=d.comm_status;i==null||Object.assign(c,{last_message_id:d.message_id})}i=d.comm_status;var j=c.comm_status;i==null||!(j==null)&&j.toUpperCase()!==b("PageCommItemStatus").FOLLOW_UP&&Object.assign(c,{comm_status:i});j=d.creator_info;j==null||b("bs_caml_obj").caml_equal(j.pageID,a)&&Object.assign(c,{folder:d.folder});i=c;j=d.author;var k=i.participants.indexOf(j);if(k>0){Object.assign(i,{participants:[j].concat(i.participants.slice(0,k),i.participants.slice(k+1|0))});return 0}else return 0}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").SEND_MESSAGE)){j=d.log_message_type;if(j==null){Object.assign(c,{snippet_attachments:d.attachments});return 0}else{if(b("bs_caml_obj").caml_equal(j,b("MercuryLogMessageType").THREAD_IMAGE)){i=d.log_message_data;if(i==null)k=null;else{i=i.image;k=i==null?null:i.preview_url}Object.assign(c,{image_src:k});y(a,e)}if(b("bs_caml_obj").caml_notequal(j,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(j,b("MercuryLogMessageType").UNSUBSCRIBE)){Object.assign(c,{snippet_attachments:d.attachments});return 0}else return 0}}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").LOG_MESSAGE)){c.last_message_timestamp<d.timestamp&&Object.assign(c,{last_message_timestamp:d.timestamp});i=d.log_message_type;if(i==null)return 0;else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").SUBSCRIBE)&&!f){k=d.log_message_data;if(k==null)j=[];else{k=k.added_participants;j=k==null?[]:k}F(h,c,j);return y(a,e)}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").UNSUBSCRIBE)&&!f){k=d.log_message_data;if(k==null)j=[];else{k=k.removed_participants;j=k==null?[]:k}Oa(h,a,c,j);return y(a,e)}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").THREAD_IMAGE))if(f)return 0;else{k=d.log_message_data;if(k==null)j=null;else{f=k.image;j=f==null?null:f.preview_url}Object.assign(c,{image_src:j});return 0}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").THREAD_NAME)){k=d.log_message_data;if(k==null)return 0;else{f=k.name;!(f==null)&&c.name===f||y(a,e);Object.assign(c,{name:k.name});return 0}}else if(b("bs_caml_obj").caml_equal(i,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)){j=a;f=c;k=d;i=e;k=k.log_message_data;if(k==null)return 0;else{var l=k.untypedData;if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var m=f.custom_nickname;if(!(m==null)){m=b("bs_js_dict").fromArray(b("bs_js_dict").entries(m));var n=l.nickname;n.trim().length>0?m[l.participant_id]=n:b("bs_curry")._2(I,m,l.participant_id);Object.assign(f,{custom_nickname:m})}y(j,i)}else if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)b("MercuryThreadActions").getForFBID(j).updateCustomLike(i,l.thread_icon);else if(k.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){n=l.theme_color;if(n==null)Object.assign(f,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(n.length>0){m="#"+n.slice(2);Object.assign(f,{solid_color:m,header_color:m,footer_color:m,gradient_colors:[m]})}else Object.assign(f,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});y(j,i)}}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var o={},p=l.event_creator_id;f.participants.forEach(function(c){c=b("MercuryIDs").getUserIDFromParticipantID(c);if(c==null)return 0;else{var a=b("bs_caml_obj").caml_equal(c,p);o[c]=a?"GOING":"INVITED";return 0}});n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.lightweight_events));m=l.event_time;m={track_rsvp:l.event_track_rsvp,title:l.event_title,event_time:m==null?0:parseInt(m,10),location_name:l.event_location_name,event_members:o,oid:l.event_id,event_type:l.event_type};Object.assign(f,{lightweight_event:m});n[l.event_id]=Object.assign({},m);Object.assign(f,{lightweight_events:n});y(j,i)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){m=f.lightweight_event;if(!(m==null)){n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.lightweight_events));m.oid===l.event_id&&Object.assign(f,{lightweight_event:G(l,m,b("bs_js_primitive").some(m.event_members))});m=n[l.event_id];m!==void 0&&(n[l.event_id]=G(l,m,void 0),Object.assign(f,{lightweight_events:n}))}y(j,i)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){m=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.lightweight_events));n=f.lightweight_event;if(!(n==null)&&n.oid===l.event_id){var q=Pa(n.event_members,l);Object.assign(f,{lightweight_event:G(l,n,b("bs_js_primitive").some(q))})}n=m[l.event_id];if(n!==void 0){q=Pa(n.event_members,l);m[l.event_id]=G(l,n,b("bs_js_primitive").some(q));Object.assign(f,{lightweight_events:m})}y(j,i)}else if(k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||k.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(f.lightweight_events));b("bs_curry")._2(H,n,l.event_id);Object.assign(f,{lightweight_event:Qa(n),lightweight_events:n});y(j,i)}return 0}}else return 0}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(c.page_unsubscribe_status!==d.page_unsubscribe_status){Object.assign(c,{page_unsubscribe_status:d.page_unsubscribe_status});return y(a,e)}else return 0;else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").BLOCK_STATUS_CHANGED)){Object.assign(c,{can_reply:d.canViewerReply});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").ADD_PARTICIPANTS)){F(h,c,d.participants);return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").CHANGE_FLAG)){q=c.page_thread_info;Object.assign(c,{page_thread_info:Object.assign(q==null?{}:q,{flagged:d.mark_as_flag})});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").MOVE_PENDING_TO_INBOX)){c.folder===b("MessagingTag").PENDING&&Object.assign(c,{folder:b("MessagingTag").INBOX});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_CUSTOM_LIKE)){Object.assign(c,{custom_like_icon:d.custom_like});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){m=d.promoted_admins;if(!(m==null)){k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(c.admins));Object.assign(c,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},k,m)})}return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").REMOVE_GROUP_ADMINS)){l=d.removed_admin_ids;if(!(l==null)){f=b("bs_js_dict").fromArray(b("bs_js_dict").entries(c.admins));Object.assign(c,{admins:b("bs_array").fold_left(function(c,d){var a=c[d];a!==void 0&&b("bs_curry")._2(v,c,d);return c},f,l)})}return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").JOINABLE_MODE)){Object.assign(c,{joinable_mode:d.joinable_mode});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").APPROVAL_MODE)){Object.assign(c,{approval_mode:d.approval_mode});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").APPROVAL_QUEUE)){n=d.added_id;n==null||c.approval_queue_ids.indexOf(n)===-1&&Object.assign(c,{approval_queue_ids:c.approval_queue_ids.concat([n])});j=d.added_group_id;if(!(j==null)){i=c.group_approval_queue;i==null?Object.assign(c,{group_approval_queue:[j]}):i.map(function(a){return a.requester.id}).indexOf(j.requester.id)===-1&&Object.assign(c,{group_approval_queue:i.concat([j])})}var r=d.removed_id;r==null||Object.assign(c,{approval_queue_ids:c.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,r)})});var s=d.removed_group_id;if(!(s==null)){h=c.group_approval_queue;Object.assign(c,{group_approval_queue:(h==null?[]:h).filter(function(a){return a.requester.id!==s})})}return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").IS_PIN_PROTECTED)){Object.assign(c,{is_pin_protected:d.is_pin_protected});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_RTC_CALL_DATA)){q=d.initiator_fbid;if(q==null){k=c.rtc_call_data;m=k==null?void 0:k.initiator_fbid}else m=q;Object.assign(c,{rtc_call_data:new(b("ImmutableObject"))({call_state:d.call_state,server_info_data:d.server_info_data,initiator_fbid:m})});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_COMM_STATUS)){Object.assign(c,{comm_status:d.comm_status});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER)){f=d.id;l=f==null?{nodes:[]}:{nodes:[{admin:{id:f,name:d.name,profile_picture:{uri:d.profile_pic_uri}}}]};Object.assign(c,{comm_item_owners:l});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").EVENT_RSVP_CHANGED)){n=c.participants_event_status;i=(n==null?[]:n).filter(function(a){return a.participant_id!==d.actor_fbid});i.push({participant_id:d.actor_fbid,event_status:d.rsvp_status});Object.assign(c,{participants_event_status:i});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED)){j=d.groups_sync_action;h=0;!(j==null)&&b("bs_caml_obj").caml_equal(j,b("MessengerGroupsSyncStatus").OPT_IN)?Object.assign(c,{groups_sync_status:d.groups_sync_status_string}):h=1;h===1&&Object.assign(c,{groups_sync_status:d.groups_sync_status_string,work_associated_group:null});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE)){k=d.groups_sync_action;if(k==null)Object.assign(c,{work_associated_group:null});else if(b("bs_caml_obj").caml_equal(k,b("MessengerGroupsSyncStatus").OPT_IN)){q=new(b("URI"))(document.URL);m=q.getDomain();f=b("XGroupsController").getURIBuilder().setString("idorvanity",d.fb_group_id).getURI().setDomain(m==null?"":m.replace("messenger.com","facebook.com")).setPort(q.getPort()).setProtocol("https");Object.assign(c,{work_associated_group:{id:d.fb_group_id,url:f.toString(),group_saves:{count:0},group_events:{count:0}}})}else Object.assign(c,{work_associated_group:null});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").DESCRIPTION_CHANGED)){Object.assign(c,{description:d.group_thread_description_string});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_THREAD_THEME)){Object.assign(c,{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id});return y(a,e)}else if(b("bs_caml_obj").caml_equal(g,b("MercuryActionType").UPDATE_JOINABLE_LINK)){Object.assign(c,{joinable_link:d.joinable_link});return y(a,e)}else return 0}function Ta(c,a,d){d=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):d!==void 0?d:a.body;var e=a.raw_attachments;e=!(e==null)&&e.length>0?b("MercuryAttachment").convertRaw(e):a.attachments;var f=a.log_message_type;return Object.assign(c,{snippet:d,snippet_attachments:e,snippet_sender:f==null?a.author:null})}function Ua(a,c){a=b("bs_belt_Map").get(a,c);if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function Va(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);return c}function Wa(a,c){c=c.is_archived?b("MessagingTag").ACTION_ARCHIVED:c.folder;a=a[12][c];if(a!==void 0)return c}function Xa(c,a){return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){if(d.threadlist.length===0)return a[7][0];else return d.threadlist.reduce(function(a,d){d=b("bs_belt_Map").get(c[7],d);if(d!==void 0&&b("bs_js_primitive").valFromOption(d).timestamp>c[18])return a+1|0;else return a},0)}),a[7][0])}function Ya(c,a){__p&&__p();return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){__p&&__p();if(d.threadlist.length===0)return a[7][0];else return d.threadlist.reduce(function(a,d){__p&&__p();var e=b("bs_belt_Map").get(c[7],d);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){e=c[16][b("MessagingTag").INBOX];if(e!==void 0){e=e.has(d);if(e)return a+1|0;else return a}else return a}else return a}else return a},0)}),a[7][0])}function Za(c,a,d){d=d===b("MessagingTag").PENDING;if(d)return[c[0],c[1],c[2],c[3],c[4],0,c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],a]}function J(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function $a(a){return[a,b("bs_belt_MapString").empty,b("bs_belt_MapString").empty,b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),0,b("bs_belt_MapString").empty,b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),new Map(),ga(0),[],{},new Map(),{},{},0]}var K=[{}],L=[0],M=new Map(),N=[{}],O=[0],P=new Set(),Q=[{}],ab=[0],R=[K,L,M,N,O,P,Q,ab];function S(a,c){__p&&__p();var d=R;a=a;c=c;var e=[];c=b("bs_array").fold_left(function(f,g){__p&&__p();switch(g.tag|0){case 0:e.push(g[0].tag|0);break;case 1:case 2:break}switch(g.tag|0){case 0:var h=g[0];if(typeof h==="number"){var i=f,k=d;k[0][0]={};k[1][0]=k[1][0];k[6][0]={};k[2].clear();b("bs_belt_Map").keysToArray(i[7]).forEach(function(a){return ha(i[0],a)});return[i[0],i[1],b("bs_belt_MapString").empty,i[3],i[4],i[5],i[6],b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),i[11],ga(0),i[13],i[14],new Map(),i[16],i[17],i[18]]}else switch(h.tag|0){case 0:k=f;var l=h[0],m=[!1],n=[k[1]];Object.keys(l).forEach(function(a){var c=l[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(n[0],a),0);if(c>d){m[0]=!0;n[0]=b("bs_belt_MapString").set(n[0],a,c);return 0}else return 0});if(m[0])return[k[0],n[0],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];else return k;case 1:k=f;var o=h[0];o=o.reduce(b("bs_belt_Set").add,k[3]);if(o===k[3])return k;else return[k[0],k[1],k[2],o,k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];case 2:o=f;k=h[0];var p=h[1];p=p.reduce(b("bs_belt_Set").remove,k.reduce(b("bs_belt_Set").add,o[4]));if(p===o[4])return o;else return[o[0],o[1],o[2],o[3],p,o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];case 3:k=f;p=h[0];o=p.reduce(function(a,c){if(b("bs_belt_Set").has(a,c))return b("bs_belt_Set").remove(a,c);else return b("bs_belt_Set").add(a,c)},k[4]);if(o===k[4])return k;else return[k[0],k[1],k[2],k[3],o,k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];case 4:p=f;o=h[0];k=o.reduce(function(c,d){var a=d.is_messenger_ignored;if(a==null)return c;else if(a)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid))},p[3]);if(k===p[3])return p;else return[p[0],p[1],p[2],k,p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];case 5:o=f;k=h[0];return[o[0],o[1],o[2],o[3],o[4],k,o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];case 6:p=f;k=h[0];o=fa(p[0],k);if(o==null)return p;else{var q=b("FBID.bs").ofString(k.from.toString());if(q!==void 0){q=b("bs_js_primitive").valFromOption(q);b("MessengerPersonas.bs").addPersona(k.persona);var r=k.persona,s=b("gkx")("678634");s=!(r==null)&&s?b("MercuryIDs").getParticipantIDFromUserID(r.id):b("MercuryIDs").getParticipantIDFromUserID(q);if(k.st===b("TypingStates").TYPING){r=b("bs_belt_MapString").get(p[6],o);if(r!==void 0)return[p[0],p[1],p[2],p[3],p[4],p[5],b("bs_belt_MapString").set(p[6],o,b("bs_belt_Map").set(b("bs_js_primitive").valFromOption(r),s,Date.now())),p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];else{q=b("bs_belt_Map").set(b("bs_belt_Map").make([b("ParticipantId.bs").cmp]),s,Date.now());return[p[0],p[1],p[2],p[3],p[4],p[5],b("bs_belt_MapString").set(p[6],o,q),p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}}else if(k.st===b("TypingStates").INACTIVE){r=da(p[6],o,s);if(r!==p[6])return[p[0],p[1],p[2],p[3],p[4],p[5],r,p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];else return p}else return p}else return p}case 7:q=f;var t=h[0],u=[!1],v=[q[2]];Object.keys(t).forEach(function(c){__p&&__p();Object.keys(t[c]).forEach(function(d){__p&&__p();var a=b("bs_belt_MapString").get(v[0],c);a=a!==void 0?b("bs_js_primitive").valFromOption(a):b("immutable").OrderedMap();var e=a.get(d),f=t[c][d];if(e==null||f.watermark>e.watermark)e=1;else return 0;if(e===1){u[0]=!0;v[0]=b("bs_belt_MapString").set(v[0],c,a.set(d,f));return 0}});var a=b("bs_belt_MapString").get(v[0],c);if(a!==void 0){u[0]=!0;v[0]=b("bs_belt_MapString").set(v[0],c,b("bs_js_primitive").valFromOption(a).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return 0}else return 0});if(u[0])return[q[0],q[1],v[0],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]];else return q;case 8:var z=f;k=d;o=h[0];if(o.length===0)return z;else{s=z[7];r=o.reduce(function(a,c){return b("bs_belt_Map").set(a,c.thread_id,new(b("ImmutableObject"))(c))},s);Ja(r,k[0][0]);o.forEach(function(a){return y(z[0],a.thread_id)});return[z[0],z[1],z[2],z[3],z[4],z[5],z[6],r,z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15],z[16],z[17],z[18]]}case 9:p=f;q=h[0];if(q.length===0)return p;else{var ja=p[8],sa=b("MercuryServerRequests").getForFBID(p[0]);q.forEach(function(a){__p&&__p();var b=a.thread_id;if(ja.has(b)){ja["delete"](b);if(a.unread_count>0){sa.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],ja,p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}case 10:var C=f;s=h[0];var wa=h[1];if(s.length===0)return C;else{k=C[7];var xa=new Set(),ya={},Aa={},Ga={};o=s.reduce(function(a,c){__p&&__p();if(b("MessengerMessage.bs").isErrorLogMessage(c))return a;else{var d=La(C[0],a,c,wa);if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=b("bs_belt_Map").set(a,d.thread_id,d),g=c.offline_threading_id;g=b("bs_belt_Option").flatMap(g==null?void 0:b("bs_js_primitive").some(g),function(a){return b("bs_js_primitive").nullable_to_opt(C[10].get(a))});if(g!==void 0||Ma(d,c,wa)||Na(C[0],d,c,xa))return f;else{g=c.thread_id;if(g==null)throw b("bs_caml_builtin_exceptions").not_found;else g=g;var e=ya[g];e===void 0&&(ya[g]=Object.assign({},d));e=ya[g];Sa(C[0],e,c,g,wa);if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)){d=Aa[g];d!==void 0?c.timestamp>d.timestamp&&(Aa[g]=c):Aa[g]=c}if(b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE)){e=Ga[g];e!==void 0?c.timestamp>e.timestamp&&(Ga[g]=c):Ga[g]=c}return f}}else return a}},k);r=b("bs_js_dict").entries(ya).reduce(function(a,c){__p&&__p();var d=c[1];c=c[0];var e=Ga[c],f=Aa[c];if(f!==void 0)Ta(d,f,void 0);else if(e!==void 0){f=e.log_message_body;f==null||Ta(d,e,f)}if(e!==void 0&&!e.skip_bump_thread){e.timestamp>d.timestamp&&Object.assign(d,{timestamp:e.timestamp});f=0;wa==null?f=1:wa||(f=1);f===1&&(e.timestamp>d.server_timestamp&&Object.assign(d,{server_timestamp:e.timestamp}))}f=new(b("ImmutableObject"))(d);if(f.participants.length===0&&!Ua(a,f.thread_id))return a;else return b("bs_belt_Map").set(a,c,f)},o);return[C[0],C[1],C[2],C[3],C[4],C[5],C[6],r,C[8],C[9],C[10],C[11],C[12],C[13],C[14],C[15],C[16],C[17],C[18]]}case 11:var E=f,Ka=h[0];x.forEach(function(a){__p&&__p();w.forEach(function(d){__p&&__p();var c=E,e=Ka,f=a,g=d,h=[];d=e.filter(function(c){var a=c.filter;a=a==null?b("MercuryFilters.bs").all:a;c=c.folder;c=c==null?f===b("MessagingTag").INBOX:c===f;if(c)return b("bs_caml_obj").caml_equal(a,g);else return!1});var i=[!1];d.forEach(function(a){a.thread_ids.forEach(function(a){h.push(a);return 0});var b=a.limit;if(a.thread_ids.length<b){i[0]=!0;return 0}else return 0});e=la(c,h,f,g);d=c[12][f];c=d[g];c=c!==void 0?c.reachedEnd:!1;d[g]={reachedEnd:i[0]?i[0]:c,threadlist:e[0],existingIDs:e[1]};return 0});return 0});return[E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15],E[16],E[17],E[18]];case 12:var F=f;q=h[0];var Oa={};x.forEach(function(a){var b={};w.forEach(function(a){b[a]=[];return 0});Oa[a]=b;return 0});q.forEach(function(c){__p&&__p();var d=b("bs_belt_Map").get(F[7],c.thread_id);if(d!==void 0){var e=b("bs_js_primitive").valFromOption(d);d=Wa(F,e);if(d!==void 0){var a=d;Va(e).forEach(function(b){if(e.timestamp!==0){Oa[a][b].push(c.thread_id);return 0}else return 0});return 0}else return 0}else return 0});x.forEach(function(a){w.forEach(function(b){var c=Oa[a][b];la(F,c,a,b);return 0});return 0});return[F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8],F[9],F[10],F[11],F[12],F[13],F[14],F[15],F[16],F[17],F[18]];case 13:var G=f;p=h[0];s=p.filter(function(a){a=a.thread_id;return!(a==null)});if(s.length>0){var Pa={};x.forEach(function(a){var b={};w.forEach(function(a){b[a]={to_add:[],to_remove:[]};return 0});Pa[a]=b;return 0});s.forEach(function(a){__p&&__p();var c=a.thread_id;if(c==null)return 0;else{var d=b("bs_belt_Map").get(G[7],c);if(d!==void 0){var f=b("bs_js_primitive").valFromOption(d);d=Wa(G,f);if(d!==void 0){var e=d;d=Va(f);(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE))&&d.forEach(function(a){if(f.timestamp!==0){Pa[e][a].to_add.push(c);return 0}else return 0});x.forEach(function(a){w.forEach(function(b){var c=Pa[a][b];la(G,c.to_add,a,b);return ka(G,c.to_remove,a,b)});return 0});return 0}else return 0}else return 0}});k=b("MercuryThreadInformer").getForFBID(G[0]);k.updatedThreadlist();return[G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],G[8],G[9],G[10],G[11],G[12],G[13],G[14],G[15],G[16],G[17],G[18]]}else return G;case 14:var H=f,Qa=d;o=h[0];if(o.length>0){o.forEach(function(a){if(Qa[5].has(a))return 0;else{H[13].push(a);Qa[5].add(a);return 0}});r=b("MercuryThreadInformer").getForFBID(H[0]);r.updatedThreadlist();return[H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8],H[9],H[10],H[11],H[12],H[13],H[14],H[15],H[16],H[17],H[18]]}else return H;case 15:var I=f,Ya=h[0];q=b("bs_belt_Map").toArray(I[7]).reduce(function(a,c){var d=c[1];c=c[0];if(d.folder===Ya){y(I[0],c);return b("bs_belt_Map").set(a,c,b("ImmutableObject").set(d,{unread_count:0}))}else return a},I[7]);I[16][Ya]=new Set();p=b("MercuryThreadInformer").getForFBID(I[0]);p.updatedUnreadState();return[I[0],I[1],I[2],I[3],I[4],I[5],I[6],q,I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15],I[16],I[17],I[18]];case 16:var J=f,$a=h[0];s=b("bs_belt_Map").remove(J[7],$a);J[15]["delete"]($a);J[9].forEach(function(a,c,d){__p&&__p();if(b("bs_caml_obj").caml_equal(a.thread_id,$a)){J[9]["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=J[10].get(c);d==null||(J[9]["delete"](d),J[10]["delete"](c))}J[10]["delete"](a.message_id);return 0}else return 0});ha(J[0],$a);return[J[0],J[1],J[2],J[3],J[4],J[5],J[6],s,J[8],J[9],J[10],J[11],J[12],J[13],J[14],J[15],J[16],J[17],J[18]];case 17:k=h[0];return za(f,d,[k.message_id,k,h[1]]);case 18:o=f;r=[h[0],h[1],h[2]];p=r[2];q=r[1];var K=r[0];if(q.length!==0){s=Ca(o,[K,q,p]);k=0;p!==void 0?b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(p),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(k=1):k=1;k===1&&b("MercuryServerRequests").getForFBID(s[0]).deleteMessages(K,q);return b("bs_belt_Array").reduce(q,s,function(a,d){__p&&__p();d=B(a,d);var c=b("bs_belt_Map").get(a[7],K);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);c=b("ImmutableObject").set(b("ImmutableObject").set(c,Da(a,K)),{message_count:c.message_count-1|0});c=b("bs_belt_Map").set(a[7],K,c);y(a[0],K);c=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],c,a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}else c=a;d!==void 0&&Ea(b("bs_js_primitive").valFromOption(d));return c})}else return o;case 19:return ra(f,h[0],h[1]);case 20:r=f;p=h[0];k=h[1];q=b("bs_belt_Map").get(r[7],p);if(q!==void 0){s=b("bs_js_primitive").valFromOption(q);var L;switch(k.tag|0){case 0:L=b("ImmutableObject").set(s,{reactions_mute_mode:k[0]?1:0});break;case 1:L=b("ImmutableObject").set(s,{mentions_mute_mode:k[0]?1:0});break;case 2:o=k[0];q=o===0;L=b("ImmutableObject").set(s,{mute_until:q?void 0:o});break}k=b("bs_belt_Map").set(r[7],p,L);y(r[0],p);return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],k,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15],r[16],r[17],r[18]]}else return r;case 21:s=f;q=h[0];o=h[1];p=b("bs_belt_Map").get(s[7],q);if(p!==void 0){k=b("bs_js_primitive").valFromOption(p);if(k.is_archived!==o){r=b("MessengerFolders.bs").getFromMeta(k);p=k.comm_status;p=p==null?b("ImmutableObject").set(k,{is_archived:o}):b("ImmutableObject").set(k,{is_archived:o,comm_status:o?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});k=b("bs_belt_Map").set(s[7],q,p);pa(s,p,r);qa(s,p);y(s[0],q);return[s[0],s[1],s[2],s[3],s[4],s[5],s[6],k,s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15],s[16],s[17],s[18]]}else return s}else return s;case 22:o=f;r=h[0];p=h[1];q=b("bs_belt_Map").get(o[7],r);if(q!==void 0){k=b("bs_js_primitive").valFromOption(q);if(k.is_page_follow_up!==p){s=b("ImmutableObject").set(k,{is_page_follow_up:p});q=b("bs_belt_Map").set(o[7],r,s);y(o[0],r);return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],q,o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}else return o}else return o;case 23:k=f;p=h[0];s=h[1];r=h[2];q=h[3];o=h[4];var M=b("bs_belt_Map").get(k[7],p);if(M!==void 0){M=b("bs_js_primitive").valFromOption(M);r=Ra(k[0],M,r,k[8],s);r=r!==void 0&&M.last_message_timestamp>M.last_read_timestamp?b("bs_js_primitive").some(Object.assign(b("bs_js_primitive").valFromOption(r),{last_read_timestamp:M.last_message_timestamp})):r;if(r!==void 0){r=b("ImmutableObject").set(M,b("bs_js_primitive").valFromOption(r));var N=b("bs_belt_Map").set(k[7],p,r);if(q){q=!M.read_only&&M.folder===b("MessagingTag").INBOX;var O=b("MercuryServerRequests").getForFBID(k[0]);O.changeThreadReadStatus(r.thread_id,s,o,r.last_read_timestamp,q,r.last_message_type)}O=N}else O=k[7];o=b("MessengerFolders.bs").getFromMeta(M);s?(ka(k,[p],o,b("MercuryFilters.bs").unread),oa(k,o,b("bs_js_primitive").some(p))):(la(k,[p],o,b("MercuryFilters.bs").unread),ma(k,o,b("bs_js_primitive").some(p)));return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],O,k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}else return k;case 24:var P=f,Q=h[0];q=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(P[15].get(Q)),function(a){return[a[0],[]]}),[0,[]]);P[15].set(Q,q);r=b("bs_belt_Option").map(b("bs_belt_Map").get(P[7],Q),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(r!==void 0){var ab=b("bs_js_primitive").valFromOption(r);N=b("bs_belt_Map").set(P[7],Q,ab);w.forEach(function(a){return ka(P,[Q],ab.folder,a)});oa(P,ab.folder,b("bs_js_primitive").some(Q));M=N}else M=P[7];ia(P[0],Q);return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],M,P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15],P[16],P[17],P[18]];case 25:s=f;o=d;p=[h[0],h[1],h[2]];O=Ba(s,[p[0],p[1]]);k=O.thread_id;q=Ca(s,[k,[O.message_id],p[2]]);r=o[2].get(k);r==null||o[2].set(k,Math.max(0,r-1|0));return q;case 26:N=f;M=[h[0],h[1]];s=Ba(N,[M[0],M[1]]);b("MercuryServerRequests").getForFBID(N[0]).sendNewMessage(Object.assign(s,{preview_attachments:void 0}));return N;case 27:O=f;p=[h[0],h[1],h[2],h[3]];o=p[2];k=p[1];r=p[0];q=B(O,r);if(q!==void 0){M=b("bs_js_primitive").valFromOption(q);s=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(M.reactions),{}));k!==void 0?s[o]=k:b("bs_curry")._2(ua,s,o);N=Object.assign(Object.assign({},M),{reactions:s});q=M.thread_id;q==null||A(O[0],q,r,p[3]);return D(O,[r,N])}else return O;case 28:k=f;o=h[0];if(b("gkx")("676919")){s=B(k,o);if(s!==void 0){M=b("bs_js_primitive").valFromOption(s);q=M.attachments;if(q==null||q.length===0)return k;else{p=b("bs_caml_array").caml_array_get(q,0);r=p.share;if(r==null)return k;else{N=r.target;if(N==null)return k;else{O=N.message_state;if(O==null)return k;else{s=Object.assign(Object.assign({},M),{attachments:b("bs_caml_array").caml_array_set(b("bs_array").copy(q),0,Object.assign(Object.assign({},p),{share:Object.assign(Object.assign({},r),{target:Object.assign(Object.assign({},N),{message_state:"EXPIRED"})})}))});return D(k,[o,s])}}}}}else return k}else return k;case 29:O=f;M=[h[0],h[1],h[2]];q=M[0];p=B(O,q);if(p!==void 0){r=b("bs_js_primitive").valFromOption(p);N=r.attachments;if(N==null||N.length===0)return O;else{o=b("bs_caml_array").caml_array_get(N,0);s=o.share;if(s==null)return O;else{k=s.target;if(k==null)return O;else{p=b("bs_array").copy(N);b("bs_caml_array").caml_array_set(p,0,Object.assign(Object.assign({},o),{share:Object.assign(Object.assign({},s),{target:Object.assign(Object.assign({},M[1]),{live_location_id:k.live_location_id})})}));N=Object.assign(Object.assign({},r),{attachments:p});o=r.thread_id;o==null||A(O[0],o,q,M[2]);return D(O,[q,N])}}}}else return O;case 30:s=f;k=h[0];p=h[1];var R=k.replaced_message_id;if(R==null)return s;else{r=B(s,R);if(r!==void 0){o=k.message_id;M={timestamp:k.timestamp,profile_ranges:k.profile_ranges};q=b("bs_js_primitive").nullable_to_opt(k.status);q!==void 0&&(M.status=b("bs_js_primitive").valFromOption(q));N=b("bs_js_primitive").nullable_to_opt(k.log_message_data);N!==void 0&&(M.log_message_data=b("bs_js_primitive").valFromOption(N));O=b("bs_js_primitive").nullable_to_opt(k.meta_ranges);O!==void 0&&(M.meta_ranges=b("bs_js_primitive").valFromOption(O));q=b("bs_js_primitive").nullable_to_opt(k.ranges);q!==void 0&&(M.ranges=b("bs_js_primitive").valFromOption(q));N=b("bs_js_primitive").nullable_to_opt(k.raw_attachments);N!==void 0&&(M.raw_attachments=b("bs_js_primitive").valFromOption(N));O=b("bs_js_primitive").nullable_to_opt(k.attachments);O!==void 0&&(M.attachments=b("bs_js_primitive").valFromOption(O));q=b("bs_js_primitive").nullable_to_opt(k.body);q!==void 0&&(M.body=b("bs_js_primitive").valFromOption(q));N=b("bs_js_primitive").nullable_to_opt(k.platform_xmd);N!==void 0&&(M.platform_xmd=b("bs_js_primitive").valFromOption(N));O=M;q=Object.assign(Object.assign({},b("bs_js_primitive").valFromOption(r)),O);b("MercuryMessageIDs.bs").addServerID(o,o);var S=D(s,[o,q]);if(o!==R){S[9]["delete"](R);S[10].set(R,o);N=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(k.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(S[15].get(a))});M=k.thread_id;if(N!==void 0&&!(M==null)){r=N;O=va(S,[o].concat(r[1].filter(function(a){return a!==R})));S[15].set(M,[r[0],O])}}q=k.message_id;N=k.thread_id;N==null||(A(S[0],N,R,p),A(S[0],N,q,p));return[S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15],S[16],S[17],S[18]]}else return s}case 31:o=f;M=d;r=[h[0],h[1]];O=r[0];k=B(o,r[1]);if(k!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_js_primitive").valFromOption(k))){N=M[2].get(O);N==null?M[2].set(O,1):M[2].set(O,1+N|0)}return o;case 32:return Fa(f,d,h[0],h[1]);case 33:q=f;p=d;s=h[0];r=h[1];k=Ha(q,p,s,r);M=ea(k,s);if(s.folder===b("MessagingTag").PENDING&&b("bs_caml_obj").caml_equal(r,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))return[M[0],M[1],M[2],M[3],M[4],M[5]+1|0,M[6],M[7],M[8],M[9],M[10],M[11],M[12],M[13],M[14],M[15],M[16],M[17],M[18]];else if(s.folder===b("MessagingTag").INBOX){O=s.thread_id;if(O==null)return M;else return ra(M,O,s.folder)}else return M;case 34:N=f;o=d;q=h[0];p=h[1];return Ha(N,o,q,p);case 35:k=f;r=d;O=h[0];s=h[1];M=b("bs_belt_Map").get(k[7],O);N=!1;if(s&&!r[5].has(O))k[13].push(O),r[5].add(O),N=!0;else if(!s&&r[5].has(O)){o=k[13].indexOf(O);o>-1&&k[13].splice(o,1);r[5]["delete"](O);N=!0}if(M!==void 0){q=b("bs_js_primitive").valFromOption(M);if(q.is_pinned!==s){p=b("ImmutableObject").set(q,{is_pinned:s});o=b("bs_belt_Map").set(k[7],O,p);y(k[0],O);N=!0;r=o}else r=k[7]}else r=k[7];if(N)return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],r,k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]];else return k;case 36:M=f;q=h[0];s=b("bs_js_dict").fromArray(b("bs_js_dict").entries(M[14]));s[q]=[];return[M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],M[8],M[9],M[10],M[11],M[12],M[13],s,M[15],M[16],M[17],M[18]];case 37:p=f;O=h[0];o=b("bs_js_dict").fromArray(b("bs_js_dict").entries(p[14]));N=O.actor.id;r=o[N];r!==void 0?(r.push(O),o[N]=r):o[N]=[O];return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],o,p[15],p[16],p[17],p[18]];case 38:k=f;q=h[0];s=b("bs_js_dict").fromArray(b("bs_js_dict").entries(k[14]));M=s[q];M===void 0&&(s[q]=[]);return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],s,k[15],k[16],k[17],k[18]];case 39:r=f;var bb=h[0],T=b("bs_js_dict").fromArray(b("bs_js_dict").entries(r[14]));N=Object.keys(T);N.forEach(function(b){var a=T[b];if(a!==void 0){a=a.filter(function(a){return a.id!==bb.messageFBID});T[b]=a;return 0}else return 0});return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],T,r[15],r[16],r[17],r[18]];case 40:var U=f;O=[h[0],h[1]];var cb=O[1];O[0].forEach(function(b){var a=U[15].get(b);a==null?U[15].set(b,[1,[]]):U[15].set(b,[1,a[1]]);return ta(U[0],b,cb)});return[U[0],U[1],U[2],U[3],U[4],U[5],U[6],U[7],U[8],U[9],U[10],U[11],U[12],U[13],U[14],U[15],U[16],U[17],U[18]];case 41:var V=f;o=h[0];o.forEach(function(c){__p&&__p();var a=c.folder;if(na.includes(a)){c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));V[16][a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(V[0]);a.updatedUnreadState();return 0}else return 0});return[V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9],V[10],V[11],V[12],V[13],V[14],V[15],V[16],V[17],V[18]];case 42:var W=f,db=d;p=h[0];var c=[W[18]];p.forEach(function(a){W[17][a.folder]=a.unread_count;a.unread_count===0&&(W[16][a.folder]=new Set());a.folder===b("MessagingTag").INBOX&&(c[0]=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.seen_timestamp),c[0]),db[7][0]=a.unseen_count);a=b("MercuryThreadInformer").getForFBID(W[0]);a.updatedUnreadState();a.updatedUnseenState();return 0});return[W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15],W[16],W[17],c[0]];case 43:var X=f;M=h[0];M.forEach(function(a){__p&&__p();var c=a.other_user_fbid;if(c==null){var d=a.thread_fbid;d=d==null?void 0:b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(d))}else d=b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(c));c=a.thread_id;d=c==null?d:c==null?void 0:b("bs_js_primitive").some(c);c=a.thread_id;var e;if(c==null)e="";else{c=b("bs_belt_Map").get(X[7],c);e=c!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_js_primitive").valFromOption(c)):a.folder}if(na.includes(e)&&(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE))&&a.is_unread)return ma(X,e,d);else return 0});return[X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15],X[16],X[17],X[18]];case 44:var Y=f,eb=h[0];na.forEach(function(c){__p&&__p();var a=Y[16][c];if(a!==void 0){b("bs_js_dict").entries(eb).forEach(function(b){var c=b[0];if(a.has(c)){a.add(b[1]);a["delete"](c);return 0}else return 0});return 0}else return 0});return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8],Y[9],Y[10],Y[11],Y[12],Y[13],Y[14],Y[15],Y[16],Y[17],Y[18]];case 45:return Za(f,h[0],h[1]);case 46:q=f;s=h[0];k=h[1];N=h[2];r=B(q,s);if(r!==void 0){O=b("bs_js_primitive").valFromOption(r);Ea(O);o=Object.assign(Object.assign({},O),{removed_timestamp:k});p=D(q,[s,o]);M=O.thread_id;if(M==null)return p;else{A(p[0],M,s,N);h=b("bs_belt_Map").get(p[7],M);if(h!==void 0){r=b("ImmutableObject").set(b("bs_js_primitive").valFromOption(h),Da(p,M));k=b("bs_belt_Map").set(p[7],M,r);y(p[0],M);return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],k,p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}else return p}}else return q}case 1:o=g[0];if(typeof o==="number")if(o===0){O=f;var fb=[];b("bs_belt_MapString").forEach(O[6],function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){fb.push([a,b]);return 0}else return 0})});if(fb.length===0)return O;else{var a=[O[6]];fb.forEach(function(b){a[0]=da(a[0],b[0],b[1]);return 0});return[O[0],O[1],O[2],O[3],O[4],O[5],a[0],O[7],O[8],O[9],O[10],O[11],O[12],O[13],O[14],O[15],O[16],O[17],O[18]]}}else{s=f;N=d;if(Xa(s,N)>0){h=b("MercuryServerRequests").getForFBID(s[0]);h.markSeen();return Za(s,h.getLastActionTimestamp(),b("MessagingTag").INBOX)}else return s}else switch(o.tag|0){case 0:var Z=f,gb=d;r=o[0];M=o[1];k=o[2];p=o[3];var hb=Z[7],ib=[];q=ba(r.reduce(function(c,d){var a=b("bs_belt_Map").get(hb,d);if(a!==void 0)return b("bs_belt_Map").set(c,d,b("bs_js_primitive").valFromOption(a));else{ib.push(d);return c}},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(ib.length===0){b("bs_curry")._1(k,q);return Z}else{O=gb[1];N=O[0].toString();gb[1][0]=O[0]+1|0;gb[0][0][N]=[r,k];h=b("MercuryServerRequests").getForFBID(Z[0]);s=ib.reduce(function(a,d){__p&&__p();var e=b("MercuryIDs").tokenize(d),f=e.type;e=e.value;if(f==="user"){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=b("MercuryIDs").getParticipantIDFromUserID(Z[0]);var c=b("bs_caml_obj").caml_equal(f,e);c=b("MessengerThreadUtils.bs").createNewLocalThread(e,d,c?[e]:[e,f],null);e=b("bs_belt_Map").set(a,d,c);Ja(e,gb[0][0]);return e}else return a},Z[7]);h.fetchThreadData(ib,p);b("bs_curry")._1(M,N);if(s===Z[7])return Z;else return[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],s,Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15],Z[16],Z[17],Z[18]]}case 1:q=d[0][0];b("bs_curry")._2(Ia,q,o[0]);d[0][0]=q;return f;case 2:var $=f;O=o[0];r=b("bs_belt_Array").keepMap(O,function(a){a=B($,a);if(a!==void 0)return b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(a).offline_threading_id)});r.forEach(function(a){$[10]["delete"](a);return 0});return[$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12],$[13],$[14],$[15],$[16],$[17],$[18]];case 3:k=f;var jb=o[0];h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(k[14]));p=jb.montageActorID;M=h[p];if(M!==void 0){N=M.map(function(a){__p&&__p();var c=b("bs_caml_obj").caml_equal(jb.montageMessageID,a.id);if(c){c=a;var d=jb,e=c.montage_overlays.map(function(a){__p&&__p();if(b("bs_caml_obj").caml_equal(a.poll.id,d.pollID)){var c=a.poll.poll_options.map(function(a,c){c=c===d.optionVotedIndex;if(c)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:d.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})}else return a});return b("ImmutableObject").set(new(b("ImmutableObject"))(c),{montage_overlays:e})}else return a});h[p]=N}return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],h,k[15],k[16],k[17],k[18]];case 4:s=b("bs_belt_Map").set(f[7],o[0],o[1]);return[f[0],f[1],f[2],f[3],f[4],f[5],f[6],s,f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15],f[16],f[17],f[18]]}case 2:q=g[0];switch(q.tag|0){case 0:b("bs_curry")._1(q[0],{blocked_ids:f[4]});break;case 1:b("bs_curry")._1(q[1],b("bs_belt_Map").get(f[7],q[0]));break;case 2:b("bs_curry")._1(q[0],f[13].concat([]));break;case 3:b("bs_curry")._2(q[0],f,d);break}return f}},c,a);e.length>0&&b("LogHistory").getInstance("messenger_state").debug("actions",b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(JSON.stringify(e)),""));return c}function bb(c,a){__p&&__p();var d=function(c){b("bs_curry")._1(a,[b("bs_block").__(0,[b("bs_block").__(6,[c])])]);b("setTimeoutAcrossTransitions")(function(){return b("bs_curry")._1(a,[b("bs_block").__(1,[0])])},3e4);return 0};b("Arbiter").subscribe(J(c),function(a,b){a=b.obj;b=a.to;if(!(b==null)&&b.toString()!==c)return 0;else{d(a);return 0}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(d,e){__p&&__p();d=function(d,a){__p&&__p();var f={};b("bs_belt_MapString").toArray(d[2]).forEach(function(a){var b={};a[1].forEach(function(c,d,a){b[d]=c.watermark;return 0});f[a[0]]=b;return 0});a="read_receipts:"+c;e[a]=f;return 0};return b("bs_curry")._1(a,[b("bs_block").__(2,[b("bs_block").__(3,[d])])])});return 0}var T=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([$a,S,bb,"MessengerStateProvider"]),U=T[2];function cb(a,c){return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(0,[c])])])}function V(a,c){b("MercuryAssert").isThreadID(c);var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);return b("bs_js_null_undefined").fromOption(d[0])}function W(a,c,d,e){__p&&__p();if(c.length===0){b("bs_curry")._1(d,{});return null}else{b("MercuryAssert").allThreadID(c);var f=[null],g=function(a){f[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(0,[c,g,d,e])])]);return f[0]}}function db(a,c,d,e){return W(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function X(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function Y(a){var c=b("MercuryLocalIDs").generateThreadID(null);X(a,c,[],null);return c}function eb(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function fb(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);eb(a,e,c,d);return e}function Z(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function gb(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function hb(c){var a=[[]],d=function(b){a[0]=b;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(2,[d])])]);return a[0]}function ib(a,c){return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(1,[c])])])}function $(a){__p&&__p();var c=a.payload_source;if(c==null)return!1;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA)){c=a.ordered_threadlists;return!(c==null)}else return!1}function jb(a,c){c=b("bs_block").__(1,[b("bs_block").__(3,[c])]);return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[c])}function kb(a,c){return b("bs_curry")._2(U,a==null?void 0:b("bs_js_primitive").some(a),c)}function lb(a){__p&&__p();var c=[],d=!1;if(!(a==null)){var e=a.payload_source;e==null||b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(44,[e])]));e=a.delivery_receipts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[e])]));e=a.message_ignored_ids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[e])]));e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(9,[e])])),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&(e.length>0&&c.unshift(b("bs_block").__(0,[b("bs_block").__(16,[b("bs_caml_array").caml_array_get(e,0).thread_id])]))));c.push(b("bs_block").__(0,[b("bs_block").__(8,[e])]))}f=a.participants;if(!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(4,[f])]));var g=[],h=[];f.forEach(function(a){if(a.is_messenger_blocked){g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});(g.length>0||h.length>0)&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[g,h])]))}e=a.message_blocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[e,[]])]));f=a.pending_folder_unseen_count;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(5,[f])]));e=a.global_actions;e==null||e.forEach(function(a){b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)&&c.push(b("bs_block").__(0,[b("bs_block").__(15,[a.folder])]));if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_SEEN)){c.push(b("bs_block").__(0,[b("bs_block").__(45,[a.timestamp,a.folder])]));return 0}else return 0});if($(a)){f=a.ordered_threadlists;e=0;!(f==null)&&f.length>0?c.push(b("bs_block").__(0,[b("bs_block").__(11,[f])])):e=1;if(e===1){f=a.threads;e=a.payload_source;f==null||!(e==null)&&f.length>0&&e!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push(b("bs_block").__(0,[b("bs_block").__(12,[f])]))}}e=a.pinned_thread_ids;e==null||$(a)&&c.push(b("bs_block").__(0,[b("bs_block").__(14,[e])]));f=a.roger;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(7,[f])]));e=a.montage_delete_message_delta;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(39,[e])]));f=a.montage_new_message_delta;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(37,[f])]));e=a.montage_poll_sticker_vote;e==null||e.forEach(function(a){c.push(b("bs_block").__(1,[b("bs_block").__(3,[a])]));return 0});f=a.current_montage_thread;if(!(f==null)){e=f.user;if(!(e==null)){f=e.messenger_montage_thread;f==null||(c.push(b("bs_block").__(0,[b("bs_block").__(38,[e.id])])),f.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(37,[a.node])]));return 0}))}}e=a.unread_thread_fbids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(41,[e])]));f=a.message_counts;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(42,[f])]));e=a.actions;if(!(e==null)){c.push(b("bs_block").__(0,[b("bs_block").__(10,[e,a.from_client])]));if($(a)){f=a.actions;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(13,[f])]))}c.push(b("bs_block").__(0,[b("bs_block").__(43,[e])]));f=a.payload_source;var i=f==null?void 0:b("bs_js_primitive").some(f);e.forEach(function(d){__p&&__p();var e=d.action_type;if(b("bs_caml_obj").caml_equal(i,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_SEARCH))){c.push(b("bs_block").__(0,[b("bs_block").__(17,[d,0])]));return 0}else if(b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(d.client_state),b("bs_js_primitive").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push(b("bs_block").__(0,[b("bs_block").__(17,[d,0])]));return 0}else{var f=d.thread_id,g=d.upload_id,h=d.upload_data,j=d.message_ids;u(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(18,[f,j,i])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){j=d.new_folder;if(!(f==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(19,[f,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(21,[f,d.archived])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){j=d.reactions_mute_mode;var k=d.mentions_mute_mode,l=d.mute_until;k=j==null?k==null?l==null?void 0:b("bs_block").__(2,[l]):l==null?b("bs_block").__(1,[k===1]):void 0:!(k==null)||!(l==null)?void 0:b("bs_block").__(0,[j===1]);if(!(f==null)&&k!==void 0){c.push(b("bs_block").__(0,[b("bs_block").__(20,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS))if(f==null)return 0;else{l=a.from_client;c.push(b("bs_block").__(0,[b("bs_block").__(23,[f,d.mark_as_read,d.timestamp,l==null?!1:l,d.source])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(22,[f,d.is_page_follow_up])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED)){c.push(b("bs_block").__(0,[b("bs_block").__(3,[b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(d.message_blocked_ids),[])])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(24,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){j=d.messageId;k=d.userId;if(!(j==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(27,[j,b("bs_js_primitive").nullable_to_opt(d.reaction),k,i])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){l=d.messageId;if(l==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(28,[l,i])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){j=d.messageId;k=d.liveLocation;if(!(j==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(29,[j,k,i])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(30,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(26,[g,h])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(25,[g,h,i])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(32,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(33,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(b("MessengerMessage.bs").isLocalMessage(d))return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(34,[d,i])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(35,[f,d.is_pinned])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){l=d.messageId;j=d.removed_timestamp;if(!(l==null)&&!(j==null)){c.push(b("bs_block").__(0,[b("bs_block").__(46,[l,j,i])]));b("MessengerDesktopNotifications").removeNotification(l);return 0}else return 0}else return 0}});b("Utils.bs").isTruthy(a.from_client)&&e.forEach(function(d){var a=d.thread_id;if(a==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(31,[a,d.message_id])]));return 0}})}f=a.end_of_history;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(40,[f,a.payload_source])]))}d&&c.unshift(b("bs_block").__(0,[0]));return c}function mb(c,d){var a=[[]],e=function(b,c){c=b[15].get(d);if(c==null)return 0;else{a[0]=C(!0,b,c[1]);return 0}};b("bs_curry")._2(U,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function nb(c,d){var a=[d],e=function(b,c){c=b[10].get(d);if(c==null)return 0;else{a[0]=c;return 0}};b("bs_curry")._2(U,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function ob(a,c){var d=[void 0],e=function(a,b){d[0]=a;return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d[0];if(a!==void 0)return C(!1,a,c);else return[]}function pb(a,c,d){__p&&__p();var e=[!1],f=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];b=b[1].length;if(a){e[0]=!0;return 0}else{e[0]=b>=d;return 0}}};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[f])])]);return e[0]}function qb(a,c){__p&&__p();var d=[!1],e=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];if(a){d[0]=!0;return 0}else{d[0]=!1;return 0}}};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d[0]}function rb(a,c){return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(2,[c])])])}function sb(a,c,d,e){__p&&__p();var f=[],g=function(g,h){__p&&__p();h=g[15].get(c);if(h==null)return 0;else{h=h[1];for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return B(g,a)});a!==void 0&&f.push(b("bs_js_primitive").valFromOption(a))}return 0}};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[g])])]);return f}var tb=[void 0];function ub(a,c,d,e,f,g,h){__p&&__p();var i=function(j,i){__p&&__p();tb[0]=[c,d,e];var k=j[15].get(c);k=k==null?[[],void 0]:[k[1],k[0]];var l=k[0];if(b("Utils.bs").isSomeTrue(b("bs_js_primitive").undefined_to_opt(i[6][0][c]))){tb[0]=void 0;i[6][0][c]=!1;return 0}else{var m=i[2];m=l.length-b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(m.get(c)),0)|0;var n=m-d|0;n=e-n|0;if(n>0&&b("bs_caml_obj").caml_notequal(k[1],1)){k=b("MercuryServerRequests").getForFBID(a);var o=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return B(j,a)}),function(a){return a.timestamp})),p=i[4][0];i[4][0]=p+1|0;i[3][0][String(p)]=[[c,d,e],f];if(b("bs_caml_obj").caml_equal([c,d,e],tb[0])){k.fetchThreadMessages(c,m,n,o,g,h);return 0}else return 0}else return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return B(j,a)}).slice(d,e))}};return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[i])])])}function vb(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(Ya(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function wb(a){return b("bs_curry")._2(U,b("bs_js_primitive").some(a),[b("bs_block").__(1,[1])])}K=b("ReasonReact.bs").wrapReasonForJs(T[0],function(a){return b("bs_curry")._4(T[1],void 0,void 0,b("bs_js_primitive").nullable_to_opt(a.fbid),a.children)});L=[T[1]];f.fbid=a;f.deliveryReceipts=c;f.readReceiptsPerThread=d;f.ignoredIds=e;f.blockedIds=h;f.pendingFolderUnseenCount=i;f.typing=j;f.pendingReadStatusThreads=k;f.messages=l;f.localIDsMap=m;f.messagesWithUploadsInFlight=n;f.threadlistOrderMap=o;f.pinnedThreads=p;f.montage=q;f.orderedMessageLists=r;f.unreadCounts=s;f.initialUnreadCounts=t;f.unseenTimestamp=aa;f.threads=ca;f.send=U;f.compute=cb;f.getThreadMetaNow=V;f.getMultiThreadMeta=W;f.getThreadMeta=db;f.createNewLocalThread=X;f.createNewLocalThreadGenerateID=Y;f.createNewLocalGroupGeneralThreadGenerateID=fb;f.isEmptyLocalThread=Z;f.isNewEmptyLocalThread=gb;f.getPinnedThreadlist=hb;f.unsubscribeThread=ib;f.sendJS=kb;f.invalidateSearchedMessages=rb;f.hasLoadedNMessages=pb;f.hasLoadedAllMessages=qb;f.getCurrentlyLoadedMessages=mb;f.getServerMessageID=nb;f.getMessagesFromIDs=ob;f.getThreadMessagesRange=ub;f.getThreadMessagesRangeNow=sb;f.processPollStickerVoted=jb;f.getUnseenUnreadCount=vb;f.markAsSeen=wb;f.processJSActions=lb;f.Provider=L;f.jsComponent=K}),null);
__d("MessengerStateProcessor",["CurrentUser","MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerParticipants.bs","MessengerState.bs","MessengerURIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={preprocess:function(a){__p&&__p();var c=a.activeThreadID;if(c){var d=b("MercuryIDs").getUserIDFromThreadID(c),e=d&&b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e&&e.type!==b("MercuryParticipantTypes").EVENT)a.threadKey=e.vanity||d;else if(d&&!e){e=b("MercuryIDs").getParticipantIDFromUserID(d);a.threadKey=b("MercuryVanityIDMap.bs").hasID(e)?b("MercuryVanityIDMap.bs").getVanity(e):d}else{e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(c);a.threadKey=d||b("MercuryIDs").tokenize(c).value}}delete a.activeThreadID;return a},postprocess:function(a){var c=b("MercuryThreadIDMap").get(),d=g(a.threadKey),e;e=b("MercuryIDs").isValid(d)?d:c.getClientIDFromServerIDNow(d);if(!e){d=b("MessengerParticipants.bs").getIDFromVanityOrFBID(d);d&&(e=b("MercuryIDs").getThreadIDFromParticipantID(d))}e&&(a.activeThreadID=e,a.serverThreadID=c.getServerIDFromClientIDNow(e));delete a.threadKey;return a},supportInboxPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromSupportInboxItemID(a.threadKey));delete a.threadKey;return a},supportFacebarTypeaheadPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromThreadFBID(a.threadKey));delete a.threadKey;return a}};function g(a){return!a?null:a.startsWith(b("MessengerURIConstants").GROUP_PREFIX)?a.substr(b("MessengerURIConstants").GROUP_PREFIX.length):a}e.exports=a}),null);
__d("MessengerURISerializer",["CurrentEnvironment","CurrentUser","MercuryFilters.bs","MercuryIDs","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/?$",h=function(a,c){a.setPath(b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX+c:c)},i=function(a,c){var d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c=b("MessengerURIConstants").FACEBOOK_PREFIX+c);a.setPath(a.getPath()+c)};a={serialize:function(a){__p&&__p();var c=new(b("URI"))(b("WWWBase").uri);a=b("MessengerStateProcessor").preprocess(a);switch(a.masterView){case b("MessengerView").MASTER.PAYMENT:h(c,b("MessengerURIConstants").PAYMENT_PATH);break;case b("MessengerView").MASTER.PEOPLE:h(c,b("MessengerURIConstants").PEOPLE_PATH);break;case b("MessengerView").MASTER.SUPPORT:h(c,b("MessengerURIConstants").SUPPORT_PATH);break;case b("MessengerView").MASTER.WORK_NEW_CHAT:i(c,b("MessengerURIConstants").COMPOSE_SUBPATH);break}switch(a.folder){case b("MessagingTag").OTHER:h(c,b("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case b("MessagingTag").ACTION_ARCHIVED:h(c,b("MessengerURIConstants").ARCHIVED_PATH);break;case b("MessagingTag").PENDING:h(c,b("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break}a.detailView===b("MessengerView").DETAIL.PAYTHREAD?(i(c,b("MessengerURIConstants").PAYMENT_PAY_PATH),a.threadKey&&c.addQueryData("id",a.threadKey)):a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER?i(c,b("MessengerURIConstants").PAYMENT_PAY_PATH):a.detailView===b("MessengerView").DETAIL.COMPOSE?i(c,b("MessengerURIConstants").COMPOSE_SUBPATH):a.threadKey?a.masterView===b("MessengerView").MASTER.PAYMENT?(h(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):i(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey):a.masterView===b("MessengerView").MASTER.PAYMENT?(h(c,""),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):i(c,"");a.extraQueryParams&&c.addQueryData(a.extraQueryParams);b("MercuryFilters.bs").isSupportedFilter(a.filter)&&c.addQueryData({filter:a.filter});if(a.query!=null){var d;c.addQueryData((d={},d[a.masterView===b("MessengerView").MASTER.SEARCH?"qa":"q"]=a.query,d))}a.threadIDs&&c.addQueryData({threadIDs:JSON.stringify(a.threadIDs)});a.mid&&c.addQueryData({mid:a.mid});return c},deserialize:function(a){__p&&__p();var c={},d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c.notMessenger=!0);d=d.replace(b("MessengerURIConstants").FACEBOOK_PREFIX,"");var e;a=a.getQueryData();var f=a.filter,h=a.mid,i=a.q,k=a.qa,l=a.threadIDs;a=babelHelpers.objectWithoutProperties(a,["filter","mid","q","qa","threadIDs"]);if(l)try{e=JSON.parse(l)}catch(a){}e?c.threadIDs=e.filter(function(a){return b("MercuryIDs").isValidThreadID(a)}):c.threadIDs=null;d.match("^"+b("MessengerURIConstants").PEOPLE_PATH)?c.masterView=b("MessengerView").MASTER.PEOPLE:d.match("^"+b("MessengerURIConstants").SUPPORT_PATH)?c.masterView=b("MessengerView").MASTER.SUPPORT:d.match("^"+b("MessengerURIConstants").PAYMENT_PATH)?c.masterView=b("MessengerView").MASTER.PAYMENT:k?c.masterView=b("MessengerView").MASTER.SEARCH:b("CurrentUser").isWorkUser()&&b("gkx")("678583")&&d.match("^"+b("MessengerURIConstants").COMPOSE_SUBPATH)?c.masterView=b("MessengerView").MASTER.WORK_NEW_CHAT:c.masterView=b("MessengerView").MASTER.RECENT;d.match("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH)?c.folder=b("MessagingTag").OTHER:d.match("^"+b("MessengerURIConstants").ARCHIVED_PATH)?c.folder=b("MessagingTag").ACTION_ARCHIVED:d.match("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH)?c.folder=b("MessagingTag").PENDING:c.folder=b("MessagingTag").INBOX;if(d.match(b("MessengerURIConstants").COMPOSE_SUBPATH+g))c.detailView=b("MessengerView").DETAIL.COMPOSE;else if(d.match("^"+b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))a&&a.id?(c.threadKey=a.id,c.detailView=b("MessengerView").DETAIL.PAYTHREAD):c.detailView=b("MessengerView").DETAIL.PAYFRIENDPICKER;else{l=j(d);l&&(c.threadKey=l,c.detailView=b("MessengerView").DETAIL.THREAD)}b("MercuryFilters.bs").isSupportedFilter(f)?c.filter=f:c.filter=b("MercuryFilters.bs").all;c.mid=h;c.query=k||i;c.extraQueryParams=a;if(c.masterView===b("MessengerView").MASTER.SUPPORT)return b("MessengerStateProcessor").supportInboxPostprocess(c);return((d=c.extraQueryParams)==null?void 0:d.fref)==="ts"?b("MessengerStateProcessor").supportFacebarTypeaheadPostprocess(c):b("MessengerStateProcessor").postprocess(c)}};function j(a){a=a.match(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+g);return a&&decodeURIComponent(a[1])}e.exports=a}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function(a,b,c,d,e,f){a={_getInstances:function(){this._instances||(this._instances={});return this._instances},get:function(){return this.getForFBID(b("CurrentUser").getID())},getForFBID:function(a){var b=this._getInstances();b[a]||(b[a]=new this(a));return b[a]}};e.exports=a}),null);
__d("MercuryMessageActions",["MercuryActionType","MercuryDispatcher","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=b("MercuryMessageObject").getForFBID(this.$1),this.__serverRequests=b("MercuryServerRequests").getForFBID(this.$1),this.__dispatcher=b("MercuryDispatcher").getForFBID(this.$1)}a.prototype.send=function(a,c,d){c=c||Function.prototype,this.$2.normalizeNewMessage(a),this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},a),b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)),this.__serverRequests.sendNewMessage(a,d),c(a.thread_id)};a.prototype.resend=function(a,b){a=babelHelpers["extends"]({},a);this.$2.normalizeResendMessage(a);this.send(a,void 0,b)};a.prototype.addAttachmentPlaceholder=function(a,c,d){this.$2.normalizeAddAttachmentPlaceholder(a,c,d),this.$2.normalizeNewMessage(a),this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers["extends"]({},a),b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype.cancelAttachmentPlaceholder=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:a,upload_data:c,action_type:b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER},b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype.confirmAttachmentPlaceholder=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:a,upload_data:c,action_type:b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER},b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))};a.prototype["delete"]=function(a,c,d){this.__dispatcher.handleUpdate(this.$3(a,c,b("MercuryActionType").DELETE_MESSAGES,d||b("MercuryPayloadSource").CLIENT_DELETE_MESSAGES))};a.prototype.__constructClientSingleMessagePayload=function(a,b){return{actions:[a],from_client:!0,payload_source:b}};a.prototype.$4=function(a,b){return{actions:[a],from_client:!1,payload_source:b}};a.prototype.$3=function(a,b,c,d){return{actions:[{action_type:c,thread_id:a,message_ids:b}],from_client:!0,payload_source:d}};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("AsyncDialog",["cx","AsyncRequest","CSS","DialogX","DOM","Keys","LayerFadeOnShow","LoadingDialogDimensions","Parent","React","ReactDOM","URI","XUIDialogTitle.react","XUISpinner.react","emptyFunction","forEachObject"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i;function j(a){__p&&__p();var c=b("LoadingDialogDimensions").WIDTH,d;a&&(c=parseInt(a.getAttribute("data-dialog-width"),10)||c,d=a.getAttribute("data-dialog-title")||d);if(!h){a=b("DOM").create("div",{className:"_57-x"});h=new(b("DialogX"))({width:c,addedBehaviors:[b("LayerFadeOnShow")],xui:!0},b("DOM").create("div",null,a));i=b("DOM").create("div");b("DOM").insertBefore(a,i);b("ReactDOM").render(b("React").createElement(b("XUISpinner.react"),{size:"large"}),a);h.subscribe(["key","blur"],function(a,c){if(a=="blur"||a=="key"&&c.keyCode==b("Keys").ESC){n();return!1}})}d?b("ReactDOM").render(b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},d),i):b("DOM").empty(i);h.setWidth(c);return h}var k={},l=1,m=[];function n(){b("forEachObject")(k,function(a,b){a.abandon(),o(b)})}function o(a){delete k[a],Object.keys(k).length||j().hide()}function p(a,c){__p&&__p();var d=l++;m[d]=c;k[d]=a;var e=o.bind(null,""+d);Object.assign(a.getData(),{__asyncDialog:d});c=a.getRelativeTo();j(c).setCausalElement(c).show();var f=a.finallyHandler;a.setFinallyHandler(function(a){var c=a.getPayload();c&&c.asyncURL&&q.send(new(b("AsyncRequest"))(c.asyncURL));e();f&&f(a)});var g=a.abortHandler||b("emptyFunction"),h=a.interceptHandler||b("emptyFunction");a.setInterceptHandler(function(){try{h()}finally{e()}}).setAbortHandler(function(){try{g()}finally{e()}});a.send()}var q={send:function(a,c){p(a,c||b("emptyFunction"))},bootstrap:function(a,c,d){__p&&__p();if(!a)return;var e=b("Parent").byClass(c,"stat_elem")||c;if(e&&b("CSS").hasClass(e,"async_saving"))return!1;var f=new(b("URI"))(a).getQueryData();d=d==="dialog";a=new(b("AsyncRequest"))().setURI(a).setData(f).setMethod(d?"GET":"POST").setReadOnly(d).setStatusElement(e);c&&(a.setRelativeTo(c),a.setNectarModuleDataSafe(c));q.send(a)},respond:function(a,b){var c=m[a];c&&(c(b),delete m[a])},getLoadingDialog:function(){return j()}};e.exports=q}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setPlatform=function(a){this.$1.platform=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event:!0,platform:!0,thread_id:!0,vc:!0};e.exports=a}),null);
__d("MercurySourceType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_INBOX:"source:internal:test_inbox",INTERNAL_TEST_PENDING:"source:internal:test_pending",INTERNAL_TEST_OTHER:"source:internal:test_other",INTERNAL_TEST_ML_ONLY:"source:internal:test_ml_only",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",PTX:"source:ptx",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",WORK_ACTIVATION_CARD_GENERAL_GROUP_CHAT:"source:work:activation_card_general_group_chat",SCHOOL_COMMUNITY:"source:school_community",BELL_RESEARCH:"source:bell_research",BELL_MESSENGER_LINKED:"source:bell_messenger_linked",PROFILE_MEET_NEW_FRIENDS:"source:profile_meet_new_friends",PROFILE_MEET_NEW_FRIENDS_REPLY:"source:profile_meet_new_friends_reply",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES_GAME_UPDATE:"source:instant_games_game_updates",INSTANT_GAMES_MATCH_MAKING:"source:instant_games_match_making",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",CREATOR_STUDIO:"source:creator_studio",FB_GROUP_ADMINSHIP_SYNC:"source:fbgroup:adminship_sync",FB_GROUP_CHAT_MUTE_MEMBER:"source:fbgroup:mute_member",MESSENGER_ADS_PARTIAL_AUTOMATED_REMINDER:"source:ads_partial_automated:reminder",MENTORSHIP:"source:mentorship",VOD_CONVERSATION:"source:vod_conversation",LOCAL_SEARCH_SERVICES:"source:local_search_services",YOUTH_VAULT:"source:youth_vault"})}),null);
__d("MessengerGroupLinkActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREATE_LINK:"create_link",REVOKE_LINK:"revoke_link",SHARE_LINK:"share_link",DELETE_ON_UNSUBSCRIBE:"delete_on_unsubscribe"})}),null);
__d("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1855592967826245"};c.getQueryID=function(){"use strict";return"1621038754641387"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadThemeUpdateWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1727493033983591"};c.getQueryID=function(){"use strict";return"643682629309288"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XChatRemoveParticipantAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/remove_participants/",{elem_id:{type:"String"},uid:{type:"Int"},tid:{type:"String"}})}),null);
__d("XGroupsJoinChatController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/join_chat/",{link_hash:{type:"String"}})}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("XMessagingBlockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/block_messages/",{})}),null);
__d("XMessagingGroupJoinThroughHashController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_hash/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinThroughPrivateLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/join_through_invite/",{link_hash:{type:"String"}})}),null);
__d("XMessagingGroupJoinableAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_accept/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupJoinableInviteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_invite/",{thread_fbid:{type:"String"},user_ids:{type:"IntSet"}})}),null);
__d("XMessagingGroupJoinableRejectController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_reject/",{thread_fbid:{type:"String"},user_id:{type:"Int"}})}),null);
__d("XMessagingGroupSetApprovalController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_approval_mode/",{set_mode:{type:"Enum",enumType:0},thread_fbid:{type:"String"}})}),null);
__d("XMessagingJoinableLinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/joinable_link_action/",{action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveAdminsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_admins/",{thread_fbid:{type:"String"},admin_ids:{type:"FBIDSet"},add:{type:"Bool",defaultValue:!1}})}),null);
__d("XMessagingSaveGroupThreadDescriptionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_group_thread_description/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveNicknameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_nickname/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_color/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingSaveThreadEmojiController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/save_thread_emoji/",{source:{type:"Enum",required:!0,enumType:1}})}),null);
__d("XMessagingUnblockMessagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/unblock_messages/",{})}),null);
__d("XNFXIgnoreMessagesActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/ignore_messages/",{thread_fbid:{type:"Int",required:!0},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("XNFXMessengerBlockActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/block_messages/",{thread_fbid:{type:"Int",required:!0},responsible_id:{type:"Int"},location:{type:"Enum",required:!0,enumType:1},frx_context:{type:"String"},__asyncDialog:{type:"Int"}})}),null);
__d("MercuryThreadActions",["codedError","cssVar","fbt","invariant","AsyncDialog","AsyncRequest","AsyncResponse","Bootloader","CurrentUser","EmojiLikeConstants","IgnoreMessagesTypedLogger","JSResource","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonMixin","MercurySourceType","MercuryThreadlistConstants","MessengerConfig","MessengerGroupLinkActionType","MessengerParticipants.bs","MessengerState.bs","MercuryThreadIDMap","MercuryViewer","MercuryMessageActions","MessengerActions","MercuryMessageObject","MessagingTag","MessengerEmojiTransitionMapping.bs","MessengerGroupsSyncStatus","MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation","MessengerThreadThemeUpdateWebGraphQLMutation","PageCommItemStatus","Placeholder.react","React","ReloadPage","URI","WebGraphQL","XChatRemoveParticipantAsyncController","XGroupsJoinChatController","XMercuryThreadLikeIconController","XMessagingGroupJoinableAcceptController","XMessagingGroupJoinableInviteController","XMessagingGroupJoinableRejectController","XMessagingGroupJoinThroughHashController","XMessagingGroupJoinThroughPrivateLinkController","XMessagingGroupSetApprovalController","XMessagingJoinableLinkController","XMessagingSaveAdminsController","XMessagingSaveGroupThreadDescriptionController","XMessagingSaveNicknameController","XMessagingSaveThreadColorController","XMessagingSaveThreadEmojiController","XNFXMessengerBlockActionController","XMessagingBlockMessagesController","XMessagingUnblockMessagesController","XNFXIgnoreMessagesActionController","ex","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MercuryThreadIDMap").get(),l=b("MercuryMessageActions").get(),m=b("MercuryMessageObject").get(),n=b("lazyLoadComponent")(b("JSResource")("MessengerSimpleDialogReact").__setRef("MercuryThreadActions"));function a(a){this.$1=a,this.__serverRequests=b("MercuryServerRequests").getForFBID(this.$1),this.__dispatcher=b("MercuryDispatcher").getForFBID(this.$1),this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1)}a.prototype.markRead=function(a,b){this.batchMarkRead([a],b)};a.prototype.batchMarkRead=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!0,b))};a.prototype.markUnread=function(a,b){this.batchMarkUnread([a],b)};a.prototype.batchMarkUnread=function(a,b){this.__dispatcher.handleUpdate(this.$2(a,!1,b))};a.prototype.markSeen=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MARK_THREAD_SEEN,b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN,{persistent:c}))};a.prototype.archive=function(a,b){this.batchArchive([a],b)};a.prototype.batchArchive=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadArchivedStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$3(a,!0))};a.prototype.unarchive=function(a,b){this.batchUnarchive([a],b)};a.prototype.batchUnarchive=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadArchivedStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$3(a,!1))};a.prototype.pin=function(a,c,d){__p&&__p();var e=b("MessengerState.bs").getPinnedThreadlist(b("CurrentUser").getID()),f=b("CurrentUser").isWorkUser(),h=f?b("MercuryThreadlistConstants").MAX_PINNED_THREADS:b("MessengerConfig").MPT;e=e.length>=h;if(e){e=g._(1545078,function(a){return a._("No se puede fijar el chat")},function(a,b){return a._("Puedes fijar un m\u00e1ximo de {max_threads} chats. Para fijar este, desfija un chat y vuelve a intentarlo.",[a._param("max_threads",b.max_threads)])},{max_threads:h});var j=f?i._("No puedes fijar m\u00e1s chats"):e.summary,k=f?i._("No puedes fijar m\u00e1s de 15 chats en Workplace. Para fijar este chat, desfija otro."):e.description;b("Bootloader").loadModules(["MessengerDialogs.bs"],function(a){a.showDialog(function(){return b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null)},b("React").createElement(n,{title:j,body:k}))})},"MercuryThreadActions")}else this.batchPin([a],d),this.$4(a,!0,c)};a.prototype.batchPin=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPinnedStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$5(a,!0))};a.prototype.unpin=function(a,b,c){this.batchUnpin([a],c),this.$4(a,!1,b)};a.prototype.batchUnpin=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPinnedStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$5(a,!1))};a.prototype.markPageFollowUp=function(a,b){this.batchMarkPageFollowUp([a],b)};a.prototype.batchMarkPageFollowUp=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPageFollowUpStatus(a,!0,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$6(a,!0))};a.prototype.unmarkPageFollowUp=function(a,b){this.batchUnmarkPageFollowUp([a],b)};a.prototype.batchUnmarkPageFollowUp=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadPageFollowUpStatus(a,!1,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$6(a,!1))};a.prototype.markSpam=function(a,b){this.batchMarkSpam([a],b)};a.prototype.batchMarkSpam=function(a,c){a.forEach(function(a){this.__serverRequests.markThreadSpam(a,c)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").SPAM))};a.prototype.unmarkSpam=function(a,b){this.batchUnmarkSpam([a],b)};a.prototype.batchUnmarkSpam=function(a,c){a.forEach(function(a){this.__serverRequests.unmarkThreadSpam(a,c)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b("MessagingTag").INBOX))};a.prototype.changeFolder=function(a,b){this.batchChangeFolder([a],b)};a.prototype.batchChangeFolder=function(a,b){a.forEach(function(a){this.__serverRequests.changeThreadFolder(a,b)}.bind(this)),this.__dispatcher.handleUpdate(this.$7(a,b))};a.prototype["delete"]=function(a,b){this.batchDelete([a],b),this.batchUnpin([a],b)};a.prototype.batchDelete=function(a,c){this.__serverRequests.deleteThreads(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload(a,b("MercuryActionType").DELETE_THREAD,b("MercuryPayloadSource").CLIENT_DELETE_THREAD))};a.prototype.unmute=function(a){this.updateMuteSetting(a,0)};a.prototype.updateMuteSetting=function(a,c){this.__serverRequests.changeMutingOnThread(a,c),this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mute_until:c}))};a.prototype.updateMentionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeMentionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{mentions_mute_mode:c}))};a.prototype.updateReactionsMuteSetting=function(a,c){c=c?1:0;this.__serverRequests.changeReactionsMutingOnThread(a,c);this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").CHANGE_MUTE_SETTINGS,b("MercuryPayloadSource").CLIENT_CHANGE_MUTE_SETTINGS,{reactions_mute_mode:c}))};a.prototype.blockMessages=function(a,c){var d="",e=b("MercuryIDs").getUserIDFromThreadID(a);e!==null||j(0,400);var f=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(e));d=f&&f.short_name;f=b("XNFXMessengerBlockActionController").getURIBuilder().setInt("thread_fbid",e).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(f),function(e){e.subscribe("confirm",function(){e.hide(),c&&c(d),this.changeFolder(a,b("MessagingTag").OTHER)}.bind(this))}.bind(this))};a.prototype.unblockMessages=function(a){var c=b("MercuryIDs").getUserIDFromThreadID(a);if(c===null)throw new Error(b("ex")("Expected user ID to unblock messages for, got null"));c=JSON.stringify({reportable_ent_token:c,initial_action_name:b("MercuryMessengerBlockingUtils").block_messages});new(b("AsyncRequest"))(new(b("URI"))("/ajax/nfx/messenger_undo_block").addQueryData({story_location:"messenger",context:c})).setHandler(function(){return this.changeFolder(a,b("MessagingTag").INBOX)}.bind(this)).send()};a.prototype.ignoreMessages=function(a,c){c=b("XNFXIgnoreMessagesActionController").getURIBuilder().setInt("thread_fbid",a).setEnum("location","www_chat_head").getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(c))};a.prototype.blockOnMessengerDotCom=function(a){var c=b("XMessagingBlockMessagesController").getURIBuilder().getURI();new(b("IgnoreMessagesTypedLogger"))().setEvent("block_confirmed").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform("messengerdotcom").log();new(b("AsyncRequest"))(c).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).send()};a.prototype.blockIgnoreOnMessengerDotCom=function(a,c,d){a&&b("MessengerActions").selectThread(null),this.changeFolder(c,b("MessagingTag").OTHER),this.blockOnMessengerDotCom(c),d&&d()};a.prototype.unblockOnMessengerDotCom=function(a){var c=b("XMessagingUnblockMessagesController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(a)}).setHandler(function(){return this.changeFolder(a,b("MessagingTag").INBOX)}.bind(this)).send()};a.prototype.leaveGroup=function(a){l.send(m.constructLogMessageObject(b("MercurySourceType").TITAN_WEB,a,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryViewer").getID()]}),null,b("MercuryAPIArgsSource").WEBMESSENGER)};a.prototype.deleteSyncedGroup=function(a){if(!a)return;if(a.groups_sync_status!=b("MessengerGroupsSyncStatus").OPT_IN)return;k.getServerIDFromClientID(a.thread_id,function(a){a={client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:a,groups_sync_status:b("MessengerGroupsSyncStatus").OPT_OUT};b("WebGraphQL").exec(new(b("MessengerGroupsSyncStatusChangeMutationWebGraphQLMutation"))({data:a}))})};a.prototype.removeFromGroup=function(a,c){var d=b("XChatRemoveParticipantAsyncController").getURIBuilder().getURI();a={tid:a,uid:c};new(b("AsyncRequest"))(d).setMethod("POST").setData(a).send()};a.prototype.changeThreadTheme=function(a,c,d){k.getServerIDFromClientID(a,function(a){b("WebGraphQL").exec(new(b("MessengerThreadThemeUpdateWebGraphQLMutation"))({data:{client_mutation_id:0,actor_id:b("CurrentUser").getID(),thread_id:a,theme_id:c,source:d}}))})};a.prototype.changeThreadColor=function(a,c,d){k.getServerIDFromClientID(a,function(a){var e={};c!="#0084ff"&&(e.color_choice=c);e.thread_or_other_fbid=a;a=b("XMessagingSaveThreadColorController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(a).setMethod("POST").setData(e).send()})};a.prototype.changeThreadEmoji=function(a,c,d){k.getServerIDFromClientID(a,function(a){var e={},f=String.fromCodePoint.apply(String,c);b("MessengerEmojiTransitionMapping.bs").hasGender(c)&&(f=String.fromCodePoint.apply(String,b("MessengerEmojiTransitionMapping.bs").removeAllModifiers(c)));f!==String.fromCodePoint(b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI)&&f!==String.fromCodePoint(b("EmojiLikeConstants").THUMBS_UP_EMOJI_CODES)&&(e.emoji_choice=f);e.thread_or_other_fbid=a;f=b("XMessagingSaveThreadEmojiController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(e).send()})};a.prototype.changeThreadNicknames=function(a,c,d,e){k.getServerIDFromClientID(a,function(a){a={thread_or_other_fbid:a,participant_id:c,nickname:d};var f=b("XMessagingSaveNicknameController").getURIBuilder().setEnum("source",e).getURI();new(b("AsyncRequest"))(f).setMethod("POST").setData(a).send()})};a.prototype.changeGroupThreadDescription=function(a,c,d){k.getServerIDFromClientID(a,function(a){a={thread_fbid:a,description:c};var e=b("XMessagingSaveGroupThreadDescriptionController").getURIBuilder().setEnum("source",d).getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(a).send()})};a.prototype.setApprovalMode=function(a,c){var d=b("XMessagingGroupSetApprovalController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData({set_mode:a,thread_fbid:c.thread_fbid}).send()};a.prototype.changeGroupAdmins=function(a,c,d){a={thread_fbid:a,admin_ids:c,add:d};c=b("XMessagingSaveAdminsController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.joinThroughHash=function(a,c,d){a={link_hash:a};var e=b("XMessagingGroupJoinThroughHashController").getURIBuilder().getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(a).setHandler(function(){return c()}).setErrorHandler(function(a){d()||b("AsyncResponse").defaultErrorHandler(a)}).setTransportErrorHandler(function(){return d()}).send()};a.prototype.joinThroughPrivateLink=function(a){a={link_hash:a};var c=b("XMessagingGroupJoinThroughPrivateLinkController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.chatJoinThroughHash=function(a,c){a={link_hash:a};var d=b("XGroupsJoinChatController").getURIBuilder().getURI(),e=function(){return b("ReloadPage").now()};new(b("AsyncRequest"))(d).setMethod("POST").setData(a).setHandler(c&&typeof c==="function"?c:e).send()};a.prototype.createJoinableLink=function(a,c){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;k.getServerIDFromClientID(a,function(a){a={thread_fbid:a};var d=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").CREATE_LINK).getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData(a).setHandler(function(a){a=a.getPayload();a&&c(a)}).send()})};a.prototype.revokeAndRegenerateJoinableLink=function(a,c){if(b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a))return;k.getServerIDFromClientID(a,function(d){d={thread_fbid:d};var e=b("XMessagingJoinableLinkController").getURIBuilder().setEnum("action",b("MessengerGroupLinkActionType").REVOKE_LINK).getURI();new(b("AsyncRequest"))(e).setMethod("POST").setData(d).setHandler(function(b){return this.createJoinableLink(a,c)}.bind(this)).send()}.bind(this))};a.prototype.inviteToJoinableGroup=function(a,c){a={thread_fbid:a,user_ids:c};c=b("XMessagingGroupJoinableInviteController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.acceptToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableAcceptController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.rejectToJoinableGroup=function(a,c){a={thread_fbid:a,user_id:c};c=b("XMessagingGroupJoinableRejectController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData(a).send()};a.prototype.addParticipants=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").ADD_PARTICIPANTS,b("MercuryPayloadSource").CLIENT_ADD_PARTICIPANTS,{participants:c}))};a.prototype.updateCustomLike=function(a,c){c=b("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",c).getURI();new(b("AsyncRequest"))().setURI(c).setHandler(function(c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").UPDATE_CUSTOM_LIKE,b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE,{custom_like:c.getPayload()}))}.bind(this)).send()};a.prototype.movePendingToInbox=function(a){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").MOVE_PENDING_TO_INBOX,b("MercuryPayloadSource").CLIENT_MOVE_PENDING_TO_INBOX))};a.prototype.updateSnippet=function(a,c){this.__dispatcher.handleUpdate(this.__constructClientPayload([a],b("MercuryActionType").UPDATE_SNIPPET,b("MercuryPayloadSource").CLIENT_UPDATE_SNIPPET,{deleted_ids:c}))};a.prototype.updateCommStatus=function(a,c){this.__dispatcher.handleUpdate(this.$8(a,c));c=c===b("PageCommItemStatus").DONE;this.__dispatcher.handleUpdate(this.$3(a,c))};a.prototype.updateCommItemOwner=function(a,b,c,d){this.__dispatcher.handleUpdate(this.$9(a,b,c,d))};a.prototype.$2=function(a,c,d){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_READ_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS,{mark_as_read:c,source:d,timestamp:0})};a.prototype.$9=function(a,c,d,e){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER,b("MercuryPayloadSource").UPDATE_COMM_ITEM_OWNER,{id:d,name:c,profile_pic_uri:e})};a.prototype.$3=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_ARCHIVED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS,{archived:c})};a.prototype.$5=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PINNED_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PINNED_STATUS,{is_pinned:c})};a.prototype.$6=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS,b("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS,{is_page_follow_up:c})};a.prototype.$8=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").UPDATE_COMM_STATUS,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS,{comm_status:c})};a.prototype.$7=function(a,c){return this.__constructClientPayload(a,b("MercuryActionType").CHANGE_FOLDER,b("MercuryPayloadSource").CLIENT_CHANGE_FOLDER,{new_folder:c})};a.prototype.__constructClientPayload=function(a,b,c,d){return{actions:a.map(function(a){return babelHelpers["extends"]({action_type:b,thread_id:a},d)}),from_client:!0,payload_source:c}};a.prototype.$4=function(a,c,d){b("Bootloader").loadModules(["ChatPinnedThreadsTypedLogger","ChatPinnedThreadsEvent"],function(e,f){new e().setEvent(c?f.PIN_THREAD:f.UNPIN_THREAD).setIsWorkplace(b("CurrentUser").isWorkUser()).setThreadID(a).setEntryPoint(d).log()},"MercuryThreadActions")};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=[],this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),this.$4=b("MercuryDispatcher").getForFBID(this.$1),this.$5=b("MercuryServerRequests").getForFBID(this.$1),this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4.subscribe("model-update-completed",function(a,b){return this.$7()}.bind(this))}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.handleUpdateWaitForThread=function(a,b){var c=this.$3.getClientIDFromServerIDNow(b);if(c){this.$8(a);return}this.$3.getClientIDFromServerID(b,function(){return this.$2.push({thread_fbid:b,payload:a})}.bind(this));this.$5.ensureThreadIsFetched(b)};a.prototype.$7=function(){if(this.$2&&this.$2.length){var a=this.$2.shift(),b=a.thread_fbid;a=a.payload;this.handleUpdateWaitForThread(a,b)}};a.prototype.$8=function(a){a.from_client?this.$4.handleUpdate(a):this.$6.handleUpdate(a)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","Bootloader","LogHistory","MercuryActionType","MercuryPayloadSource","MercurySingletonProvider","MercuryThreadInformer","MessengerParticipants.bs","MessengerState.bs","isEmpty","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("LogHistory").getInstance("mercury_dispatcher");c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;a.getForFBID=function(a){return j.getForFBID(a)};a.get=function(){return j.get()};function a(a){h.constructor.call(this),this.$MercuryDispatcher1=a}a.prototype.handleUpdate=function(a){__p&&__p();this.$MercuryDispatcher2(a),this.$MercuryDispatcher3(a),!!a.from_client!==!!a.preprocessed||g(0,5757),delete a.preprocessed,b("isEmpty")(a)||b("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){__p&&__p();a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE&&(this.inform("invalidate-global-state",{}),b("MessengerParticipants.bs").reset());if(a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE){var c=a.threads&&a.threads.length>0&&a.threads[0]&&a.threads[0].thread_id;c&&this.inform("invalidate-thread-state",c)}this.inform("update-thread-ids",a.newlyAddedClientIDs);b("MessengerParticipants.bs").addParticipants(a);b("MessengerState.bs").sendJS(this.$MercuryDispatcher1,b("MessengerState.bs").processJSActions(a));this.inform("update-unread",a);this.inform("update-threadlist",a);this.inform("update-messages",a);this.inform("update-unseen",a);this.inform("model-update-completed",null)}.bind(this))};a.prototype.$MercuryDispatcher3=function(a){var c=a.payload_source;(c===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE||c===b("MercuryPayloadSource").SERVER_SEND_MESSAGE||c===b("MercuryPayloadSource").CLIENT_HANDLE_ERROR)&&b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(d,e){if(c===b("MercuryPayloadSource").CLIENT_SEND_MESSAGE){var f=a.actions&&a.actions[0]&&a.actions[0].offline_threading_id;f&&d.markerStart(e.SEND_MESSAGE,f)}f=a.actions&&a.actions[0]&&a.actions[0].client_message_id;c===b("MercuryPayloadSource").SERVER_SEND_MESSAGE&&(f&&d.markerEnd(e.SEND_MESSAGE,"SUCCESS",f));c===b("MercuryPayloadSource").CLIENT_HANDLE_ERROR&&(f&&d.markerEnd(e.SEND_MESSAGE,"FAIL",f))},"MercuryDispatcher")};a.prototype.$MercuryDispatcher2=function(a){__p&&__p();var c=a.payload_source;if(c===b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS||c===b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN)return;var d={from_client:a.from_client,messages:null};if(a.actions){a=a.actions.filter(function(a){return a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE||a.action_type===b("MercuryActionType").LOG_MESSAGE}).map(function(a){return{action_type:a.action_type,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,message_id:a.message_id}});a.length&&(d.messages=a)}i.debug("update:"+c,JSON.stringify(d))};var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySendMessageFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"})}),null);
__d("MercuryMessageObject",["BanzaiODS","MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySendMessageFields","MercurySingletonProvider","MercurySourceType","MessengerObjectAssociationType","MessengerState.bs"],(function(a,b,c,d,e,f){__p&&__p();a.getForFBID=function(a){"use strict";return i.getForFBID(a)};a.get=function(){"use strict";return i.get()};function a(a){"use strict";this.$1=a}a.prototype.constructUserGeneratedMessageObject=function(a,c,d,e,f,h){__p&&__p();h===void 0&&(h=null);c=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,c,d);typeof a==="string"&&(a=a.replace(/^\s+/,"").replace(/\s+$/,""));c.body=a;c.has_attachment=!1;c.html_body=!1;c.attachments=[];c.specific_to_list=e||[];c.creator_info=f;h&&h.length>0&&(c.tags=h);return c};a.prototype.constructStickerMessageObject=function(a,c,d,e){e===void 0&&(e=null);c=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,c,d);c.has_attachment=!0;c.html_body=!1;c.attachments=[];c.sticker_id=a;c.specific_to_list=[];e&&e.length>0&&(c.tags=e);return c};a.prototype.constructAttachmentMessageObject=function(a,c){"use strict";a=g(this.$1,b("MercuryActionType").USER_GENERATED_MESSAGE,a,c);a.attachments=[];a.specific_to_list=[];return a};a.prototype.constructLogMessageObject=function(a,c,d,e){"use strict";a=g(this.$1,b("MercuryActionType").LOG_MESSAGE,a,c);a.log_message_type=d;a.log_message_data=e;e&&e.untypedData&&e.untypedData.ttl&&(a.ephemeral_ttl_mode=e.untypedData.ttl);return a};a.prototype.constructCTAConfirmationMessageObject=function(a,b,c,d,e){e===void 0&&(e=null);a=this.constructUserGeneratedMessageObject(a,b,c,null,null);({});d?b={quick_replies:d,ignore_for_webhook:!1}:b={ignore_for_webhook:!0};a.platform_xmd=JSON.stringify(b);e&&e.length>0&&(a.tags=e);return a};a.prototype.normalizeNewMessage=function(a){"use strict";__p&&__p();a.status===void 0&&(a.status=b("MercuryActionStatus").UNSENT);a.offline_threading_id=a.offline_threading_id||b("MercuryLocalIDs").generateOfflineThreadingID(a.timestamp);a.offline_threading_id||b("BanzaiODS").bumpEntityKey("chat.web","invalid_otid_generated");a.message_id=a.message_id||a.offline_threading_id;var c=b("MercuryIDs").getParticipantIDFromUserID(this.$1);a.specific_to_list=a.specific_to_list||[];a.specific_to_list.length&&a.specific_to_list.indexOf(c)===-1&&a.specific_to_list.push(c);var d=!1;if(!a.thread_id)a.thread_id="root:"+a.offline_threading_id;else{var e,f=b("MessengerState.bs").getThreadMetaNow(this.$1,a.thread_id);f&&f.ephemeral_ttl_mode!==null&&a.ephemeral_ttl_mode===void 0&&(a.ephemeral_ttl_mode=f.ephemeral_ttl_mode);((e=f)!=null?(e=e.associated_object)!=null?e.name:e:e)&&((e=f)!=null?e.object_association_type:e)===b("MessengerObjectAssociationType").GENERAL_CHAT&&(d=!0)}if(!d)if(a.specific_to_list.length==1)a.thread_id="user:"+this.$1;else if(a.specific_to_list.length==2){f=a.specific_to_list[0]==c?a.specific_to_list[1]:a.specific_to_list[0];a.thread_id=b("MercuryIDs").getThreadIDFromParticipantID(f)}if(!a.specific_to_list.length){e=b("MercuryIDs").tokenize(a.thread_id);d=e.type;f=e.value;d=="user"&&(a.specific_to_list=["fbid:"+f,c])}a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]||(a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]=0)};a.prototype.normalizeResendMessage=function(a){"use strict";a.status=b("MercuryActionStatus").RESENDING,a.timestamp=Date.now(),a[b("MercurySendMessageFields").MANUAL_RETRY_CNT]+=1};a.prototype.normalizeAddAttachmentPlaceholder=function(a,c,d){"use strict";d.preview_attachments.length>0&&(a.has_attachment=!0,a.preview_attachments=d.preview_attachments),a.client_state=b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER,a.status=b("MercuryActionStatus").RESENDING,a.upload_id=c};function g(a,c,d,e){var f=h(d)?[b("MercuryMessageSourceTags").CHAT]:[],g=Date.now();c={action_type:c,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(a),author_email:null,timestamp:g,is_unread:!1,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_spoof_warning:!1,source:d,source_tags:f};return c}function h(a){switch(a){case b("MercurySourceType").CHAT_WEB:case b("MercurySourceType").CHAT_JABBER:case b("MercurySourceType").CHAT_IPHONE:case b("MercurySourceType").CHAT_MEEBO:case b("MercurySourceType").CHAT_ORCA:case b("MercurySourceType").CHAT_TEST:case b("MercurySourceType").CHAT:return!0;default:return!1}}var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function(a,b,c,d,e,f){var g=b("BanzaiLogger").create({retry:!0}),h=b("Banzai").isEnabled("mercury_send_error_logging");a={log:function(a){if(!h)return;a={message_id:a.message_id,timestamp_client:Date.now(),error_type:a.error_data.type,error_code:a.error_data.code,error_description:a.error_data.description,is_transient:a.error_data.is_transient};g.log("MercurySendErrorLoggerConfig",a)}};e.exports=a}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","MessengerEnvironment","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryDispatcher").getForFBID(this.$1)}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};a.prototype.handleUpdate=function(a){__p&&__p();var c={};a.from_client&&g(0,2150);(a.threads||[]).forEach(function(a){this.$4(a,c);var b=this.$2.getServerIDFromClientIDNow(a.thread_id);d(["MercuryServerRequests"],function(c){c=c.getForFBID(this.$1);c.markThreadFetched(a.thread_id);b&&c.markThreadFetched(b);c.updateLastActionTimestamp(a.timestamp)}.bind(this))}.bind(this));a.pinned_thread_ids=(a.pinned_thread_ids||[]).map(function(a){return this.$2.getClientIDFromServerIDNow(a)}.bind(this));(a.ordered_threadlists||[]).forEach(function(a){var b=a.thread_fbids||[];b=b.concat(a.other_user_fbids||[]);a.thread_ids=b.map(function(a){return this.$2.getClientIDFromServerIDNow(a.toString())}.bind(this))}.bind(this));if(a.delivery_receipts){var e={};for(var f=a.delivery_receipts,h=Array.isArray(f),i=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;var k=j.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(j.other_user_fbid):this.$2.getClientIDFromServerIDNow(j.thread_fbid);k&&(e[k]=j.time)}a.delivery_receipts=e}a.actions=a.actions||[];a.actions.forEach(function(e){e.action_type===b("MercuryActionType").SEND_MESSAGE&&e.status===b("MercuryActionStatus").ERROR&&b("MercurySendErrorLogger").log(e);var f=null,h=null;e.other_user_fbid?(h=b("MercuryIDs").getThreadIDFromUserID(e.other_user_fbid),f=e.other_user_fbid):e.thread_fbid?(h=b("MercuryIDs").getThreadIDFromThreadFBID(e.thread_fbid),f=e.thread_fbid):e.thread_id?(h=b("MercuryIDs").getThreadIDFromThreadFBID(e.thread_id),f=e.thread_id):e.status&&e.status!=b("MercuryActionStatus").SUCCESS&&e.client_thread_id?h=e.client_thread_id:g(0,2151,e.action_type,e.status);f=f&&f.toString();e.thread_id=this.$2.hasClientIDForServerID(f)?this.$2.getClientIDFromServerIDNow(f):h;e.action_type==b("MercuryActionType").SEND_MESSAGE&&e.client_thread_id&&f&&(e.thread_id=e.client_thread_id,this.$2.forceSetServerIDToClientID(f,e.client_thread_id),c[f]=e.client_thread_id);e.thread_id||g(0,2152,e.action_type);(!a.payload_source||!a.payload_source.startsWith("server"))&&d(["MercuryServerRequests"],function(a){a.getForFBID(this.$1).updateLastActionTimestamp(e.timestamp)}.bind(this))}.bind(this));this.$5(a);this.$6(a);if(a.end_of_history){k=[];for(var j=0;j<a.end_of_history.length;j++){i=a.end_of_history[j];i.type=="user"?k.push("user:"+i.fbid):i.type=="thread"&&this.$2.hasClientIDForServerID(i.fbid)&&k.push(this.$2.getClientIDFromServerIDNow(i.fbid))}a.end_of_history=k}if(a.roger){var l={};Object.keys(a.roger).forEach(function(c){__p&&__p();var d=Object.keys(a.roger[c]),e;c?e=this.$2.getClientIDFromServerIDNow(c):d.length===1&&(e=b("MercuryIDs").getThreadIDFromUserID(d[0]));if(e){d=a.roger[c];l[e]={};for(var f in d)if(Object.prototype.hasOwnProperty.call(d,f)){c=b("MercuryIDs").getParticipantIDFromUserID(f);l[e][c]=d[f]}}}.bind(this));a.roger=l}a.newlyAddedClientIDs=c;a.preprocessed=!0;this.$3.handleUpdate(a)};a.prototype.$4=function(a,c){var d=a.other_user_fbid?a.other_user_fbid:a.thread_fbid;d||g(0,2153);var e=this.$2.getClientIDFromServerIDNow(d);e||(e=a.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(a.other_user_fbid):b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid),this.$2.setServerIDToClientID(d,e),this.$2.setDeprecatedServerIDToClientID(a.thread_id,e),c[d]=e);a.thread_id=e};a.prototype.$5=function(a){a.actions.forEach(function(a){a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE&&(a.attachments=a.attachments||[],a.attachments.forEach(function(a){if(b("MercuryAttachment").isShareAttachment(a)&&a.share&&b("MessengerEnvironment").messengerui){var c=new(b("URI"))(a.share.uri);c.getDomain()||(a.share.uri=c.setDomain("facebook.com").setSubdomain(b("URI").getRequestURI().getSubdomain()).setProtocol("https").toString())}}))})};a.prototype.$6=function(a){__p&&__p();a.actions.forEach(function(a){__p&&__p();if(a.action_type!==b("MercuryActionType").USER_GENERATED_MESSAGE)return;a=a;if(!a.has_attachment||!a.attachments)return;for(var c=a.attachments.length-1;c>=0;c-=1){var d=a.attachments[c];if(!d.share||!d.share.style_list||d.share.style_list[0]!="genie_message")continue;d.share.target.genie_id&&(a.author=b("MercuryIDs").getParticipantIDFromUserID(d.share.target.genie_id));d.share.target&&!d.share.target.attachment&&(a.attachments.splice(c,1),a.has_attachment=a.attachments.length>0)}})};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function(a,b,c,d,e,f){function a(a,b,c,d,e,f){"use strict";this.success_handler=a,this.error_handler=b,this.transport_error_handler=c,this.timeout_handler=d,this.timeout=e,this.connection_retries=f}e.exports=a}),null);
__d("MercurySyncConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER"});e.exports=a}),null);
__d("MercurySyncDeltaHolder",["MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$2=new Map(),this.$3=[],this.$1=0}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.peek=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3[0]};a.prototype.getTop=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3.reverse()[0]};a.prototype.pop=function(){this.$3=this.$3.sort(function(a,b){return a-b});if(this.$3.length===0)return void 0;var a=this.$3.shift(),b=this.$2.get(a);this.$2["delete"](a);return{seqID:a,delta:b}};a.prototype.push=function(a,b){if(this.$2.has(a))return;this.$2.set(a,b);this.$3.push(a)};a.prototype.getLastSeqID=function(){return this.$1};a.prototype.updateLastSeqID=function(a){this.$1=a};a.prototype.updateLastSeqIDAndClearHistory=function(a){this.$2=new Map(),this.$3=[],this.$1=a};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","BanzaiODS","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","EventProfiler","FBJSON","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryDispatcher","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryMessageIDs.bs","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueOptions","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySourceType","MercurySyncConstants","MercurySyncDeltaHolder","MercuryThreadIDMap","MessagingConfig","MessagingTag","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","gkx","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("LogHistory").getInstance("mercury_server"),j=b("MercuryAPIArgsSource").MERCURY,k=30*1e3,l=!0;function m(a){return a.getError()?"_"+a.getError():""}function n(a,c){__p&&__p();var d=babelHelpers["extends"]({},a),e;if(c.threads){d.threads||(d.threads={});for(e in c.threads)d.threads[e]=Object.keys(b("createObjectFrom")((d.threads[e]||[]).concat(c.threads[e]||[])))}if(c.messages){d.messages||(d.messages={});for(e in c.messages){d.messages[e]||(d.messages[e]={});for(var f in c.messages[e])d.messages[e][f]?d.messages[e][f]=r(d.messages[e][f],c.messages[e][f]):d.messages[e][f]=c.messages[e][f]}}d.client=a.client||c.client;return d}function o(a,c){var d=Object.assign(b("createObjectFrom")(a.folders,!0),b("createObjectFrom")(c.folders,!0));a=a.client||c.client;return{folders:Object.keys(d),client:a}}function p(a,b){for(var c in b)if(a[c]&&typeof a[c]==="object")a[c]=r(a[c],b[c]);else if(b[c]&&typeof b[c]==="object"){var d={};Object.assign(d,b[c]);a[c]=d}return a}function q(a,b){return b}function r(a,b){var c=Math.max(a.limit,b.limit),d;!a.timestamp?d=b.timestamp:!b.timestamp?d=a.timestamp:d=Math.min(a.timestamp,b.timestamp);return{limit:c,timestamp:d}}function s(a,b){var c=a.client||b.client;c={ids:{},client:c};Object.assign(c.ids,a.ids,b.ids);return c}function t(a,c){__p&&__p();var d={},e,f=a.client||c.client;delete a.client;delete c.client;for(e in a)Object.assign(d,b("createObjectFrom")(a[e],e));for(e in c)Object.assign(d,b("createObjectFrom")(c[e],e));a={client:f};for(var g in d)e=d[g],a[e]||(a[e]=[]),a[e].push(g);return a}function u(a,c){var d=a.client||c.client;a=b("createObjectFrom")(a.ids,!0);c=b("createObjectFrom")(c.ids,!0);a=Object.assign(a,c);return{ids:Object.keys(a),client:d}}function v(a){this.$1=a,this.$2=0,this.$3={},this.$4={},this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1),this.$5=b("MercuryDispatcher").getForFBID(this.$1),this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$7=new(b("MercuryServerSendMessageQueueOptions"))(function(a,b){this.__handleUpdate(a,b)}.bind(this),function(a){return this.$9(a)}.bind(this),function(a){this.$10(a)}.bind(this),function(a){return this.$11(a)}.bind(this),b("MercuryServerRequestsConfig").sendMessageTimeout,b("MessagingConfig").SEND_CONNECTION_RETRIES),this.$8=b("MercurySyncDeltaHolder").getForFBID(this.$1),this.$12()}v.getForFBID=function(a){return w.getForFBID(a)};v.get=function(){return w.get()};v.prototype.fetchThreadlistInfo=function(a,c,d,e,f,g){d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=j);l&&(l=!1,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch"));var h=e?b("MercuryServerDispatcher").IMMEDIATE:null;f={client:f};f[d]={offset:a,limit:c,filter:e,before:g};this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,f,h)};v.prototype.fetchPinnedThreadlistInfo=function(){var a={};a.onlyPinnedThreads=!0;this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,a,null)};v.prototype.fetchUnseenThreadIDs=function(a,c){a===void 0&&b("MessagingTag").INBOX,c===void 0&&(c=j),this.__sendRequest(b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};v.prototype.fetchUnreadThreadIDs=function(a,c){c===void 0&&(c=j),this.__sendRequest(b("MercuryServerURIs").UNREAD_THREADS,{folders:[a],client:c})};v.prototype.fetchThreadData=function(a,c){__p&&__p();c===void 0&&(c=j);b("MercuryAssert").allThreadID(a);var d={threads:{},client:c},e=[],f=[];a.forEach(function(a){__p&&__p();if(this.$3[a])return;this.$3[a]=!0;var c=this.__threadIDMap.getServerIDFromClientIDNow(a);a=b("MercuryIDs").tokenize(a);if(a.type=="user")e.push(a.value),d.threads.user_ids=e;else if(a.type=="thread")c?f.push(c):f.push(a.value),d.threads.thread_fbids=f;else if(a.type=="root")c&&(f.push(c),d.threads.thread_fbids=f);else if(a.type!="pending")throw new Error("Unknown thread type",a)}.bind(this));this.$5.inform("fetch-thread-data",d);d.threads.user_ids&&d.threads.user_ids.forEach(function(a){a||(i.error("empty user id",JSON.stringify(e)),b("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(e)))});d.threads.thread_fbids&&d.threads.thread_fbids.forEach(function(c){c||b("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(a))});for(var g in d.threads){this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d);break}};v.prototype.ensureThreadIsFetched=function(a,c){__p&&__p();c===void 0&&(c=j);if(!this.__threadIDMap.getClientIDFromServerIDNow(a)&&!this.$3[a]){if(!a){b("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");i.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$3[a]=!0;this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[a]},client:c})}};v.prototype.fetchThreadMessages=function(a,c,d,e,f,g){__p&&__p();g===void 0&&(g=j);b("MercuryAssert").isThreadID(a);var h;c=b("MercuryIDs").tokenize(a);var i=this.__threadIDMap.getServerIDFromClientIDNow(a),k=!1;if(i)i=i,h=c.type=="user"?"user_ids":"thread_fbids";else{i=c.value;switch(c.type){case"user":h="user_ids";k=!0;break;case"thread":h="thread_fbids";break}}var l={messages:{},threads:{},client:g};h?(l.messages[h]={},l.messages[h][i]={timestamp:e,limit:d},k&&(l.threads[h]=[i]),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,l,f)):this.__threadIDMap.getServerIDFromClientID(a,function(a){l.messages.thread_fbids={},l.messages.thread_fbids[a]={timestamp:e,limit:d},this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,l,f)}.bind(this))};v.prototype.handleThreadInfoError=function(a,c){__p&&__p();var d=a.getData();a=[];if(d.messages){for(var e in d.messages.thread_fbids){var f=this.__threadIDMap.getClientIDFromServerIDNow(e);f&&a.push(this.$13(f))}for(var g in d.messages.user_ids)a.push(this.$13("user:"+g));for(var h in d.messages.group_ids)a.push(this.$13("group:"+h))}a.length&&this.$5.handleUpdate({actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});if(d.threads&&(d.threads.user_ids||d.threads.thread_fbids||d.threads.group_ids||d.threads.thread_ids)){f=5;a=!0;!d.retry_count?(d.retry_count=0,d.messages&&delete d.messages):d.retry_count>=f&&(!c||!b("gkx")("678666"))&&(a=!1,(d.threads.thread_ids||[]).concat(d.threads.thread_fbids||[]).forEach(function(a){a in this.$3&&delete this.$3[a]},this));if(a){c=Math.pow(2,Math.min(d.retry_count,f))*1e3;b("setTimeoutAcrossTransitions")(function(){i.log("retry_thread","{}"),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d)}.bind(this),c);d.retry_count++}}};v.prototype.markFolderAsRead=function(a){this.__sendRequest(b("MercuryServerURIs").MARK_FOLDER_READ,{folder:a});a=[{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,folder:a}];this.$5.handleUpdate({global_actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS})};v.prototype.changeThreadReadStatus=function(a,c,d,e,f,g){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(h){var j;j={ids:(j={},j[h]=c,j),source:d,watermarkTimestamp:e,shouldSendReadReceipt:f,commerce_last_message_type:g};i.log("initiate_change_read_status",JSON.stringify({thread_id:a,thread_fbid:h,mark_as_read:c,watermarkTimestamp:e}));this.__sendRequest(b("MercuryServerURIs").CHANGE_READ_STATUS,j)}.bind(this))};v.prototype.changeThreadArchivedStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,e)}.bind(this))};v.prototype.changeThreadPinnedStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_PINNED_STATUS,e)}.bind(this))};v.prototype.changeThreadPageFollowUpStatus=function(a,c,d){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={ids:{},source:d};e.ids[a]=c;this.__sendRequest(b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,e)}.bind(this))};v.prototype.changeThreadFolder=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){var d={};d[c]=[a];this.__sendRequest(b("MercuryServerURIs").MOVE_THREAD,d)}.bind(this))};v.prototype.changeMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:a,mute_settings:c,payload_source:j})}.bind(this))};v.prototype.changeMentionsMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,mentions_mute_mode:c,payload_source:j})}.bind(this))};v.prototype.changeReactionsMutingOnThread=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,reactions_mute_mode:c,payload_source:j})}.bind(this))};v.prototype.markThreadSpam=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").MARK_SPAM,{id:a,source:c})}.bind(this))};v.prototype.unmarkThreadSpam=function(a,c){b("MercuryAssert").isThreadID(a),this.__threadIDMap.getServerIDFromClientID(a,function(a){this.__sendRequest(b("MercuryServerURIs").UNMARK_SPAM,{id:a,source:c})}.bind(this))};v.prototype.deleteThread=function(a,b){this.deleteThreads([a],b)};v.prototype.deleteThreads=function(a,c){b("promiseDone")(b("Promise").all(a.map(function(a){b("MercuryAssert").isThreadID(a);return new(b("Promise"))(function(b){return this.__threadIDMap.getServerIDFromClientID(a,b)}.bind(this))}.bind(this))).then(function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_THREAD,{ids:a,source:c})}.bind(this)))};v.prototype.deleteMessages=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(c||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_MESSAGES,{message_ids:a})}.bind(this))};v.prototype.sendDeliveryReceipts=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(a||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:a,thread_ids:c})}.bind(this))};v.prototype.sendNewMessage=function(a,c){c===void 0&&(c=j);a.offline_threading_id||b("BanzaiODS").bumpEntityKey("chat.web","missing_otid_on_send");if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var d=b("MercuryIDs").tokenize(a.thread_id),e=d.type,f=babelHelpers["extends"]({},a);f.thread_id=null;e=="user"?(f.other_user_fbid=d.value,this.$14(f,c)):e=="thread"?(f.thread_fbid=d.value,this.$14(f,c)):e=="root"&&d.value==f.offline_threading_id?(f.client_thread_id=a.thread_id,this.$14(f,c)):(b("MercuryIDs").isLocalThread(a.thread_id)||h(0,5587,a.thread_id),this.__threadIDMap.getServerIDFromClientID(a.thread_id,function(a){f.thread_fbid=a,this.$14(f,c)}.bind(this)));b("ChatReliabilityInstrumentation").logMESSAGE_SEND_START(b("FBJSON").stringify({otid:f.offline_threading_id,message_id:f.message_id,other_user_fbid:f.other_user_fbid,viewer_page_fbid:f.creator_info?f.creator_info.pageID:null}))};v.prototype.$14=function(a,c){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this.$4[a.message_id]=Date.now(),b("MercuryServerSendMessageQueueRouter").getForFBID(this.$1).enqueue(a.other_user_fbid||a.thread_fbid||a.client_thread_id,this.$7,c,a)};v.prototype.__getSendMessageQueueOptions=function(){return this.$7};v.prototype.markSeen=function(){var a=this.$2;this.__sendRequest(b("MercuryServerURIs").MARK_SEEN,{seen_timestamp:a})};v.prototype.$15=function(a,c,d,e){__p&&__p();a=a.getData();a=a.message_batch||[a];i.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:d,request_error_status:c,error_data:e,message_list:a}));d=a.map(function(a){a={action_type:b("MercuryActionType").SEND_MESSAGE,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,client_message_id:a.message_id,message_id:a.message_id,client_thread_id:a.client_thread_id,status:c,error_data:e};return a});d.forEach(function(a){a.action_type===b("MercuryActionType").SEND_MESSAGE&&a.status===b("MercuryActionStatus").ERROR&&this.__logMercurySendError(a)},this);a={actions:d,payload_source:b("MercuryPayloadSource").CLIENT_HANDLE_ERROR};this.$6.handleUpdate(a)};v.prototype.handleSendMessageError=function(a){var c=a.getPayload(),d=null,e=null;c&&c.error_payload?(d=b("MercuryActionStatus").UNCONFIRMED,e="send_error"):(d=b("MercuryActionStatus").ERROR,e="request_error"+m(a));c=a.error;c===1404102&&b("AsyncResponse").verboseErrorHandler(a);c=/<.*>/.test(a.getErrorDescription())?a.getErrorSummary():a.getErrorDescription();this.$15(a.getRequest(),d,e,{type:b("MercuryErrorType").SERVER,code:a.getError(),description:c,is_transient:a.isTransient()})};v.prototype.handleSendMessageTransportError=function(a){this.$15(a.getRequest(),b("MercuryActionStatus").ERROR,"transport_error"+m(a),{type:b("MercuryErrorType").TRANSPORT,code:a.getError(),is_transient:!0})};v.prototype.handleSendMessageTimeout=function(a){this.$15(a,b("MercuryActionStatus").ERROR,"transport_timeout",{type:b("MercuryErrorType").TIMEOUT,is_transient:!0})};v.prototype.getLastActionTimestamp=function(){return this.$2};v.prototype.__logMercurySendError=function(a){b("MercurySendErrorLogger").log(a)};v.prototype.updateLastActionTimestamp=function(a){var b=Date.now()-1e3*60*60*24;a&&a>b&&(this.$2=Math.max(this.$2,a))};v.prototype.markThreadFetched=function(a){delete this.$3[a]};v.prototype.$13=function(a){return{action_type:b("MercuryActionType").LOG_MESSAGE,thread_id:a,message_id:a,timestamp:Date.now(),is_unread:!1,source:b("MercurySourceType").UNKNOWN,log_message_body:"",log_message_type:b("MercuryLogMessageType").SERVER_ERROR,log_message_data:{}}};v.prototype.__getForAsyncRequest=function(a){a=a.getData();a=a.request_user_id?a.request_user_id:b("CurrentUser").getID();return v.getForFBID(a)};v.prototype.__handleUpdate=function(a,b){this.__getForAsyncRequest(b).$6.handleUpdate(a)};v.prototype.$16=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a)};v.prototype.$17=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a,!0)};v.prototype.$9=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageError(a)};v.prototype.$10=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageTransportError(a)};v.prototype.$11=function(a){var b=this.__getForAsyncRequest(a);b.handleSendMessageTimeout(a)};v.prototype.$12=function(){__p&&__p();var a,c=null;b("MercuryServerRequestsConfig").msgrRegion&&(c={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});a=(a={},a[b("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:c,batch_function:n,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this),error_handler:function(a){return this.$16(a.getRequest())}.bind(this),timeout_handler:function(a){return this.$17(a)}.bind(this),timeout:k},a[b("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){this.__handleUpdate(a,b);b=(a.threads||[]).map(function(a){return a&&a.thread_id});i.log("response_change_read_status",JSON.stringify({threads:b}))}.bind(this)},a[b("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:q,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:c,batch_function:p,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:c,batch_function:o,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_PINNED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:s,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:u,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:c,batch_function:t,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a[b("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)},a);var d=b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};d=b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};d=b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();a[d]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:c,handler:function(a,b){return this.__handleUpdate(a,b)}.bind(this)};b("MercuryServerDispatcher").registerEndpoints(a)};v.prototype.__sendRequest=function(a,c,d){if(this.$8)switch(a){case b("MercuryServerURIs").THREADLIST_INFO:case b("MercuryServerURIs").THREAD_INFO:c.cachius_min_seq_id=this.$8.getLastSeqID();break;default:break}b("MercuryServerDispatcher").trySend(a,c,d,this.$1)};v.prototype.__getFBID=function(){return this.$1};var w=new(b("MercurySingletonProvider"))(v);e.exports=v}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=new(b("KeyedCallbackManager"))()}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.setServerIDToClientID=function(a,b){var c=this.getClientIDFromServerIDNow(a);if(c){c!==b;return}this.forceSetServerIDToClientID(a,b)};a.prototype.forceSetServerIDToClientID=function(a,b){this.$2.setResource(a,b),this.$3.setResource(b,a)};a.prototype.setDeprecatedServerIDToClientID=function(a,b){a&&this.$2.setResource(a,b)};a.prototype.getClientIDFromServerIDNow=function(a){return this.$2.getResource(a)};a.prototype.getClientIDFromServerID=function(a,b){this.$2.executeOrEnqueue(a,b),d(["MercuryServerRequests"],function(b){b.getForFBID(this.$1).ensureThreadIsFetched(a)}.bind(this))};a.prototype.getServerIDFromClientIDNow=function(a){return this.$3.getResource(a)};a.prototype.getServerIDFromClientID=function(a,c){b("MercuryAssert").isThreadID(a);var e=this.$3.executeOrEnqueue(a,c);d(["MercuryServerRequests"],function(c){var d=this.$3.getUnavailableResources(e),f=b("MercuryIDs").tokenize(a);d.length&&f.type!="root"&&c.getForFBID(this.$1).fetchThreadData(d)}.bind(this))};a.prototype.hasClientIDForServerID=function(a){return!!this.getClientIDFromServerIDNow(a)};a.prototype.convertThreadIDIfAvailable=function(a){var b=this.getClientIDFromServerIDNow(a);return b||a};a.prototype.canLinkExternally=function(a){b("MercuryAssert").isThreadID(a);var c=b("MercuryIDs").tokenize(a);return c.type=="user"||!!this.getServerIDFromClientIDNow(a)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){return Array.from(a).slice(0,6).join("")}a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>9&&(b.snippet=g(a.snippet)+"...");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>9&&(b.body=g(a.body)+"...");return b}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function(a,b,c,d,e,f){var g=9999;a={create:function(a){a=new(b("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[a],client:this.client});var c=new(b("AsyncResponse"))(a,{});Object.assign(c,{error:g,silentError:!1,transientError:!0,request:a});return c}};e.exports=a}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var f=c.story_attachment;f={legacy_attachment_id:c.legacy_attachment_id,story_attachment:f==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(f)}}else f=null;var g=c.__typename==="Sticker"?c:null,h=c.__typename,i;switch(h){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":i=[c];break;default:i=null}h=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:i});c=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:f,blob_attachments:h,sticker:g},d,e);if(c.length!==0)return b("bs_caml_array").caml_array_get(c,0);else return{}}}function a(a,c,d,e){return b("bs_array").map(function(b){return g(a,b,d,e)},c)}f._transform=g;f.transform=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["fbt","BanzaiODS","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryIDs","MercuryLoggingHelper","MercuryServerDispatcher","MercuryServerRequestsConfig","MercuryServerSendMessageQueueSimulatedError","MercurySyncDeltaHandler","MessengerAttachmentTransformerForSend.bs","MessengerObjectAssociationType","MessengerState.bs","Run","XMessagingSendController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_server_send_message_queue");function a(a,c,d,e){__p&&__p();this.pending_message=null;this.queue=[];this.$6=function(){return this.queue.length||this.pending_message?g._("Todav\u00eda no has enviado el mensaje. \u00bfQuieres salir sin enviarlo?"):void 0}.bind(this);this.sender_id=a;this.queue_id=c;this.$2=d.success_handler;this.$1=d.error_handler;this.$4=d.transport_error_handler;this.$3=d.timeout_handler;this.$5=b("MercurySyncDeltaHandler").getForFBID(this.sender_id);this.client=e;b("Run").onBeforeUnload(this.$6,!1);a=null;b("MercuryServerRequestsConfig").msgrRegion&&(a={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=this.__getSendURI();c=(e={},e[c]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:a,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:d.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:d.connection_retries},e);b("MercuryServerDispatcher").registerEndpoints(c)}a.prototype.__getSendURI=function(){return b("XMessagingSendController").getURIBuilder().getURI().toString()};a.prototype.__preparePayload=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.replied_to_message)!=null?(c=c.message)!=null?c.message_id:c:c:c;var d=null,e=a.client_thread_id;if(b("MercuryIDs").isLocalThread(e)){e=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),e);if(e&&e.message_count===1&&e.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT){d=(e=e)!=null?(e=e.associated_object)!=null?e.id:e:e}}e=c?b("MessengerState.bs").getServerMessageID(b("CurrentUser").getID(),c):null;return{client:this.client,action_type:a.action_type,app_id:a.app_id,audio_ids:a.audio_ids,body:a.body,client_thread_id:a.client_thread_id,ephemeral_ttl_mode:a.ephemeral_ttl_mode,file_ids:a.file_ids,gif_ids:a.gif_ids,has_attachment:a.has_attachment,image_ids:a.image_ids,location_attachment:a.location_attachment,lightweight_action_attachment:a.lightweight_action_attachment,log_message_data:a.log_message_data,log_message_type:a.log_message_type,message_id:a.message_id,message_source_data:a.message_source_data,montage_reply_data:a.montage_reply_data,offline_threading_id:a.offline_threading_id,other_user_fbid:a.other_user_fbid,photo_fbids:a.photo_fbids,shareable_attachment:a.shareable_attachment,signature_id:a.signatureID,source:a.source,specific_to_list:a.specific_to_list,sticker_id:a.sticker_id,tags:a.tags,thread_fbid:a.thread_fbid,timestamp:a.timestamp,ui_push_phase:a.ui_push_phase,video_ids:a.video_ids,platform_xmd:a.platform_xmd,profile_xmd:a.profile_xmd,replied_to_message_id:e,work_synced_group_id:d}};a.prototype.enqueue=function(a){this.queue.push(a),this.$7()};a.prototype.$7=function(){__p&&__p();if(this.pending_message||!this.queue.length){this.pending_message&&this.$8();return}this.pending_message=this.queue.shift();var a=this.__preparePayload(this.pending_message);for(var c in a)(a[c]===void 0||a[c]===null)&&delete a[c];if(!a.action_type){var d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");h.debug("missing_action_type",JSON.stringify(d))}if(!a.message_id){d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(d));h.debug("missing_message_id",JSON.stringify(d))}this.$9();b("MercuryServerDispatcher").trySend(this.__getSendURI(),a,null,this.sender_id,this.queue_id)};a.prototype.$10=function(){while(this.queue.length)this.$11(this.queue.shift())};a.prototype.$11=function(a){this.$1(b("MercuryServerSendMessageQueueSimulatedError").create(a)),h.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:b("MercuryLoggingHelper").obfuscateMessage(a)}))};a.prototype.handleSuccess=function(a,c){__p&&__p();var d=(a.actions||[]).map(function(a){__p&&__p();var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.length>0){var d=b("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,a.graphql_payload,a.message_id,a.for_page);c=Object.assign(c,{attachments:d})}d=(d=a)!=null?(d=d.log_message_data)!=null?d.graphql_image:d:d;if(d){d=b("MessengerAttachmentTransformerForSend.bs").transform(this.sender_id,[d],a.message_id,a.for_page);c=Object.assign(c,{log_message_data:{image:d[0]}})}return c}.bind(this));a.actions=d;this.resumeAfterSuccess(a,c)};a.prototype.resumeAfterSuccess=function(a,b){this.$2(a,b),this.$12(),this.pending_message=null,this.$7()};a.prototype.handleError=function(a){this.$12(),this.$1(a),this.$10(),this.pending_message=null};a.prototype.handleTransportError=function(a){this.$12(),this.$4(a),this.$10(),this.pending_message=null};a.prototype.handleTimeout=function(a){this.$12(),this.$3(a),this.$10(),this.pending_message=null};a.prototype.$9=function(){this.$5.pause()};a.prototype.$12=function(){this.$5.resume()};a.prototype.$8=function(){h.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:b("MercuryLoggingHelper").obfuscateMessage(this.pending_message),queue:this.queue.map(function(a){return b("MercuryLoggingHelper").obfuscateMessage(a)})}));var a="send_queue.delayed.queue_length."+this.queue.length.toString();b("BanzaiODS").bumpEntityKey("chat.web",a)};e.exports=a}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("mercury_server_send_message_queue_router"),h="chat.web.send_queue_router";b("BanzaiODS").setEntitySample(h,.1);function a(a){"use strict";this.queues=new Map(),this.fbid=a}a.prototype.enqueue=function(a,c,d,e){"use strict";var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f),g.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:a})),b("BanzaiODS").bumpEntityKey(h,"new_queue"));f.enqueue(e)};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySyncDataFetcherImpl",["invariant","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryConfig","MercuryPayloadSource","MercuryThreadlistConstants","MessagingConfig","QE2Logger","UserActivity","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=null,k={limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,filter:null,includeDeliveryReceipts:!1,includeSeqID:!0},l={};function a(a){return new(b("Promise"))(function(b,c){m(a,b,c,0)})}function m(a,c,d,e){__p&&__p();if(!b("CurrentUser").isLoggedInNow()||e>b("MessagingConfig").syncFetchRetries){b("clearTimeout")(l[a]);d();return}var f=e===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,e);b("UserActivity").isOnTab()||(b("QE2Logger").logExposureForUser("mercury_dff_fetch_delay",a),f+=b("MercuryConfig").DFFD*Math.random());b("clearTimeout")(l[a]);l[a]=b("setTimeoutAcrossTransitions")(function(){__p&&__p();var f=!1,n=function(h){__p&&__p();if(f)return;if(h.errors&&h.errors.length>0){var k=h.errors[0].message;if(k){var l=function(){j&&i||g(0,3650),new j().setErrorMessage(k).setEvent(i.DFF_FAILURE).setQueryParams(a).log()};j&&i?l():b("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(a,b){j=a,i=b,l()},"MercurySyncDataFetcherImpl")}}f=!0;m(a,c,d,e+1)},o=function(){if(!b("CurrentUser").isLoggedInNow())return;h||g(0,3651);h.fetchAll(a,[k],!b("FBIDCheck").isUser_deprecated(a),"dff").then(function(d){f=!0,c(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},d,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE}))),b("clearTimeout")(l[a])},n)};h?o():b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(a){h=a,o()},"MercurySyncDataFetcherImpl")},f)}function c(a,c,d){return new(b("Promise"))(function(b,e){n(a,c,d,b,e,0)})}function n(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;n(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(f){return f.fetch(a,{id:c,limit:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},i)},"MercurySyncDataFetcherImpl")},h)}function d(a,c,d){return new(b("Promise"))(function(b,e){o(a,c,d,b,e,0)})}function o(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;o(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(f){return f.fetch(a,{thread_id:c,message_id:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a)))},i)},"MercurySyncDataFetcherImpl")},h)}e.exports={fetchThreadlistFromGraphQL:a,fetchThreadFromGraphQL:c,fetchMessageFromGraphQL:d}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MercurySyncDataFetcherImpl","MessagingConfig","WebGraphQLConfig","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_sync_data_fetcher");function a(){var a=0;for(var c=0;c<b("MessagingConfig").syncFetchRetries;c++){var d=c===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,c);a+=d+b("MessagingConfig").syncFetchRequestTimeoutMs}return a}var h=a();function c(a){var c=null;return new(b("Promise"))(function(d,e){var f=function(a){g.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:h})),b("clearTimeout")(c),e(a)};c=b("setTimeoutAcrossTransitions")(f,Math.max(h,b("WebGraphQLConfig").timeout*b("MessagingConfig").syncFetchRetries));b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(a),function(a){b("clearTimeout")(c),d(a)},f)})}function d(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}function f(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_message_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}e.exports={fetchThreadlistFromGraphQL:c,fetchThreadFromGraphQL:d,fetchMessageFromGraphQL:f,getMaxTimeoutMs:a}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercurySingletonProvider","MercurySyncDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a,this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1)}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.fetchInvalidateGlobalStateForGraphQL=function(){return this.$1&&this.$1!=="0"&&b("CurrentUser").isLoggedIn()?b("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$1):new(b("Promise"))(function(a,b){return b(!0)})};a.prototype.fetchInvalidateThreadState=function(a,c){var d=11,e=3;a=a||c;c=this.__threadIDMap.getClientIDFromServerIDNow(a);if(!c)return b("Promise").resolve({getPayload:function(){return{}}});e=e+b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,c).length;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$1,a,Math.max(e,d))};a.prototype.fetchInvalidateMessage=function(a,c,d){a=a||c;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$1,a,d)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncDeltaTypes",[],(function(a,b,c,d,e,f){"use strict";a={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",RTCEventLog:"RTCEventLog",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};e.exports=a}),null);
__d("MercurySyncFakeDFFSender",["Arbiter","ChannelConstants","LogHistory","MercurySingletonProvider","MercurySyncDeltaTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),h=b("LogHistory").getInstance("dff_sender");a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){this.$1=a}a.prototype.sendGlobalDFF=function(){h.debug("sendGlobalDFF",JSON.stringify({fbid:this.$1})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch},queue:this.$1}})};a.prototype.sendThreadDFF=function(a,c){h.debug("sendThreadDFF",JSON.stringify({fbid:this.$1,otherUserFBID:a,threadFBID:c})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c}},queue:this.$1}})};a.prototype.sendMessageDFF=function(a,c,d){h.debug("sendMessageDFF",JSON.stringify({fbid:this.$1,otherUserFBID:a,threadFBID:c,messageID:d})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c},messageId:d},queue:this.$1}})};var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncChannelMonitor",["Arbiter","ChannelConstants","CurrentUser","MercurySingletonProvider","MercurySyncFakeDFFSender","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.handleAwfulChannelEvent=function(){if(!b("CurrentUser").isLoggedInNow()){this.killSubscriptions();return}b("MercurySyncFakeDFFSender").getForFBID(this.$1).sendGlobalDFF()}.bind(this),this.$1=a,this.$2=!1}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};a.prototype.setupSubscriptions=function(){if(b("MessengerMQTTGating").isEnabled())return;this.$2||(this.$4=b("Arbiter").subscribe(b("ChannelConstants").JUMPSTART,this.handleAwfulChannelEvent),this.$3=b("Arbiter").subscribe(b("ChannelConstants").THROTTLED,this.handleAwfulChannelEvent),this.$2=!0)};a.prototype.killSubscriptions=function(){this.$2&&(b("Arbiter").unsubscribe(this.$4),b("Arbiter").unsubscribe(this.$3),this.$2=!1)};var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDifference=function(a){this.$1.difference=a;return this};a.prototype.setSeqID=function(a){this.$1.seq_id=a;return this};a.prototype.setTopicType=function(a){this.$1.topic_type=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={difference:!0,seq_id:!0,topic_type:!0,vc:!0};e.exports=a}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","Bootloader","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryDelayedDispatcher","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncChannelMonitor","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncEventsProxy","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercurySyncTopicType","gkx","onAfterLoadSafe","promiseDone","requireCond","cr:712204"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("cr:712204").v,i=b("LogHistory").getInstance("mercury_sync_delta_handler");a.getForFBID=function(a){return j.getForFBID(a)};a.get=function(){return j.get()};function a(a){__p&&__p();this.$1=a,this.$2=h.getForFBID?h.getForFBID(this.$1):null,this.$3=b("MercurySyncForcedFetchHandler").getForFBID(this.$1),this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.__delayedDispatcher=b("MercuryDelayedDispatcher").getForFBID(this.$1),this.$4=b("MercurySyncDeltaHolder").getForFBID(this.$1),this.$5=0,this.$11=b("MercurySyncChannelMonitor").getForFBID(this.$1),this.$6=[],this.$14=b("MercurySyncEventsProxy").getForFBID(this.$1),i.debug("constructor",JSON.stringify({fbid:this.$1})),b("Arbiter").subscribe(b("MercurySyncEventsProxy").Events.INIT,function(a,c){__p&&__p();i.debug("initSeqID",JSON.stringify(c));a=c&&c.seqID;c=c&&c.fbid;if(!c)return;if(c!==this.$1)return;a?this.$4.updateLastSeqID(a):this.$4.updateLastSeqID(0);this.$16();this.$15=b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){this.$17(!0),this.$8&&b("Arbiter").unsubscribe(this.$8),this.$18(),this.$16()}.bind(this));b("gkx")("678667")&&b("onAfterLoadSafe")(function(){b("Bootloader").loadModules(["MessengerSyncSeqIDSanityCheck"],function(a){a.getForFBID(this.$1).init()}.bind(this),"MercurySyncDeltaHandler")}.bind(this))}.bind(this))}a.prototype.$18=function(){this.$8=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW),function(a,b){this.$13||this.$16()}.bind(this))};a.prototype.$16=function(){__p&&__p();i.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$1})),this.$7=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.DELTA),function(a,c){__p&&__p();a=c&&c.obj&&c.obj.queue;if(a&&a.toString()!==this.$1)return;a=c&&c.obj&&c.obj.delta;c=c&&c.obj&&c.obj.iseq;if(!a||!c)return;this.$19(c,b("MercurySyncTopicType").DELTA);this.$20(c,a);this.$4.push(c,a);this.$21()}.bind(this)),this.$12=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW_REJECT),function(a,b){a=b&&b.obj&&b.obj.queue;if(a&&a.toString()!==this.$1)return;this.$13&&this.$17()}.bind(this)),this.$9=b("Arbiter").subscribe(this.$14.getArbiterType(b("MercurySyncEventsProxy").Events.FAKE_DFF),function(a,b){__p&&__p();a=b&&b.obj&&b.obj.queue;if(a&&a.toString()!==this.$1)return;a=b&&b.obj&&b.obj.delta;if(!a)return;if(this.$22(a))if(this.$6.some(function(a){return this.$22(a)}.bind(this)))return;else this.$6.push(a);else this.$6.push(a);this.$21()}.bind(this)),this.$11.setupSubscriptions(),this.$13=!0};a.prototype.$22=function(a){return a["class"]===b("MercurySyncDeltaTypes").ForcedFetch&&!a.threadKey&&!a.messageId};a.prototype.$21=function(){__p&&__p();if(this.$5>0)return;if(this.$6.length>0){var a=this.$6.shift();this.$23(this.$4.getLastSeqID(),a);this.$21()}a=this.$4.peek();if(!a)return;a=a-this.$4.getLastSeqID();if(a===1){var b=this.$4.pop();if(!b)return;var c=b.seqID;b=b.delta;this.$23(c,b);this.$21()}else a>1?this.$24():(this.$4.pop(),this.$21())};a.prototype.$23=function(a,c){this.$4.updateLastSeqID(a),c["class"]===b("MercurySyncDeltaTypes").ForcedFetch?(i.debug("DFF",JSON.stringify(c)),c.threadKey!==void 0&&c.messageId===void 0?this.$25(a,c):c.threadKey!==void 0&&c.messageId!==void 0?this.$26(a,c):(b("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(c)),this.$27(a))):this.$2?this.$2.process(c):h.transform(this.$1,c)};a.prototype.$24=function(){var a=JSON.stringify({$28:this.$4.getLastSeqID(),nextSeqID:this.$4.peek()});i.warn("hole",a);var c=this.$4.peek();!c&&g(0,5132);c=c-1;b("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(a);this.$27(c)};a.prototype.$29=function(a,c,d,e){this.$5&&g(0,5134),this.$5++,i.debug("_scheduleDataFetch:start",JSON.stringify({seqID:a})),b("promiseDone")(c(),function(b){i.debug("_scheduleDataFetch:success",JSON.stringify({seqID:a})),this.$5--,d(a,b),this.$21()}.bind(this),function(b){i.error("_scheduleDataFetch:failure",JSON.stringify({seqID:a})),this.$5--,e(a,b),this.$21()}.bind(this))};a.prototype.$27=function(a){if(!b("CurrentUser").isLoggedInNow())return;this.$29(void 0,function(){return this.$3.processGlobalDFFForGraphQL()}.bind(this),function(a,c){a=c.getPayload();this.__payloadPreprocessor.handleUpdate(a);a.sequence_id&&(i.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:a.sequence_id})),b("gkx")("678668")?this.$4.updateLastSeqIDAndClearHistory(a.sequence_id):this.$4.updateLastSeqID(a.sequence_id));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER)}.bind(this),function(c,d){i.error("_initiateGlobalDFF:failure",""),d?this.$13&&this.$17():(b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY),i.debug("_initiateGlobalDFF:retry",""),this.$27(a))}.bind(this))};a.prototype.$25=function(a,b){this.$29(a,function(){return this.$3.processThreadDFF(a,b.threadKey,b.isLazy)}.bind(this),function(a,b){this.__payloadPreprocessor.handleUpdate(b.getPayload()),this.$4.updateLastSeqID(a)}.bind(this),function(){i.error("_initiateThreadDFF:failure",JSON.stringify(b));var c=babelHelpers["extends"]({},b);delete c.threadKey;this.$4.updateLastSeqID(a-1);this.$4.push(a,c)}.bind(this))};a.prototype.$26=function(a,c){__p&&__p();this.$29(a,function(){return this.$3.processMessageDFF(a,c.threadKey,c.messageId,c.isLazy)}.bind(this),function(a,c){c=c.getPayload();var d=c.other_user_fbid?c.other_user_fbid:c.thread_fbid;c=[babelHelpers["extends"]({},c)];var e=b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:c,payload_source:e},d);this.$4.updateLastSeqID(a)}.bind(this),function(){i.error("_initiateMessageDFF:failure",JSON.stringify(c));var b=babelHelpers["extends"]({},c);delete b.messageId;this.$4.updateLastSeqID(a-1);this.$4.push(a,b)}.bind(this))};a.prototype.$19=function(a,c){var d=a-this.$4.getLastSeqID();if(d!==1&&d!==0){if(!b("CurrentUser").isEmployee())return;new(b("MercurySyncHolesTypedLogger"))().setSeqID(a).setDifference(d).setTopicType(c).log()}};a.prototype.$20=function(a,c){switch(c["class"]){case b("MercurySyncDeltaTypes").NewMessage:i.debug("message_delta",JSON.stringify({seqID:a,threadKey:c.messageMetadata.threadKey,messageId:c.messageMetadata.messageId}));break;case b("MercurySyncDeltaTypes").ReadReceipt:i.debug("read_receipt_delta",JSON.stringify({seqID:a,threadKey:c.threadKey,actionTimestampMs:c.actionTimestampMs,watermarkTimestampMs:c.watermarkTimestampMs}));break;case b("MercurySyncDeltaTypes").DeliveryReceipt:i.debug("delivery_receipt_delta",JSON.stringify({seqID:a,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,messageIds:c.messageIds}));break}};a.prototype.pause=function(){this.$5++};a.prototype.resume=function(){this.$5--,this.$21()};a.prototype.$17=function(a){a===void 0&&(a=!1),this.$13=!1,b("Arbiter").unsubscribe(this.$7),b("Arbiter").unsubscribe(this.$9),b("Arbiter").unsubscribe(this.$12),this.$11.killSubscriptions(),a||b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return{getPayload:function(){return{sequence_id:a}}}}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercurySyncDFFDataFetcher").getForFBID(this.$1)}a.prototype.processMessageDFF=function(a,c,d,e){__p&&__p();if(e){e=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();e=this.$2.getClientIDFromServerIDNow(e);if(e===void 0)return b("Promise").resolve(g(a));e=b("MessengerState.bs").getMessagesFromIDs(this.$1,[d]);if(e.length===0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateMessage(c.otherUserFbId,c.threadFbId,d)};a.prototype.processThreadDFF=function(a,c,d){if(d){d=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();d=this.$2.getClientIDFromServerIDNow(d);if(d===void 0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateThreadState(c.otherUserFbId,c.threadFbId)};a.prototype.processGlobalDFFForGraphQL=function(){return this.$3.fetchInvalidateGlobalStateForGraphQL()};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","Link.react","MercuryErrorInfo","MercuryMessageActions","React","ServerHTML.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.messageResend=function(a){a.stopPropagation();a=this.props.message;a=a.error_data;b("MercuryErrorInfo").isTransient(a)&&b("MercuryMessageActions").getForFBID(this.props.authorFBID).resend(this.props.message)}.bind(this),c}a.prototype.render=function(){var a=this.props.message,c=a.error_data;return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:b("joinClasses")(this.props.className,this.$1(a)),tabIndex:b("MercuryErrorInfo").isTransient(c)?0:null,onClick:this.messageResend}),b("React").createElement("i",{className:"_2fs1"}),b("React").createElement(b("ServerHTML.react"),{className:"_61ag",blob:this.$2(a)}))};a.prototype.$1=function(a){if(b("MercuryErrorInfo").hasErrorStatus(a))return"_2fs2 _2fs3"+(b("MercuryErrorInfo").isTransient(a.error_data)?" _2fs4":"")+(b("MercuryErrorInfo").isPermanent(a.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};a.prototype.$2=function(a){var c="",d=a.error_data;if(b("MercuryErrorInfo").hasErrorStatus(a)){a=b("MercuryErrorInfo").getMessage(d);a&&(c=a)}return c};a.propTypes={authorFBID:c.string,message:c.object.isRequired};a.defaultProps={authorFBID:b("CurrentUser").getID()};e.exports=a}),null);
__d("EventPlanExperiment",["EventRemindersGating","QE2Logger"],(function(a,b,c,d,e,f){"use strict";var g="event_plan_entry_point_nux";a={shouldShowEntryPointNuxWithExposure:function(){b("QE2Logger").logExposureForUser(g);return b("EventRemindersGating").shouldShowEntryPointNux},shouldShowReminderExtension:function(){b("QE2Logger").logExposureForUser("omni_m_experiments_reminders");return b("EventRemindersGating").omniMAlwaysShowReminderExtension}};e.exports=a}),null);
__d("FBRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO",FHD_IDEAL_LQ_REQUIRED_VIDEO:"FHD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,PayloadType:a,RTCConstraints:j,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,event,d){event===void 0&&(event="Console");d===void 0&&(d="DEBUG");d=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(event||"Console",a+d);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("P2PReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppBuildNumber=function(a){this.$1.app_build_number=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExtra=function(a){this.$1.extra=a;return this};a.prototype.setMsgID=function(a){this.$1.msg_id=a;return this};a.prototype.setMsgType=function(a){this.$1.msg_type=a;return this};a.prototype.setProcessingTimeSinceRecvOnWww=function(a){this.$1.processing_time_since_recv_on_www=a;return this};a.prototype.setRawTime=function(a){this.$1.raw_time=a;return this};a.prototype.setReceiverID=function(a){this.$1.receiver_id=a;return this};a.prototype.setResultCode=function(a){this.$1.result_code=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setServiceName=function(a){this.$1.service_name=a;return this};a.prototype.setUserCountry=function(a){this.$1.user_country=a;return this};c={app_build_number:!0,app_id:!0,app_version:!0,call_id:!0,device_id:!0,event_name:!0,extra:!0,msg_id:!0,msg_type:!0,processing_time_since_recv_on_www:!0,raw_time:!0,receiver_id:!0,result_code:!0,sender_id:!0,service_name:!0,user_country:!0};e.exports=a}),null);
__d("RTWebLoggingSharedInstance",["CurrentUser","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g==null&&(g=new h());return g};function h(){this.$1=b("UserAgentData").browserName+b("CurrentUser").getID().substr(-4)+"_"+Date.now().toString().substr(-5)}h.prototype.getDeviceID=function(){return this.$1};e.exports=h}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","RTWebLoggingSharedInstance","UserAgentData","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};r.multiwayMessageTypeName=function(a){"use strict";__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$3=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,msg_source:"web"}),this.$1=b("RTWebLoggingSharedInstance").getInstance().getDeviceID()}r.prototype.logToConsole=function(a){"use strict";this.$4(null,null,"Console",a)};r.prototype.$5=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};r.prototype.logMultiwayMessageReceived=function(a,b){"use strict";var c=r.multiwayMessageTypeName(a.type());this.$4(a.conferenceName(),b,"Received MW",c+", "+a.transactionId(),c==="EXPERIMENT"?"DEBUG":"INFO")};r.prototype.logReceivedMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$5(f).setEventName("CLIENT_RECEIVED_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).setExtra(this.$3).log();this.$6(m,e);this.$4(a,b,"Received P2P",c.type+", "+c.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$5(c.type).setEventName("CLIENT_SENDING_MESSAGE").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$6(p,e);this.$4(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$6(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$5(c).setEventName("CLIENT_TRANSPORT_ERROR").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$6(n,f);this.$4(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$6(h,f);this.$4(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,event){"use strict";var c={call_id:b,content:event,peer_id:a};this.$6(k,c);this.$4(a,b,"Event",JSON.stringify(event))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(l,d);this.$4(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$6(j,d);this.$4(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=babelHelpers["extends"]({},c,a.getExtraInfo());this.$6(i,d);this.$4(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.$6=function(a,c){"use strict";c.page_id=b("pageID"),b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,c),b("MarauderLogger").log(a,b("FBRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$4=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("FBRTCConsoleLogger").getInstance().log(e,a,c,d,f)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({BATTERY_START:"battery_start",BATTERY_END:"battery_end",CALL_TYPE:"call_type",CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",EFFECT_COUNT:"rtc_effect_count",EFFECT_TOTAL_DURATION:"rtc_effect_total_duration",VIDEO_DURATION_WITH_FILTER:"rtc_video_duration_with_filter_enabled",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=r}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==void 0&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,b,c){c!==null&&c!==void 0&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};h.prototype.$4=function(a,c){__p&&__p();if(a!==null&&a!==void 0){a.current=c;a.updatedTime=b("performanceNow")();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==void 0&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","gkx","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},l=[b("FBRTCMediaMetricsConst").ACCELERATE_RATE,b("FBRTCMediaMetricsConst").DISCARD_RATE,b("FBRTCMediaMetricsConst").EXPAND_RATE,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE];m.nullSummary=function(){"use strict";return new m({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function m(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$2=a.isCaller,this.$1=a.version||m.CURRENT_SUMMARY_VERSION,this.$3=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=a.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$33=null,this.$34=null,this.$35=null,this.$16=0,this.$17=0,this.$32=!1,this.$9={},this.$10={},this.$11={},this.$12={},this.$36=null,this.$19=b("performanceNow")(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$42()),this.$43(),this.$44(),this.$45(),this.$23=b("FBRTCIceStatsParser").getInstance(),this.$41=new(b("FBRTCMediaMetricTracker"))(),this.$22=b("FBRTCLogger").getInstance()}m.prototype.toJsonString=function(){"use strict";this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$28,conferenceName:this.$25,joinWithSID:this.$26,activeConn:this.$24,escP2PCallID:this.$27,serverInfoData:this.$29,localVideoDuration:this.$30,remoteVideoDuration:this.$31,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$33,endCallSubreason:this.$34,isRemoteEnded:this.$35,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$32,openCount:this.$20,extraInfo:this.$21,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$36,mediaMetricStats:this.$41.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$46(),deviceCharged:this.$37,videoReceivedCodec:this.$38,videoSentCodec:this.$39,audioSentCodec:this.$40})};m.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version<m.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new m({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$1=a.version;c.$3=a.uploadLogLevel;c.$14=a.startTime;c.$4=a.trigger;c.$5=a.signalingTime;c.$33=a.endCallReason;c.$34=a.endCallSubreason;c.$35=a.isRemoteEnded;c.$16=a.lastUpdatedTime;c.$17=a.lastSerializedTime;c.$26=a.joinWithSID;a.callType&&(c.$28=a.callType);a.conferenceName&&(c.$25=a.conferenceName);a.escP2PCallID&&(c.$27=a.escP2PCallID);a.activeConn&&(c.$24=a.activeConn);a.serverInfoData&&(c.$29=a.serverInfoData);a.localVideoDuration&&(c.$30=a.localVideoDuration);a.remoteVideoDuration&&(c.$31=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$32=a.unsetOnRetrieve);a.openCount&&(c.$20=a.openCount);a.extraInfo&&(c.$21=a.extraInfo);a.gen0IceSentCount&&(c.$9=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$10=a.gen0IceReceivedCount);a.iceSentCount&&(c.$11=a.iceSentCount);a.iceReceivedCount&&(c.$12=a.iceReceivedCount);a.newSignalingTime&&(c.$6=a.newSignalingTime);a.accumulatedCallTime&&(c.$15=a.accumulatedCallTime);a.escStateTimes&&(c.$7=a.escStateTimes);a.applicationEventTime&&(c.$8=a.applicationEventTime);a.videoEscTimes&&(c.$13=a.videoEscTimes);a.mediaMetricStats&&(c.$41=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));a.connectionType&&(c.$36=a.connectionType);a.deviceCharged&&(c.$37=a.deviceCharged);a.videoReceivedCodec!==null&&(c.$38=a.videoReceivedCodec);a.videoSentCodec!==null&&(c.$39=a.videoSentCodec);a.audioSentCodec!==null&&(c.$40=a.audioSentCodec);return c};m.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new m({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$32&&(a.$33=null,a.$34=null,a.$35=null,delete a.$5[h.CALL_ENDED],delete a.$6[h.CALL_ENDED],a.$19=0,a.$32=null);return a};m.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};m.prototype.isNull=function(){"use strict";var a=m.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};m.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$18;if(d>g){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};m.prototype.getVersion=function(){"use strict";return this.$1};m.prototype.getLastUpdatedTime=function(){"use strict";return this.$16};m.prototype.setLastUpdatedTime=function(a){"use strict";this.$16=a};m.prototype.getExtraInfo=function(){"use strict";return this.$21};m.prototype.getCallTrigger=function(){"use strict";return this.$4};m.prototype.addExtraInfo=function(a,b){"use strict";this.$21[a]=b,this.$45()};m.prototype.isCaller=function(){"use strict";return this.$2};m.prototype.isNetworkReady=function(){"use strict";if(this.$5[h.NETWORK_READY])return!0;else return!1};m.prototype.isAnswerReceived=function(){"use strict";if(this.$5[h.RECV_ANSWER])return!0;else return!1};m.prototype.onCallStarted=function(a){"use strict";this.$4=a,this.$47(h.CALL_STARTED),this.$45()};m.prototype.setCallTrigger=function(a){"use strict";this.$4=a,this.$45()};m.prototype.onPopupOpened=function(){"use strict";this.$48(i.POPUP_OPENED),this.$20++,this.$45()};m.prototype.onPressedAnswer=function(){"use strict";this.$48(i.PRESSED_ANSWER),this.$45()};m.prototype.onMediaRequested=function(){"use strict";this.$48(i.MEDIA_REQUESTED),this.$45()};m.prototype.onMediaSucceeded=function(){"use strict";this.$48(i.MEDIA_SUCCEEDED),this.$45()};m.prototype.onFellbackToAudio=function(){"use strict";this.$48(i.FELLBACK_TO_AUDIO),this.$45()};m.prototype.setConnectionType=function(a){"use strict";this.$36=a,this.$45()};m.prototype.setUploadLogLevel=function(a){"use strict";this.$3=a,this.$45()};m.prototype.getCallType=function(){"use strict";return this.$28};m.prototype.setCallType=function(a){"use strict";this.$28=a,this.addExtraInfo(b("FBRTCLogger").Key.CALL_TYPE,a),this.$45()};m.prototype.setVideoDurations=function(a,b){"use strict";this.$30=a,this.$31=b,this.$45()};m.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};m.prototype.setConferenceName=function(a){"use strict";this.$25=a,this.$45()};m.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_DURATION_WITH_FILTER,Math.ceil(a).toString())};m.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_TOTAL_DURATION,Math.ceil(a).toString())};m.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.EFFECT_COUNT,a.toString())};m.prototype.setJoinWithSID=function(a){"use strict";this.$26=a,this.$45()};m.prototype.setServerInfoData=function(a){"use strict";this.$29=a,this.$45()};m.prototype.setActiveConnection=function(a){"use strict";this.$24=a,this.$45()};m.prototype.setEscalationP2PCallID=function(a){"use strict";this.$27=a,this.$45()};m.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};m.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$49(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$50(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$49(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$50(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$47(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$47(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$49(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$49(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$50(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$51(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$51(k.SENT_ESC_RESPONSE):this.$51(k.SENT_ESC_REQUEST);break;default:}this.$45()};m.prototype.$50=function(a,b,c){"use strict";var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$52(b,e),this.$52(c,e)};m.prototype.$52=function(a,b){"use strict";!a[b]?a[b]=1:a[b]+=1};m.prototype.$53=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};m.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$53(a);this.$49(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$50(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$53(a);this.$49(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$50(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.OK:this.$47(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$47(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$49(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$49(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$50(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$51(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$51(k.RECV_ESC_ACCEPT):this.$51(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$51(k.RECV_ESC_REQUEST):this.$51(k.RECV_ESC_TIMEOUT);default:}this.$45()};m.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$49(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$49(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};m.prototype.onNetworkReady=function(){"use strict";this.$47(h.NETWORK_READY),this.$45()};m.prototype.onCallConnected=function(){"use strict";this.$47(h.CALL_CONNECTED),this.$45()};m.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$32=c,this.$33=String(a),this.$34=d,this.$35=b,this.$47(h.CALL_ENDED),this.$45()};m.prototype.setOfferSentTime=function(){"use strict";this.$47(h.SENT_OFFER)};m.prototype.setOfferAckReceivedTime=function(){"use strict";this.$47(h.RECV_OFFER_ACK)};m.prototype.setAnswerSentTime=function(){"use strict";this.$47(h.SENT_ANSWER)};m.prototype.setAnswerReceivedTime=function(){"use strict";this.$47(h.RECV_ANSWER)};m.prototype.setJoinRequestSent=function(){"use strict";this.$47(h.SENT_JOIN_REQUEST),this.$45()};m.prototype.setJoinResponseReceived=function(){"use strict";this.$47(h.RECV_JOIN_RESPONSE),this.$45()};m.prototype.setJoinResponseProcessed=function(){"use strict";this.$47(h.PROC_JOIN_RESPONSE),this.$45()};m.prototype.setRingRequestReceived=function(){"use strict";this.$47(h.RECV_RING_REQUEST),this.$45()};m.prototype.setRingResponseSent=function(){"use strict";this.$47(h.SENT_RING_RESPONSE),this.$45()};m.prototype.setEscalationAvailable=function(){"use strict";this.$54(j.ESCALATION_IS_AVAILABLE)};m.prototype.setEscalationInitiated=function(){"use strict";this.$54(j.USER_INITIATED_REQUEST)};m.prototype.setReceivedEscalationRequest=function(){"use strict";this.$54(j.RECEIVED_INCOMING_REQUEST)};m.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$54(j.REJECTED_INVALID_P2P_STATE)};m.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$54(j.CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$54(j.CONNECTED_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$54(j.PEER_CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$54(j.PEER_CONNECTED_TO_MULTIWAY)};m.prototype.setReadyToEscalate=function(){"use strict";this.$54(j.READY_TO_ESCALATE)};m.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$54(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};m.prototype.setEscalationTimedOut=function(){"use strict";this.$54(j.TIMED_OUT)};m.prototype.setVidEscalationInitClick=function(){"use strict";this.$51(k.ESCALATION_INITIATION_BUTTON_CLICKED)};m.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$51(k.ESCALATION_APPROVED_BUTTON_CLICKED)};m.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$51(k.ESCALATION_DECLINED_BUTTON_CLICKED)};m.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$51(k.USERMEDIA_REQUEST)};m.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$51(k.USERMEDIA_SUCCESS)};m.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$51(k.USERMEDIA_FAILURE)};m.prototype.setVideoCapabilities=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_CAPABILITIES,a)};m.prototype.setMediaInputs=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.MEDIA_INPUTS,a)};m.prototype.getVideoReceivedCodec=function(){"use strict";return this.$38};m.prototype.setVideoReceivedCodec=function(a){"use strict";this.$38=a};m.prototype.getVideoSentCodec=function(){"use strict";return this.$39};m.prototype.setVideoSentCodec=function(a){"use strict";this.$39=a};m.prototype.getAudioSentCodec=function(){"use strict";return this.$40};m.prototype.setAudioSentCodec=function(a){"use strict";this.$40=a};m.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$55();a.time_series=null;return JSON.stringify(a)};m.prototype.$55=function(){"use strict";__p&&__p();var a={};a.ver=this.$1;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$28;a.active_conn=this.$24;a.app_event_times=this.$8;a.conf_name=this.$25;a.join_with_sid=this.$26;a.esc_p2p_call_id=this.$27;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$29;a.conn=this.$56();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$57();a.sender=this.$58();a.receiver=this.$59();a.end=this.$60();a.video=this.$61();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$62();a.device_charged=this.$37;return a};m.prototype.$62=function(){"use strict";return{NetworkReceive:{jb_nm:this.$63()}}};m.prototype.$63=function(){"use strict";var a={},b=this.$41.getAudioStreamReportKeys().pop();l.forEach(function(c){var d=this.$41.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));var c=this.$41.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};m.prototype.$56=function(){"use strict";var a={dtls:1},b=this.$58();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);return a};m.prototype.$57=function(){"use strict";var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$64();b>0&&(a.duration=b);return a};m.prototype.$64=function(a){"use strict";var b=this.$6[h.CALL_CONNECTED]||this.$6[h.NETWORK_READY];if(!b)return 0;a=this.$6[h.CALL_ENDED]||!(a==null?void 0:a.assumeOngoing)&&this.$15||this.$46();return Math.max(0,a-b)};m.prototype.$58=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(c!=null){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.ube_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(c){a.psent=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);this.$40!=null&&this.$40!==""&&(a.codec={www:this.$40});return a};m.prototype.$59=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){__p&&__p();var d=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC),e=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG),f=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_CNG);c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_NORMAL);if(f!=null&&c!=null&&d!=null&&e!=null){a.dec_cng=f.current;a.dec_normal=c.current;a.dec_plc=d.current;a.dec_plc_cng=e.current;a.neteq_calls=a.dec_cng+a.dec_normal+a.dec_plc+a.dec_plc_cng;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(c){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.dbe_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(c){a.precv=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$10&&(a.ice_g0=this.$10);this.$12&&(a.ice=this.$12);return a};m.prototype.$60=function(){"use strict";var a={};this.$33!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$33),this.$34!==null&&(a.end_call_subreason_string=this.$34),a.remote_ended=this.$35);this.$36&&(a.conn_type=this.$36);return a};m.prototype.$61=function(){"use strict";var a={ename:this.$39,eqps:this.$65(),frames:this.$66(),psent:null,plost:null};return{sender:this.$67(a),receiver:this.$68(),ld:this.$30,rd:this.$31,bwe:this.$69()}};m.prototype.$65=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").OUTBOUND_QP);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$66=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$69=function(){"use strict";__p&&__p();var a={avg_enc_bitrate:this.$70(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),e=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(d&&e&&c){a.avg_send_bw=d.mean;a.avg_trans_bitrate=e.mean;a.avg_retrans_bitrate=c.mean;return!0}return!1}.bind(this));return a};m.prototype.$70=function(){"use strict";__p&&__p();var a=this.$41.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$41.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};m.prototype.$67=function(a){"use strict";__p&&__p();var c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(d&&c){a.psent=d.current;a.plost=c.current;return!0}return!1}.bind(this));return a};m.prototype.$68=function(){"use strict";__p&&__p();var a={dec_bytes:null,dec_time:null,dname:this.$38,frd:null,precv:null,plost:null,qps:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(d&&c){a.precv=d.current;a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_DECODED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").INBOUND_QP);if(d&&c){a.frd=d.current;a.qps=c.current;return!0}return!1}.bind(this));return a};m.prototype.$71=function(){"use strict";return new Date().valueOf()-this.$14};m.prototype.$46=function(){"use strict";var a=b("performanceNow")()-this.$19;return Math.floor(this.$15+a)};m.prototype.$47=function(a){"use strict";if(this.$5[a])return;this.$5[a]=this.$71();this.$6[a]=this.$46()};m.prototype.$54=function(a){"use strict";if(this.$7[a])return;this.$7[a]=this.$71()};m.prototype.$48=function(event){"use strict";if(this.$8[event])return;this.$8[event]=this.$71()};m.prototype.$51=function(event){"use strict";if(this.$13[event])return;this.$13[event]=this.$71()};m.prototype.setDeviceCharged=function(a){"use strict";this.$37=a};m.prototype.$49=function(a,b,c){"use strict";a?this.$47(c):this.$47(b)};m.prototype.$45=function(){"use strict";this.$16=new Date().valueOf()};m.prototype.$42=function(){"use strict";var a=b("UserAgentData").platformName;window.navigator.userAgent.toLowerCase().includes("mobile")&&(a+=" Mobile");return{device:b("UserAgentData").deviceName,os:a,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth,user_agent:window.navigator.userAgent}};m.prototype.$43=function(){"use strict";window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType)};m.prototype.$44=function(){"use strict";navigator.hardwareConcurrency!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio)};m.prototype.getCallDuration=function(){"use strict";var a=b("gkx")("707989");return this.$64({assumeOngoing:a})};m.prototype.getConnectedStartTime=function(){"use strict";return this.$5[h.CALL_CONNECTED]?this.$5[h.CALL_CONNECTED]+this.$14:0};m.prototype.getCurrentTimeFromCallConnected=function(){"use strict";var a=this.$6[h.CALL_CONNECTED];return this.$46()-a};m.prototype.getMediaMetricTracker=function(){"use strict";return this.$41};m.CANONICAL_NULL_SUMMARY=Object.freeze(m.nullSummary());m.OLDEST_SUPPORTED_SUMMARY_VERSION=19;m.CURRENT_SUMMARY_VERSION=24;m.REPORT_KEY="reportID";e.exports=m}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$6(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.getCallSummaries=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===void 0||d===null)&&(d=k);var f=this.getCallSummaries(),g=this.getCallSummaries();f=a(f);if(f===null)return;var h=this.getCallSummaries();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;b("setTimeout")(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConsoleLogger"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=new Map();function a(){"use strict";this.$1=b("FBRTCConsoleLogger").getInstance()}a.prototype.enqueueOffer=function(a,b){"use strict";a=this.getStorage(a,j);this.$2(a,i,b)};a.prototype.getOffer=function(a){"use strict";a=this.getStorage(a,j);return this.$3(a,i)};a.prototype.removeOffer=function(a){"use strict";a=this.getStorage(a,j);a.remove(i)};a.prototype.enqueueMessage=function(a,b,c){"use strict";b=k+b.toString();var d=m.get(a)||new Map();d.set(b,c);m.set(a,d);this.$1.log("Queued "+b)};a.prototype.drainQueue=function(a,b){"use strict";__p&&__p();var c=m.get(a)||new Map();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];b(f)}m.set(a,new Map())};a.prototype.$2=function(a,b,c){"use strict";c={__t:Date.now(),__d:c};a.set(b,c)};a.prototype.$3=function(a,b){"use strict";var c=a.get(b);if(c&&this.$4(c))return c.__d;else c&&a.remove(b);return null};a.prototype.$5=function(a,b){"use strict";var c=this.$3(a,b);if(c!==null){a.remove(b);return c}return null};a.prototype.$4=function(a){"use strict";return Date.now()-a.__t<l};a.prototype.getStorage=function(a,c){"use strict";return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")};a.STORAGE_TYPE=g;a.PREFIX=h;a.OFFER_KEY=i;a.OFFER_SUFFIX=j;a.DATA_KEY_PREFIX=k;a.CACHE_LIFE=l;e.exports=a}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null});a={Types:g,hangUp:function(){b("FBRTCDispatcher").dispatch({type:g.HANG_UP})},toggleMuteAudio:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_FULL_SCREEN})},toggleSelfView:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SELF_VIEW})},showSettings:function(){b("FBRTCDispatcher").dispatch({type:g.SHOW_SETTINGS})},toggleScreenSharing:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SCREEN_SHARING})},startCall:function(){b("FBRTCDispatcher").dispatch({type:g.START_CALL})},openScreenInNewWindow:function(){b("FBRTCDispatcher").dispatch({type:g.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function(a){b("FBRTCDispatcher").dispatch({type:g.RECEIVED_SIGNALING_MESSAGE,message_type:a.msgType,message:a})},acceptEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.ACCEPT_ESCALATION})},declineEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.DECLINE_ESCALATION})},resetCall:function(a){b("FBRTCDispatcher").dispatch({type:g.RESET_CALL,trigger:a})},redialCall:function(){b("FBRTCDispatcher").dispatch({type:g.REDIAL_CALL})},parentWindowStartCall:function(){b("FBRTCDispatcher").dispatch({type:g.PARENT_WINDOW_START_CALL})}};e.exports=a}),null);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getMQTTExperiment=function(){return g.gen("rtc_web_client_mqtt")};g.getIncomingCallExperiments=function(){return g.gen("rtweb_incoming_call_experiments")};g.getMediaQualityExperiments=function(){return g.gen("rtc_www_media_quality_h2_2018")};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return this.$2.params[a].toString()}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==void 0)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("CollabMinimumChromeVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCREEN_SHARE_CALL:65,VIDEO_CALL:48})}),null);
__d("FBRTCSupport",["CollabMinimumChromeVersion","RTCConfig","UserAgent"],(function(a,b,c,d,e,f){var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isMobileDevice:function(){return b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!g.isMobileDevice()&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},videoEscalationByUnmuteWorkaround:function(){return b("UserAgent").isBrowser("Firefox < 60")||b("UserAgent").isBrowser("Edge")}};e.exports=g}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","BonfireFeatureGating","Bootloader","ChannelConstants","FBRTCCallControlActions","FBRTCConstants","FBRTCExperiment","FBRTCLocalMessageQueue","FBRTCSupport","guid","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m,n=null,o=null,p=!1,q=null,r=null,s=null,t=null;a={init:function(a,c){__p&&__p();if(p)return;p=!0;var d=b("FBRTCExperiment").getMQTTExperiment(),e=d.getBool("use_mqtt",!1),f=d.getBool("expose_early",!1);f&&d.logExposure();e?b("Bootloader").loadModules(["FBMqttChannel"],function(a){a.subscribe("/webrtc",function(a){f||(d.logExposure(),f=!0);a=JSON.parse(a);this._onMessage(a)}.bind(this))}.bind(this),"FBRTCMessageListener"):(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){f||(d.logExposure(),f=!0),this._onMessage(b.obj)}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){this._onMessage(b.obj)}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){this._onMessage(b.obj)}.bind(this)));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){this._onMultiwayMessage(b.obj)}.bind(this));b("BonfireFeatureGating").canReceiveBonfireRingInterop()&&b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("parties_notifications"),function(a,b){this._onBonfireMessage(b.obj)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("onevc"),function(a,b){this._onOneVCMessage(b.obj)}.bind(this));this._localMessageQueue=new(b("FBRTCLocalMessageQueue"))();if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){e=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",e,!1)}a&&this._connectToParentWindow(c)},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a){q&&g(0,1011),q=a},_emit:function(a,b){this.emit(a,b)},_onMultiwayMessage:function(a){this._emit("multiwayMessageReceived",a),q&&q(a)},setBonfireMessageHandler:function(a){r&&g(0,1012),r=a},_onBonfireMessage:function(a){this._emit("bonfireMessageReceived",a),r&&r(a)},setOneVCMessegeHandler:function(a){s==null&&(s=a)},_onOneVCMessage:function(a){s!=null&&s(a)},setMessageHandler:function(a){k&&g(0,1013);k=a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},removeOneVCMessageHandler:function(){s=null},setParentWindowStartCallHandler:function(a){t=a;return function(){t=null}},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this._emit("messageReceived",a),k?k(a):j.push(a),this._passMessageToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(event){return Boolean(event.origin===window.location.origin&&event.data&&o!==null&&event.data.nonce===o)},_handleWindowMessageToParent:function(event){if(!this._verifyWindowMessage(event))return;if(event.data.type===h.CHILD_WINDOW_READY){var a=event.data,b=a.childNonce;a=a.peerID;this.setParentWindowNonce(b);this._setChildWindow(event.source);this._replayQueuedMessagesToChild(a,l)}},_handleWindowMessageToChild:function(event){if(!this._verifyWindowMessage(event))return;event.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(event.data.message);event.data.type===h.CHILD_WINDOW_START_CALL&&(t?t():b("FBRTCCallControlActions").parentWindowStartCall())},_replayQueuedMessagesToChild:function(a,b){this._localMessageQueue.drainQueue(a,function(a){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};b.postMessage(a,window.location.origin)})},_setChildWindow:function(a){l=a,window.clearTimeout(m),m=window.setTimeout(function(){l=null},i),this._startCallInChildWindow(),this.generateNewNonce()},_passMessageToChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:a};l.postMessage(a,window.location.origin)}},_startCallInChildWindow:function(){if(l){var a={type:h.CHILD_WINDOW_START_CALL,nonce:n};l.postMessage(a,window.location.origin)}}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0,bonfireMessageReceived:!0});e.exports=a}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setEntryPoint=function(a){this.$1.entry_point=a;return this};a.prototype.setErrorText=function(a){this.$1.error_text=a;return this};a.prototype.setGroupSize=function(a){this.$1.group_size=a;return this};a.prototype.setMessageType=function(a){this.$1.message_type=a;return this};a.prototype.setMid=function(a){this.$1.mid=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setOfflineThreadid=function(a){this.$1.offline_threadid=a;return this};a.prototype.setPreviousReaction=function(a){this.$1.previous_reaction=a;return this};a.prototype.setReaction=function(a){this.$1.reaction=a;return this};a.prototype.setRecipientID=function(a){this.$1.recipient_id=a;return this};a.prototype.setThreadType=function(a){this.$1.thread_type=a;return this};a.prototype.setThreadid=function(a){this.$1.threadid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,error_text:!0,group_size:!0,message_type:!0,mid:!0,name:!0,offline_threadid:!0,previous_reaction:!0,reaction:!0,recipient_id:!0,thread_type:!0,threadid:!0,vc:!0};e.exports=a}),null);
__d("MessengerMessageRequestsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContainermodule=function(a){this.$1.containermodule=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setEntryPoint=function(a){this.$1.entry_point=a;return this};a.prototype.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};a.prototype.setFolderType=function(a){this.$1.folder_type=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setSurface=function(a){this.$1.surface=a;return this};a.prototype.setThreadID=function(a){this.$1.thread_id=a;return this};a.prototype.setThreadKey=function(a){this.$1.thread_key=a;return this};a.prototype.setThreadKeyList=function(a){this.$1.thread_key_list=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,extra_client_data:!0,folder_type:!0,name:!0,surface:!0,thread_id:!0,thread_key:!0,thread_key_list:!0,vc:!0};e.exports=a}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEmojiGroup=function(a){this.$1.emoji_group=a;return this};a.prototype.setEmojiGroupCount=function(a){this.$1.emoji_group_count=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setMid=function(a){this.$1.mid=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={emoji_group:!0,emoji_group_count:!0,event:!0,mid:!0,sender_id:!0,vc:!0};e.exports=a}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientTime=function(a){this.$1.client_time=a;return this};a.prototype.setCustomerID=function(a){this.$1.customer_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setFunnel=function(a){this.$1.funnel=a;return this};a.prototype.setMessageID=function(a){this.$1.message_id=a;return this};a.prototype.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,vc:!0};e.exports=a}),null);
__d("MercuryShareAttachmentRenderLocations",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT:"chat",CHAT_PREVIEW:"chat_preview",COMPOSER:"ufi_composer",MESSENGER:"messenger",PAGES_INBOX:"pages_inbox",getValues:function(){return[g.CHAT,g.CHAT_PREVIEW,g.COMPOSER,g.MESSENGER,g.PAGES_INBOX]},isPreview:function(a){return a===g.CHAT_PREVIEW}};e.exports=g}),null);
__d("ChatAnimatedGifs",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g={shouldHideBody:function(a){__p&&__p();if(!a.has_attachment)return!1;for(var b=0;b<a.attachments.length;b++){var c=a.attachments[b];if(c.preview_url){c=g.getRawUrlFromSafeUrl(c.preview_url);if(a.body==c)return!0}}return!1},getRawUrlFromSafeUrl:function(a){return new(b("URI"))(a).getQueryData().url}};e.exports=g}),null);
__d("ChatNotificationConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","ChatNotificationConstants","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("AvailableList").getWebChatNotification&&b("AvailableList").getWebChatNotification(),i=!1,j=!0;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.ON_CHANGED="changed",b}a.prototype.notifiesUserMessages=function(){"use strict";return h!==b("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION};a.prototype.ignoresRemoteTabRaise=function(){"use strict";return i};a.prototype.showsTabUnreadUI=function(){"use strict";return j};var k=new a();function l(){k.inform(k.ON_CHANGED)}b("AvailableList").subscribe&&b("AvailableList").subscribe(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var a=h,c=b("AvailableList").getWebChatNotification();h=c;a!=c&&l()});b("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(a,b){i=!!b,l()});b("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(a,b){j=!!b,l()});e.exports=k}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","FBEmojiUtils","Image.react","MessengerHotlikeEmoji.bs","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a="_1ift _1ifu",c=0,d=this.props.contents.map(function(d){c++;var e=d.emojiKey;if(e){e=b("MessengerHotlikeEmoji.bs").isMessengerHotlike(e)?b("EmojiImageURL").getMessengerURL(e,b("EmojiLikeConstants").sizeMap.dp32):b("EmojiImageURL").getFBEmojiURL(b("FBEmojiUtils").resolveAliasFromKey(e)||e,b("EmojiLikeConstants").sizeMap.dp32);return b("React").createElement(b("Image.react"),{alt:d.text,className:a,key:c,src:e})}else return b("React").createElement("span",{key:c},d.text)});return b("React").createElement("div",{tabIndex:"0"},d)};function a(){h.apply(this,arguments)}a.propTypes={contents:c.arrayOf(c.shape({emojiKey:c.string,text:c.string.isRequired})).isRequired};e.exports=a}),null);
__d("MercuryAttachmentLayoutTypeHelper",[],(function(a,b,c,d,e,f){"use strict";a={isAdminType:function(a){return(a==null?void 0:(a=a.share)==null?void 0:(a=a.xma_layout_info)==null?void 0:a.layout_type)==="ADMIN"}};e.exports=a}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1193572474099061"};c.getQueryID=function(){"use strict";return"1132183563559860"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("XMessengerBotsMenuController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/commerce/bots/menu/",{page_id:{type:"String",required:!0}})}),null);
__d("MessengerBotMenuDataFetcher",["AsyncRequest","Cache","MessengerBotComposerWebGraphQLQuery","XMessengerBotsMenuController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=new(b("Cache"))(),this.$2=new(b("Cache"))()}a.prototype.getMenuItems=function(a,c,d){__p&&__p();if(this.$1.has(a)){c(this.$1.get(a));return}var e=b("XMessengerBotsMenuController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(e).setHandler(function(b){b=b.payload.menu;this.$1.set(a,b);c(b)}.bind(this)).setErrorHandler(function(a){d()}).send()};a.prototype.getHasPageSetting=function(a,c,d,e){__p&&__p();if(!this.$2.has(a)){var f=b("MessengerBotComposerWebGraphQLQuery").getURI({node_id:a});new(b("AsyncRequest"))().setURI(f).setHandler(function(b){b=b.payload.data.node;b=b&&b.commerce_page_settings||[];this.$2.set(a,b);c(b.indexOf(e)!==-1)}.bind(this)).setErrorHandler(function(b){this.$2.set(a,[]),d()}.bind(this)).send()}f=this.$2.get(a)||[];c(f.indexOf(e)!==-1);return f.indexOf(e)!==-1};e.exports=new a()}),null);
__d("RepliedToMessageStatusForGraphQL",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VALID:"VALID",DELETED:"DELETED",TEMPORARILY_UNAVAILABLE:"TEMPORARILY_UNAVAILABLE"})}),null);
__d("MessageReplyPermissions",["MercuryAttachmentLayoutTypeHelper","MercuryAttachmentType","MercuryConfig","MercuryLogMessageType","MessagingTag","MessengerBotMenuDataFetcher","MNCommercePageSetting","RepliedToMessageStatusForGraphQL","emptyFunction","getPageIDFromThreadID","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={canReplyToMessage:function(a){var c=b("getPageIDFromThreadID")(a.thread_id);if(c){c=b("MessengerBotMenuDataFetcher").getHasPageSetting(c,b("emptyFunction"),b("emptyFunction"),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED);if(c)return!1}if(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)return!1;return a.removed_timestamp&&a.removed_timestamp!==0?!1:this.isRepliableMessage(a)&&b("gkx")("678637")||this._canRenderM3RedesignReply(a)},bubbleContainsRepliedToMessage:function(a,b){return!b&&this._canRenderM3RedesignReply(a)},isRepliableMessage:function(a){var c=a.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||a.log_message_type===b("MercuryLogMessageType").PHONE_CALL;if(c)return!1;c=a.attachments&&a.attachments.length>0?a.attachments[0]:null;if(b("MercuryAttachmentLayoutTypeHelper").isAdminType(c))return!1;c=c==null?void 0:c.attach_type;return!!a.body||c===b("MercuryAttachmentType").PHOTO||c===b("MercuryAttachmentType").VIDEO||c===b("MercuryAttachmentType").STICKER||c===b("MercuryAttachmentType").THIRDPARTYSTICKER||c===b("MercuryAttachmentType").ANIMATED_IMAGE||a.attachments&&a.attachments.length>=1},_canRenderM3RedesignReply:function(a){if(!b("MercuryConfig").SM3BD)return!1;if(a.status!==b("RepliedToMessageStatusForGraphQL").VALID)return!0;a=a.message;var c=a.attachments&&a.attachments.length===1&&a.attachments[0].attach_type;return!!a.body||b("MercuryConfig").RTPE&&c===b("MercuryAttachmentType").PHOTO||b("MercuryConfig").RTVE&&c===b("MercuryAttachmentType").VIDEO||b("MercuryConfig").RTSE&&(c===b("MercuryAttachmentType").STICKER||c===b("MercuryAttachmentType").THIRDPARTYSTICKER)||b("MercuryConfig").RTGE&&c===b("MercuryAttachmentType").ANIMATED_IMAGE||b("MercuryConfig").RTOAE&&a.attachments&&a.attachments.length>=1}};e.exports=a}),null);
__d("messengerCustomColorUtils",["ChatConfig"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=c||{};b("ChatConfig").getBool("chat_tab_has_gradients")||(c.backgroundColor=a);return c}e.exports={customBubbleStyle:a}}),null);
__d("ChatBubble.react",["cx","BootloadedComponent.react","DOMDimensions","EmojiOnlyMessage.react","ErrorBoundary.react","JSResource","MercuryConfig","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","joinClasses","messengerCustomColorUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=2;c=b("React").createClass({displayName:"ChatBubble",_boxWidth:0,_repliedToMessageRef:null,propTypes:{attachments:a.node,body:a.string,className:a.string,customColor:a.string,customLike:a.object,isEmojiLike:a.bool,isFromViewer:a.bool,maxWidth:a.number.isRequired,message:a.object,metaRanges:a.array,onReplyToMessage:a.func,ranges:a.array,threadCustomColor:a.string,threadID:a.string},getInitialState:function(){return{emojis:void 0,bubbleWidth:null}},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}this._restyleBubble(this.props)},componentDidUpdate:function(a){(a.maxWidth!==this.props.maxWidth||a.body!==this.props.body||!a.attachments&&this.props.attachments)&&this._restyleBubble(a)},render:function(){__p&&__p();var a=this.props,c=a.attachments,d=a.body;d=d===void 0?"":d;var e=a.className,f=a.maxWidth;a=babelHelpers.objectWithoutProperties(a,["attachments","body","className","maxWidth"]);a=Object.assign({},a);delete a.customColor;delete a.customLike;delete a.isEmojiLike;delete a.isFromViewer;delete a.message;delete a.metaRanges;delete a.ranges;delete a.threadCustomColor;delete a.threadID;return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_5w1r"+(this.state.emojis?"":" _3_om")+(this.state.emojis?" _31xx":"")+(((a=this.props)==null?void 0:(a=a.message)==null?void 0:(a=a.replied_to_message)==null?void 0:(a=a.message)==null?void 0:a.body)&&!b("MercuryConfig").SM3BD?" _1vmy":""),e),ref:"bubble",style:{maxWidth:f,width:this.state.emojis?null:this.state.bubbleWidth,wordWrap:d.length>=15?"break-word":"inherit"}}),b("React").createElement("div",{className:"_4gx_",ref:"inner"},this._renderContent(),c))},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;var a={},c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=b("React").createElement(b("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:b("MercuryMessageRenderLocations").CHAT}),this.props.customColor&&(a=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,a)));var d=this.props.message&&this.props.message.replied_to_message&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.message.replied_to_message,!!this.state.emojis)?b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("RepliedToMessageContent.react").__setRef("ChatBubble.react"),bootloadPlaceholder:b("React").createElement("div",null),isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!1,repliedToMessageData:this.props.message&&this.props.message.replied_to_message,threadID:this.props.threadID,ref:this._setRepliedToMessageRef,replyInOneBubble:!0})):null;return b("React").createElement("div",{className:"_1aa6"+(this.state.emojis?" _31xy":"")+(this.props.message&&this.props.message.isSelected?" _1yok":"")+(d?" _6e7o":""),ref:"contentWrapper",style:a},d,d?"\n":null,b("React").createElement("span",{className:"_5yl5",ref:"content"},c))},_restyleBubble:function(a){__p&&__p();if(this.props.attachments||this.props.body!=null&&b("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxWidth!==this.props.maxWidth||b("DOMDimensions").getElementDimensions(c).width>this.props.maxWidth){a=this.props.maxWidth;this.setState({bubbleWidth:a},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.bubble);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content),d=b("DOMDimensions").getElementDimensions(c).width;if(this._repliedToMessageRef){var e=b("ReactDOM").findDOMNode(this._repliedToMessageRef);e=b("DOMDimensions").getElementDimensions(e).width;d=Math.max(e,d)}e=c?d+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper),"width",!0,!1,!1):0;c=e+h;d>0&&c<this.props.maxWidth&&a-c-this.getBoxWidth()>0&&this.setState({bubbleWidth:c})},contentWraps:function(){var a=b("ReactDOM").findDOMNode(this.refs.content);if(!a)return!1;var c=a.getClientRects();a=b("DOMDimensions").getElementDimensions(a).height;return c&&c.length>1&&c[0].height<a},_setRepliedToMessageRef:function(a){this._repliedToMessageRef=a},getBoxWidth:function(){this._boxWidth||(this._boxWidth=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble),"width",!0,!0,!1));return this._boxWidth}});e.exports=c}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","MessengerFormattingUtils","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/,i=3,j=/^\s+/,k=/\s+$/;function a(a){return!!(a&&a.search(h)!==-1)}function l(a,b){__p&&__p();var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(k);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*i);d=a[b].match(j);d&&(c+=d[0].length);return c}function m(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function n(a){return a.length===1?{language:"",code:a[0]}:{language:a[0].replace(/[^a-zA-Z]+/g,""),code:a.slice(1).join("\n")}}function o(a){__p&&__p();if(!b("gkx")("678575"))return a.split(h);var c=b("MessengerFormattingUtils").getRanges(a).filter(function(a){return a.formatter===b("MessengerFormattingUtils").formatConfigs.blockquote.formatter||a.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter}).sort(function(a,b){return a.offset!==b.offset?a.offset-b.offset:b.length-a.length}),d=[],e=0,f=0;for(var g=0;g<c.length;g++){var i=c[g];if(i.offset<f)continue;i.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter&&(d.push(a.substring(e,i.offset)),d.push(i.innerText),e=i.offset+i.length);f=i.offset+i.length}d.push(a.substring(e));return d}function c(a,c,d,e,f){__p&&__p();a=o(a);var g=[],h=0;for(var i=0;i<a.length;i+=2){var j=a[i].trim();if(j&&j.length>0){h+=l(a,i);var k=d?m(d,h,j.length):d;g.push(b("React").createElement("div",{key:i,className:"_1e-x _n4o"},b("React").createElement(b("ChatBubble.react"),{body:j,customColor:f||void 0,className:"clearfix _5wdf",maxWidth:c,ranges:k||void 0,threadID:e||void 0})))}if(i+1<a.length&&a[i+1]){j=a[i+1].split("\n");k=n(j);j=k.language;k=k.code;b("BanzaiODS").bumpEntityKey("chat_code_paste","render_bubble");g.push(b("React").createElement("div",{key:i+1,className:"_1e-x _n4o"},b("React").createElement("div",{ref:"bubble",className:"_3_om _4yng _5wdf"},b("React").createElement("div",{style:{maxWidth:c},ref:"syntaxTarget"+i,className:"language-"+j},k))))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("ChatTabBlinking",["cx","ChatConfig","CSS","FantaTabActions","clearInterval","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ChatConfig").get("chat_tab_m4_header")?1200:600,i="highlightTitle";a={_blinkMap:{},_interval:null,_isHighlighting:!1,blinkTab:function(a,b){this._blinkMap[a]||(this._blinkMap[a]={view:b,elem:b.getTabElem()}),this.checkInterval()},unblinkTab:function(a){if(this._blinkMap[a]){var c=this._blinkMap[a].elem;c&&(b("ChatConfig").get("chat_tab_m4_header")?setTimeout(function(){b("FantaTabActions").unhighlightNewMessage(a)}):b("CSS").removeClass(c,i));delete this._blinkMap[a]}this.checkInterval()},checkInterval:function(){var a=Object.keys(this._blinkMap).length;a>0?this._interval||(this._interval=b("setIntervalAcrossTransitions")(this._toggleBlinkHighlight.bind(this),h)):this._interval&&(b("clearInterval")(this._interval),this._interval=null)},_toggleBlinkHighlight:function(){__p&&__p();var a=this;this._isHighlighting=!this._isHighlighting;var c=function(c){if(Object.prototype.hasOwnProperty.call(a._blinkMap,c)){var d=a._blinkMap[c],e=d.elem;d=d.view;e&&e.parentNode&&!d.isFocused()&&!d.isHovered()?b("ChatConfig").get("chat_tab_m4_header")?a._isHighlighting?setTimeout(function(){b("FantaTabActions").highlightNewMessage(c)}):setTimeout(function(){b("FantaTabActions").unhighlightNewMessage(c)}):b("CSS").conditionClass(e,i,a._isHighlighting):a.unblinkTab(c)}};for(var d in this._blinkMap)c(d)}};e.exports=a}),null);
__d("ChatCloseButton.react",["cx","fbt","Link.react","React","TrackingNodes","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CLOSE_BUTTON),c=h._("Pulsa \"Esc\" para cerrar"),d=h._("Cerrar pesta\u00f1a"),e="_4vu4";return b("React").createElement(b("Link.react"),{"aria-label":this.props.active?c:d,className:b("joinClasses")(this.props.className,"close","button",e),"data-ft":a,"data-hover":"tooltip","data-tooltip-content":this.props.active?c:d,"data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown})};function a(){i.apply(this,arguments)}a.propTypes={onClick:c.func,onKeyUp:c.func,onMouseDown:c.func,active:c.bool};a.defaultProps={active:!1};e.exports=a}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("Ver actividad reciente"),c=h._("Ver menos actividad");return b("React").createElement("div",{className:"_5w0o"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_2zsu"}),this.props.children,b("React").createElement("div",{className:"_2zsu"})))};e.exports=a}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("Link.react"));g&&g.prototype;a.prototype.componentDidMount=function(){this.props.autoFocus&&b("ReactDOM").findDOMNode(this).focus()};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ChatComposerFlyoutButtonBootLoader.react",["AutoFocusableLink.react","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","React"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},a,{className:a.iconClassName})),loader:b("JSResource")("MessengerComposerFlyoutButton.react").__setRef("ChatComposerFlyoutButtonBootLoader.react"),placeholder:a.renderSVGIcon?b("React").createElement(b("AutoFocusableLink.react"),{label:"flyout button",className:a.iconClassName},a.renderSVGIcon(!1)):b("React").createElement(b("AutoFocusableLink.react"),{label:"flyout button",className:a.iconClassName})});return a.excludeTag?c:b("React").createElement("li",{className:a.interactionClassName}," ",c," ")};e.exports=a}),null);
__d("ChatDateBreak.react",["cx","FBLogger","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("time",{className:b("joinClasses")(this.props.className,"_5w-5")},b("React").createElement("span",{className:"_5w-6"},a))}catch(a){b("FBLogger")("mercury").catching(a).mustfix("incorrect format in datebreak");return null}};function a(){h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("MercuryTimePassed",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4})}),null);
__d("MercuryTimestamp",["fbt","MercuryTimePassed","formatDate"],(function(a,b,c,d,e,f,g){__p&&__p();a=864e5;var h=6*a,i={getFormatedTimestamp:function(a){var b=a/1e3;return i.getFormattedTimestampByBucket(b,this.getTimeBucket(a))},getAbsoluteTimestamp:function(a){if(a==null)return null;else{a=i.getFormatedTimestamp(a);return a.absolute}},getRelativeTimestamp:function(a){a=i.getFormatedTimestamp(a);return a.relative},getFormattedTimestampByBucket:function(a,c){switch(c){case b("MercuryTimePassed").TODAY:return{absolute:g._("Hoy"),relative:b("formatDate")(a,"g:ia")};case b("MercuryTimePassed").WEEK_AGO:return{absolute:b("formatDate")(a,"l"),relative:b("formatDate")(a,"D")};case b("MercuryTimePassed").CURRENT_YEAR:return{absolute:b("formatDate")(a,"F j"),relative:b("formatDate")(a,"M j")};default:return{absolute:b("formatDate")(a,"F j, Y"),relative:b("formatDate")(a,"n/j/y")}}},getTimeBucket:function(a){__p&&__p();a=new Date(a);var c=new Date();c=new Date(c.getFullYear(),c.getMonth(),c.getDate());if(c<a)return b("MercuryTimePassed").TODAY;else if(c-h<a)return b("MercuryTimePassed").WEEK_AGO;else if(c.getFullYear()===a.getFullYear())return b("MercuryTimePassed").CURRENT_YEAR;else return b("MercuryTimePassed").OTHER_YEAR},getPreciseTimestamp:function(a){return b("formatDate")(new Date(a),i.getPreciseFormat(a))},getPreciseFormat:function(a){a=i.getTimeBucket(a);switch(a){case b("MercuryTimePassed").TODAY:return"g:ia";case b("MercuryTimePassed").WEEK_AGO:return"l g:ia";case b("MercuryTimePassed").CURRENT_YEAR:return"F jS, g:ia";case b("MercuryTimePassed").OTHER_YEAR:default:return"F j, Y g:i a"}}};e.exports=i}),null);
__d("MessengerDecoratorUtil",["MercuryAttachment","MercuryAttachmentType","MercuryConfig","QE2Logger","StoryAttachmentStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){return a===Object(a)},h={isEventAttachment:function(a){return this._isStoryBased(a)&&a.share.style_list.indexOf(b("StoryAttachmentStyle").EVENT_REMINDER)>-1},isLocationAttachment:function(a){return this._isStoryBased(a)&&(a.share.style_list.indexOf(b("StoryAttachmentStyle").MESSAGE_LOCATION)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").MESSAGE_LIVE_LOCATION)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").MESSAGE_MULTIPLE_LOCATIONS)>-1)},isP2PAttachment:function(a){a=b("MercuryAttachment").get(a).filter(function(a){return g(a)&&this.isP2P(a)}.bind(this));return!!a.length},isP2P:function(a){return!!(this._isStoryBased(a)&&(a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION_REQUEST)>-1))},isNewForwardEntrypoint:function(a){var c;c=((c=a)!=null?(c=c.share)!=null?(c=c.style_list)!=null?c[0]:c:c:c)===b("StoryAttachmentStyle").MONTAGE_DIRECT;c=b("MercuryAttachment").isShareAttachment(a)&&a.share!=null&&a.share.share_id&&!h.isP2P(a)&&!h.isEventAttachment(a)&&!h.isLocationAttachment(a)&&!c&&(!a.share.target||!a.share.target.lwa_type);if(!c)return!1;b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");return b("MercuryConfig").MNFWD},_isStoryBased:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list)}};e.exports=h}),null);
__d("MessageReactionMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLMutationBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1491398900900362"};c.getQueryID=function(){"use strict";return"254517288326467"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("ContextualLayerAutoFlip"));g&&g.prototype;a.prototype.getValidPositions=function(a){"use strict";return[a.getPosition()]};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerHideOnScrollOut"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));e.exports=a}),null);
__d("MessengerReactionsFlyoutButtonBootloader.react",["AutoFocusableLink.react","JSResource","Placeholder.react","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("lazyLoadComponent")(b("JSResource")("MessengerReactionsFlyoutButton.react").__setRef("MessengerReactionsFlyoutButtonBootloader.react"));a=function(a){var c=b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement(b("AutoFocusableLink.react"),{label:"flyout button",className:a.iconClassName})},b("React").createElement(g,babelHelpers["extends"]({},a,{className:a.iconClassName})));return b("React").createElement("li",{className:a.interactionClassName}," ",c," ")};e.exports=a}),null);
__d("MessengerReactionsUtil.bs",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=[[128525],[128518],[128558],[128546],[128544],[128077],[128078]];var g={};c.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a)]=c+1|0;return 0});function a(a,b){a=g[a];b=g[b];if(a!==void 0)if(b!==void 0)return a-b|0;else return-1;else if(b!==void 0)return 1;else return 0}d=c.map(b("EmojiFormat.bs").codeArrayToUnicode);f.reactionsSortOrder=c;f.orderMap=g;f.sortFunction=a;f.defaultReactions=d}),null);
__d("getThreadTypeNameFromThreadType",["MessagingThreadType"],(function(a,b,c,d,e,f){"use strict";function a(a){for(var c in b("MessagingThreadType"))if(b("MessagingThreadType")[c]===a)return c;return""}e.exports=a}),null);
__d("MessengerReactionsMenu.react",["cx","fbt","Promise","Bootloader","CSS","CurrentUser","DOMContainer.react","EmojiFormat.bs","MercuryIDs","MessageReactionMutationWebGraphQLMutation","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerReactionsFlyoutButtonBootloader.react","MessengerReactionsUtil.bs","MessengerReactionsWebConfig","MessengerState.bs","MessengerSupportedEmojiUtils","MessengerTextWithEmoticons.react","React","XAsyncRequest","createCancelableFunction","emptyFunction","getThreadTypeNameFromThreadType","gkx","objectValues","promiseDone","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={animations:{},reactions:b("MessengerReactionsUtil.bs").defaultReactions.slice()},this.$5=function(a){a||this.props.onHide()}.bind(this),this.$9=function(a){this.$6(b("EmojiFormat.bs").codeArrayToUnicode(a))}.bind(this),c}a.prototype.componentDidMount=function(){b("gkx")("678614")&&(this.$1=b("createCancelableFunction")(function(a){return this.setState({animations:a})}.bind(this)),b("promiseDone")(this.loadAnimations(),this.$1)),this.$2()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.$2()};a.prototype.componentWillUnmount=function(){b("objectValues")(this.state.animations).forEach(function(a){a.renderer&&typeof a.renderer.pause==="function"&&a.renderer.pause()}),this.$1&&this.$1.cancel()};a.prototype.$2=function(){__p&&__p();var a=b("MessengerReactionsUtil.bs").defaultReactions.slice();if(this.props.useChatEmojiReact){var c=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.message.thread_id);c=(c=c)!=null?(c=c.custom_like_icon)!=null?c.emoji:c:c;c!=null&&!a.includes(c)&&a.push(c)}c=this.props.message.reactions;c=c&&c[b("CurrentUser").getID()];b("qex")._("705431")&&c&&!a.includes(c)&&a.push(c);this.setState({reactions:a})};a.prototype.$3=function(){return new(b("Promise"))(function(a){return b("Bootloader").loadModules(["Keyframes"],function(b){return a(b)},"MessengerReactionsMenu.react")})};a.prototype.$4=function(){__p&&__p();return this.$3().then(function(a){return b("Promise").all(["love","haha","wow","sad","angry","thumbsup","thumbsdown"].map(function(c){return a.requestRenderer(b("MessengerReactionsWebConfig").paths[c],{projectName:"messaging_reactions",assetName:c})}))}).then(function(a){return a.map(function(a){a=a.setWidth(45).setHeight(45).repeatForever().play().redrawIfNeeded();var c=a.getElement();b("CSS").addClass(c,"_37pj");return{element:c,renderer:a}}).reduce(function(a,c,d){a[b("MessengerReactionsUtil.bs").defaultReactions[d]]=c;return a},{})})};a.prototype.loadAnimations=function(){var a=Date.now(),c=this.$4();b("promiseDone")(c,function(c){b("Bootloader").loadModules(["MessengerRestReactionTypedLogger"],function(b){new b().setLoadedTime(Date.now()-a).log()},"MessengerReactionsMenu.react")});return c};a.prototype.render=function(){var a=b("CurrentUser").getID(),c=this.props.message.reactions&&this.props.message.reactions[a];return b("React").createElement(b("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,shown:!0,onBlur:this.props.onHide,onToggle:this.$5},b("React").createElement("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2"},this.state.reactions.map(function(a){var d=b("MessengerReactionsUtil.bs").defaultReactions.slice().includes(a);return b("React").createElement("span",{className:"_1z8r"+(a===c?" _5-2b":""),"aria-label":a,id:a,key:a,onClick:function(){return this.$6(a)}.bind(this),role:"option","aria-selected":a===c,tabIndex:"0"},this.state.animations[a]?b("React").createElement(b("DOMContainer.react"),null,this.state.animations[a].element):b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,forceMessengerEmoji:d,renderEmoticons:!0,renderEmoji:!0,text:a}))}.bind(this)),this.$7()))};a.prototype.$8=function(a){return!b("MessengerReactionsUtil.bs").defaultReactions.includes(a)?b("MessengerSupportedEmojiUtils").getSupportedEmojiKey(a):a};a.prototype.$7=function(){var a=this.props.message,c={onSelect:this.$9,getInput:b("emptyFunction")};a=a.thread_id;var d=this.state.reactions.length!==b("MessengerReactionsUtil.bs").defaultReactions.length;return b("qex")._("705431")&&!d?b("React").createElement(b("MessengerReactionsFlyoutButtonBootloader.react"),{contextRef:this.props.refProp,dialogProps:{offsetX:140,offsetY:53},flyoutAlignment:"right",flyoutProps:c,iconClassName:"_70b-",interactionClassName:"_1z8r",key:"emojireact",threadID:a,title:h._("Elige un emoticono")}):null};a.prototype.$6=function(a){__p&&__p();var c=this.props,d=c.message,e=c.entryPoint;c=b("CurrentUser").getID();var f=d.reactions&&d.reactions[c],g=b("MessengerState.bs").getServerMessageID(c,d.message_id);c=b("MessageReactionMutationWebGraphQLMutation").getURI({action:a===f?"REMOVE_REACTION":"ADD_REACTION",message_id:g,actor_id:c,reaction:a});var h=function(c){var h=d.other_user_fbid||d.thread_fbid,i=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),d.thread_id),j=i&&i.participants?i.participants.length:0;i=b("getThreadTypeNameFromThreadType")(i&&i.thread_type);var k=d.attachments[0];j=new(b("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(d.offline_threading_id).setMid(g).setRecipientID(b("MercuryIDs").getUserIDFromParticipantID(d.author)).setEntryPoint(e).setReaction(this.$8(a)).setPreviousReaction(this.$8(f)).setGroupSize(j).setThreadType(i).setThreadid(h);c.errorSummary&&(j=j.setErrorText(c.errorSummary.toString()));k&&(j=j.setMessageType(k.attach_type));j.log()}.bind(this);new(b("XAsyncRequest"))(c).setMethod("POST").setHandler(h).send();this.props.onHide()};e.exports=a}),null);
__d("MessengerReactionsPrompt.react",["cx","ix","CurrentUser","Image.react","MessengerReactionsMenu.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={open:!1},this.$2=function(a){a.stopPropagation(),this.setState({open:!0},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this)),this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(!0)}.bind(this),this.$3=function(){this.setState({open:!1},function(){return this.props.onShowMenu&&this.props.onShowMenu(this.state.open)}.bind(this)),this.props.setReactionsPromptShown&&this.props.setReactionsPromptShown(!1)}.bind(this),b}a.prototype.render=function(){if(!this.props.messageIsSelected&&!this.state.open)return null;var a=null;this.props.isQuickAdd?a=h("278123"):a=b("CurrentUser").isWorkUser()?this.state.open?h("559649"):h("559648"):this.state.open?h("559646"):h("559647");return b("React").createElement("span",{className:(this.props.isQuickAdd?"":"_5zvq")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?this.$1:this.$2,ref:"button"},b("React").createElement(b("Image.react"),{src:a}),this.renderMenu())};a.prototype.renderMenu=function(){return!this.state.open?null:b("React").createElement(b("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$3,refProp:function(){return this.refs.button}.bind(this),useChatEmojiReact:this.props.useChatEmojiReact})};a.prototype.$1=function(a){a.stopPropagation()};e.exports=a}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryAttachmentType","MercuryConfig","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerReactionsPrompt.react","MessengerReactionsUtil.bs","MessengerTextWithEmoticons.react","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","StoryAttachmentStyle","TooltipData"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="ALL",k=b("CurrentUser").getID(),l=3,m=9;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={reactionsPromptShown:!1},this.$1=function(a){this.setState({reactionsPromptShown:a})}.bind(this),this.$3=function(){var a=b("MessengerEnvironment").messengerui,c=this.props,d=c.isFromViewer,e=c.message,f=c.participants;c=e.reactions;new(b("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(e.message_id).setSenderID(e.author).setEmojiGroup(j).setEmojiGroupCount(Object.values(c).length).log();a?b("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(a,c){var g=c.jsComponent;a.showDialog(function(){return b("React").createElement(g,{isFromViewer:d,participants:f,message:e})})},"MessengerReactions.react"):b("Bootloader").loadModules(["ChatReactionsDialog"],function(a){a.show(e,f,d)},"MessengerReactions.react")}.bind(this),c}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.message,d=a.participants,e=a.renderQuickAdd;a=a.hovered;var f=c.reactions,g=c.attachments,h=g&&g.length===1&&b("MercuryConfig").MNFWD&&f&&Object.keys(f).length===0;if(h&&g[0].attach_type===b("MercuryAttachmentType").STICKER)return null;if(!this.state.reactionsPromptShown&&!a&&h&&g[0].attach_type===b("MercuryAttachmentType").SHARE)return null;if(g[0]&&g[0].attach_type===b("MercuryAttachmentType").SHARE&&!g[0].share)return null;if(((a=g[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a)===b("StoryAttachmentStyle").MONTAGE_DIRECT)return null;if((!f||!d)&&!e)return null;var i={},j=0;h=!1;Object.entries(f||{}).forEach(function(a){var b=a[0];a=a[1];typeof a==="string"&&(b===k&&(h=!0),i[a]||(i[a]=0),i[a]++,j++)});g=Object.keys(i).sort(b("MessengerReactionsUtil.bs").sortFunction).slice(0,l).map(function(c,d,a){var e=b("MessengerReactionsUtil.bs").defaultReactions.includes(c);return b("React").createElement("span",{className:"_4kf5",style:{zIndex:a.length-d,marginLeft:d===0?0:"-4px"},key:c},b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,renderEmoticons:!0,renderEmoji:!0,forceMessengerEmoji:e,text:c}))});a=j>0?b("React").createElement("span",{className:"_4kf5 _4kf6"+(h?" _fy2":"")},j):null;d=e&&!h?b("React").createElement("div",{className:"_aou _aov"},b("React").createElement("span",{className:"_aow"},b("React").createElement(b("MessengerReactionsPrompt.react"),{message:c,messageIsSelected:!0,isQuickAdd:!0,useChatEmojiReact:b("MercuryConfig").MCER,setReactionsPromptShown:this.$1}))):null;f=b("TooltipData").propsFor(this.$2());return b("React").createElement("div",babelHelpers["extends"]({},f,{className:"_4kf7 preview"}),b("React").createElement(b("ShimButton.react"),{className:"_aou",onClick:this.$3},g,a),d)};a.prototype.$2=function(){__p&&__p();var a=this.props.message.reactions,c=this.props.participants;if(!a||!c)return"";a=Object.keys(a);var d=a.reduce(function(a,d){if(a.length>=m+1)return a;d=b("MercuryIDs").getParticipantIDFromUserID(d);d=c.get(d)||b("MessengerParticipants.bs").getNow(d);d=d&&d.name;d&&a.push(d);return a},[]),e=d.length,f=d.join("\n");if(a.length>e){d.pop();e=h._("y {count} personas m\u00e1s",[h._param("count",a.length-d.length)]);f=d.join("\n")+"\n"+e.toString()}return f};a.propTypes={isFromViewer:c.bool.isRequired,message:c.object.isRequired,participants:c.object,renderQuickAdd:c.bool,hovered:c.bool};e.exports=a}),null);
__d("MessengerDecorator",["cx","invariant","BootloadedComponent.react","CurrentUser","FantaMessageActions","JSResource","MercuryAttachment","MercuryAttachmentLayoutTypeHelper","MercuryAttachmentType","MercuryConfig","MessageReplyPermissions","MessagingTag","MessengerDecoratorUtil","MessengerEnvironment","MessengerReactions.react","QE2Logger","React","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(a){a=a.attachments&&a.attachments.length===1&&a.attachments[0]&&a.attachments[0].attach_type!==b("MercuryAttachmentType").STICKER&&!b("MessengerDecoratorUtil").isP2PAttachment(a);return!!a},j=function(a){return i(a)&&b("MercuryAttachment").isLightweightActionAttachment(a.attachments[0])},k=function(a){__p&&__p();if(m(a)||n(a)||o(a))return!1;var c=l(a);a||h(0,1760);if(!c)return!1;if(b("MercuryAttachment").isPhotoGroupAttachment(c))return!0;if(b("MessengerDecoratorUtil").isNewForwardEntrypoint(c))return!0;return b("MercuryAttachment").isFileAttachment(c)&&c.message_file_fbid?!0:!1},l=function(a){var b=a.attachments&&a.attachments.length===1;return b?a.attachments[0]:null},m=function(a){return b("gkx")("676919")&&((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)===b("StoryAttachmentStyle").MONTAGE_DIRECT},n=function(a){return!!a.removed_timestamp&&a.removed_timestamp!==0},o=function(a){return a&&a.attachments&&a.attachments.length>0&&b("MercuryAttachmentLayoutTypeHelper").isAdminType(a.attachments[0])},p=function(a){var c=[],d=[];a.attachments.forEach(function(a){a.metadata&&a.metadata.fbid?(c.push(a.metadata.fbid.toString()),d.push(a.attach_type.toString())):a.share&&a.share.share_id&&(c.push(a.share.share_id),d.push(a.attach_type)),b("MercuryAttachment").isFileAttachment(a)&&a.message_file_fbid&&(c.push(a.message_file_fbid),d.push(a.attach_type))});return{ids:c,types:d}},q=[{name:"Reactions",check:function(a,c){if(m(a)||o(a))return!1;var d=!!(a.reactions&&Object.keys(a.reactions).length>0);b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");c=!!(!c&&(k(a)||i(a)&&b("MercuryConfig").MNFWD));return(d||c)&&!j(a)},render:function(a,c,d,e){var f=k(a)||i(a)&&b("MercuryConfig").MNFWD;return b("React").createElement(b("MessengerReactions.react"),{isFromViewer:c,key:a.message_id+"-reactions",message:a,renderQuickAdd:f&&!c,hovered:e,participants:d&&d.participants})},getAdditionalClassNames:function(){return"_5z-5"}}],r=[{name:"MontageReply",check:function(a){if(!b("MercuryConfig").MontageThreadViewer||o(a))return!1;a=a.montage_reply_data&&a.montage_reply_data.message_id;return!!a},render:function(a,c,d){d=a.montage_reply_data&&a.montage_reply_data.message_id;var e=a.montage_reply_data&&a.montage_reply_data.reply_action,f=a.montage_reply_data&&a.montage_reply_data.snippet;return b("React").createElement(b("BootloadedComponent.react"),{key:"montagereply:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,messageID:d,replyAction:e,replySnippet:f,replyAuthorID:a.author,threadID:a.thread_id})},getAdditionalClassNames:function(){return null}},{name:"MessageReply",check:function(a){return!a.replied_to_message||o(a)?!1:b("gkx")("678600")||b("MercuryConfig").M3CRE},render:function(a,c,d){return b("React").createElement(b("BootloadedComponent.react"),{key:"messagereply:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,repliedToMessage:a.replied_to_message,threadID:a.thread_id,scrollToRepliedMessage:d&&d.scrollToRepliedMessage,customColor:d&&d.customColor,messageBody:a.body})},getAdditionalClassNames:function(){return null}}],s=[{name:"ForwardImages",check:function(a){return k(a)},render:function(a,c){var d=p(a),e=d.ids;d=d.types;return b("React").createElement(b("BootloadedComponent.react"),{key:"forwardimages:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("MessengerEnvironment").messengerui?b("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):b("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:e,attachmentTypes:d,isFromViewer:c})},getAdditionalClassNames:function(){return"_ylc"}},{name:"ReactionPrompt",check:function(a){return m(a)||n(a)||o(a)?!1:!k(a)&&!j(a)},render:function(a,c,d){c=b("MercuryConfig").MNFWD&&i(a);return b("React").createElement(b("BootloadedComponent.react"),{key:"reactionprompt:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:a,messageIsSelected:d&&d.messageIsSelected&&!c&&(!a.folder||a.folder===b("MessagingTag").INBOX),useChatEmojiReact:b("MercuryConfig").MCER,onShowMenu:d&&d.onShowMenu})},getAdditionalClassNames:function(){return null}},{name:"MessengerUIReplyAction",check:function(a){return b("MessageReplyPermissions").canReplyToMessage(a)?b("MessengerEnvironment").messengerui:!1},render:function(a,c,d){return b("React").createElement(b("BootloadedComponent.react"),{key:"messagereplyaction:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerMessageReplyAction.react").__setRef("MessengerDecorator"),message:a,isActive:d&&d.messageIsSelected,onReplyToMessage:d&&d.onReplyToMessage})},getAdditionalClassNames:function(){return null}},{name:"MessageActions",check:function(a){return m(a)||o(a)?!1:!0},render:function(a,c,d){var e=m(a)?!1:(k(a)||i(a)&&b("MercuryConfig").MNFWD)&&!j(a),f=null,g=d;b("MessengerEnvironment").messengerui||!!(g&&g.onReplyToMessage)?f=g&&g.onReplyToMessage:f=function(){return b("FantaMessageActions").replyToMessage(a,a.thread_id)};return b("React").createElement(b("BootloadedComponent.react"),{key:"messageactions:"+a.message_id,bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:a,isActive:d&&d.messageIsSelected,onShowMenu:d&&d.onShowMenu,isFromViewer:c,includeReactions:e,isShowingOriginal:d&&d.isShowingOriginal,hasFormatting:d&&d.hasFormatting,onToggleOriginal:d&&d.handleToggleOriginal,onReplyToMessage:f,isSavedView:d&&d.isSavedView})},getAdditionalClassNames:function(){return null}}];a={getBeforeDecorators:function(){return r},getAfterDecorators:function(){return q},getInnerDecorators:function(){return s}};e.exports=a}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={shown:!1},this.$1=function(a){this.setState({shown:a})}.bind(this),b}a.prototype.render=function(){var a=b("MessengerDecorator").getInnerDecorators().map(function(a){return a.check(this.props.message)?a.render(this.props.message,this.props.isFromViewer,babelHelpers["extends"]({},this.props.messageProps,{messageIsSelected:this.props.hovered||this.state.shown,onShowMenu:this.$1,isSavedView:this.props.isSavedView})):null}.bind(this)).filter(Boolean);return b("React").createElement("span",{className:"_40fu"+(b("Locale").isRTL()||this.props.forGameChat?" _64wc":"")},b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_2u_d")},a))};e.exports=a}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g="messenger_video",h=b("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null});a={Types:h,Namespace:g,onScroll:function(a,c,d,e){b("MessengerFluxReduceDispatcher").dispatch({type:h.SCROLL,namespace:g,threadID:a,messageIDs:c,messageRectMap:d,viewportRect:e})},updateStore:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:h.UPDATE,namespace:g,threadID:a,messageIDs:c})},deleteThread:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY,namespace:g,threadID:a})},deleteAllThreads:function(){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY_ALL,namespace:g})}};e.exports=a}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","MessengerVideoAutoplayActions","immutable","MessengerFluxReduceDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("MessengerVideoAutoplayActions").Types;g=babelHelpers.inherits(j,b("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));g&&g.prototype;function j(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return b("immutable").Map()};a.prototype.reduce=function(a,c){if(c.namespace!==b("MessengerVideoAutoplayActions").Namespace)return a;switch(c.type){case i.SCROLL:c.messageIDs&&(a=this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs));return this.$MessengerVideoAutoplayStore2(a,c.threadID,c.messageRectMap,c.viewportRect);case i.UPDATE:return this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs);case i.DESTROY:return this.$MessengerVideoAutoplayStore3(a,c.threadID);case i.DESTROY_ALL:return a.clear()}return a};a.prototype.$MessengerVideoAutoplayStore1=function(a,b,c){return!c?a["delete"](b):a.set(b,new j({currentVideoMessageID:null,lastVideoMessageID:c.first(),messageIDs:c,videoVisibilityMap:null}))};a.prototype.$MessengerVideoAutoplayStore3=function(a,b){return a["delete"](b)};a.prototype.$MessengerVideoAutoplayStore4=function(a,b,c,d,e){var f=null;c=c.map(function(a){if(f)return[a,!1];else{var b=this.$MessengerVideoAutoplayStore5(a,d,e);b&&(f=a);return[a,b]}}.bind(this)).fromEntrySeq().toOrderedMap();return a.mergeIn([b],{currentVideoMessageID:f,videoVisibilityMap:c})};a.prototype.$MessengerVideoAutoplayStore2=function(a,b,c,d){__p&&__p();var e=a.getIn([b,"messageIDs"]);if(!e||!c||!d)return a;if(!a.getIn([b,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(a,b,e,c,d);else{var f=a.getIn([b,"videoVisibilityMap"]),g=a.getIn([b,"lastVideoMessageID"]),h=a.getIn([b,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(g,c,d)){if(f&&f.first())return a}else if(this.$MessengerVideoAutoplayStore5(h,c,d))return a;a=a.setIn([b,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(a,b,e,c,d)}};a.prototype.$MessengerVideoAutoplayStore6=function(a,b){return!a?!1:a.top>b.top&&a.bottom<b.bottom};a.prototype.$MessengerVideoAutoplayStore5=function(a,b,c){b=b.get(a);return this.$MessengerVideoAutoplayStore6(b,c)};a.prototype.getVideoVisibilityMap=function(a){return this.getState().getIn([a,"videoVisibilityMap"])};a.prototype.getMessageIDs=function(a){return this.getState().getIn([a,"messageIDs"])};a.prototype.isVisible=function(a,b){return!!this.getState().getIn([a,"videoVisibilityMap",b])};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("convertMIGColorToFIGColor",["cssVar"],(function(a,b,c,d,e,f,g){"use strict";var h={"#0077e5":"#4080ff","#44bec7":"#54C7EC","#ffc300":"#f5c33b","#fa3c4c":"#F35369","#d696bb":"#d696bb","#6699cc":"#7596c8","#13cf13":"#42b72a","#ff7e29":"#F7923B","#e68585":"#e68585","#7646ff":"#8C72CB","#20cef5":"#54C7EC","#67b868":"#A3CE71","#d4a88c":"#cfa588","#ff5ca1":"#EC7EBD","#a695c7":"#AF9CDA"};function a(a){return a&&h[a]||a||""}e.exports=a}),null);
__d("ChatMessage.react",["csx","cx","fbt","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","ChatCodePasteUtils","CSS","EmojiLikeUtils","ImmutableObject","JSResource","Locale","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryTimestamp","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessage.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","immutable","isRTL","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={isVisible:!1,isHighlighted:!1,hovered:!1},this.$3=function(){return this.setState({hovered:!0})}.bind(this),this.$4=function(){return this.setState({hovered:!1})}.bind(this),b}a.prototype.componentDidMount=function(){b("CSS").conditionClass(b("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine()),this.setState({isVisible:b("MessengerVideoAutoplayStore").isVisible(this.props.message.thread_id,this.props.message.message_id)}),this.$1=b("MessengerVideoAutoplayStore").addListener(function(a){a=b("MessengerVideoAutoplayStore").isVisible(this.props.message.thread_id,this.props.message.message_id);a!==this.state.isVisible&&this.setState({isVisible:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove()};a.prototype.isOneLine=function(){var a=this.props.message;return b("MessengerMessage.bs").isInbound(a)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};a.prototype.shouldComponentUpdate=function(a,b){var c=a.message!==this.props.message,d=!1,e=!1,f=this.props.thread;if(f)d=f.custom_like_icon!==a.thread.custom_like_icon,e=f.solid_color!==a.thread.solid_color;else if(a.thread)return!0;return c||d||e||b.isVisible!==this.state.isVisible||b.isHighlighted!==this.state.isHighlighted||b.hovered!==this.state.hovered};a.prototype.render=function(){__p&&__p();var a=this.props.message,c=b("MercuryAttachment").get(a).length>0,d=b("MessengerMessage.bs").isInbound(a),e=b("MercuryIDs").isGroupChat(a.thread_id),f=b("MercuryErrorInfo").hasErrorStatus(a);c="_5wd4"+(d?" _1nc7":"")+(d?"":" _1nc6")+(c?" _2_-t":"")+(d&&e?" _5ysy":"")+(f?" _1zcs":"")+(this.state.isHighlighted?" _6iuj":"");var g=this.props.isFromViewer,h=[],i=a,j=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"";i&&b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(i)&&h.push(a.render(i,g,{customColor:j}))});d=b("MercuryAttachment").get(a).filter(function(a){return!b("MercuryAttachment").isBubblePreferred(a)});e=this.$2("outside",d);return b("React").createElement("div",{className:b("joinClasses")(this.props.className,c),onMouseEnter:this.$3,onMouseLeave:this.$4},b("React").createElement("div",{className:b("joinClasses")("._1dlq","_h8t")},h,this.$5(e)),d.some(function(a){return b("MercuryAttachment").isShareAttachment(a)})?b("React").createElement(b("MessengerInnerDecorators.react"),{message:a,isFromViewer:g||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):b("React").createElement("div",{className:"_40qi"}),this.$6())};a.prototype.$5=function(a){var c=this.props.message,d={},e=b("MessengerMessage.bs").isOutbound(c);if(e||this.props.needsTimestampTooltip){var f=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);Object.assign(d,b("TooltipData").propsFor(f,e?"right":"left"))}if(c.is_filtered_content)return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},d),b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c));f=c.body&&c.body!==""?b("isRTL")(c.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(f?" direction_rtl":"")+(f?"":" direction_ltr")+" clearfix",ref:"inner"},d),this.$7(!a),a)};a.prototype.$6=function(){var a=this.props.message;return a.is_filtered_content||!b("MessengerMessage.bs").hasError(a)?null:b("React").createElement("div",{className:"_3ry4",ref:"undertext"},b("React").createElement(b("MercuryMessageError.react"),{className:"_5wda clearfix",message:a,ref:"status"}),this.$8())};a.prototype.$8=function(){return this.props.message.is_spoof_warning?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};a.prototype.$9=function(){return b("React").createElement("div",{style:{padding:"20px",text_align:"center",background:"white"}},b("React").createElement(b("XUISpinner.react"),null))};a.prototype.$2=function(a,c){__p&&__p();if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var d=this.props.message,e=this.props.thread?this.props.thread.custom_like_icon:null,f=a=="inside"?"attachmentsInside":"attachmentsOutside",g=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"",h=[],i=[];a==="outside"&&d&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(d,this.props.isFromViewer)&&(h.push(a.render(d,this.props.isFromViewer,this.props,this.state.hovered)),i.push(a.getAdditionalClassNames()))}.bind(this));if(c.length>0){var j=b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:d,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat});return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:this.$9(),bootloadLoader:b("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:b("joinClasses")((a==="outside"?"_3e7u":"")+(d.body?" _16ys":"")+(g?" _3al":"")+" _n4o"+(h?" _1a6y":""),i),attachments:c,customLike:e,customColor:g,forGameChat:this.props.forGameChat,isChat:!0,afterDecorators:h,innerDecorators:j,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:d,onUnwrap:this.$10,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:f})}return null};a.prototype.$7=function(a){__p&&__p();var c=this.props,d=c.isFromViewer,e=c.message;c=c.thread;var f=e.body,g=b("MercuryAttachment").get(e).filter(function(a){return b("MercuryAttachment").isBubblePreferred(a)});g=this.$2("inside",g);var h=[],i=[],j=e;j&&(a&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(j,d)&&(h.push(a.render(j,d,this.props)),i.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(j,d)&&i.push(a.getAdditionalClassNames())}));var k=i.join(" ");b("ChatAnimatedGifs").shouldHideBody(e)&&(f="");var l=e.ranges;e.profile_ranges&&e.profile_ranges.length&&(l=(l||[]).concat(e.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:"/"+a.id})})));var m=b("ChatCodePasteUtils").containsCodeBlock(f);return(f||g)&&!b("EmojiLikeUtils").isEmojiLike(e)?b("React").createElement("div",{className:b("joinClasses")(k,"_1e-x _n4o")},m?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{style:{height:22}}),bootloadLoader:b("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:f,maxWidth:this.props.maxBubbleWidth,ranges:l,threadID:e.thread_id,customColor:c&&d?b("convertMIGColorToFIGColor")(c.solid_color):""}):b("React").createElement("div",{className:"_3_bl"},b("React").createElement("div",{className:"_3_bp"}),b("React").createElement(b("ChatBubble.react"),{attachments:g,body:f,className:"_5wdf",isEmojiLike:!1,isFromViewer:this.props.isFromViewer,onReplyToMessage:this.props.onReplyToMessage,metaRanges:e.meta_ranges,message:e,maxWidth:this.props.maxBubbleWidth,ranges:l,ref:"bubble",threadID:e.thread_id,customLike:e.customLike,customColor:c&&d?b("convertMIGColorToFIGColor")(c.solid_color):"",threadCustomColor:c&&b("convertMIGColorToFIGColor")(c.solid_color)})),a?b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:e,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):null,h):null};a.prototype.highlightMessage=function(){this.setState({isHighlighted:!1}),b("setImmediate")(function(){return this.setState({isHighlighted:!0})}.bind(this))};a.propTypes={forGameChat:c.bool.isRequired,message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,thread:c.instanceOf(b("ImmutableObject")),needsTimestampTooltip:c.bool};e.exports=a}),null);
__d("ChatRemovedMessageTombstoneBubble.react",["cx","DOMDimensions","MessengerInnerDecorators.react","React","ReactDOM","RemovedMessageTombstoneContent","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=2;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=0,this.state={bubbleWidth:null},this.$3=function(){var a=b("ReactDOM").findDOMNode(this.refs.bubble);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content),d=b("DOMDimensions").getElementDimensions(c).width;c=c?d+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper),"width",!0,!1,!1):0;c=c+i;d>0&&c<this.props.maxBubbleWidth&&a-c-this.getBoxWidth()>0&&this.setState({bubbleWidth:c})}.bind(this),c}a.prototype.componentDidMount=function(){this.$2(this.props)};a.prototype.componentDidUpdate=function(a){(a.maxBubbleWidth!==this.props.maxBubbleWidth||a.participants!==this.props.participants)&&this.$2(a)};a.prototype.render=function(){var a=this.props,c=a.message,d=a.maxBubbleWidth;a=a.participants;a=b("RemovedMessageTombstoneContent").getTombstoneContent(c,a).toString();return b("React").createElement("div",{className:"_1e-x _n4o"},b("React").createElement("div",{className:"_3_bl"},b("React").createElement("div",{className:"_3_bp"}),b("React").createElement("div",{ref:"bubble",className:"_3_om _72_y _5wdf",style:{maxWidth:d,width:this.state.bubbleWidth,wordWrap:a.length>=15?"break-word":"inherit"}},b("React").createElement("div",{className:"_72_z"+(this.props.message&&this.props.message.isSelected?" _1yok":""),ref:"contentWrapper"},b("React").createElement("span",{className:"_5yl5",ref:"content"},b("React").createElement("span",null,a))))),b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:c,isFromViewer:!1,hovered:this.props.hovered,messageProps:this.props,isSavedView:!1}))};a.prototype.$2=function(a){var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxBubbleWidth!==this.props.maxBubbleWidth||a.participants!==this.props.participants||b("DOMDimensions").getElementDimensions(c).width>this.props.maxBubbleWidth){a=this.props.maxBubbleWidth;this.setState({bubbleWidth:a},this.$3)}this.$3()};a.prototype.getBoxWidth=function(){this.$1||(this.$1=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble),"width",!0,!0,!1));return this.$1};a.propTypes={hovered:c.bool.isRequired,message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired};e.exports=a}),null);
__d("ChatRemovedMessageTombstoneInner.react",["cx","fbt","ChatRemovedMessageTombstoneBubble.react","Locale","MercuryTimestamp","MessengerMessage.bs","React","TooltipData","immutable","isRTL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props.message,c={},d=b("MessengerMessage.bs").isOutbound(a);if(d||this.props.needsTimestampTooltip){var e=h._("{time}",[h._param("time",b("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]);Object.assign(c,b("TooltipData").propsFor(e,d?"right":"left"))}e=a.body&&a.body!==""?b("isRTL")(a.body):b("Locale").isRTL();return b("React").createElement("div",babelHelpers["extends"]({className:"_5wd9"+(e?" direction_rtl":"")+(e?"":" direction_ltr")+" clearfix",ref:"inner"},c),b("React").createElement(b("ChatRemovedMessageTombstoneBubble.react"),{hovered:this.props.hovered,maxBubbleWidth:this.props.maxBubbleWidth,message:a,participants:this.props.participants}))};function a(){i.apply(this,arguments)}a.propTypes={hovered:c.bool.isRequired,message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,needsTimestampTooltip:c.bool};e.exports=a}),null);
__d("ChatRemovedMessageTombstone.react",["csx","cx","ChatRemovedMessageTombstoneInner.react","MercuryErrorInfo","MercuryIDs","MessengerMessage.bs","React","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=0,this.state={hovered:!1},this.$2=function(){return this.setState({hovered:!0})}.bind(this),this.$3=function(){return this.setState({hovered:!1})}.bind(this),b}a.prototype.render=function(){var a=this.props.message,c=b("MessengerMessage.bs").isInbound(a),d=b("MercuryIDs").isGroupChat(a.thread_id),e=b("MercuryErrorInfo").hasErrorStatus(a);c="_5wd4"+(c?" _1nc7":"")+(c?"":" _1nc6")+""+(c&&d?" _5ysy":"")+(e?" _1zcs":"");return b("React").createElement("div",{className:c,onMouseEnter:this.$2,onMouseLeave:this.$3},b("React").createElement("div",{className:b("joinClasses")("._1dlq","_h8t")},b("React").createElement(b("ChatRemovedMessageTombstoneInner.react"),{hovered:this.state.hovered,maxBubbleWidth:this.props.maxBubbleWidth,message:a,needsTimestampTooltip:this.props.needsTimestampTooltip,participants:this.props.participants})),b("React").createElement("div",{className:"_40qi"}))};a.propTypes={message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,needsTimestampTooltip:c.bool,participants:c.instanceOf(b("immutable").Map).isRequired};e.exports=a}),null);
__d("MessengerHoverCardLink",["URI"],(function(a,b,c,d,e,f){var g={getBaseURI:function(){return new(b("URI"))("/ajax/hovercard/chat.php")},constructEndpoint:function(a){return new(b("URI"))(g.getBaseURI()).setQueryData({id:a.id,type:"chat"})}};e.exports=g}),null);
__d("SplitImage.bs",["ReasonReact.bs","SplitImage.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("SplitImage.react"),{border:b("bs_js_null_undefined").fromOption(e),size:a,srcs:c,className:b("bs_js_null_undefined").fromOption(d)},f)}f.make=a}),null);
__d("FantaProfilePresence.bs",["cx","React","goURI","LinkReact.bs","bs_caml_array","ChatConfig","ImageReact.bs","SplitImage.bs","ReasonReact.bs","bs_js_primitive","MessengerHoverCardLink"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("FantaProfilePresence");function i(a,c,d,e,f,g,i,j,k,l,m){__p&&__p();var n=i!==void 0?i:"",o=j!==void 0?j:!1;return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){__p&&__p();var h=b("ChatConfig").get("chat_tab_m4_header")&&a.length>1;if(h){var i=Math.round(c/3)|0;i=c-i|0;i=b("React").createElement("div",{className:"_44yp",style:{height:c.toString()+"px",width:c.toString()+"px"}},b("React").createElement("div",{className:"_1gyw"},b("ReasonReact.bs").element(void 0,void 0,b("ImageReact.bs").make(void 0,"",void 0,void 0,b("bs_caml_array").caml_array_get(a,0),i,void 0,i,void 0,[]))),b("React").createElement("div",{className:"_1gyw",style:{borderColor:n}},b("ReasonReact.bs").element(void 0,void 0,b("ImageReact.bs").make(void 0,"",void 0,void 0,b("bs_caml_array").caml_array_get(a,1),i,void 0,i,void 0,[]))))}else i=b("ReasonReact.bs").element(void 0,void 0,b("SplitImage.bs").make(c,a,"_1gyw",e,[]));i=b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,g,"_2yg8",void 0,"tooltip",g,void 0,void 0,f,void 0,function(a){if(f.length>0){b("goURI")(f,void 0,void 0);a.stopPropagation();return 0}else return 0},void 0,void 0,void 0,void 0,void 0,-1,void 0,void 0,[i]));var j=k&&l!==void 0;if(j){j=b("MessengerHoverCardLink").constructEndpoint({id:l});j=b("React").cloneElement(i,{"data-hovercard":j})}else j=i;return b("React").createElement("div",{"aria-hidden":!0,className:"_6--1"+(h?" _44yq":""),style:{height:c.toString()+"px",width:c.toString()+"px"}},j,o?b("React").createElement("div",{className:"_4rwy"}):d?b("React").createElement("div",{className:"_1gyx",style:{borderColor:n}}):null)},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.images,a.imageSize,a.isActive,b("bs_js_primitive").nullable_to_opt(a.border),a.threadHref,a.tooltip,b("bs_js_primitive").nullable_to_opt(a.backgroundColor),a.showMultiCompany,a.isCanonical,b("bs_js_primitive").nullable_to_opt(a.threadFBID),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatConfig","ChatDateBreak.react","ChatMessage.react","ChatRemovedMessageTombstone.react","CurrentUser","FantaProfilePresence.bs","ImmutableObject","MercuryAttachmentLayoutTypeHelper","MercuryIDs","MercuryTimestamp","MessengerParticipants.bs","MessengerTextWithEmoticons.react","QE2Logger","React","ReactDOM","ShortProfiles","WorkForeignEntityType","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaProfilePresence.bs").jsComponent;a=b("immutable").OrderedMap;c=b("React").PropTypes;var j=new(b("ImmutableObject"))({name:"",href:"#"});d=b("React").createClass({displayName:"ChatMessageGroup",propTypes:{activeMessageID:c.string,author:c.string,forGameChat:c.bool,hasDateBreak:c.bool,isCanonical:c.bool,isFromViewer:c.bool,isPageMessage:c.bool,isOnline:c.bool,maxBubbleWidth:c.number,messages:c.instanceOf(b("immutable").List).isRequired,readReceipts:c.instanceOf(a).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,persona:c.object,thread:c.instanceOf(b("ImmutableObject")),threadID:c.string},getInitialState:function(){return{participants:{}}},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone"),this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){return this.props.isOnline!==a.isOnline||this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||!b("immutable").is(this.props.messages,a.messages)||this.state.participants!==c.participants||!b("immutable").is(this.props.thread,a.thread)},componentDidUpdate:function(a){a=k(this.props);!this._subscription&&!a.every(function(a){return this.state.participants[a]}.bind(this))&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return b("React").createElement("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(this.props.isFromViewer?"":" _ua1")+(this._containsMessageWithAdminLayoutType()?" _73iv":"")+(this._hasSeenHeadsAtBottom()?" _3lil":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_ua2"},this._renderName(),b("React").createElement("div",{className:"_4tdv"},this._renderMessages())))},_needsProfileColumn:function(){if(b("ChatConfig").getBool("always_show_profile_in_one_on_one_threads"))return!0;if(!this.props.isCanonical)return!0;if(this.props.persona)return!0;var a=this.state.participants[this.props.author];return a&&a.user_type==="page"?!0:!1},_containsMessageWithAdminLayoutType:function(){return this.props.messages==null?!1:this.props.messages.some(function(a){if(a.attachments!=null&&a.attachments.length>0){a=a.attachments[0];return b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}return!1})},_renderProfileColumn:function(){__p&&__p();if(this.props.isFromViewer||!this._needsProfileColumn()||this._containsMessageWithAdminLayoutType())return null;var a=this.state.participants[this.props.author]||j,c=a.name,d=a.image_src;this.props.persona&&(c=this.props.persona.name,d=this.props.persona.profile_picture_url);c=h._("{name} {time}",[h._param("name",c),h._param("time",b("MercuryTimestamp").getPreciseTimestamp(this.props.messages.last().timestamp))]);var e=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);e=e?b("ShortProfiles").getNow(e):null;e=e&&e.is_messenger_only;var f=b("gkx")("697231")&&this.props.isOnline;f=f&&!e;e=b("CurrentUser").isWorkUser()&&((e=a)!=null?(e=e.work_foreign_entity_info)!=null?e.type:e:e)===b("WorkForeignEntityType").FOREIGN;a=this.props.persona?null:a.href;var g=this.props.thread;return b("React").createElement("div",{className:"_31o4"},b("React").createElement(i,{border:!0,imageSize:"28",images:[d],isActive:f,isCanonical:g.is_canonical,showMultiCompany:e,threadFBID:g.thread_fbid,threadHref:a,tooltip:c}))},_renderName:function(){__p&&__p();if(this.props.isCanonical&&!this.props.persona||this.props.isFromViewer)return null;var a=this.state.participants[this.props.messages.first().author];if(!a)return null;if(this.props.messages.first().replied_to_message)return null;var c=a.short_name;if(this.props.thread&&this.props.thread.custom_nickname){a=b("MercuryIDs").getUserIDFromParticipantID(a.id);this.props.thread.custom_nickname[a]&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:this.props.thread.custom_nickname[a]}))}if(this.props.persona){a=this.state.participants[this.props.messages.first().author];c=a?h._("{persona name} de {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",a.short_name)]):this.props.persona.name}return b("React").createElement("div",{className:"_4tdx"},c)},_renderMessages:function(){__p&&__p();var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID;g&&!(e===0&&this.props.hasDateBreak)&&c.push(b("React").createElement(b("ChatDateBreak.react"),{date:new Date(d.timestamp),key:"db:"+d.message_id}));if(d.removed_timestamp&&d.removed_timestamp!==0){c.push(b("React").createElement(b("ChatRemovedMessageTombstone.react"),{key:d.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:d,needsTimestampTooltip:!this._needsProfileColumn(),participants:b("immutable").Map(this.state.participants),ref:d.message_id}));return}c.push(b("React").createElement(b("ChatMessage.react"),{forGameChat:!!this.props.forGameChat,isFromViewer:this.props.isFromViewer,key:d.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:d,participants:b("immutable").Map(this.state.participants),readReceipts:this.props.readReceipts,ref:d.message_id,nextTimestamp:this._getNextTimestamp(f,a,e),onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,thread:this.props.thread,needsTimestampTooltip:!this._needsProfileColumn()}))}.bind(this));return c},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){return a>=d&&a<c&&++e===2?!1:null});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},getMessage:function(a){return this.refs[a]},_computeParticipants:function(){__p&&__p();var a=k(this.props),c={},d=[];a.forEach(function(a){var e=b("MessengerParticipants.bs").getNow(a);c[a]=e;e||d.push(a)});this.setState({participants:c});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var a=this.state.participants;d.forEach(function(c){a[c]=b[c]});this._subscription=null;this.setState({participants:a})}.bind(this)):null}});function k(a){var b=[a.author];a.readReceipts.forEach(function(a,c){b.push(c)});return b}e.exports=d}),null);
__d("FantaDropdownMenuWebDriverTestIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FANTA_DROPDOWN_MENU:"fanta_dropdown_menu",FANTA_DROPDOWN_MENU_ICON:"fanta_dropdown_menu_icon",LOG_MESSAGE_TEXT:"log_message_text",ADD_FRIENDS:"fanta_dropdown_menu_add_friends",BLOCK:"fanta_dropdown_menu_block",BLOCK_PAGE_MESSAGES:"fanta_dropdown_menu_block_page_messages",CHANGE_COLOR:"fanta_dropdown_menu_change_color",CHANGE_EMOJI:"fanta_dropdown_menu_change_emoji",CONVERSATION_NAME:"fanta_dropdown_menu_conversation_name",CREATE_EVENT:"fanta_dropdown_menu_create_event",CREATE_GROUP:"fanta_dropdown_menu_create_group",DELETE_CONVERSATION:"fanta_dropdown_menu_delete_conversation",EDIT_NICKNAME:"fanta_dropdown_menu_edit_nickname",IGNORE_MESSAGES:"fanta_dropdown_menu_ignore_messages",LEAVE_CONVERSATION:"fanta_dropdown_menu_leave_conversation",LEAVE_FEEDBACK:"fanta_dropdown_menu_leave_feedback",MUTE_CONVERSATION:"fanta_dropdown_menu_mute_conversation",OPEN_FACEBOOK_PAGE:"fanta_dropdown_menu_open_facebook_page",OPEN_FULL_CONVERSATION:"fanta_dropdown_menu_open_full_conversation",PIN_CONVERSATION:"fanta_dropdown_menu_pin_conversation",PEOPLE_LIST:"fanta_dropdown_menu_people_list",REPORT:"fanta_dropdown_menu_report",MUTE_CONVERSATION_TEXT:"fanta_dropdown_menu_mute_conversation_text"})}),null);
__d("MessagesViewerSetID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"})}),null);
__d("MessagesViewer",["AsyncRequest","DOM","MessagesViewerSetID","PhotoStore","React","ReactDOM","ge"],(function(a,b,c,d,e,f){__p&&__p();a={renderSpotlight:function(a,c,d,e){var f=a.setID;f||(f=b("MessagesViewerSetID").MESSAGES);g(b("React").createElement(d,{actorid:a.actorid,dimensions:[a.dimensions],disablepaging:a.disablePaging,disableForward:a.disableForward,forwardDialogComponent:e,open:!0,photoid:a.fbid,reverse:!1,rootClassName:a.rootClassName,setid:f,snapToPhoto:a.snapToPhoto,thumbsrc:a.src}));if(!b("PhotoStore").hasBeenCreated(f)&&a.endpoint){d=new(b("AsyncRequest"))(a.endpoint);c&&d.setRelativeTo(c);d.send()}},renderVideo:function(a){g(a)}};function g(a){var c=b("ge")("messages_viewer");c||(c=b("DOM").create("div",{id:"messages_viewer"}),document.body.appendChild(c));b("ReactDOM").render(a,c,function(){this.subscribeOnce("close",function(){b("ReactDOM").unmountComponentAtNode(c)})})}e.exports=a}),null);
__d("MercuryMessageRendererUtils",["cx","invariant","HovercardLink","MercuryViewer","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getLinkToParticipant:function(a,c){var d=a.fbid,e=b("HovercardLink").constructEndpoint({id:d});c=c&&c.custom_nickname&&c.custom_nickname[d];c&&(c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c}));d=c?c:a.name;return a.href?b("React").createElement("a",{className:"_5wzt",href:a.href,"data-hovercard":e},d):d},moveCurrentUserToFront:function(a){a===void 0&&(a=[]);a||h(0,2427);var c=a.indexOf(b("MercuryViewer").getID());if(c>0){c=a.filter(function(a){return a!==b("MercuryViewer").getID()});return[b("MercuryViewer").getID()].concat(c)}return a}};e.exports=a}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MessengerLightweightActionUtils",["MercuryAttachmentType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!!(a&&a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.target&&a.share.target.lwa_type)}function a(a){a=a.attachments;return!!(a&&a.length===1&&g(a[0]))}function c(a){return a.attachments[0].share.title}function d(a){return a[0].share.title}e.exports={isLWAMessage:a,isLWAAttachment:g,getCollapsedLWAText:c,getLWASnippetText:d}}),null);
__d("MercuryLogMessageRenderer",["cx","fbt","invariant","ix","Bootloader","CSS","CurrentUser","Image.react","MercuryAttachmentViewer","MercuryLogMessageType","MercuryMessageRendererUtils","MercuryViewer","MessagingSourceEnum","MessengerAdminGroupUtils","MessengerLightweightActionUtils","MessengerParticipants.bs","MessengerState.bs","MessengerTextWithEmoticons.react","React","ReactDOM","TooltipLink.react","UserAgent","convertMIGColorToFIGColor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a={renderText:function(a,c,d,e){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);if(b("MessengerLightweightActionUtils").isLWAMessage(a)){e(b("MessengerLightweightActionUtils").getCollapsedLWAText(a));return}switch(a.log_message_type){case b("MercuryLogMessageType").SUBSCRIBE:var f=a.author;a.log_message_data||i(0,2425);var g=a.log_message_data.added_participants;g||i(0,2426);f=g.length===1&&f===g[0];g=c&&b("MessengerAdminGroupUtils").isWorkFroup(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadMemberSyncMessage(a);f||g?b("Bootloader").loadModules(["MercuryJoinableMessageRenderer"],function(b){b.renderText(a,c,e)},"MercuryLogMessageRenderer"):m(a,e);break;case b("MercuryLogMessageType").UNSUBSCRIBE:b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?A(a,e):s(a,e):r(a,e);break;case b("MercuryLogMessageType").THREAD_NAME:c&&b("MessengerAdminGroupUtils").isWorkFroup(c)&&b("MessengerAdminGroupUtils").isWorkSyncedChatThreadCreationMessage(a)?v(a,e):c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?B(a,c,e):t(a,c,e):w(a,c,e);break;case b("MercuryLogMessageType").THREAD_IMAGE:c&&b("MessengerAdminGroupUtils").isJoinableThread(c)?b("MessengerAdminGroupUtils").isGroupChat(c)?C(a,c,e):x(a,c,e):y(a,c,e);break;case b("MercuryLogMessageType").WALLPAPER:z(a,e);break;case b("MercuryLogMessageType").GENERIC_ADMIN_TEXT:var h=b("convertMIGColorToFIGColor")(c&&c.solid_color);b("Bootloader").loadModules(["MercuryXMATRenderer"],function(b){e(b.renderText(h,a,d))},"MercuryLogMessageRenderer");break;default:b("Bootloader").loadModules(["MercurySpecialLogMessageRenderer"],function(b){b.renderText(a,e)},"MercuryLogMessageRenderer");break}},renderIcon:function(a){return b("React").createElement(b("Image.react"),{className:k(a.log_message_type,a.log_message_data),src:j("99239")})},renderLegacy:function(a,c,d,e){k(e.log_message_type,e.log_message_data).split(" ").forEach(function(c){return c&&b("CSS").addClass(a,c)}),this.renderText(e,null,!1,function(a){b("ReactDOM").render(b("React").createElement("span",null,a),c)}),this.renderAttachmentLegacy(d,e)},renderAttachmentLegacy:function(a,c){if(c.log_message_type===b("MercuryLogMessageType").THREAD_IMAGE){c.log_message_data||i(0,2425);var d=c.log_message_data.image;d&&d.preview_url&&(b("ReactDOM").render(b("React").createElement(b("Image.react"),{className:"_z6a",onClick:function(){return l(d)},src:d.preview_url}),a),b("CSS").show(a))}}};e.exports=a;function k(a,c){c=!!(c&&c.answered);var d=!a||a===b("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return"_5wzu"+(a===b("MercuryLogMessageType").SUBSCRIBE?" _5wzj":"")+(a===b("MercuryLogMessageType").UNSUBSCRIBE?" _5wzk":"")+(a===b("MercuryLogMessageType").THREAD_NAME?" _5wzl":"")+(a===b("MercuryLogMessageType").THREAD_IMAGE?" _5wzm":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&c?" _5wzn":"")+(a===b("MercuryLogMessageType").VIDEO_CALL&&!c?" _5wzo":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&c?" _5wzp":"")+(a===b("MercuryLogMessageType").PHONE_CALL&&!c?" _5wzq":"")+(a===b("MercuryLogMessageType").SERVER_ERROR?" _5wzr":"")+(d?" _2r5l":"")}function l(a){b("MercuryAttachmentViewer").bootstrapWithConfig({src:a.preview_url,endpoint:a.url,fbid:a.metadata.fbid,dimensions:a.metadata.dimensions,disablePaging:!0},null)}function m(a,c){__p&&__p();a.log_message_data||i(0,1204);var d=b("MercuryMessageRendererUtils").moveCurrentUserToFront(a.log_message_data.added_participants);d||i(0,1205);switch(d.length){case 1:n(a,c,d);break;case 2:o(a,c,d);break;case 3:p(a,c,d);break;default:q(a,c,d);break}}function n(a,c,d){var e=[a.author,d[0]];b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Has a\u00f1adido a {subscriber1}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} te ha a\u00f1adido.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author]))])):c(h._("{actor} ha a\u00f1adido a {subscriber1}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]]))]))})}function o(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Has a\u00f1adido a {subscriber1} y {subscriber2}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} te ha a\u00f1adido a ti y a {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))])):c(h._("{actor} ha a\u00f1adido a {subscriber1} y {subscriber2}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]]))]))})}function p(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){a.author===b("MercuryViewer").getID()?c(h._("Has a\u00f1adido a {subscriber1}, {subscriber2} y {subscriber3}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} te ha a\u00f1adido a ti y a {subscriber2} y {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))])):c(h._("{actor} ha a\u00f1adido a {subscriber1}, {subscriber2} y {subscriber3}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[0]])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[1]])),h._param("subscriber3",b("MercuryMessageRendererUtils").getLinkToParticipant(e[d[2]]))]))})}function q(a,c,d){var e=[a.author].concat(d);b("MessengerParticipants.bs").getMulti(e,function(e){function f(a){var c=b("React").createElement("div",null,a.map(function(a){return b("React").createElement("div",null,a.name)}));return b("React").createElement(b("TooltipLink.react"),{alignH:"center",position:"above",tooltip:c},h._({"*":"{num} personas m\u00e1s"},[h._param("num",a.length,[0])]))}var g=d.map(function(a){return e[a]});a.author===b("MercuryViewer").getID()?c(h._("Has a\u00f1adido a {subscriber1}, {subscriber2} y {more_people}.",[h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):d[0]===b("MercuryViewer").getID()?c(h._("{actor} te ha a\u00f1adido a ti y a {subscriber2} y {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))])):c(h._("{actor} ha a\u00f1adido a {subscriber1}, {subscriber2} y {more_people}.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e[a.author])),h._param("subscriber1",b("MercuryMessageRendererUtils").getLinkToParticipant(g[0])),h._param("subscriber2",b("MercuryMessageRendererUtils").getLinkToParticipant(g[1])),h._param("more_people",f(g.slice(2)))]))})}function r(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Has abandonado la conversaci\u00f3n.")):c(h._("Has eliminado a {name} de la conversaci\u00f3n.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} ha abandonado la conversaci\u00f3n.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} te ha eliminado de la conversaci\u00f3n.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} ha eliminado a {name} de la conversaci\u00f3n.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function s(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Has abandonado la sala.")):c(h._("Has eliminado a {name} de la sala.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} left the room.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} te ha eliminado de la sala.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} ha eliminado a {name} de la sala.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function t(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Has asignado un nombre a la sala: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Has eliminado el nombre de la sala."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} ha asignado un nombre a la sala: {name}.",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} ha eliminado el nombre de la sala.",[h._param("actor",a)]))})}function u(a,c,d,e,f){a.author===b("MercuryViewer").getID()?f(h._("Has asignado al grupo el nombre {thread_name}. Tu grupo tambi\u00e9n est\u00e1 en Facebook.",[h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))])):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);f(h._("{actor} ha asignado al grupo el nombre {thread_name}. Tu grupo tambi\u00e9n est\u00e1 en Facebook.",[h._param("actor",a),h._param("thread_name",b("React").createElement("span",{className:e},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d})))]))})}function v(a,c){a.log_message_data||i(0,2425);a=a.log_message_data.name;var d="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a){c(h._("Ahora puedes chatear con {name} en el chat de Workplace.",[h._param("name",b("React").createElement("span",{className:d},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:a})))]));return}}function w(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1)d(h._("Se ha asignado el nombre {name} al grupo.",[h._param("name",b("React").createElement("span",{className:f},b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e})))]));else if(e&&a.tags&&a.tags.indexOf(b("MessagingSourceEnum").GROUPSYNC_NAMING)!==-1)u(a,c,e,f,d);else if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Has asignado un nombre a la conversaci\u00f3n: {name}.",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Has eliminado el nombre de la conversaci\u00f3n."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} ha llamado a la conversaci\u00f3n \"{name}\".",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} ha eliminado el nombre de la conversaci\u00f3n.",[h._param("actor",a)]))})}function x(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("Has cambiado la foto de la sala.")):d(h._("Has eliminado la foto de la sala."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} ha cambiado la foto de la sala.",[h._param("actor",e)])):d(h._("{actor} ha eliminado la foto de la sala.",[h._param("actor",e)]))})}function y(a,c,d){a.tags!==void 0&&a.tags.indexOf(b("MessagingSourceEnum").EVENT_UPCOMING_BUMP)!==-1?d(h._("Se ha establecido la imagen de la conversaci\u00f3n.")):a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("Has cambiado la imagen de la conversaci\u00f3n.")):d(h._("Has eliminado la imagen de la conversaci\u00f3n."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} ha cambiado la imagen de la conversaci\u00f3n.",[h._param("actor",e)])):d(h._("{actor} ha eliminado la imagen de la conversaci\u00f3n.",[h._param("actor",e)]))})}function z(a,c){a.author===b("MercuryViewer").getID()?c(h._("Has cambiado el fondo de pantalla.")):b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a);c(h._("{actor} ha cambiado el fondo de pantalla.",[h._param("actor",a)]))})}function A(a,c){__p&&__p();var d=[a.author];a.log_message_data||i(0,2425);var e=a.log_message_data.removed_participants;e||i(0,2427);var f;e.length===1&&(f=e[0],d.push(f));b("MessengerParticipants.bs").getMulti(d,function(d){var e=d[a.author];d=d[f];a.author===b("MercuryViewer").getID()?!f||f===a.author?c(h._("Has abandonado el chat.")):c(h._("Has eliminado a {name} del chat.",[h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))])):!f||f===a.author?c(h._("{actor} ha abandonado el chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):f===b("MercuryViewer").getID()?c(h._("{actor} te ha eliminado del chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e))])):c(h._("{actor} ha eliminado a {name} del chat.",[h._param("actor",b("MercuryMessageRendererUtils").getLinkToParticipant(e)),h._param("name",b("MercuryMessageRendererUtils").getLinkToParticipant(d))]))})}function B(a,c,d){__p&&__p();a.log_message_data||i(0,2425);var e=a.log_message_data.name,f="_5wzs"+(b("UserAgent").isBrowser("Chrome")?" _4fbd":"");if(a.author===b("MercuryViewer").getID())if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("Has asignado al chat el nombre \"{name}\".",[h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("Has eliminado el nombre del chat."));else b("MessengerParticipants.bs").get(a.author,function(a){a=b("MercuryMessageRendererUtils").getLinkToParticipant(a,c);if(e){var g=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:e});d(h._("{actor} ha asignado al chat el nombre \"{name}\".",[h._param("actor",a),h._param("name",b("React").createElement("span",{className:f},g))]))}else d(h._("{actor} ha eliminado el nombre del chat.",[h._param("actor",a)]))})}function C(a,c,d){a.author===b("MercuryViewer").getID()?(a.log_message_data||i(0,2425),a.log_message_data.image?d(h._("Has cambiado la imagen del perfil.")):d(h._("Has eliminado la imagen del chat."))):b("MessengerParticipants.bs").get(a.author,function(e){e=b("MercuryMessageRendererUtils").getLinkToParticipant(e,c);a.log_message_data||i(0,2425);a.log_message_data.image?d(h._("{actor} ha cambiado la imagen del chat.",[h._param("actor",e)])):d(h._("{actor} ha eliminado la imagen del chat.",[h._param("actor",e)]))})}}),null);
__d("MercuryLogMessage.react",["cx","fbt","DOM","DOMDimensions","Event","EventReminderRequestHelper","FantaDropdownMenuWebDriverTestIDs","MercuryLogMessageRenderer","MercuryLogMessageType","MessagingGenericAdminTextType","React","ReactDOM","ShimButton.react","cancelAnimationFrame","emptyFunction","formatDate","joinClasses","requestAnimationFrame","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=266;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={messageText:null,showEventReminderFlyout:!1},this.$4=function(){this.$5()}.bind(this),this.$9=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;!this.state.showEventReminderFlyout&&a?b("EventReminderRequestHelper").fetchEventReminder(this.props.thread.thread_id,a,function(){this.$1&&this.setState({showEventReminderFlyout:!0})}.bind(this)):this.setState({showEventReminderFlyout:!1})}.bind(this),this.$11=function(a){a!==this.state.showEventReminderFlyout&&this.setState({showEventReminderFlyout:a})}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=!0,this.UNSAFE_componentWillReceiveProps(this.props)};a.prototype.componentWillUnmount=function(){this.$1=!1,this.$2&&b("cancelAnimationFrame")(this.$2)};a.prototype.$3=function(){return b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$4},h._("Mostrar los mensajes anteriores."))};a.prototype.$5=function(){var a=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(!this.$1)return;if(a)this.setState({messageText:this.$3()});else{a=h._("No se han encontrado los mensajes anteriores.");this.setState({messageText:a})}};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(a.message.log_message_type===b("MercuryLogMessageType").SERVER_ERROR)return;b("MercuryLogMessageRenderer").renderText(a.message,a.thread,a.isLastOfType,function(a){this.$1&&this.setState({messageText:a})}.bind(this))};a.prototype.shouldComponentUpdate=function(a,b){return this.state.messageText!=b.messageText||a.maxWidth!==this.props.maxWidth||this.state.showEventReminderFlyout!==b.showEventReminderFlyout};a.prototype.componentDidUpdate=function(){this.$6();if(!this.refs.attachment)return;b("MercuryLogMessageRenderer").renderAttachmentLegacy(this.refs.attachment,this.props.message);b("DOM").scry(this.refs.wrap,"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){this.$6(),c.remove()}.bind(this))}.bind(this))};a.prototype.render=function(){return b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_5ye6"),ref:"wrap",style:babelHelpers["extends"]({},this.props.style,this.$7()),title:b("formatDate")(new Date(this.props.message.timestamp),"g:ia")}),b("React").createElement("div",{className:"_5ye7"},b("MercuryLogMessageRenderer").renderIcon(this.props.message),b("React").createElement("span",{"data-testid":b("FantaDropdownMenuWebDriverTestIDs").LOG_MESSAGE_TEXT},this.state.messageText)),b("React").createElement("div",{className:"_5ye8",ref:"attachment"},this.$8()))};a.prototype.$8=function(){__p&&__p();var a;if(this.props.thread&&!this.props.thread.lightweight_event||!this.props.message.log_message_data)return null;if(!this.props.event||!this.props.event.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var c;b("requireWeak")("Link.react",function(a){c=a});var d;switch(this.props.message.log_message_data.message_type){case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:d=h._("Cambiar");break;default:d=null}a=b("React").createElement(c,{href:"#",onClick:this.$9,title:h._("Editar evento"),ref:"event_rem_link"},d);this.props.displayItems&&(a=null);return b("React").createElement("span",null,a,this.$10())};a.prototype.$10=function(){__p&&__p();var a;if(!this.state.showEventReminderFlyout)return null;var c="right",d=b("ReactDOM").findDOMNode(this.refs.wrap);d&&d instanceof Element&&d.getBoundingClientRect().left<j&&(c="left");d={alignment:c,position:"above",contextRef:function(){return this.refs.event_rem_link}.bind(this),shown:this.state.showEventReminderFlyout,onToggle:this.$11};var e;b("requireWeak")("EventsActionsLogger",function(a){e=a});c={action_history:[{surface:e.Surface.MESSENGER_CHAT_TAB,mechanism:e.Mechanism.REMINDER_ADMIN_TEXT}]};a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;a={threadID:this.props.thread.thread_id,eventID:a,dialogProps:d,flyoutNoSheet:!0,isEditing:!0,actionContext:c};var f;b("requireWeak")("ChatEventReminderContainer.react",function(a){f=a});return b("React").createElement(f,a)};a.prototype.$7=function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null};a.prototype.$6=function(){this.$2&&b("cancelAnimationFrame")(this.$2);if(!this.$1)return;this.$2=b("requestAnimationFrame")(function(){this.props.onImageLoad&&this.props.onImageLoad(b("DOMDimensions").getElementDimensions(this.refs.wrap).height),delete this.$2}.bind(this))};a.propTypes={loadMoreMessages:c.func,maxWidth:c.number,message:c.object.isRequired,onImageLoad:c.func,thread:c.object,isLastOfType:c.bool.isRequired,event:c.object};a.defaultProps={onImageLoad:b("emptyFunction")};e.exports=a}),null);
__d("MercuryLogMessageContainer.react",["EventReminderStateStore","FluxContainer","MercuryLogMessage.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("EventReminderStateStore")]};a.calculateState=function(a,c){a=(a=c.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a;return{event:b("EventReminderStateStore").getEvent(c.thread?c.thread.thread_id:"",a)}};a.prototype.render=function(){return b("React").createElement(b("MercuryLogMessage.react"),{className:this.props.className,onLogMessageExpanded:this.props.onLogMessageExpanded,loadMoreMessages:this.props.loadMoreMessages,message:this.props.message,onImageLoad:this.props.onImageLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:this.props.isLastOfType,event:this.state.event})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentLayoutTypeHelper","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","MessengerMessage.bs","enumerate","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={calculateMessageGroups:function(a,c){__p&&__p();var d=[],e=null,f={value:null};a=b("enumerate")(a);var h;while(!(h=a.next()).done){var i=g.canAppendMessageToLastGroup(f.value,h.value,c);i||(e=[],d.push(e));e.push(h.value);f=h}return d},canAppendMessageToLastGroup:function(a,c,d){var e=b("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!a||h(a,d)||h(c,d)||a.author!=c.author||a.timestamp<c.timestamp-e||a.is_spoof_warning!==c.is_spoof_warning||a.page_admin_notes||c.replied_to_message)return!1;d=b("MessengerMessage.bs").getPersona(a);e=b("MessengerMessage.bs").getPersona(c);if(!d&&!e)return!0;return!b("gkx")("678634")?!0:d===null||e===null?!1:d.id===e.id}};function h(a,c){var d=a.has_attachment;d&&(c===b("MercuryShareAttachmentRenderLocations").MESSENGER||c===b("MercuryShareAttachmentRenderLocations").CHAT)&&(d=i(a));return!!(b("MessengerLightweightActionUtils").isLWAMessage(a)||a.action_type==b("MercuryActionType").LOG_MESSAGE||d||a.html_body||a.body&&a.body.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function i(a){a=a.attachments[0];return!a||a.attach_type===b("MercuryAttachmentType").STICKER||a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE||b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}e.exports=g}),null);
__d("MessengerCallLogEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_CALL_ENDED:"group_call_ended",GROUP_CALL_STARTED:"group_call_started",INVITED_TO_CALL:"invited_to_call",MISSED_CALL:"missed_call",ONE_ON_ONE_CALL_ENDED:"one_on_one_call_ended"})}),null);
__d("MessengerDomIDs.bs",["uniqueID"],(function(a,b,c,d,e,f){"use strict";a={COMPOSER_INPUT_DESCRIPTION:b("uniqueID")(),CONVERSATION:b("uniqueID")(),MAIN_LABEL:b("uniqueID")(),MUTE_DIALOG_TITLE:b("uniqueID")(),THREAD_INFO_PANEL:b("uniqueID")(),THREAD_TITLE:b("uniqueID")()};f.ids=a}),null);
__d("MessengerGrowthNewFriendBumpSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NEW_FRIEND_BUMP:"new_friend_bump",INSTANT_GAMES:"instant_games",ICEBREAKER:"icebreaker"})}),null);
__d("MessengerParticipantUtils.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return b("bs_belt_Set").has(c,a)})}d=b("bs_belt_Set").has;function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}function c(a,b,c){return g(a,b,c).length>0}f.findIntersection=g;f.has=d;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a;f.areParticipantsInThread=c}),null);
__d("OnlineUserIds.bs",["bs_belt_Set","ParticipantId.bs"],(function(a,b,c,d,e,f){"use strict";function a(){return b("bs_belt_Set").make([b("ParticipantId.bs").cmp])}function c(a){return b("bs_belt_Set").fromArray(a,[b("ParticipantId.bs").cmp])}f.make=a;f.fromArray=c}),null);
__d("MessengerPresenceProvider.bs",["FBID.bs","bs_curry","Arbiter","bs_belt_Set","bs_caml_obj","bs_belt_Array","MercuryIDs","bs_belt_Option","ReasonReact.bs","bs_js_primitive","OnlineUserIds.bs","ParticipantId.bs","PresenceStatus","PresencePrivacy","AvailableListConstants","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=["privacy-changed","privacy-availability-changed","privacy-user-presence-response"];function a(){return b("OnlineUserIds.bs").make(0)}function c(a,c){if(a){a=a[0];var d=b("bs_caml_obj").caml_equal(b("PresenceStatus").get(a),b("AvailableListConstants").ACTIVE);if(d)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(a));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(a))}else return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(b("PresenceStatus").getOnlineIDs(),function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)}),[b("ParticipantId.bs").cmp])}function d(a,c){__p&&__p();b("PresencePrivacy").subscribe(g,function(){return b("bs_curry")._1(c,0)});b("bs_curry")._1(c,0);b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(a,d){if(d==null)return 0;else{a=b("FBID.bs").ofStringExn(d);return b("bs_curry")._1(c,[a])}});return 0}e=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([a,c,d,"MessengerPresenceProvider"]);a=e[0];var h=e[1];function i(a){return b("bs_curry")._1(h,function(c,d){if(a!==void 0){d=b("bs_belt_Set").union(b("bs_belt_Set").diff(c,d),b("bs_belt_Set").diff(d,c));return!b("bs_belt_Set").isEmpty(b("bs_belt_Set").intersect(d,b("bs_js_primitive").valFromOption(a)))}else return!1})}c=b("ReasonReact.bs").wrapReasonForJs(a,function(a){return b("bs_curry")._3(i(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(a.subscribeToIDs),function(a){return b("bs_belt_Set").fromArray(a,[b("ParticipantId.bs").cmp])})),void 0,b("bs_js_primitive").nullable_to_opt(a.fbid),a.children)});d=e[2];f.privacyEvents=g;f.component=a;f.send=d;f.make=i;f.jsComponent=c}),null);
__d("PagesMessagingMercuryChatTabActionKeys",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({REQUEST_GREETING_CONFIG:null,NOTIFY_GREETING_CONFIG_RECEIVED:null});e.exports=a}),null);
__d("PagesMessagingMercuryChatTabDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("PagesMessagingMercuryChatTabActions",["PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabDispatcher"],(function(a,b,c,d,e,f){"use strict";a={requestGreetingConfig:function(a){b("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:b("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG,threadID:a})},notifyGreetingConfigReceived:function(a,c){b("PagesMessagingMercuryChatTabDispatcher").dispatch({actionType:b("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED,threadID:a,payload:c})}};e.exports=a}),null);
__d("PagesMessagingMercuryChatTabState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("immutable").Record({pagesGreetingShouldShow:!1,pagesGreetingContent:null,pageResponsiveness:null,coverPhotoData:null,connectionContext:null,pageOnlineMessage:null,icebreakers:null}));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/mercury/greeting/",{})}),null);
__d("PagesMessagingMercuryChatTabStore",["invariant","AsyncRequest","FluxStore","MercuryIDs","PagesMessagingMercuryChatTabActionKeys","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabDispatcher","PagesMessagingMercuryChatTabState","XMercuryChatTabPagesNullStateConfigController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesMessagingMercuryChatTabDispatcher")),this.$PagesMessagingMercuryChatTabStore1=new Map()}a.prototype.getStateByThread=function(a){this.$PagesMessagingMercuryChatTabStore1.has(a)||this.$PagesMessagingMercuryChatTabStore1.set(a,new(b("PagesMessagingMercuryChatTabState"))());a=this.$PagesMessagingMercuryChatTabStore1.get(a);a||g(0,2437);return a};a.prototype.__onDispatch=function(a){var c=a.actionType,d=a.payload;a=a.threadID;var e=this.getStateByThread(a);e||g(0,2438);switch(c){case b("PagesMessagingMercuryChatTabActionKeys").REQUEST_GREETING_CONFIG:this.$PagesMessagingMercuryChatTabStore2(a);break;case b("PagesMessagingMercuryChatTabActionKeys").NOTIFY_GREETING_CONFIG_RECEIVED:this.$PagesMessagingMercuryChatTabStore3(a,this.$PagesMessagingMercuryChatTabStore4(d,e));break}};a.prototype.$PagesMessagingMercuryChatTabStore2=function(a){var c=b("XMercuryChatTabPagesNullStateConfigController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setData({page_id:b("MercuryIDs").getUserIDFromThreadID(a)}).setHandler(function(c){return b("PagesMessagingMercuryChatTabActions").notifyGreetingConfigReceived(a,c.payload)}).send()};a.prototype.$PagesMessagingMercuryChatTabStore3=function(a,b){this.$PagesMessagingMercuryChatTabStore1.set(a,b),this.__emitChange()};a.prototype.$PagesMessagingMercuryChatTabStore4=function(a,b){var c=b.set("pagesGreetingShouldShow",a.pagesGreetingShouldShow).set("pagesGreetingContent",a.pagesGreetingContent).set("pageResponsiveness",a.pageResponsiveness).set("coverPhotoData",a.coverPhotoData).set("connectionContext",a.connectionContext).set("pageOnlineMessage",a.pageOnlineMessage);(b.icebreakers===null||b.icebreakers===void 0||Object.keys(b.icebreakers).length===0)&&(c=c.set("icebreakers",a.icebreakers));return c};a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesMessageListGreeting.react",["cx","FluxContainer","PagesMessagingMercuryChatTabActions","PagesMessagingMercuryChatTabStore","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.getStores=function(){return[b("PagesMessagingMercuryChatTabStore")]};a.calculateState=function(a,c){if(c.messageCount>0)return{shouldShowGreeting:!1};a=b("PagesMessagingMercuryChatTabStore").getStateByThread(c.threadID);return{greetingContent:a.pagesGreetingContent,shouldShowGreeting:a.pagesGreetingShouldShow}};a.prototype.componentDidMount=function(){b("PagesMessagingMercuryChatTabActions").requestGreetingConfig(this.props.threadID)};a.prototype.render=function(){return!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0?null:b("React").createElement("div",{className:"_4fsh _3-8z"},this.state.greetingContent)};function a(){h.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageList.react",["cx","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerCallLogEvent","MessengerDomIDs.bs","MessengerGrowthNewFriendBumpSubtype","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","PagesMessageListGreeting.react","React","ReactDOM","gkx","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDomIDs.bs").ids,j=b("MessengerPresenceProvider.bs").jsComponent;c=b("React").PropTypes;var k=2,l=1e3*60*60,m=6,n=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;switch(c){case b("MessagingGenericAdminTextType").GROUP_POLL:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.question_id:c:c:c;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.game_id:c:c:c;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;case b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST:c=((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.friend_request_subtype:c:c:c)||((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.subtype:c:c:c);return!c||c.toLowerCase()!==b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER?null:q(a);case b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST:return q(a);default:return null}},o=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={activeMessageID:null,messageGroups:[],prevMessages:null},this.$5=function(a){this.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})}.bind(this),this.$6=function(a){this.setState({activeMessageID:a})}.bind(this),b}a.getDerivedStateFromProps=function(a,c){if(c.prevMessages!==a.messages)return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};a.prototype.render=function(){__p&&__p();var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.MessageGroup,h=c.CollapsedLogMessageGroup,q=[],v=[],w;c=this.props.thread&&this.props.thread.solid_color;var x=c?{backgroundColor:c}:null,y=this.state.activeMessageID,z=this.state.messageGroups,A=z.length,B=this.props.readReceipts;c=B.last();var C=c?c.watermark:0,D=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),E={};for(var c=this.props.messages.size-1;c>=0;c--){var F=this.props.messages.get(c),G=n(F)||o(F);G&&!E[G]&&(E[G]=F.message_id)}var H=function(i){__p&&__p();var n=i>0?z[i-1]:null;n=n&&n.length>0?n[n.length-1]:null;var H=z[i],K=H[0],L=H[H.length-1],M=!1;if(!n||K.timestamp-n.timestamp>l){M=!0;n=b("React").createElement(d,{date:new Date(K.timestamp),key:"db:"+K.message_id,ref:"db:"+K.message_id});v.length===0&&q.push(n)}n=o(K);if(n&&E[n]!==K.message_id){n=a.$1(K,E);q.push(n);return"continue"}if(K.action_type==b("MercuryActionType").LOG_MESSAGE){n=(G=K)!=null?(G=G.log_message_data)!=null?G.message_type:G:G;var N=(F=K)!=null?(F=F.log_message_data)!=null?(F=F.untypedData)!=null?F.friend_request_subtype:F:F:F,O=n===b("MessagingGenericAdminTextType").PARTIES_PRESENCE,P=n===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,Q=n===b("MessagingGenericAdminTextType").GROUP_POLL;N=n===b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST||n===b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST&&N&&N.toLowerCase()===b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER;var R=[b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP].includes(n);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(K.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||K.log_message_type===b("MercuryLogMessageType").PHONE_CALL||n===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG&&(((c=K)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event:c:c:c)===b("MessengerCallLogEvent").MISSED_CALL||((J=K)!=null?(J=J.log_message_data)!=null?(J=J.untypedData)!=null?J.event:J:J:J)===b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED||b("gkx")("678642")))){n=a.$2(K,D,z,A,i,B,C,L,E);q.push(n)}else{n=a.$3(K,E);w=K.message_id;!P&&!Q&&!R&&!N&&v.push(n);if(O&&b("gkx")("678643"))return"continue";(v.length===H.length||P||Q||R||N)&&(a.$4(v,q,w,x,h),v=[]);(P||Q||R||N)&&q.push(n)}return"continue"}H=b("immutable").List(H);var S=r(z,A,i,E),T=!t(B,H,S),U=s(C,L),V=u(a.props.deliveryTimestamp,L),W=H.first().author,X=b("MessengerMessage.bs").getPersona(L),Y=D===K.author;O=Y?0:m+k;var Z=a.props.maxBubbleWidth?a.props.maxBubbleWidth-O:null;q.push(b("React").createElement(j,{subscribeToIDs:W?[W]:null,key:"mg:"+K.message_id},function(a){return b("React").createElement(g,{activeMessageID:p(y,H),author:W,deliveryTimestamp:V,forGameChat:e,hasDateBreak:M,isCanonical:this.props.isCanonical,isFromViewer:Y,isPageMessage:this.props.isPageMessage,isOnline:W?b("MessengerParticipantUtils.bs").has(a,W):!1,lastReadTimestamp:U,maxBubbleWidth:Z,messages:H,nextTimestamp:S,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage===!0?this.props.viewer:null,persona:b("gkx")("678634")?X:null,readReceipts:T?B:b("immutable").OrderedMap(),ref:"mg:"+K.message_id,thread:this.props.thread,threadID:this.props.threadID,scrollToRepliedMessage:this.props.scrollToRepliedMessage})}.bind(a)))};for(var I=0;I<A;I++){var J,K=H(I);if(K==="continue")continue}K=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid;H=null;f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&K&&this.props.isPageMessage&&(H=b("React").createElement(b("PagesMessageListGreeting.react"),{messageCount:v.length+A,threadID:K}));return b("React").createElement("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?i.CONVERSATION:null},H,q)};a.prototype.getMessageElement=function(a,c){__p&&__p();if(c===!0){var d=this.refs["db:"+a];if(d)return b("ReactDOM").findDOMNode(d)}d=this.$7(a);if(!d)return null;d=d[0].message_id;var e=this.refs["mg:"+d];if(!e)return null;return c===!0&&d===a?b("ReactDOM").findDOMNode(e):e.getMessageElement(a)};a.prototype.getMessageComponent=function(a){var b=this.$7(a);if(!b)return null;b=b[0].message_id;b=this.refs["mg:"+b];return!b?null:b.getMessage(a)};a.prototype.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};a.prototype.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").createElement(f,{key:"mg:"+d,style:e},a)):c.push(b("React").createElement("div",{key:"mg:"+d},a)))};a.prototype.$2=function(a,c,d,e,f,g,h,i,k){__p&&__p();var l,m,n=this.props.MessageGroup;m=((m=a)!=null?(m=m.log_message_data)!=null?m.untypedData:m:m)||{};l=(l=a)!=null?(l=l.log_message_data)!=null?l.message_type:l:l;if(l===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG){l={message_type:b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(m.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(m.callee_id,"callee id")),server_info_data:m.server_info,thread_id:a.thread_fbid,answered:m.event!==b("MessengerCallLogEvent").MISSED_CALL,log_message_type:m.video?b("MercuryLogMessageType").VIDEO_CALL:b("MercuryLogMessageType").PHONE_CALL,event:m.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:l})}m={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};l=babelHelpers["extends"]({},a,{attachments:[m],body:""});var o=b("immutable").List([l]),p=r(d,e,f,k),q=!t(g,o,p),v=s(h,i),w=u(this.props.deliveryTimestamp,i),x=o.first().author;return b("React").createElement(j,{subscribeToIDs:x?[x]:null,key:a.message_id},function(d){return b("React").createElement(n,{author:o.first().author,deliveryTimestamp:w,forGameChat:this.props.forGameChat,isCanonical:this.props.isCanonical,isFromViewer:c===a.author,isOnline:x?b("MessengerParticipantUtils.bs").has(d,x):!1,isPageMessage:this.props.isPageMessage,lastReadTimestamp:v,maxBubbleWidth:this.props.maxBubbleWidth,messages:o,nextTimestamp:p,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,readReceipts:q?g:b("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})}.bind(this))};a.prototype.$3=function(a,c){var d=this.props.LogMessage,e=n(a);c=e?c[e]:null;return a.log_message_type!==b("MercuryLogMessageType").SERVER_ERROR?b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id}):null};a.prototype.$1=function(a,c){c=c[b("nullthrows")(o(a),"other group id first message")];var d=this.props.LogMessage;return b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id})};a.propTypes={CollapsedLogMessageGroup:c.func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func};function p(a,b){return b.find(function(b){return b.message_id===a})?a:null}function q(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function r(a,c,d,e){if(d>=c-1)return Infinity;var f=a[d+1][0],g=o(f);if(g&&e[g]!==f.message_id||((g=f)!=null?g.action_type:g)==b("MercuryActionType").LOG_MESSAGE)return r(a,c,d+1,e);else return f.timestamp}function s(a,b){return b.timestamp>a?a:Infinity}function t(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function u(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_js_primitive","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){__p&&__p();if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_js_primitive").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a,c){a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return b("immutable").OrderedMap()}function e(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_js_primitive").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var h=b("bs_belt_MapString").isEmpty,i=b("bs_belt_MapString").empty;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.getSeenTimestamps=d;f.getSeenTimestamp=e;f.hasReadReceipts=h}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","MercuryIDs","MercuryLogMessageContainer.react","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerReadReceipt.bs","React","cancelAnimationFrame","immutable","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").OrderedMap;a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatConversation",_raf:void 0,_onMountTimeout:void 0,propTypes:{contextBanner:a.object,forGameChat:a.bool.isRequired,isCanonical:a.bool.isRequired,loadMoreMessages:a.func,maxBubbleWidth:a.number.isRequired,messages:a.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:a.func,onMount:a.func,onStickerClick:a.func,thread:a.object,threadID:a.string.isRequired,viewer:a.string.isRequired},componentDidMount:function(){this._raf=b("requestAnimationFrame")(function(){this._onMountTimeout=setTimeout(function(){this.props.onMount&&this.props.onMount(),delete this._onMountTimeout}.bind(this),0),delete this._raf}.bind(this))},componentWillUnmount:function(){this._raf&&b("cancelAnimationFrame")(this._raf),clearTimeout(this._onMountTimeout)},render:function(){return b("React").createElement("div",null,this.props.contextBanner,b("React").createElement(b("MessageList.react"),{DateBreak:b("ChatDateBreak.react"),forGameChat:this.props.forGameChat,LogMessage:b("MercuryLogMessageContainer.react"),MessageGroup:b("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:b("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:b("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:this._calculateReceipts(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID}))},_calculateReceipts:function(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return null;c.update(a.author,function(b){return!b||b.watermark<=a.timestamp?{watermark:a.timestamp,action:a.timestamp}:b});e["delete"](a.author);return null})})},getMessageList:function(){return this.refs.messageList}});e.exports=c}),null);
__d("ChatDetailStack.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.bottomDetail;a=a.topDetail;c=c?b("React").createElement("div",{className:"_4jeh"},c):null;return b("React").createElement("div",{className:"_2rt2"},b("React").createElement("div",{className:"_4jeg"},a),c)}e.exports=a}),null);
__d("ChatEditParticipantsUtils",["AsyncDialog","AsyncRequest","MercuryIDs","MercuryThreadIDMap","URI"],(function(a,b,c,d,e,f){"use strict";var g=b("MercuryThreadIDMap").get();a={showParticipantsModal:function(a){if(!b("MercuryIDs").isGroupChat(a))return;g.getServerIDFromClientID(a,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(new(b("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:a})))})}};e.exports=a}),null);
__d("fbjs/lib/CSSCore",["CSSCore"],(function(a,b,c,d,e,f){"use strict";e.exports=b("CSSCore")}),null);
__d("getScrollPosition",["getDocumentScrollElement","getUnboundedScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("getDocumentScrollElement")(a.ownerDocument||a.document);a.Window&&a instanceof a.Window&&(a=c);var d=b("getUnboundedScrollPosition")(a);c=a===c?a.ownerDocument.documentElement:a;var e=a.scrollWidth-c.clientWidth;a=a.scrollHeight-c.clientHeight;d.x=Math.max(0,Math.min(d.x,e));d.y=Math.max(0,Math.min(d.y,a));return d}e.exports=a}),null);
__d("MessengerEmojiSpan.react",["cx","EmojiLikeConstants","MessengerSupportedEmojiUtils","React","cssURL","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){if(this.props.entityKey==null)return null;var a=this.props.contentState.getEntity(this.props.entityKey);a=a.getData();a=a.type;a=b("MessengerSupportedEmojiUtils").getUrl(a,b("EmojiLikeConstants").size.SMALL);a=a?a:"";return b("React").createElement("span",{className:"_21wj",style:{backgroundImage:b("cssURL")(a)},"data-offset-key":this.props.offsetKey},b("React").createElement("span",{className:b("gkx")("720905")?"_7464":"_21wk"},this.props.children))};function a(){h.apply(this,arguments)}a.propTypes={children:c.arrayOf(c.object),contentState:c.object.isRequired,entityKey:c.string,offsetKey:c.string};e.exports=a}),null);
__d("MessengerEmoticonSpan.react",["cx","EmojiLikeConstants","EmoticonEmojiList","MessengerSupportedEmojiUtils","React","cssURL","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){if(this.props.entityKey==null)return null;var a=this.props.contentState.getEntity(this.props.entityKey);a=a.getData();a=a.type;a=b("EmoticonEmojiList").emote2emojis[a];a=b("MessengerSupportedEmojiUtils").getUrl(a,b("EmojiLikeConstants").size.XSMALL);a=a?a:"";return b("React").createElement("span",{className:"_21wj",style:{backgroundImage:b("cssURL")(a)},"data-offset-key":this.props.offsetKey},b("React").createElement("span",{className:b("gkx")("720905")?"_7464":"_21wk"},this.props.children))};function a(){h.apply(this,arguments)}a.propTypes={children:c.arrayOf(c.object),contentState:c.object.isRequired,entityKey:c.string,offsetKey:c.string};e.exports=a}),null);
__d("MessengerMentionSource",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({REPLY:"reply",ATSIGN:"@",TYPEAHEAD:"typeahead"});e.exports=a}),null);
__d("MessengerMentionsEntityDecorator.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("span",{className:"_fy2"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_array","bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e=(d={},d[b("FantaTypeFileUploader").fileTypes.ANIMATED_IMAGE]="gif_ids",d[b("FantaTypeFileUploader").fileTypes.AUDIO]="audio_ids",d[b("FantaTypeFileUploader").fileTypes.FILE]="file_ids",d[b("FantaTypeFileUploader").fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[b("FantaTypeFileUploader").fileTypes.IMAGE]="image_ids",d[b("FantaTypeFileUploader").fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length!==0)return a;else return null}}function g(a){__p&&__p();if(a==null)return void 0;else{a=a.get("uploadedFiles");var b=[],c=[],d=[];a.forEach(function(a,e,f){__p&&__p();e=a.file;if(e.type.startsWith("image/")){b.push(e);return 0}else if(e.type.startsWith("video/")){c.push(e);return 0}else{d.push(e);return 0}});return[b,c,d]}}function h(a,c){if(c.length!==0)return b("bs_curry")._1(a,c);else return 0}function c(a,c){__p&&__p();if(a==null||c==null)return 0;else{a=g(a);if(a!==void 0){a=a;b("bs_array").iter(function(a){return h(c,[a])},a[1]);h(c,a[0]);return h(c,a[2])}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("createMessengerMentionDraftEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.createEntity("MENTION","SEGMENTED",{mid:b.getUniqueID()})}e.exports=a}),null);
__d("getProfileRangesForContentState",["EmojiFormat.bs","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("emptyFunction").thatReturnsTrue;function a(a,c){__p&&__p();var d=[],e=0;a.getBlockMap().forEach(function(f){__p&&__p();var h=0,i=f.getText();f.findEntityRanges(g,function(g,i){__p&&__p();var j=f.getEntityAt(g);if(j){j=a.getEntity(j);if(j.getType()==="EMOTICON")h+=j.getData().originalEmoticon.length-1;else if(j.getType()==="EMOJI"){var k=j.getData().type;k=b("EmojiFormat.bs").codeStringToCodeArray(k);k=String.fromCodePoint.apply(String,k);h+=k.length-1}else if(j.getType()==="MENTION"){k=g+h+e;j=j.getData().mid;var l=null;c&&j===c?l="t":c&&j===c+"-active"?(j=c,l="a"):/^\d+$/.test(j)&&(l="p");l!==null&&d.push({id:j,offset:k,length:i-g,type:l})}}});e+=i.length+h+1});return d}e.exports=a}),null);
__d("getVisibleValueForContentStateWithMessengerEmoji",["EmojiFormat.bs","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.getBlockMap().map(function(c){__p&&__p();var d=c.getText(),e="";c.findEntityRanges(b("emptyFunction").thatReturnsTrue,function(f,g){__p&&__p();var h=c.getEntityAt(f);if(!h)e+=d.slice(f,g);else{h=a.getEntity(h);if(h.getType()==="EMOTICON")e+=h.getData().originalEmoticon;else if(h.getType()==="EMOJI"){h=h.getData().type;h=b("EmojiFormat.bs").codeStringToCodeArray(h);e+=String.fromCodePoint.apply(String,h)}else e+=d.slice(f,g)}});return e});return c.join("\n")}e.exports=a}),null);
__d("insertMessengerEmojiIntoContentState",["DraftModifier","EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=c.createEntity("EMOJI","IMMUTABLE",{type:a});f=f.getLastCreatedEntityKey();return b("DraftModifier").insertText(c,d,b("EmojiFormat.bs").codeStringToUnicode(a),e,f)}e.exports=a}),null);
__d("handleBeforeInputForMessengerEmoji",["EditorState","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a.getSelection();if(!d.isCollapsed()||!c)return a;c=b("MessengerSupportedEmojiUtils").getEmojiMatchObj(c);if(!c||!c.is_supported)return a;c=b("insertMessengerEmojiIntoContentState")(c.emoji_key,a.getCurrentContent(),d,a.getCurrentInlineStyle());return b("EditorState").push(a,c,"insert-characters")}e.exports=a}),null);
__d("applyMessengerEmoticonToContentBlock",["CharacterMetadata","EmoticonEmojiList"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){if(!b("EmoticonEmojiList").names[d])return c;var f=c.getCharacterList(),g=a.createEntity("EMOTICON","IMMUTABLE",{type:b("EmoticonEmojiList").names[d],originalEmoticon:d}).getLastCreatedEntityKey();return c.merge({characterList:f.slice(0,e).concat(f.slice(e,e+d.length).map(function(a){return b("CharacterMetadata").applyEntity(a,g)}),f.slice(e+d.length))})}e.exports=a}),null);
__d("getTextAfterNearestEntity",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=b;while(c>0&&a.getEntityAt(c-1)===null)c--;return a.getText().slice(c,b)}e.exports=a}),null);
__d("applyMessengerEmoticonToContentState",["EmoticonEmojiList","applyMessengerEmoticonToContentBlock","getTextAfterNearestEntity"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=c.getAnchorKey(),e=c.getAnchorOffset(),f=a.getBlockForKey(d),g=b("getTextAfterNearestEntity")(f,e),h=b("EmoticonEmojiList").regexp.exec(g);if(!h)return a;var i=h[1];if(!i&&e!==g.length)return a;i=h[2];g=e-g.length;g=g+h.index+h[1].length;h=a.getBlockMap().set(d,b("applyMessengerEmoticonToContentBlock")(a,f,i,g));return a.merge({blockMap:h,selectionBefore:c,selectionAfter:c.merge({anchorOffset:e,focusOffset:e})})}e.exports=a}),null);
__d("handleBeforeInputForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new RegExp(/[\s\'\".,!?]/);function a(a,c){var d=a.getSelection();if(!d.isCollapsed()||!c||!g.test(c))return a;var e=a.getCurrentContent();d=b("applyMessengerEmoticonToContentState")(e,d);if(d===e)return a;e=b("DraftModifier").insertText(d,d.getSelectionAfter(),c);return b("EditorState").push(a,e,"insert-characters")}e.exports=a}),null);
__d("handleSoftNewlineForMessengerEmoticon",["DraftModifier","EditorState","applyMessengerEmoticonToContentState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getCurrentContent(),d=a.getSelection(),e=b("applyMessengerEmoticonToContentState")(c,d);c=b("DraftModifier").splitBlock(e,c===e?d:e.getSelectionAfter());return b("EditorState").push(a,c,"split-block")}e.exports=a}),null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","EmoticonsList","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h="\u3000";function a(a,c,d,e){if(!b("EmoticonsList").emotes[c])return a;e=e.createEntity("EMOTICON","IMMUTABLE",{type:b("EmoticonsList").emotes[c],originalEmoticon:c});e=e.getLastCreatedEntityKey();var f=a.getText(),i=a.getCharacterList();c=c.length;var j=i.get(d);return a.merge({text:f.slice(0,d)+h+f.slice(d+c),characterList:i.slice(0,d).concat(g.of(b("CharacterMetadata").applyEntity(j,e)),i.slice(d+c))})}e.exports=a}),null);
__d("insertEmoticonIntoContentState",["DraftModifier","applyEmoticonToContentBlock"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=b("DraftModifier").replaceText(c,d,a),f=d.getAnchorKey(),g=d.getAnchorOffset(),h=e.getBlockForKey(f);e=e.getBlockMap().set(f,b("applyEmoticonToContentBlock")(h,a,g,c));g++;return c.merge({blockMap:e,selectionBefore:d,selectionAfter:d.merge({anchorOffset:g,focusOffset:g})})}e.exports=a}),null);
__d("insertEmoticonIntoEditorState",["DraftModifier","EditorState","insertEmoticonIntoContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=" ";function a(a,c){var d=c.getSelection(),e=c.getCurrentContent(),f=d.getStartOffset(),h=d.getEndOffset(),i=e.getBlockForKey(d.getStartKey()).getText(),j=e.getBlockForKey(d.getEndKey()).getText(),k="";h<=j.length&&j[h]!==g&&(k=g);f>0&&i[f-1]!==g&&(e=b("DraftModifier").insertText(e,d,g),d=e.getSelectionAfter());j=b("insertEmoticonIntoContentState")(a,e,d);e=b("DraftModifier").insertText(j,j.getSelectionAfter(),k);return b("EditorState").push(c,e,"insert-characters")}e.exports=a}),null);
__d("isSoftNewlineEvent",["Keys"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.which===b("Keys").RETURN&&(a.getModifierState("Shift")||a.getModifierState("Alt")||a.getModifierState("Control"))}e.exports=a}),null);
__d("ChatInput.react",["AbstractMentionsTextEditor.react","BootloadedComponent.react","Bootloader","CompositeDraftDecorator","ContentState","DraftModifier","EditorState","EmojiFormat.bs","JSResource","MercuryIDs","MercuryThreadIDMap","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerParticipants.bs","MessengerUploadFilesUtil.bs","React","ReactDOM","TypingDetectorController","cancelAnimationFrame","clearImmediate","createCancelableFunction","createMessengerMentionDraftEntity","debounce","emptyFunction","getDefaultKeyBinding","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","ifRequired","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","requestAnimationFrame","replaceMentionedTextInEditorState","setImmediate","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadIDMap").get();c=b("React").PropTypes;d=b("emptyFunction").thatReturnsNull;var i=1,j="handled",k=8,l="not-handled";f=babelHelpers.inherits(a,b("React").Component);g=f&&f.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$6=b("createCancelableFunction")(function(a,c){var d=a.viewer,e=a.thread;if(!e)return;if(!e.participants)return;this.$3=b("MessengerParticipants.bs").getMulti(e.participants,function(a){this.setState({mentionsSource:c(d,e.participants.map(function(b){return a[b]}).filter(Boolean),e,b("gkx")("678578"),b("gkx")("678579"))})}.bind(this))}.bind(this)),this.$8=function(){var a=this.$11(this.state.editorState.getCurrentContent());this.$2=b("setImmediate")(function(){this.$2=null;var c=b("EditorState").set(this.state.editorState,{decorator:a});this.setState({editorState:c})}.bind(this))}.bind(this),this.onChange=function(a){a!==this.state.editorState&&(this.setState({editorState:a}),this.getValueFromEditorState(a)!==this.getValueFromEditorState(this.state.editorState)&&this.$9(a,this.props.composer))}.bind(this),this.onReturn=function(event,a){__p&&__p();if(b("isSoftNewlineEvent")(event)){var c=b("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:c(a)});return j}event.persist();this.setState({},function(){b("MessengerUploadFilesUtil.bs").sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn),this.$12()&&(this.props.inputKeyDown&&this.props.inputKeyDown(event,this.getValue())),b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(a,b){new a().setEvent(b.KEYBOARD_SEND).setVC(this.props.viewer).log()}.bind(this),"ChatInput.react")}.bind(this));return j}.bind(this),this.getValue=function(){return this.getValueFromEditorState(this.state.editorState)}.bind(this),this.$13=function(a,b){this.props.onBeforeInput&&this.props.onBeforeInput();var c=this.$14(a,b);a=this.$15(a,b);return c||a?j:l}.bind(this),this.$17=function(a){return this.$16(a)}.bind(this),this.$18=function(a,b){return this.$16(b)}.bind(this),this.state={editorState:this.$10(this.props.defaultText)},this.$20=function(){var a=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:a})}.bind(this),this.$22=function(a,c){a=(this.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};this.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===i?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);this.setState(a)}.bind(this),this.$21=function(a){this.refs.input.isShowingMentionables()||this.props.onEscape&&this.props.onEscape(a)}.bind(this),c}a.prototype.componentDidMount=function(){this.$4=b("ReactDOM").findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$4);this.setState({triggeredWord:this.props.triggeredWord});this.$5();b("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$6.bind(this,this.props),"ChatInput.react");b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"ChatInput.react");var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.input);c&&h.getServerIDFromClientID(a,function(d){this.$1=new(b("TypingDetectorController"))(b("MercuryIDs").getUserIDFromThreadID(a),c,"mercury-chat",null,d,this.getValue)}.bind(this))};a.prototype.componentWillUnmount=function(){this.$2&&b("clearImmediate")(this.$2),this.$7&&b("cancelAnimationFrame")(this.$7),this.$6.cancel(),this.$7=null,this.$1&&this.$1.destroy(),this.$3&&b("MessengerParticipants.bs").removeCallback(this.$3)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.state.triggeredWord!==a.triggeredWord&&this.setState({triggeredWord:a.triggeredWord},this.$8),(!this.props.thread||!a.thread||m(a,this.props))&&b("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],this.$6.bind(this,a),"ChatInput.react"),a.composer.version!==this.props.composer.version&&this.resetState()};a.prototype.componentDidUpdate=function(){this.$5(),this.$7=b("requestAnimationFrame")(function(){if(!this.$7)return;this.$7=null;var a=b("ReactDOM").findDOMNode(this).getBoundingClientRect();a=a.height;this.$4!==a&&this.props.resizeFn(a);this.$4=a}.bind(this))};a.prototype.$5=function(){var a=this.props.composer,c=this.props.onTextChange;this.$9=c?b("debounce")(function(b){c(this.getValueFromEditorState(b),a,200)}.bind(this),200):b("emptyFunction")};a.prototype.$10=function(a){a=b("ContentState").createFromText(a);return b("EditorState").createWithContent(a,this.$11(a))};a.prototype.resetState=function(){this.state.typeaheadReporter&&(this.state.typeaheadReporter.sessionEnd(),this.state.typeaheadReporter.sessionStart()),this.setState({editorState:b("EditorState").moveFocusToEnd(this.$10("")),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null})};a.prototype.onSend=function(a){var c=this.getMentions();if(a&&(c&&c.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource)){var d=this.state,e=d.addedMentionsCount,f=d.mentionsTriggeredCount,g=d.mentionsTriggerSource,h=this.props.thread;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(d,i){new d().setEvent(i.MENTION).setGroupSize(h&&h.participants&&h.participants.length).setNumDelivered(c?c.length:0).setNumSelects(e).setNumTriggers(f).setThreadid(h&&h.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(h&&h.thread_type)).setOfflineThreadid(a.offline_threading_id).updateExtraData({source:g}).log()},"ChatInput.react")}};a.prototype.$11=function(a){var c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:b("MessengerEmoticonSpan.react")}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};a.prototype.$12=function(){var a=this.getValue(),b=this.props.composer.sharePreview;return a&&a.trim().length>0||!!(b&&b.params&&b.type)};a.prototype.handleSend=function(){this.setState({},function(){b("MessengerUploadFilesUtil.bs").sendAttchments(this.props.fileUploader,this.props.uploadPhotoFn),this.$12()&&(this.props.handleSend&&this.props.handleSend(this.getValue())),b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(a,b){new a().setEvent(b.CLICK_SEND).setVC(this.props.viewer).log()}.bind(this),"ChatInput.react")}.bind(this))};a.prototype.getValueFromEditorState=function(a){a=a.getCurrentContent();return b("getVisibleValueForContentStateWithMessengerEmoji")(a)};a.prototype.getMentions=function(){var a=this.props.thread;return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a?a.thread_fbid:null)};a.prototype.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus()};a.prototype.$14=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.$15=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};a.prototype.$16=function(a){__p&&__p();var c=/^image\//,d=a.filter(function(a){return c.test(a.type)});if(d.length){var e=this.props.composer;b("ifRequired")("FantaMessageActions",function(a){a.prepareFilesForSend(this.props.threadID,d,e)}.bind(this),function(){b("Bootloader").loadModules(["FantaMessageActions"],function(a){a.prepareFilesForSend(this.props.threadID,d,e)}.bind(this),"ChatInput.react")}.bind(this));return!0}return!1};a.prototype.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.setState({editorState:a})};a.prototype.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.setState({editorState:b("EditorState").forceSelection(c,a.getSelectionAfter())})};a.prototype.appendText=function(a){var c=this.state.editorState,d=c.getSelection(),e=c.getCurrentContent();e=b("DraftModifier").insertText(e,d,a);c=b("EditorState").push(c,e,"insert-characters");this.setState({editorState:c})};a.prototype.render=function(){var a=babelHelpers["extends"]({},this.props,this.$19());return b("React").createElement(b("AbstractMentionsTextEditor.react"),babelHelpers["extends"]({ref:"input"},a,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$13,handlePastedFiles:this.$17,handleDroppedFiles:this.$18,handleReturn:this.onReturn,spellCheck:!0,stripPastedStyles:!0,textAlignment:"left"}))};a.prototype.$19=function(){return{autoHighlight:!0,handleContentReturn:this.onReturn,maxResults:k,mentionResultsProps:{typeaheadView:b("BootloadedComponent.react").create(b("JSResource")("ChatMentionsInputTypeaheadView.react").__setRef("ChatInput.react")),typeaheadViewProps:{},position:"above",autoflip:!0},mentionResultsComponent:b("BootloadedComponent.react").create(b("JSResource")("MentionsLayer.react").__setRef("ChatInput.react")),mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:this.state.mentionsSource,onAddMention:this.$20,onEscape:this.$21,onShowMentions:this.$22}};a.prototype.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.onChange(a);this.$20()};a.propTypes={composer:c.object.isRequired,defaultText:c.string,blockStyleFn:c.func,fileUploader:c.object,inputKeyDown:c.func,handleSend:c.func,keyBindingFn:c.func,onBeforeInput:c.func,onBlur:c.func,onEscape:c.func,onFocus:c.func,onTab:c.func,resizeFn:c.func,thread:c.object,threadID:c.string,viewer:c.string};a.defaultProps={blockStyleFn:d,keyBindingFn:b("getDefaultKeyBinding")};function m(a,b){a=a.thread.participants;b=b.thread.participants;if(!a||!b)return!0;a=a.filter(Boolean);b=b.filter(Boolean);return a.length!==b.length}e.exports=a}),null);
__d("FantaWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_ROOT:"composer_root",COMPOSER_PHOTO_UPLOADER_ROOT:"composer_photo_uploader_root",PHOTO_UPLOAD_BUTTON:"photo_upload_button",PHOTO_INPUT:"photo_input"})}),null);
__d("M4IconSVG.bs",["React","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("ReasonReact.bs").statelessComponent("M4IconSVG");function a(a,c){var d=a!==void 0?a:"16px";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement("svg",{key:"svg",height:d,width:d,version:"1.1",viewBox:"0 0 16 16",x:"0px",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",y:"0px"},c)},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("M4IconPhoto.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPhoto");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSVG.bs").make(void 0,[e?b("React").createElement("g",{key:"filled"},b("React").createElement("path",{key:"bg",d:"M1.3,13.1L2,1.7c0-0.1,0-0.2,0-0.4L1.2,1.4C0.5,1.5,0,2.4,0,3.4l0.6,10.9c0,0.5,0.2,0.9,0.4,1.3C1.4,15.8,1.7,16,1.9,16 c0,0,0.1,0,0.1,0l0.3,0C1.7,15.4,1.2,14.3,1.3,13.1z",fill:f}),b("React").createElement("path",{key:"hills",d:"M13,6.2c-0.2-0.2-0.6-0.3-0.8-0.1L9.4,8.5c-0.2,0.1-0.2,0.4,0,0.6L10,9.8c0.2,0.2,0.2,0.6-0.1,0.8c-0.1,0.1-0.2,0.1-0.4,0.1 c-0.2,0-0.3-0.1-0.4-0.2L7.3,8.3C7.1,8.1,6.7,8,6.5,8.2l-2.6,2l-0.4,3.1c0,0.5,0.2,1.6,0.7,1.7l8.8,0.6c0.2,0,0.5,0,0.7-0.2 c0.2-0.2,0.5-0.7,0.6-0.9l0.6-5.9L13,6.2z",fill:f}),b("React").createElement("path",{key:"frame",style:h,d:"M12.9,15.5l-8.2-0.7C4,14.7,3.4,14,3.4,13.2l1-11.4C4.5,1,5.2,0.5,6,0.5l8.2,0.7C15,1.3,15.5,2,15.5,2.8 l-1,11.4C14.4,15,13.7,15.6,12.9,15.5z"})):b("React").createElement("g",{key:"outline"},b("React").createElement("path",{key:"bg",d:"M2.1,14.7c-0.1-0.1-0.2-0.3-0.2-0.5l0-0.1c-0.1-0.3-0.1-0.7-0.1-1.1l0-0.1L1,3.3c0-0.5,0.3-0.9,0.8-0.9l1-0.1l0.1-0.7\n              c0-0.1,0-0.2,0.1-0.4L1.7,1.4c-1,0.1-1.8,1-1.7,2l0.9,10.9c0,0.5,0.3,0.9,0.7,1.3C1.9,15.8,2.3,16,2.8,16c0.1,0,0.1,0,0.2,0l0.5,0\n              C2.8,15.7,2.4,15.2,2.1,14.7z",fill:f}),b("React").createElement("path",{key:"frame",style:h,d:"M12.9,15.5l-8.3-0.7c-0.8-0.1-1.4-0.8-1.3-1.6l1-11.4C4.3,1,5.1,0.4,5.8,0.5l8.3,0.7C15,1.3,15.5,2,15.5,2.8 l-1,11.4C14.4,15,13.7,15.6,12.9,15.5z"}),b("React").createElement("polyline",{key:"left-hill",style:h,points:"3.5,11 6.9,8.6 9.2,11.3 "}),b("React").createElement("polyline",{key:"right-hill",style:h,points:"14.6,9 12.5,6.5 8.3,10 "})),b("React").createElement("circle",{key:"sun",cx:"7.5",cy:"4.5",fill:f,r:"1.5"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatPhotoUploader.react",["cssVar","cx","fbt","Promise","Bootloader","ChatConfig","FantaWebDriverIDs","InlineBlock.react","Link.react","M4IconPhoto.bs","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","TooltipData","emptyFunction","ifRequired","joinClasses","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("M4IconPhoto.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$14=function(a,b){this.props.onSubmit&&this.props.onSubmit(a,b),this.$15("show_file_placeholder")}.bind(this),this.$16=function(a,b){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(a,b),this.$15("upload_files_complete"),this.$6||this.$11()}.bind(this),this.$17=function(a,b){this.props.onLastUploadFail&&this.props.onLastUploadFail(a,b),this.$6||this.$11()}.bind(this),this.$18=function(a,b){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(a,b),this.$6||this.$11()}.bind(this),this.$19=function(a,b){this.props.onUploadError&&this.props.onUploadError(b),this.$15("upload_file_failed"),this.$6||this.$11()}.bind(this),this.$20=function(){__p&&__p();this.$3||(this.$2=!0,this.$3=new(b("Promise"))(function(a){__p&&__p();this.$5.addSubscriptions(b("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(c){__p&&__p();b("promiseDone")(this.$4,function(d){__p&&__p();this.$2=!1;if(!this.$7){a(null);return}d=new c(b("ReactDOM").findDOMNode(this.$7),b("ReactDOM").findDOMNode(this.$9),b("ReactDOM").findDOMNode(this.$10),b("MercuryConfig").msgr_region);d.setAllowCrossPage(this.props.allowCrossPage);this.$5.addSubscriptions(d.subscribe("submit",this.$14),d.subscribe("all-uploads-completed",this.$16),d.subscribe("last-upload-failed",this.$17),d.subscribe("last-upload-canceled",this.$18),d.subscribe("file-upload-error",this.$19));this.$1=d;a(this.$1)}.bind(this))}.bind(this),"ChatPhotoUploader.react"))}.bind(this)));return this.$3}.bind(this),this.$4=new(b("Promise"))(function(a,b){this.$8=a}.bind(this)),this.$5=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a){return a.actionURI!=this.props.actionURI||a.disabled!==this.props.disabled||a.threadID!==this.props.threadID||a.color!==this.props.color};a.prototype.componentDidMount=function(){this.$6=!0,typeof this.props.onMount==="function"&&this.props.onMount(this),this.$5.addSubscriptions(b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"ChatPhotoUploader.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"ChatPhotoUploader.react"))};a.prototype.componentDidUpdate=function(){this.$1&&this.$1.setAllowCrossPage(this.props.allowCrossPage)};a.prototype.componentWillUnmount=function(){(!this.isUploading()||!this.props.allowCrossPage)&&this.$11(),this.$6=!1};a.prototype.render=function(){var a=b("ChatConfig").get("single_line_composer")&&!b("MessengerEnvironment").messengerui?i._("A\u00f1adir fotos, v\u00eddeos y archivos"):"",c=this.props.imagesOnly?i._("A\u00f1adir fotos"):i._("A\u00f1adir archivos"),d=b("joinClasses")("_4q61"+(this.props.customUI?"":" _5f0v")+(this.props.customUI?"":" _509v"),this.props.linkClassName),e=this.props.threadID;return b("React").createElement("form",babelHelpers["extends"]({action:this.props.actionURI,className:"_vzk _4uld",title:c},b("TooltipData").propsFor(a),{method:"post",onClick:function(a){a.stopPropagation(),this.props.disabled&&a.preventDefault(),this.$12()}.bind(this),ref:function(a){return this.$8(this.$7=a)}.bind(this)}),b("React").createElement("input",{type:"hidden",name:"attach_id",ref:function(a){return this.$10=a}.bind(this)}),b("React").createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),b("React").createElement(b("InlineBlock.react"),{className:b("joinClasses")(this.props.className,"_m _4q60 _3rzn"),"data-testid":b("FantaWebDriverIDs").PHOTO_UPLOAD_BUTTON},b("React").createElement(b("Link.react"),{className:d,tabIndex:-1},!b("MessengerEnvironment").messengerui&&b("ChatConfig").get("single_line_composer")?b("React").createElement(k,{filled:!1,color:this.props.color}):b("React").createElement("i",{className:this.props.imageClassName,alt:i._("C\u00e1mara")}),b("React").createElement("input",{disabled:this.props.disabled,type:"file",className:b("joinClasses")(this.props.inputClassname,"_n _2__f _4e5e"),"data-testid":b("FantaWebDriverIDs").PHOTO_INPUT,name:"attachment[]",multiple:!0,accept:this.props.imagesOnly?"image/*":"*",ref:function(a){return this.$9=a}.bind(this),title:c,onChange:function(event){this.$13(event,e)}.bind(this)}))))};a.prototype.$12=function(){var a=this.props.imagesOnly;b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(b,c){new b().setEvent(a?c.CLICK_PHOTO_UPLOADER:c.CLICK_FILE_UPLOADER).log()},"ChatPhotoUploader.react")};a.prototype.$13=function(event,a){__p&&__p();var c=event.target.files,d=function(){this.$9&&(this.$9.value="")}.bind(this);b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){b.prepareFilesForSend(a,c,"ComposerIcons"),d()},function(){this.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerActions"],function(b){b.prepareFilesForSend(a,c,"ComposerIcons"),d()},"ChatPhotoUploader.react"))}.bind(this)):b("ifRequired")("FantaMessageActions",function(b){this.props.composer&&b.prepareFilesForSend(a,c,this.props.composer,d)}.bind(this),function(){this.$5.addSubscriptions(b("Bootloader").loadModules(["FantaMessageActions"],function(b){this.props.composer&&b.prepareFilesForSend(a,c,this.props.composer,d)}.bind(this),"ChatPhotoUploader.react"))}.bind(this));this.props.focusInput&&this.props.focusInput()};a.prototype.$15=function(a){var c=this.props.threadID;if(!c)return;this.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger","MessengerShareFilePreviewFunnelLoggerConstants"],function(d,e){d.appendAction(!b("MessengerEnvironment").messengerui,a,c),a===e.UPLOAD_FILES_COMPLETE&&d.endFunnel(c)},"ChatPhotoUploader.react"))};a.prototype.isUploading=function(){return this.$1&&this.$1.isUploading()||!!this.$2};a.prototype.uploadFiles=function(a){b("promiseDone")(this.$20(),function(b){b.uploadFiles(a)})};a.prototype.uploadURL=function(a){b("promiseDone")(this.$20(),function(b){b.uploadURL(a)})};a.prototype.$11=function(){this.$5.release(),this.$1&&this.$1.destroy()};a.defaultProps={actionURI:b("MercuryConfig").upload_url,allowCrossPage:!0,costomUI:!1,disabled:!1,imageClassName:"_509w",imagesOnly:!0,linkClassName:"",onSubmit:b("emptyFunction"),onAllUploadsComplete:b("emptyFunction"),onLastUploadFail:b("emptyFunction"),onLastUploadCancel:b("emptyFunction"),color:"#0084ff"};e.exports=a}),null);
__d("CustomColorHighlighting.react",["cssVar","csx","cx","React","UserAgent","guid","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;d="._fy2";f="._43by";g="._mh6";h=b("UserAgent").isEngine("Gecko")?"._mh6 *::-moz-selection":"._mh6 ::selection";i=b("UserAgent").isEngine("Gecko")?"._43by *::-moz-selection":"._43by ::selection";var k=d+d,l=f+f,m=g+h,n=g+g,o=f+i,p="rgba(255, 255, 255, 0.3)";d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(a){j.constructor.call(this,a),this.state={id:"cch_"+b("guid")()}}a.prototype.UNSAFE_componentWillMount=function(){this.$1()};a.prototype.componentWillUnmount=function(){this.$2(),this.state.styleTag&&document.head.removeChild(this.state.styleTag)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.props.customColor&&!a.customColor?this.$2():a.customColor!==this.props.customColor&&this.$3(a.customColor)};a.prototype.render=function(){return b("React").createElement("span",{className:b("joinClasses")("_mh6",this.props.className),id:this.state.id},this.props.children)};a.prototype.$1=function(){var a=document.createElement("style");a.appendChild(document.createTextNode(""));document.head.appendChild(a);this.setState({styleSheet:a.sheet,styleTag:a},function(){return this.$3(this.props.customColor)}.bind(this))};a.prototype.$4=function(a,b,c){a.insertRule?a.insertRule(b+"{"+c+"}",0):a.addRule&&a.addRule(b,c,0)};a.prototype.$5=function(a){"removeRule"in a?a.removeRule(0):"deleteRule"in a&&a.deleteRule(0)};a.prototype.$2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$5(this.state.styleSheet)}};a.prototype.$6=function(a){a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);var b=parseInt(a[1],16),c=parseInt(a[2],16);a=parseInt(a[3],16);return"rgba("+b+","+c+","+a+",0.2)"};a.prototype.$3=function(a){__p&&__p();this.$2();a=a||this.props.customColor;if(a){var b=this.$6(a);b="background: "+b;this.$4(this.state.styleSheet,"#"+this.state.id+m,b);this.$4(this.state.styleSheet,"#"+this.state.id+" "+k,"color: "+a);this.$4(this.state.styleSheet,"#"+this.state.id+" "+l,"background-color: "+a);this.$4(this.state.styleSheet,"#"+this.state.id+n+" "+o,"background-color: "+p)}};a.propTypes={className:c.string,customColor:c.string};e.exports=a}),null);
__d("M4IconSend.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconSend");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSVG.bs").make(void 0,[e?b("React").createElement("path",{key:"filled",d:"M11,8.3L2.6,8.8C2.4,8.8,2.3,8.9,2.3,9l-1.2,4.1c-0.2,0.5,0,1.1,0.4,1.5C1.7,14.9,2,15,2.4,15c0.2,0,0.4,0,0.6-0.1l11.2-5.6 C14.8,9,15.1,8.4,15,7.8c-0.1-0.4-0.4-0.8-0.8-1L3,1.1C2.5,0.9,1.9,1,1.5,1.3C1,1.7,0.9,2.3,1.1,2.9L2.3,7c0,0.1,0.2,0.2,0.3,0.2 L11,7.7c0,0,0.3,0,0.3,0.3S11,8.3,11,8.3z",fill:f}):b("React").createElement("g",{key:"outline"},b("React").createElement("path",{key:"perimeter",d:"M2.4,1.6l12,6c0.7,0.4,0.7,1.4,0,1.8l-12,6C1.7,15.8,0.8,15,1,14.2l1.7-5.4c0.1-0.2,0.1-0.4,0-0.6L1,2.8 C0.8,2,1.7,1.2,2.4,1.6z",fill:"none",stroke:f,strokeMiterlimit:"10"}),b("React").createElement("line",{key:"center-line",fill:"none",stroke:f,strokeMiterlimit:"10",x1:"2.8",x2:"14.8",y1:"8.5",y2:"8.5"}))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerCustomColorUtils.bs",["cssVar","gkx","CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(){if(b("CurrentUser").isWorkUser())return"#373e4c";else if(b("gkx")("686397"))return"#0099ff";else return"#0084ff"}function a(a){a=a.solid_color;if(a==null)return h(0);else return a}f.defaultColor=h;f.customColorOrBlue=a}),null);
__d("MessengerHotLikeIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"like",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Group"},b("React").createElement("polygon",{id:"Fill-4",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-17",d:"M10,30 L7.75,30 C6.625,30 6,27.7515306 6,23.3673469 C6,18.9831633 6.625,16.7346939 7.75,16.7346939 L10,16.7346939 C10.552,16.7346939 11,17.1918367 11,17.755102 L11,28.9795918 C11,29.5428571 10.552,30 10,30 M17,6.02040816 C17,5.44540816 17.4195,5.00255102 18,5 C19.2035,5 22,5.79081633 22,10.6122449 C22,12.2443878 21.8015,13.130102 21.7195,13.7163265 C21.719,13.7183673 21.719,13.7204082 21.7185,13.722449 C21.6865,13.9566327 21.872,14.1647959 22.113,14.1647959 C26.908,14.1647959 29.469,15.4336735 29.469,16.7290816 C29.469,17.3612245 29.211,17.9321429 28.7975,18.3535714 C29.513,18.7591837 30,19.5091837 30,20.3780612 C30,21.3642857 29.4255,22.2045918 28.5475,22.5515306 C28.821,22.9326531 28.9845,23.3954082 28.9845,23.8969388 C28.9845,24.9704082 28.3395,25.8653061 27.3365,26.1438776 C27.4285,26.377551 27.4845,26.6290816 27.4845,26.8943878 C27.4845,28.0459184 25.5485,28.9795918 21,28.9795918 C17.675,28.9795918 15.3815,28.3857143 14.5,27.9591837 C13.851,27.6454082 13,27.0770408 13,25.4081633 L13,18.7755102 C13,15.0403061 17.25,13.7760204 17.25,10.1020408 C17.25,7.78826531 17,6.81326531 17,6.02040816",fill:a}))))}f.make=a}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","MercuryShareAttachmentRenderLocations","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="transparent",k=h._("Signo de aprobaci\u00f3n");d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={titleId:b("uniqueID")()},c}a.prototype.render=function(){var a=this.props.color||(b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff"),c={height:this.props.height||"85%"};this.props.location!==b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==b("MercuryShareAttachmentRenderLocations").PAGES_INBOX&&(c.width="66%");return b("React").createElement("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:"0 0 40.16 42.24",preserveAspectRatio:"xMinYMax meet",style:c},b("React").createElement("title",{id:this.state.titleId},k),b("React").createElement("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:j,fillRule:"evenodd",stroke:a,strokeLinecap:"round",strokeWidth:"5%"}))};a.propTypes={color:c.string,height:c.string,location:c.string};e.exports=a}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";a={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};b("mixInEventEmitter")(a,{start:!0,stop:!0,stop_emoji:!0,pop:!0,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});e.exports=a}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerAssetType","StickerConstants","XStickerAssetController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function(a){var c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(!0){case a<this.SizeTimes.small:c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case a<this.SizeTimes.medium:c=b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case a<this.SizeTimes.large:c=b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return c},getEmojiSizeForTime:function(a){var c=b("EmojiLikeConstants").size.SMALL;a<this.SizeTimes.small?c=b("EmojiLikeConstants").size.SMALL:a<this.SizeTimes.medium?c=b("EmojiLikeConstants").size.MEDIUM:a<this.SizeTimes.large&&(c=b("EmojiLikeConstants").size.LARGE);return c},getMetadataForHotLike:function(a){__p&&__p();var c;switch(a){case b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:c=120;break;case b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:c=84;break;case b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:c=35;break;case b("EmojiLikeConstants").size.LARGE:c=64;break;case b("EmojiLikeConstants").size.MEDIUM:c=64;break;case b("EmojiLikeConstants").size.SMALL:c=32;break}return c?{height:c,width:c}:void 0},getPreviewURI:function(){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString()},getURIWithID:function(a){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",a).setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString()},getCustomEmojiFromThread:function(a){return a&&a.custom_like_icon}};e.exports=a}),null);
__d("MessengerHotLikeButton.react",["cssVar","cx","fbt","Bootloader","EmojiLikeConstants","Image.react","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerEnvironment","MessengerHotLikePreviewEvents","MessengerHotLikeOutlineSVG.react","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","MessengerCustomColorUtils.bs","React","StickerConstants","clearInterval","clearTimeout","gkx","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MercuryMessageObject").get();c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$6=function(a){(this.props.disabled||this.$3)&&(a.preventDefault(),a.stopPropagation());if(this.props.disabled||a.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$3=Date.now();this.$9();this.$10()}.bind(this),this.$8=function(){if(!(this.props.threadID&&this.$3))return;this.$3=0;this.$11();this.$12()}.bind(this),this.$14=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").POP,this.props.threadID)}.bind(this),this.$7=function(){this.$3&&(this.$3=0,this.$11(),this.$14())}.bind(this),this.$5=function(a){a.stopPropagation();if(this.props.disabled)return;if(b("KeyStatus").getKeyDownCode()===b("Keys").RETURN||!this.props.threadID){a=this.props.sendCustomLike;this.props.customLike&&a?a(this.props.customLike,b("MessengerHotLikeUtils").getEmojiSizeForTime(1)):this.props.sendSticker(b("MessengerHotLikeUtils").getStickerIDForTime(1))}}.bind(this),c}a.prototype.componentDidMount=function(){this.$4=b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a,c,d){a===this.props.threadID&&(this.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendHotLike(a.getDefaultFunnelName())},"MessengerHotLikeButton.react"),d&&this.props.customLike&&this.props.sendCustomLike?this.props.sendCustomLike(this.props.customLike,d,b("EmojiLikeConstants").source.HOT_LIKE):this.props.forGameChat||this.props.sendSticker(c))}.bind(this))};a.prototype.componentWillUnmount=function(){this.$4&&this.$4.remove()};a.prototype.render=function(){__p&&__p();var a=null,c={};if(this.props.customLike&&this.props.customLike.emoji){var d=this.props.customLike.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);var e=this.props.renderSize?this.props.renderSize:16;c.background="none";a=b("React").createElement(b("Image.react"),{src:d&&d.url,style:{padding:e==16?0:3,display:"block",height:e,width:e}})}else if(this.props.CustomRenderer){d=this.props.CustomRenderer;a=b("React").createElement(d,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize})}else this.props.customColor?b("gkx")("686397")?a=b("MessengerHotLikeIconSVGM4React.bs").make(this.props.customColor):a=b("React").createElement(b("MessengerHotLikeOutlineSVG.react"),{color:this.props.customColor,location:this.props.location}):b("gkx")("686397")&&(a=b("MessengerHotLikeIconSVGM4React.bs").make(this.props.disabled?"rgba(0, 0, 0, 0.12)":b("MessengerCustomColorUtils.bs").defaultColor()));e=i._("Enviar un Me gusta");return b("React").createElement(b("Link.react"),{"aria-label":e,className:b("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),disabled:this.props.disabled,href:"#",onClick:this.$5,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,onMouseLeave:this.$7,onMouseUp:this.$8,role:"button",style:c,title:e},a)};a.prototype.$9=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").START,this.$13(),this.props.threadID)};a.prototype.$12=function(){if(!this.props.threadID)return;!b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerHotLikePreview.react",function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this),function(){if(this.$1!==null)return;this.$1=b("setIntervalAcrossTransitions")(function(){b("ifRequired")("MessengerHotLikePreview.react",function(){this.$1!==null&&(b("clearInterval")(this.$1),this.$1=null),b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)}.bind(this))}.bind(this),100)}.bind(this)):b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};a.prototype.$13=function(){__p&&__p();var a=this.props.threadID;if(!a)return null;a=k.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a);k.normalizeNewMessage(a);a.is_like_preview=!0;a.like_preview_since=this.$3;a.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;a.body="";return new(b("ImmutableObject"))(a)};a.prototype.$10=function(){this.$11(),this.$2=b("setTimeoutAcrossTransitions")(this.$14,b("MessengerHotLikeUtils").SizeTimes.large)};a.prototype.$11=function(){b("clearTimeout")(this.$2)};a.propTypes={CustomRenderer:c.func,onMouseDown:c.func,customLike:c.object,customColor:c.string,forGameChat:c.bool,location:c.string,sendSticker:c.func.isRequired,sendCustomLike:c.func,threadID:c.string,disabled:c.bool,renderSize:c.number};e.exports=a}),null);
__d("MessengerHotLikeChatSVGIcon.react",["cssVar","fbt","ChatConfig","CurrentUser","React","gkx","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("gkx")("678580");c=b("React").PropTypes;var k="transparent",l=h._("Signo de aprobaci\u00f3n");d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={titleId:b("uniqueID")()},c}a.prototype.render=function(){var a=this.props.color||(b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff"),c=this.props.renderSize;c=c?{height:c.toString(),width:c.toString()}:void 0;var d=j?{fill:k,stroke:a,opacity:.2}:{fill:a,opacity:.2},e="bounds_"+this.state.titleId;return b("ChatConfig").get("new_dlc")?b("React").createElement("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},c),b("React").createElement("title",{id:this.state.titleId},l),b("React").createElement("g",{style:{fill:a}},b("React").createElement("path",{d:"M16,9.1c0-0.8-0.3-1.1-0.6-1.3c0.2-0.3,0.3-0.7,0.3-1.2c0-1-0.8-1.7-2.1-1.7h-3.1c0.1-0.5,0.2-1.3,0.2-1.8 c0-1.1-0.3-2.4-1.2-3C9.3,0.1,9,0,8.7,0C8.1,0,7.7,0.2,7.6,0.4C7.5,0.5,7.5,0.6,7.5,0.7L7.6,3c0,0.2,0,0.4-0.1,0.5L5.7,6.6 c0,0-0.1,0.1-0.1,0.1l0,0l0,0L5.3,6.8C5.1,7,5,7.2,5,7.4v6.1c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,1,1,2,1h5.2c0.9,0,1.4-0.3,1.8-0.9 c0.3-0.5,0.2-1,0.1-1.4c0.5-0.2,0.9-0.5,1.1-1.2c0.1-0.4,0-0.8-0.2-1C15.6,10.3,16,9.9,16,9.1z"}),b("React").createElement("path",{d:"M3.3,6H0.7C0.3,6,0,6.3,0,6.7v8.5C0,15.7,0.3,16,0.7,16h2.5C3.7,16,4,15.7,4,15.3V6.7C4,6.3,3.7,6,3.3,6z"}))):j?b("React").createElement("svg",babelHelpers["extends"]({width:"32px",height:"31px","aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},c),b("React").createElement("title",{id:this.state.titleId},l),b("React").createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},b("React").createElement("rect",{id:e,fill:k,width:"32",height:"32"}),b("React").createElement("g",{style:d},b("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),b("React").createElement("g",{transform:"translate(1.000000, 0.000000)"},b("React").createElement("path",{d:"M7.195,29.2559 L0.804,29.2559 C0.362,29.2559 0,28.8939 0,28.4509 L0,13.0609 C0,12.6179 0.362,12.2559 0.804,12.2559 L7.195,12.2559 C7.637,12.2559 8,12.6179 8,13.0609 L8,28.4509 C8,28.8939 7.637,29.2559 7.195,29.2559 Z",id:"Stroke-172",stroke:a,strokeWidth:"2"}),b("React").createElement("path",{d:"M15.9694,0 L15.9694,0 C14.6414,0 13.5214,0.568 13.0414,1.097 L12.4654,1.732 L12.5184,2.63 L12.8154,6.635 C12.8204,6.692 12.8074,6.749 12.7804,6.8 L9.5534,12.791 L8.1544,13.443 L6.9994,13.982 L6.9994,15.256 L6.9994,25.256 L6.9994,27.256 L8.5914,27.256 C8.7024,27.35 8.8354,27.47 8.9364,27.562 C9.1404,27.747 9.3424,27.928 9.5324,28.078 C10.4784,28.825 11.8634,29.174 12.8444,29.25 L12.9214,29.256 L12.9994,29.256 L23.3374,29.256 C25.3594,29.256 26.7824,28.521 27.5704,27.072 C28.0124,26.258 28.1384,25.438 28.0904,24.695 C28.9084,24.168 29.5624,23.33 29.7984,22.148 C29.9184,21.549 29.8984,20.985 29.7854,20.474 C30.4514,19.814 30.9374,18.865 30.9374,17.581 C30.9374,16.549 30.6654,15.739 30.2574,15.123 C30.4314,14.637 30.5364,14.081 30.5364,13.459 C30.5364,10.906 28.4954,9.256 25.3374,9.256 L21.0124,9.256 C21.1474,8.379 21.2494,7.521 21.2494,6.931 C21.2494,4.646 20.4484,1.775 18.2014,0.569 C17.4974,0.191 16.7464,0 15.9694,0 M15.9694,2 C16.3574,2 16.7974,2.085 17.2564,2.332 C18.6054,3.056 19.2494,5.021 19.2494,6.931 C19.2494,7.863 18.8974,9.829 18.7254,10.731 C18.6784,10.978 18.8684,11.256 19.1184,11.256 L25.3374,11.256 C26.2704,11.256 28.5364,11.456 28.5364,13.459 C28.5364,14.979 27.5584,15.534 27.5584,15.534 C27.5584,15.534 28.9374,15.673 28.9374,17.581 C28.9374,19.489 27.0854,19.682 27.0854,19.682 C27.0854,19.682 28.0924,20.481 27.8374,21.756 C27.5284,23.3 26.0264,23.391 25.6764,23.391 C25.6294,23.391 25.6044,23.389 25.6044,23.389 C25.6044,23.389 26.5714,24.723 25.8124,26.118 C25.5674,26.57 25.0414,27.256 23.3374,27.256 L12.9994,27.256 C12.2824,27.2 11.3154,26.937 10.7734,26.51 C10.1994,26.056 9.5134,25.256 8.9994,25.256 L8.9994,15.256 L10.6304,14.494 C10.8704,14.383 11.0674,14.197 11.1934,13.965 L14.5404,7.748 C14.7494,7.362 14.8424,6.924 14.8104,6.486 L14.5124,2.482 C14.5114,2.465 14.5114,2.453 14.5234,2.44 C14.5964,2.359 15.1744,2 15.9694,2",id:"Fill-174",fill:a})))):b("React").createElement("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},c),b("React").createElement("title",{id:this.state.titleId},l),b("React").createElement("g",null,b("React").createElement("rect",{id:e,fill:k,width:"32",height:"32"}),b("React").createElement("g",{style:d},b("React").createElement("path",{d:"M670.93,460a0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.17,467,668,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41c1.34-1,3.07-.23,4,2.6a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66c1.77,0,6.77,0,6.77,0,2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2A2,2,0,0,1,670.93,460Zm-20.13-7h-5.6a0.2,0.2,0,0,0-.2.2v15.6a0.2,0.2,0,0,0,.2.2h5.6a0.2,0.2,0,0,0,.2-0.2V453.2A0.2,0.2,0,0,0,650.8,453Z",transform:"translate(-643 -439)"})),b("React").createElement("g",{style:d},b("React").createElement("rect",{x:"2",y:"14",width:"6",height:"16",rx:"0.2",ry:"0.2"})),b("React").createElement("path",{fill:a,d:"M650.8,453a0.2,0.2,0,0,1,.2.2v15.6a0.2,0.2,0,0,1-.2.2h-5.6a0.2,0.2,0,0,1-.2-0.2V453.2a0.2,0.2,0,0,1,.2-0.2h5.6m0-2h-5.6a2.2,2.2,0,0,0-2.2,2.2v15.6a2.2,2.2,0,0,0,2.2,2.2h5.6a2.2,2.2,0,0,0,2.2-2.2V453.2a2.2,2.2,0,0,0-2.2-2.2h0Z",transform:"translate(-643 -439)"}),b("React").createElement("path",{fill:a,"data-name":"stroke",d:"M658.83,441c1.06,0,2.16,1,2.83,3a12.83,12.83,0,0,1,0,6.33,0.55,0.55,0,0,0,.54.66h1.18l5.59,0c2,0,3.31.62,3.54,2.5a2.39,2.39,0,0,1-1.23,2.4,0.08,0.08,0,0,0,0,.14,1.87,1.87,0,0,1,1.71,2,2,2,0,0,1-2.07,1.91,0.08,0.08,0,0,0,0,.15,1.75,1.75,0,0,1,1.29,1.66c0,1.45-1.2,1.66-2,1.75a0.06,0.06,0,0,0,0,.12,1.54,1.54,0,0,1,.88,1.68C671,467,669.24,467,668.07,467H658a5.63,5.63,0,0,1-5-2.5V455l2.19-1.59a4.39,4.39,0,0,0,1.21-1.75l1.48-5.59v-0.43l-0.41-3.81a0.45,0.45,0,0,1,.16-0.41,2,2,0,0,1,1.17-.41m0-2h0a4,4,0,0,0-2.36.8,2.45,2.45,0,0,0-1,2.23l0.39,3.67h0v0.05l-1.41,5.32a3.64,3.64,0,0,1-.47.69l-2.19,1.59L651,454v11.15l0.36,0.52A7.58,7.58,0,0,0,658,469h10.07c3.25,0,4.95-1.21,5-3.59a4.54,4.54,0,0,0-.05-0.93,3.59,3.59,0,0,0,1.14-2.71,3.77,3.77,0,0,0-.18-1.15,3.85,3.85,0,0,0,1-2.57,4,4,0,0,0-.82-2.55,4.38,4.38,0,0,0,.31-2.25c-0.2-1.59-1.18-4.25-5.53-4.25l-5,0a12.65,12.65,0,0,0-.35-5.63c-0.91-2.75-2.67-4.38-4.73-4.38h0Z",transform:"translate(-643 -439)"})))};a.propTypes={color:c.string,location:c.string,renderSize:c.number};e.exports=a}),null);
__d("XMessagingQuickCamController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/quick-cam/",{thread_id:{type:"String",required:!0},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerQuickCamButton.react",["fbt","AsyncRequest","Bootloader","BootloadOnRender.react","ChatConfig","JSResource","LazyComponent.react","Link.react","React","XMessagingQuickCamController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="seen_cam_button_nux";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={nuxOpen:!1,nuxShown:!!b("ChatConfig").get(i)},this.$2=function(){this.setState({nuxShown:!0,nuxOpen:!1},function(){return this.$3()}.bind(this))}.bind(this),this.$1=function(){this.$4(),!this.state.nuxShown?this.setState({nuxOpen:!0}):this.$3()}.bind(this),c}a.prototype.render=function(){var a=g._("Haz una foto con la c\u00e1mara r\u00e1pida");return b("React").createElement("div",null,b("React").createElement(b("Link.react"),{className:this.props.className,onClick:this.$1,ref:"photoButton",role:"button",title:a,label:a,tabIndex:0}),b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessagingShowNUX.react").__setRef("MessengerQuickCamButton.react"),component:b("React").createElement(b("LazyComponent.react"),{contextRef:function(){return this.refs.photoButton}.bind(this),settingName:i,shown:this.state.nuxOpen,onHidden:this.$2,ref:"camNUX"},g._("Env\u00eda fotos desde la c\u00e1mara del ordenador.")),placeholder:b("React").createElement("span",null)}))};a.prototype.$4=function(){b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(a,b){new a().setEvent(b.CLICK_QUICK_CAM).log()},"MessengerQuickCamButton.react")};a.prototype.$3=function(){var a=b("XMessagingQuickCamController").getURIBuilder().setString("thread_id",this.props.threadID).getURI();new(b("AsyncRequest"))().setMethod("GET").setURI(a).setRelativeTo(this).setReadOnly(!0).send()};a.propTypes={className:c.string.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("MessengerQuickCamOrigins",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function(){return[g.CHAT_TAB,g.MESSENGER]}};e.exports=g}),null);
__d("P2PPaymentSupportedCurrency",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USD:"USD",PEN:"PEN",PHP:"PHP",EUR:"EUR",GBP:"GBP",THB:"THB",VND:"VND"})}),null);
__d("P2PAbstractSendMoneyButton.react",["cx","fbt","React","TooltipLink.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.$3=function(){this.props.onMouseDown&&this.props.onMouseDown(),this.$1=this.props.isActive}.bind(this),this.$2=function(a){a.stopPropagation();if(this.$1){this.$1=!1;return}this.props.onClick()}.bind(this),b}a.prototype.render=function(){return b("React").createElement(b("TooltipLink.react"),{alignH:"center",className:b("joinClasses")(this.props.className,(this.props.isActive?"open":"")+(this.props.isDisabled?" disabled":"")+(this.props.isActive?" _10gz":"")+(this.props.isDisabled?" _10g-":"")+(!this.props.isMessenger&&!this.props.className?" _5uqy":"")+(this.props.isMessenger?" _3ggc":"")),href:"#",onClick:this.$2,onMouseDown:this.$3,onMouseOver:this.props.onMouseOver,position:"above",role:"button",title:this.$4()},this.getButton())};a.prototype.getButton=function(){return this.props.button?this.props.button:b("React").createElement("i",{className:"_5s8l"})};a.prototype.$4=function(){return this.props.isDisabled?null:h._("Enviar dinero")};e.exports=a}),null);
__d("P2PActions",["ChatOpenTab","ChatOpenTabEventLogger","FantaTabActions","P2PActionConstants","P2PDispatcher","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={updateCreditCards:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARDS_UPDATED,data:a})},updateCreditCardsError:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARDS_UPDATED_ERROR})},updatePaymentMethods:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_METHODS_UPDATED,data:a})},updatePaymentMethodsError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_METHODS_UPDATED_ERROR,data:a})},ignoreCreditCardChannelEvents:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHANNEL_EVENTS_IGNORED})},allowCreditCardChannelEvents:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHANNEL_EVENTS_ALLOWED})},creditCardSaving:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_SAVING})},addCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED,data:a})},addCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR,data:a})},addCreditCardErrorCleared:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_ADDED_ERROR_CLEARED})},updatePresetCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED,data:a})},updatePresetCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PRESET_CREDIT_CARD_UPDATED_ERROR,data:a})},updateCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_UPDATED,data:a})},updateCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_UPDATED_ERROR,data:a})},deleteCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_DELETED,data:a})},deleteCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_DELETED_ERROR,data:a})},verifyCreditCard:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_VERIFIED,data:a})},verifyCreditCardError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CREDIT_CARD_VERIFIED_ERROR,data:a})},updateTransfers:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFERS_UPDATED,data:a})},updateTransfersError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFERS_UPDATED_ERROR,data:a})},updateNUXTransfers:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").NUX_TRANSFERS_UPDATED,data:a})},transferAdded:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ADDED,data:a})},transferAddedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ADDED_ERROR,data:a})},transferUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_UPDATED,data:a})},transferUpdatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_UPDATED_ERROR,data:a})},transferAccepted:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_ACCEPTED})},transferDeclined:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").TRANSFER_DECLINED,data:a})},chatSendViewOpened:function(a){function c(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHAT_SEND_VIEW_OPENED,data:a})}b("ChatOpenTab").canOpenTab()&&!a.fromChatTab?(a.fromChatTab||(b("FantaTabActions").openTab(a.threadID),b("ChatOpenTabEventLogger").logAutoOpen("p2pAction",a.threadID)),c()):(b("ifRequired")("MessengerActions",function(c){b("setImmediate")(function(){c.selectThread(a.threadID)})}),c())},chatSendViewClosed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED,data:a})},binNumberValidated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BIN_NUMBER_VALIDATED,data:a})},binNumberValidatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BIN_NUMBER_VALIDATED_ERROR,data:a})},friendsListUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").FRIENDS_LIST_UPDATED,data:a})},userEligibilityUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").USER_ELIGIBILITY_UDPATED,data:a})},showDialog:function(a,c){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").DIALOG_SHOWN,data:{dialogClass:a,dialogProps:c}})},hideDialog:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").DIALOG_CLOSED})},bannerStatesUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_STATES_UPDATED,data:a})},bannerDismissed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_DISMISSED,data:a})},bannerCompleted:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").BANNER_COMPLETED,data:a})},moneypennyTransferCreated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").MONEYPENNY_TRANSFER_CREATED,data:a})},moneypennyTransferCreatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").MONEYPENNY_TRANSFER_CREATED_ERROR,data:a})},addPlatformContext:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_ADDED,data:a})},addPlatformContextError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_ADDED_ERROR,data:a})},clearPlatformContextSaveErrors:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED,data:a})},platformContextBannerDismissed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_BANNER_DISMISSED,data:a})},platformContextProductItemSold:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD,data:a})},platformContextChanged:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PLATFORM_CONTEXT_CHANGED,data:a})},extensiveTransferDetailsLoaded:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").EXTENSIVE_TRANSFER_DETAILS_UPDATED,data:a})},updateAddresses:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").ADDRESSES_UPDATED,data:a})},addressSaving:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").ADDRESS_SAVING})},addAddress:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").ADDRESS_ADDED,data:a})},addAddressError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").ADDRESS_ADDED_ERROR,data:a})},addAddressErrorCleared:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").ADDRESS_ADDED_ERROR_CLEARED})},checkoutCartInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CART_INITIATED})},checkoutCartCreated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CART_CREATED,data:a})},checkoutShippingOptionSelected:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_SHIPPING_OPTION_SELECTED,data:a})},checkoutAddressSelected:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_ADDRESS_SELECTED,data:a})},checkoutCreditCardSelected:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CREDIT_CARD_SELECTED,data:a})},checkoutAddressFormToggled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_ADDRESS_FORM_TOGGLED,data:a})},checkoutCreditCardFormToggled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_TOGGLED,data:a})},checkoutAddressEditOptionsToggled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED,data:a})},checkoutCreditCardEditOptionsToggled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED,data:a})},checkoutPaymentMethodEditOptionsToggled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED,data:a})},checkoutPaymentMethodSelected:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_SELECTED,data:a})},checkoutPaymentMethodConfigured:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIGURED,data:a})},checkoutPaymentMethodConfirmed:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_PAYMENT_METHOD_CONFIRMED,data:a})},checkoutCreditCardFormValidated:function(a,c){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_CREDIT_CARD_FORM_VALIDATED,data:{isValid:a,formData:c}})},checkoutAddressFormValidated:function(a,c){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_ADDRESS_FORM_VALIDATED,data:{isValid:a,formData:c}})},checkoutEditCompleted:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_EDIT_COMPLETED})},checkoutProcessing:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_PROCESSING,data:a})},checkoutBuyerProfileUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_BUYER_PROFILE_UPDATED,data:a})},checkoutManualPaymentReceiptUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED,data:a})},paymentRequestInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_INITIATED})},paymentRequestInitiatedComplete:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_INITIATED_COMPLETE})},paymentRequestCreated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CREATED,data:a})},paymentRequestCreatedError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CREATED_ERROR,data:a})},paymentRequestUpdated:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_UPDATED,data:a})},paymentRequestDeclineInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_INITIATED})},paymentRequestDeclined:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINED,data:a})},paymentRequestDeclineError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_DECLINE_ERROR,data:a})},paymentRequestCancelInitiated:function(){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_INITIATED})},paymentRequestCanceled:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCELED,data:a})},paymentRequestCancelError:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUEST_CANCEL_ERROR,data:a})},paymentRequestsFetched:function(a){b("P2PDispatcher").dispatch({type:b("P2PActionConstants").PAYMENT_REQUESTS_FETCHED,data:a})}};e.exports=a}),null);
__d("P2PLoadingMask.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return!this.props.visible?null:b("React").createElement("div",{className:"_3de"},b("React").createElement(b("XUISpinner.react"),{background:"dark",size:"large",className:"_3df"}),b("React").createElement("div",{className:"_3dg"}))};function a(){h.apply(this,arguments)}a.propTypes={visible:c.bool};a.defaultProps={visible:!1};e.exports=a}),null);
__d("P2PLogger",["BanzaiLogger"],(function(a,b,c,d,e,f){"use strict";var g="P2PPaymentLoggerConfig";a={log:function(a,c){c=babelHelpers["extends"]({event:a},c),b("BanzaiLogger").log(g,c)}};e.exports=a}),null);
__d("P2PPaymentLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_ADD_PAYPAL:"Actn_AddPayPal",ACTN_GET_TRANSFERS_ERROR:"Actn_GetTransfersError",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN:"Actn_TransferMoneyWithCampaign",ACTN_REQUEST_MONEY_WITH_CAMPAIGN_NOT_QUALIFIED:"Actn_RequestMoneyWithCampaignNotQualified",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_NOT_QUALIFIED:"Actn_TransferMoneyWithCampaignNotQualified",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_PARENT_CALL:"Actn_TransferMoneyWithCampaignParentCall",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_POST_SUCCESS:"Actn_TransferMoneyWithCampaignPostSuccess",ACTN_TRANSFER_MONEY_CHECK_NEEDS_REVERT:"Actn_TransferMoneyCheckNeedsRevert",ACTN_TRANSFER_MONEY_REVERT:"Actn_TransferMoneyRevert",ACTN_TRANSFER_MONEY_CREATE_CONTEXT:"Actn_TransferMoneyCreateContext",ACTN_TRANSFER_MONEY_CREATE_PLATFORM_ITEM:"Actn_TransferMoneyCreatePlatformItem",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_WITHDRAW_MONEY_POST:"Actn_WithdrawMoneyPost",ACTN_CANCEL_TRANSFER:"Actn_CancelTransfer",ACTN_SET_PHYSICAL_ADDRESS:"Actn_SetPhysicalAddress",ACTN_CREATE_MSGR_COMMERCE_CART:"Actn_CreateMsgrCommerceCart",ACTN_PLACE_MSGR_COMMERCE_ORDER:"Actn_PlaceMsgrCommerceOrder",ACTN_PLATFORM_SET_SHIPPING_ADDRESS:"Actn_PlatformSetShippingAddress",ACTN_PLATFORM_BANNER_IMPRESSION:"Actn_PlatformBannerImpression",ACTN_PLATFORM_BANNER_DISMISSAL:"Actn_PlatformBannerDismissal",ACTN_PLATFORM_CARD_IMPRESSION:"Actn_PlatformCardImpression",ACTN_PLATFORM_CARD_DISMISSAL:"Actn_PlatformCardDismissal",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_POST_TRANSFER_STEPS:"Actn_PostTransferSteps",ACTN_SEND_SENDER_EMAIL:"Actn_SendSenderEmail",ACTN_SEND_EXPIRE_NOTIFICATIONS:"Actn_SendExpireNotifications",ACTN_SEND_PUSH_FAIL_NOTIFS:"Actn_SendPushFailNotis",ACTN_SEND_REFRESH_MESSAGE:"Actn_SendRefreshMessage",ACTN_UNCATEGORIZED_EXCEPTION:"Actn_Uncategorized_Exception",ACTN_INCREASE_CAMPAIGN_COUNTER:"Actn_Increase_Campaign_Counter",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_CREATE_GROUP_PAYMENT_REQUEST:"Actn_CreateGroupPaymentRequest",ACTN_REMIND_PAYMENT_REQUEST:"Actn_RemindPaymentRequest",ACTN_PAY_PAYMENT_REQUEST:"Actn_PayPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_CANCEL_PAYMENT_REQUEST:"Actn_CancelPaymentRequest",ACTN_EXPIRE_PAYMENT_REQUEST:"Actn_ExpirePaymentRequest",ACTN_SEND_PAYMENT_REQUEST_MESSAGE:"Actn_SendPaymentRequestMessage",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_FINISH_HUMAN_REVIEW:"Actn_FinishHumanReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_SUBMIT_VERIFICATION_STEP:"Actn_SubmitVerificationStep",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CompleteReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_FILTER_LOGMESSAGE:"Actn_FilterLogMessage",ACTN_FILTER_NOTIFICATION:"Actn_FilterNotification",ACTN_SEND_NOTIFICATION:"Actn_SendNotification",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_VALIDATE_PIN:"Actn_ValidatePIN",ACTN_UPDATE_PASSWORD_SETTINGS:"Actn_UpdatePasswordSettings",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",ACTN_CHANNEL_NOTIF_CARD_EVENT:"Actn_ChannelNotifCardEvent",ACTN_CHANNEL_NOTIF_TRANSFER_STATUS_EVENT:"Actn_ChannelNotifTransferStatusEvent",ACTN_CHANNEL_NOTIF_PLATFORM_EVENT:"Actn_ChannelNotifPlatformEvent",ACTN_CHANNEL_NOTIF_PAYMENT_REQUEST_STATUS_EVENT:"Actn_ChannelNotifPaymentRequestStatusEvent",ACTN_PLATFORM_BANNER_DISMISSED:"Actn_PlatformBannerDismissed",ACTN_PLATFORM_BANNER_MARK_AS_SOLD:"Actn_PlatformBannerMarkAsSold",ACTN_ADD_ADDRESS:"Actn_AddAddress",ACTN_GET_ADDRESSES:"Actn_GetAddresses",ACTN_ADD_EMAIL:"Actn_AddEmail",ACTN_UPDATE_EMAIL:"Actn_UpdateEmail",ACTN_SET_PRIMARY_EMAIL:"Actn_SetPrimaryEmail",ACTN_REMOVE_EMAIL:"Actn_RemoveEmail",ACTN_ADD_PHONE:"Actn_AddPhone",ACTN_UPDATE_PHONE:"Actn_UpdatePhone",ACTN_SET_PRIMARY_PHONE:"Actn_SetPrimaryPhone",ACTN_REMOVE_PHONE:"Actn_RemovePhone",ACTN_GET_CURRENT_USER_PROFILE_DATA:"Actn_GetCurrentUserProfileData",ACTN_DO_FRAUD_CHECK:"Actn_DoFraudCheck",ACTN_PEOPLE_SEARCH_SEND_MONEY_BUTTON_CLICKED:"Actn_PeopleSearchSendMoneyButtonClicked",ACTN_CAMPAIGN_CHECK_USER_HAS_NEW_ACTIVITY:"Actn_CampaignCheckUserHasNewActivity",ACTN_CAMPAIGN_SAVE_PROMO_NOTIFICATION_TIME:"Actn_CampaignSavePromoNotificationTime",ACTN_CAMPAIGN_SEND_INCENTIVE_ADMIN_MESSAGE:"Actn_CampaignSendIncentiveAdminMessage",ACTN_CAMPAIGN_CREATE_OR_FETCH:"Actn_CampaignCreateOrFetch",ACTN_CREATE_CAMPAIGN_ASSOC:"Actn_CreateCampaignAssoc",ACTN_FETCH_SEND_PHASE_STEPS:"Actn_FetchSendPhaseSteps",ACTN_FETCH_RECEIVE_NOTIFICATION_PHASE_STEPS:"Actn_FetchReceiveNotificationPhaseSteps",ACTN_FETCH_RECEIVE_BUBBLE_PHASE_STEPS:"Actn_FetchReceiveBubblePhaseSteps",ACTN_FETCH_REQUESTEE_SEND_PHASE_STEPS:"Actn_FetchRequesteeSendPhaseSteps",ACTN_START_IDV_FLOW:"Actn_StartIDVFlow",ACTN_START_UPLOAD_ADDITIONAL_PHOTO:"Actn_StartUploadAdditionalPhoto",ACTN_GET_PHOTO_ID_GBG_EXCEPTION:"Actn_GetPhotoIDGBGException",ACTN_IDV_PENDING_CLEARED:"Actn_IdvPendingCleared",ACTN_IDOLOGY_FETCH_EXISTING_FLOW:"Actn_IdologyFetchExistingFlow",ACTN_PAYPAL_MENTION_LABEL_CREATED:"Actn_PayPalMentionLabelCreated",ACTN_PAYPAL_MENTION_LABEL_GET:"Actn_PayPalMentionLabelGet",ERROR_NON_STANDARD_CHAR:"ErrorNonStandardChar",UI_ACTN_SEND_MONEY_BUTTON_CLICKED:"UI_Actn_Send_Money_Button_Clicked",UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED:"UI_Actn_Send_Money_Button_Placeholder_Clicked",UI_ACTN_SEND_MONEY_OMNIM_SUGGESTION_CLICKED:"UI_Actn_Send_Money_OmniM_Suggestion_Clicked",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_P2P_SENDER_DISABLED_SHOWN:"UI_Actn_P2P_Sender_Disabled_Shown",UI_ACTN_P2P_RECIPIENT_INELIGIBLE_SHOWN:"UI_Actn_P2P_Recipient_Ineligible_Shown",UI_ACTN_CANCEL_SEND:"UI_Actn_Cancel_Send",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_INITIATE_CHOOSE_CARD:"UI_Actn_Initiate_Choose_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_MONEY_CANCEL:"UI_Actn_Accept_Money_Cancel",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card",UI_ACTN_CHANGE_CARD:"UI_Actn_Change_Card",UI_ACTN_INITIATE_SEND_TRIGGER:"UI_Actn_Initiate_Send_Trigger",UI_ACTN_INITIATE_GROUP_SEND:"UI_Actn_Initiate_Group_Send",UI_ACTN_GROUP_SEND_CANCELLED:"UI_Actn_Group_Send_Cancelled",UI_ACTN_INITIATE_GROUP_SEND_TRIGGER:"UI_Actn_Initiate_Group_Send_Trigger",UI_ACTN_GROUP_SEND_RECIPIENT_PICKED:"UI_Actn_Group_Send_Recipient_Picked",UI_ACTN_3RD_PARTY_RECEIPT_SHOWN:"UI_Actn_3rd_Party_Receipt_Shown",UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED:"UI_Actn_3rd_Party_Receipt_Dismissed",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Clicked",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Cancelled",UI_ACTN_CHAT_THREAD_BANNER_CLICKED:"UI_Actn_Chat_Thread_Banner_Clicked",UI_ACTN_CHAT_THREAD_BANNER_VIEWED:"UI_Actn_Chat_Thread_Banner_Viewed",UI_ACTN_CHAT_THREAD_BANNER_DISMISSED:"UI_Actn_Chat_Thread_Banner_Dismissed",UI_ACTN_INITIATE_MONEYPENNY_ORDER:"UI_Actn_Initiate_Moneypenny_Order",UI_ACTN_CONFIRM_MONEYPENNY_ORDER:"UI_Actn_Confirm_Moneypenny_Order",UI_ACTN_MONEYPENNY_ORDER_FAIL:"UI_Actn_Moneypenny_Order_Fail",UI_ACTN_MONEYPENNY_ORDER_SUCCESS:"UI_Actn_Moneypenny_Order_Success",UI_ACTN_MONEYPENNY_ORDER_CANCEL:"UI_Actn_Moneypenny_Order_Cancel",UI_ACTN_FRIEND_PICKER_SEARCH:"UI_Actn_Friend_Picker_Search",UI_ACTN_FRIEND_PICKER_SELECT:"UI_Actn_Friend_Picker_Select",UI_ACTN_FRIEND_PICKER_SHOWN:"UI_Actn_Friend_Picker_Shown",UI_ACTN_FI_CANCEL:"UI_Actn_FI_Cancel",UI_ACTN_FI_SUCCESS_DIALOG_NEXT:"UI_Action_Success_Dialog_Next",UI_ACTN_FI_BANNER_DISMISSED:"UI_Actn_FI_Banner_Dismissed",UI_ACTN_FI_BANNER_IMPRESSION:"UI_Actn_FI_Banner_Impression",UI_ACTN_INCENTIVE_TRANSFER_SUCCESS:"UI_Actn_Incentive_Transfer_Success",UI_ACTN_INCENTIVE_TRANSFER_FAILURE:"UI_Actn_Incentive_Transfer_Failure",UI_ACTN_PLATFORM_BANNER_SELLER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Seller_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_BUYER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Buyer_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_SOLD_CLICKED:"UI_Actn_Platform_Banner_Sold_Clicked",UI_ACTN_PLATFORM_BANNER_IMAGE_CLICKED:"UI_Actn_Platform_Banner_Image_Clicked",UI_ACTN_PLATFORM_BANNER_TITLE_CLICKED:"UI_Actn_Platform_Banner_Title_Clicked",UI_ACTN_PLATFORM_BANNER_PAY_CLICKED:"UI_Actn_Platform_Banner_Pay_Clicked",UI_ACTN_PLATFORM_BANNER_REQUEST_CLICKED:"UI_Actn_Platform_Banner_Request_Clicked",UI_ACTN_PLATFORM_BANNER_SELLER_VIEWED:"UI_Actn_Platform_Banner_Seller_Viewed",UI_ACTN_PLATFORM_BANNER_BUYER_VIEWED:"UI_Actn_Platform_Banner_Buyer_Viewed",UI_ACTN_PLATFORM_BANNER_PAY_NUX_SHOWN:"UI_Actn_Platform_Banner_Pay_Nux_Shown",UI_ACTN_INITIATE_REQUEST:"UI_Actn_Initiate_Request",UI_ACTN_REQUEST_CLICKED:"UI_Actn_Request_Clicked",UI_ACTN_CONFIRM_REQUEST:"UI_Actn_Confirm_Request",UI_ACTN_REQUEST_SUCCESS:"UI_Actn_Request_Success",UI_ACTN_REQUEST_FAIL:"UI_Actn_Request_Fail",UI_ACTN_INITIATE_DECLINE_REQUEST:"UI_Actn_Initiate_Decline_Request",UI_ACTN_CONFIRM_DECLINE_REQUEST:"UI_Actn_Confirm_Decline_Request",UI_ACTN_DECLINE_REQUEST_FAIL:"UI_Actn_Decline_Request_Fail",UI_ACTN_DECLINE_REQUEST_SUCCESS:"UI_Actn_Decline_Request_Success",UI_ACTN_INITIATE_CANCEL_REQUEST:"UI_Actn_Initiate_Cancel_Request",UI_ACTN_CONFIRM_CANCEL_REQUEST:"UI_Actn_Confirm_Cancel_Request",UI_ACTN_CANCEL_REQUEST_FAIL:"UI_Actn_Cancel_Request_Fail",UI_ACTN_CANCEL_REQUEST_SUCCESS:"UI_Actn_Cancel_Request_Success",UI_ACTN_INITIATE_CHECKOUT:"UI_Actn_Initiate_Checkout",UI_ACTN_CHECKOUT_CONFIRM:"UI_Actn_Checkout_Confirm",UI_ACTN_INITIATE_ADD_ADDRESS:"UI_Actn_Initiate_Add_Address",UI_ACTN_CANCEL_ADD_ADDRESS:"UI_Actn_Cancel_Add_Address",UI_ACTN_INITIATE_CHOOSE_ADDRESS:"UI_Actn_Initiate_Choose_Address",UI_ACTN_CONFIRM_ADDRESS_DETAILS:"UI_Actn_Confirm_Address_Details",UI_ACTN_ADD_ADDRESS_SUCCESS:"UI_Actn_Add_Address_Success",UI_ACTN_ADD_ADDRESS_FAIL:"UI_Actn_Add_Address_Fail",UI_ACTN_CHECKOUT_FAIL:"UI_Actn_Checkout_Fail",UI_ACTN_CHECKOUT_CART_CREATION_FAIL:"UI_Actn_Checkout_Cart_Creation_Fail",UI_ACTN_CHECKOUT_CANCEL:"UI_Actn_Checkout_Cancel",UI_ACTN_CHECKOUT_SUCCESS:"UI_Actn_Checkout_Success",UI_ACTN_CHECKOUT_CART_CREATION_SUCCESS:"UI_Actn_Checkout_Cart_Creation_Success",UI_ACTN_SEND_MONEY_PAGE_VIEWED:"UI_Actn_Send_Money_Page_Viewed",UI_ACTN_ACCEPT_MONEY_NUX_SHOWN:"UI_Actn_Accept_Money_NUX_Shown",UI_ACTN_ACCEPT_MONEY_NUX_NEXT_CLICK:"UI_Actn_Accept_Money_NUX_Next_Click",UI_ACTN_SEND_MONEY_NUX_SHOWN:"UI_Actn_Send_Money_NUX_Shown",UI_ACTN_SEND_MONEY_NUX_NEXT_CLICK:"UI_Actn_Send_Money_NUX_Next_Click",UI_ACTN_GET_CREDIT_CARDS_EXCEPTION:"UI_ACTN_GET_CREDIT_CARDS_EXCEPTION",UI_ACTN_CREATE_TRANSFER_EXCEPTION:"UI_ACTN_CREATE_TRANSFER_EXCEPTION",UI_ACTN_ADD_CARD_EXCEPTION:"UI_ACTN_ADD_CARD_EXCEPTION",UI_ACTN_GET_TRANSFERS_EXCEPTION:"UI_ACTN_GET_TRANSFERS_EXCEPTION",UI_ACTN_GET_EXTENSIVE_TRANSFERS_EXCEPTION:"UI_ACTN_GET_EXTENSIVE_TRANSFERS_EXCEPTION",UI_ACTN_GET_NUX_TRANSFERS_EXCEPTION:"UI_ACTN_GET_NUX_TRANSFERS_EXCEPTION",UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION:"UI_ACTN_UPDATE_PRESET_CARD_EXCEPTION",UI_ACTN_UPDATE_CARD_EXCEPTION:"UI_ACTN_UPDATE_CARD_EXCEPTION",UI_ACTN_DELETE_CARD_EXCEPTION:"UI_ACTN_DELETE_CARD_EXCEPTION",UI_ACTN_GET_PASSWORD_PROTECTION_EXCEPTION:"UI_ACTN_GET_PASSWORD_PROTECTION_EXCEPTION",UI_ACTN_SET_PASSWORD_PROTECTION_EXCEPTION:"UI_ACTN_SET_PASSWORD_PROTECTION_EXCEPTION",UI_ACTN_DECLINE_TRANSFER_EXCEPTION:"UI_ACTN_DECLINE_TRANSFER_EXCEPTION",UI_ACTN_CANCEL_TRANSFER_EXCEPTION:"UI_ACTN_CANCEL_TRANSFER_EXCEPTION",UI_ACTN_VERIFY_CARD_EXCEPTION:"UI_ACTN_VERIFY_CARD_EXCEPTION",UI_ACTN_VALIDATE_BIN_EXCEPTION:"UI_ACTN_VALIDATE_BIN_EXCEPTION",UI_ACTN_GET_ELIGIBILITY_EXCEPTION:"UI_ACTN_GET_ELIGIBILITY_EXCEPTION",UI_ACTN_GET_FRIEND_LIST_EXCEPTION:"UI_ACTN_GET_FRIEND_LIST_EXCEPTION",UI_ACTN_GET_BANNER_STATES_EXCEPTION:"UI_ACTN_GET_BANNER_STATES_EXCEPTION",UI_ACTN_INCREMENT_BANNER_VIEW_EXCEPTION:"UI_ACTN_INCREMENT_BANNER_VIEW_EXCEPTION",UI_ACTN_INCREMENT_BANNER_DISMISSAL_EXCEPTION:"UI_ACTN_INCREMENT_BANNER_DISMISSAL_EXCEPTION",UI_ACTN_CREATE_M_TRANSFER_EXCEPTION:"UI_ACTN_CREATE_M_TRANSFER_EXCEPTION",UI_ACTN_CREATE_FI_TRANSER_EXCEPTION:"UI_ACTN_CREATE_FI_TRANSER_EXCEPTION",UI_ACTN_GET_PLATFORM_CONTEXT_EXCEPTION:"UI_ACTN_GET_PLATFORM_CONTEXT_EXCEPTION",UI_ACTN_DISMISS_PLATFORM_CONTEXT_EXCEPTION:"UI_ACTN_DISMISS_PLATFORM_CONTEXT_EXCEPTION",UI_ACTN_MARK_SOLD_CONTEXT_EXCEPTION:"UI_ACTN_MARK_SOLD_CONTEXT_EXCEPTION",UI_ACTN_GET_ADDRESSES_EXCEPTION:"UI_ACTN_GET_ADDRESSES_EXCEPTION",UI_ACTN_ADD_ADDRESS_EXCEPTION:"UI_ACTN_ADD_ADDRESS_EXCEPTION",UI_ACTN_CREATE_CART_EXCEPTION:"UI_ACTN_CREATE_CART_EXCEPTION",UI_ACTN_SET_CART_ADDRESS_EXCEPTION:"UI_ACTN_SET_CART_ADDRESS_EXCEPTION",UI_ACTN_GET_PROFILE_EXCEPTION:"UI_ACTN_GET_PROFILE_EXCEPTION",UI_ACTN_CREATE_REQUEST_EXCEPTION:"UI_ACTN_CREATE_REQUEST_EXCEPTION",UI_ACTN_DECLINE_REQUEST_EXCEPTION:"UI_ACTN_DECLINE_REQUEST_EXCEPTION",UI_ACTN_CANCEL_REQUEST_EXCEPTION:"UI_ACTN_CANCEL_REQUEST_EXCEPTION",UI_ACTN_GET_PENDING_REQUESTS_EXCEPTION:"UI_ACTN_GET_PENDING_REQUESTS_EXCEPTION",UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_SHOWN:"UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_SHOWN",UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_NEXT_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_QP_DIALOG_NEXT_CLICK",UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SELLER_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SELLER_CLICK",UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SEND_CLICK:"UI_ACTN_GROUP_SELL_INTEREST_MESSAGE_SEND_CLICK",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_SHOWN:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_SHOWN",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_CANCEL_CLICK:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_CANCEL_CLICK",UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_PAY_CLICK:"UI_ACTN_MESSAGE_SELLER_CONFIRM_DIALOG_PAY_CLICK",UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK:"UI_ACTN_PAYMENTS_HISTORY_BLUEBAR_CLICK",BATCH_PROCESS_PENDING_PAYMENT:"BATCH_PROCESS_PENDING_PAYMENT",USER_TEST_CREATE_PAYMENT_REQUEST:"Test_Actn_CreatePaymentRequest",ALERT_MESSENGER_PAYMENT_METHOD_CACHE_INCONSISTENCY:"Alert_messenger_payment_method_cache_inconsistency",DEEPLINK_PERSONAL_DESKTOP_REQUEST:"p2p_personal_deeplink_request_desktop",DEEPLINK_PERSONAL_MOBILE_REQUEST:"p2p_personal_deeplink_request_mobile"})}),null);
__d("P2PPaymentLoggerEventFlow",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_REQUEST:"UI_Flow_P2P_Request",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings",UI_FLOW_P2P_GROUP_SEND:"UI_Flow_P2P_Group_Send",UI_FLOW_P2P_GROUP_REQUEST:"UI_Flow_P2P_Group_Request",UI_FLOW_MONEYPENNY_CHECKOUT:"UI_Flow_Moneypenny_Checkout",UI_FLOW_FINANCIAL_INCENTIVES:"UI_Flow_Financial_Incentives",UI_FLOW_FINANCIAL_INCENTIVES_ZERO_INDEX_JEWEL:"UI_Flow_Financial_Incentives_Zero_Index_Jewel",UI_FLOW_PLATFORM_BANNER:"UI_Flow_Platform_Banner",UI_FLOW_CHECKOUT:"UI_Flow_Checkout",UI_FLOW_SEND_MONEY_PAGE:"UI_Flow_Send_Money_Page",UI_FLOW_REQUEST_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Request_Sender_NUX_Chat_Thread_Banner",UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Sender_NUX_Chat_Thread_Banner",UI_FLOW_GROUP_SELL_INTEREST_DIALOG:"UI_FLOW_GROUP_SELL_INTEREST_DIALOG",UI_FLOW_SEND_MONEY_BLUEBAR:"UI_FLOW_SEND_MONEY_BLUEBAR",UI_FLOW_PAYMENTS_MENU_BLUEBAR:"UI_FLOW_PAYMENTS_MENU_BLUEBAR",UI_FLOW_BOOKMARK:"UI_FLOW_BOOKMARK",UI_FLOW_P2P_BIRTHDAY_GIFT_SEND_MONEY:"UI_FLOW_P2P_BIRTHDAY_GIFT_SEND_MONEY",UI_FLOW_P2P_PEOPLE_SEARCH_SEND_MONEY:"UI_FLOW_P2P_PEOPLE_SEARCH_SEND_MONEY"})}),null);
__d("P2PSendMoneyContainerBootloader.react",["cx","Bootloader","DeferredComponent.react","MercuryIDs","MessengerEnvironment","P2PAbstractSendMoneyButton.react","P2PActions","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PSendMoneyDialogStore","React","ReactLayeredComponentMixin_DEPRECATED","XUIContextualDialog.react","emptyFunction","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=b("MessengerEnvironment").messengerui,i=h?282:260;c=b("React").createClass({displayName:"P2PSendMoneyContainerBootloader",propTypes:{button:a.node,className:a.string,ContextualDialog:a.func,flyoutAlignment:a.oneOf(["left","center","right"]),fromChatTab:a.bool,onTrigger:a.func,participantIDs:a.array,referrer:a.string,threadID:a.string},getInitialState:function(){return{showPlaceholderDialog:!1,shouldBootloadImmediately:b("P2PSendMoneyDialogStore").isAnyChatSendViewOpen()}},mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],_clicked:!1,_onComponentLoad:b("emptyFunction"),_bootloadCalled:!1,_sendMoneyDialogStoreSub:null,log:function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_referrer:this.props.referrer,www_event_flow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_SEND},c))},componentWillUnmount:function(){this.removeDialogStoreSub()},onDialogStoreChange:function(){this._bootloadComponentNow(),this.removeDialogStoreSub()},removeDialogStoreSub:function(){this._sendMoneyDialogStoreSub&&(this._sendMoneyDialogStoreSub.remove(),this._sendMoneyDialogStoreSub=null)},onPlaceholderClick:function(){var a=this.props.threadID?b("MercuryIDs").tokenize(this.props.threadID).value:null;this._handleDialogVisibility(!this.state.showPlaceholderDialog);this.log(b("P2PPaymentLoggerEvent").UI_ACTN_SEND_MONEY_BUTTON_PLACEHOLDER_CLICKED,{object_id:a});this._bootloadComponentNow();this._clicked=!1},_handleDialogVisibility:function(a){!a?b("P2PActions").chatSendViewClosed({threadID:this.props.threadID}):b("P2PActions").chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID,fromChatTab:this.props.fromChatTab}),this.setState({showPlaceholderDialog:a})},renderLayers:function(){var a={};if(this.state.showPlaceholderDialog){var c=this.props.ContextualDialog||b("XUIContextualDialog.react");a.placeholderDialog=b("React").createElement(c,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:h?"right":"left",contextRef:function(){return this.refs.placeholderButton}.bind(this),onBlur:function(){this._clicked||this._handleDialogVisibility(!1),this._clicked=!1}.bind(this),ref:"dialog",shown:!0,width:i,position:"above"},b("React").createElement("div",{className:"_c_5"},b("React").createElement(b("P2PLoadingMask.react"),{visible:!0})))}return a},render:function(){return this._isPageChat()?null:b("React").createElement(b("DeferredComponent.react"),babelHelpers["extends"]({deferredComponent:this._bootloadComponent,deferredPlaceholder:this._renderPlaceholder()},this.props))},_renderPlaceholder:function(){return b("React").createElement(b("P2PAbstractSendMoneyButton.react"),{button:this.props.button,className:this.props.className,isActive:!1,isDisabled:!1,isMessenger:h,onClick:this.onPlaceholderClick,onMouseDown:function(){this._clicked=!0}.bind(this),onMouseOver:this._bootloadComponentNow,ref:"placeholderButton"})},_bootloadComponent:function(a){this._onComponentLoad=a.bind(this),this.state.shouldBootloadImmediately?this._bootloadComponentNow():this._sendMoneyDialogStoreSub=b("P2PSendMoneyDialogStore").addListener("change",this.onDialogStoreChange)},_bootloadComponentNow:function(){if(this._bootloadCalled)return;this._bootloadCalled=!0;b("Bootloader").loadModules(["P2PSendMoneyContainer.react"],function(a){this.removeDialogStoreSub(),this._onComponentLoad(a),this.setState({showPlaceholderDialog:!1})}.bind(this),"P2PSendMoneyContainerBootloader.react")},_isPageChat:function(){return!!this._getPageID()},_getPageID:function(){return b("getPageIDFromThreadID")(this.props.threadID)}});e.exports=c}),null);
__d("ReasonBootloadOnRender.react",["LoadOnRender.react","React","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){b("promiseDone")(this.props.loader.load(),a)}.bind(this),c}a.prototype.render=function(){"use strict";return b("React").createElement(b("LoadOnRender.react"),{placeholder:this.props.placeholder,loader:this.$1,component:this.props.component})};e.exports=a}),null);
__d("ReasonResource",["Promise","JSResourceReference","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(h,b("JSResourceReference"));g&&g.prototype;h.prototype.load=function(){return new(b("Promise"))(function(a){b("promiseDone")(this.getFullComponent(),function(b){a(b.jsComponent)})}.bind(this))};h.prototype.getFullComponent=function(){return this.__reference.load()};h.prototype.setResourceReference=function(a){this.__reference=a;return this};function h(){g.apply(this,arguments)}function a(a){return new h(a.getModuleId()).setResourceReference(a)}e.exports=a}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("ReplyingToMessageFallbackReact.bs",["cx","fbt","React","ReasonReact.bs","XUICloseButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("ReplyingToMessageFallbackReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:(d?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,d?1:2,a,void 0,[])),h._("Replying to message"))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onCancelReplyingToMessage,[],a.isChatTab)});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("StickersDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("StickersActions",["StickersDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_RECENT_STICKER:null,HIDE_FLYOUT:null,LOAD_RECENT_STICKERS:null,SELECT_STORE_PACK:null,SELECT_TRAY_PACK:null,SHOW_FLYOUT:null,TRAY_LOADED:null});a={Types:g,addRecentSticker:function(a){b("StickersDispatcher").dispatch({type:g.ADD_RECENT_STICKER,sticker:a})},hideStickerFlyout:function(){b("StickersDispatcher").dispatch({type:g.HIDE_FLYOUT})},loadRecentStickers:function(a){b("StickersDispatcher").dispatch({type:g.LOAD_RECENT_STICKERS,stickers:a})},selectStorePack:function(a){b("StickersDispatcher").dispatch({type:g.SELECT_STORE_PACK,packID:a})},selectTrayPack:function(a){b("StickersDispatcher").dispatch({type:g.SELECT_TRAY_PACK,packID:a})},showStickerFlyout:function(a){b("StickersDispatcher").dispatch({type:g.SHOW_FLYOUT,threadID:a})},trayLoaded:function(){b("StickersDispatcher").dispatch({type:g.TRAY_LOADED})}};e.exports=a}),null);
__d("isWebGLEnabled",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;function h(){try{var a=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&Boolean(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(a){return!1}}function a(){g===null&&(g=h());return g}e.exports=a}),null);
__d("ChatTabComposer.react",["cssVar","csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatComposerFlyoutButtonBootLoader.react","ChatConfig","ChatInput.react","ChatPhotoUploader.react","CSS","CurrentUser","CustomColorHighlighting.react","ErrorBoundary.react","EventRemindersGating","FantaMessageActions","FantaWebDriverIDs","JSResource","Keys","LazyComponent.react","Link.react","M4IconSend.bs","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerCustomColorUtils.bs","MessengerHotLikeButton.react","MessengerHotLikeChatSVGIcon.react","MessengerHotLikeUtils","MessengerParticipants.bs","MessengerQuickCamButton.react","MessengerQuickCamOrigins","P2PPaymentConfig","P2PPaymentSupportedCurrency","P2PSendMoneyContainerBootloader.react","Placeholder.react","React","ReasonBootloadOnRender.react","ReasonResource","ReplyingToMessageFallbackReact.bs","StickersActions","TooltipData","URI","WorkChatExtensionAvailabilityFetcher","WorkFileUploadsGating","XUISpinner.react","clearImmediate","convertMIGColorToFIGColor","emptyFunction","getPageIDFromThreadID","gkx","isWebGLEnabled","joinClasses","lazyLoadComponent","promiseDone","qex","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("M4IconSend.bs").jsComponent,m=b("ReplyingToMessageFallbackReact.bs").jsComponent,n=b("lazyLoadComponent")(b("JSResource")("ChatEventPlanButton.react").__setRef("ChatTabComposer.react")),o=77,p=9,q=350,r="#BEC3C9",s=b("ChatConfig").get("chat_basic_input_module")||b("ChatInput.react");c=babelHelpers.inherits(a,b("React").PureComponent);k=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={inputHeight:0,p2pPaymentConfig:b("P2PPaymentConfig").config,stickerFlyoutShown:!1,hasWorkChatExtension:!1},this.$2=null,this.$3=null,this.$4=null,this.$13=function(){b("setImmediate")(function(){return b("FantaMessageActions").cancelReplyToMessage(this.props.threadID||"")}.bind(this))}.bind(this),this.$11=function(a,c){a.keyCode===b("Keys").RETURN&&(this.refs.emojiButton&&this.refs.emojiButton.hideFlyout()),this.props.inputKeyDown&&this.props.inputKeyDown(a,c)}.bind(this),this.$6=function(a){a=a.target;a instanceof Element&&(b("CSS").matchesSelector(a,"._1d4_")||b("CSS").matchesSelector(a,"._552h")||b("CSS").matchesSelector(a,"._552n"))&&(this.$4&&this.$4.focus())}.bind(this),this.$12=function(a){this.state.stickerFlyoutShown&&b("StickersActions").hideStickerFlyout(),this.props.onEscape&&this.props.onEscape(a)}.bind(this),this.$36=function(a,c){a.platformFBID.toString()!==b("MercuryConfig").MessengerAppID?this.uploadURL({attribution_app_id:a.platformFBID,errorDialogParams:{body:j._("Ha habido un problema al enviar este GIF. Elige otro y vuelve a intentarlo."),title:j._("No se ha podido enviar el GIF")},external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source}):this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect&&this.props.stickerButtonProps.onStickerSelect(a.resultID.toString)}.bind(this),this.$34=function(a){var c=this.$28();if(!c)return;b("Bootloader").loadModules(["BrowserExtensionsDialog"],function(d){d.show(new(b("URI"))(a.getURI()),a.getUniqueID(),c,b("CurrentUser").getID())},"ChatTabComposer.react")}.bind(this),this.$37=function(a){this.$4&&this.$4.insertEmoji&&this.$4.insertEmoji(a)}.bind(this),c}a.prototype.componentDidUpdate=function(a){a.composer.replyingToMessage!==this.props.composer.replyingToMessage&&(this.$4&&this.$4.focus())};a.prototype.render=function(){var a=b("gkx")("678580");a=this.props.disableInput?null:b("React").createElement("ul",{className:"_552n"+(a?" _22v_":"")+(a?" _6jv5":"")+(this.props.isFocused?" _6wm5":"")+(b("ChatConfig").get("new_dlc")?" _6jv6":"")},this.$5());var c=this.props.composer.get("replyingToMessage");return b("React").createElement("div",{className:"_1d4_",onClick:this.$6,role:"presentation"},this.$7(c),this.$8(),a)};a.prototype.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1)};a.prototype.componentDidMount=function(){var a=b("gkx")("678581");b("CurrentUser").isWorkUser()&&a&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(a){return this.setState({hasWorkChatExtension:a})}.bind(this))};a.prototype.onSend=function(a){this.$4&&this.$4.onSend&&this.$4.onSend(a)};a.prototype.uploadURL=function(a){var b=this.$2||this.$3;if(!b)return;b.uploadURL(a)};a.prototype.isUploading=function(){return!!(this.$2&&this.$2.isUploading()||this.$3&&this.$3.isUploading())};a.prototype.getInput=function(){return this.$4};a.prototype.$8=function(){__p&&__p();var a={};this.state.inputHeight&&(a.minHeight=this.state.inputHeight);var c=null;this.props.showStructuredMenu&&(c=b("React").createElement("div",{className:"_5c6-"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}),loader:b("JSResource")("MessengerBotMenuButton.react").__setRef("ChatTabComposer.react"),placeholder:b("React").createElement("span",{className:"_5c6_"})})));var d="";this.props.disableInput?d=j._("El editor est\u00e1 inhabilitado en esta conversaci\u00f3n."):this.props.thread&&!this.props.thread.is_canonical?d=j._("Escribe un mensaje, \u0040nombre..."):d=j._("Escribe un mensaje...");return b("React").createElement("div",{className:"_552h",style:a},c,b("React").createElement("div",{className:this.props.showStructuredMenu?"_4yzj":""},b("React").createElement(b("CustomColorHighlighting.react"),{customColor:this.$9()},this.$10(this.props.threadID),b("React").createElement(s,{composer:this.props.composer,defaultText:this.props.defaultText,fileUploader:this.props.fileUploader,inputKeyDown:this.$11,handleSend:this.props.handleSend,onBeforeInput:function(){return this.refs.emojiButton&&this.refs.emojiButton.hideFlyout()}.bind(this),onBlur:b("emptyFunction"),onEscape:this.$12,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:function(a){return this.$4=a}.bind(this),resizeFn:function(a){a=Math.min(a,o),this.setState({inputHeight:a})}.bind(this),thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.props.onTextChange,uploadPhotoFn:function(a){this.$3&&this.$3.uploadFiles([].concat(a))}.bind(this),placeholder:d,viewer:this.props.viewer}))))};a.prototype.$7=function(a){if(!a)return null;a=a;var c=b("React").createElement(m,{onCancelReplyingToMessage:this.$13,isChatTab:!0});return b("React").createElement(b("ErrorBoundary.react"),{fallbackComponent:function(){return c}},b("React").createElement(b("ReasonBootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{name:this.$14(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.$13,isChatTab:!0}),loader:b("ReasonResource")(b("JSResource")("ReplyingToMessageReact.bs").__setRef("ChatTabComposer.react")),placeholder:c}))};a.prototype.$14=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};a.prototype.$10=function(a){if(!a)return null;var c=this.props.fileUploader;if(!c)return null;c=c.get("uploadedFiles");return c.size==0?null:b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{files:c,small:!0,threadID:a,threadCustomColor:this.$9(),onClick:this.$15}),loader:b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("ChatTabComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})})};a.prototype.$9=function(){var a=this.props.thread;if(b("ChatConfig").get("new_dlc")&&!this.props.isFocused)return r;return a&&b("ChatConfig").getBool("dark_test_gradients")?a.solid_color?b("convertMIGColorToFIGColor")(a.solid_color):b("MessengerCustomColorUtils.bs").defaultColor():a&&a.footer_color?b("convertMIGColorToFIGColor")(a.footer_color):b("MessengerCustomColorUtils.bs").defaultColor()};a.prototype.$15=function(a,c){b("FantaMessageActions").cancelFileUpload(a,c)};a.prototype.$5=function(){var a=this.$16(),c=this.$17(),d=this.$18(),e=this.$19(),f=this.$20(),g=this.$21(),h=this.$22(),i=this.$23(),j=this.$24(),k=this.$25(),l=this.$26(),m=this.$27(),n;b("qex")._("710587")==="frequency"?n=[e,h,a,d,c,j,f,l,g,k,i].filter(Boolean).slice(0,p-1):n=[a,c,d,e,f,g,h,i,j,k,l].filter(Boolean).slice(0,p-1);n.push(m);return n};a.prototype.$16=function(){var a=this.props.photoUploaderProps||{};return b("React").createElement("li",{className:"_13f-","data-testid":b("FantaWebDriverIDs").COMPOSER_PHOTO_UPLOADER_ROOT,key:"photos"},b("React").createElement(b("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(a){return this.$3=a}.bind(this),imagesOnly:!0},a)))};a.prototype.$25=function(){var a=b("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.solid_color),c=this.$28();return c&&this.props.thread&&!this.props.thread.is_canonical?this.$29(a,c):null};a.prototype.$29=function(a,c){return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{key:"grouppolling",interactionClassName:"_6gd _13f_",flyoutProps:{customColor:a,threadFBID:c},flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _4tjk _6jv7",flyoutLoader:b("JSResource")("MessengerGroupPollingCreatePollFlyoutReactComponent").__setRef("ChatTabComposer.react"),title:j._("Crea una encuesta"),buttonName:"group_poll"})};a.prototype.$21=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();if(b("MercuryIDs").isLocalThread(this.props.threadID))return null;var c=this.$30();return a&&c&&!this.$31()&&!this.props.forGameChat?this.$32(c):null};a.prototype.$32=function(a){return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{key:"games",interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _4cf0 _6jtp",flyoutProps:{threadID:a,customWidth:q},flyoutLoader:b("JSResource")("MessengerGamesFlyout.react").__setRef("ChatTabComposer.react"),title:j._("Jugar"),buttonName:"game"})};a.prototype.$23=function(){return this.$28()&&!this.$31()&&this.state.hasWorkChatExtension?this.$33():null};a.prototype.$33=function(){return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{key:"chatextension",interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _67ew",flyoutProps:{onSelect:this.$34},flyoutLoader:b("JSResource")("MessengerWorkplaceChatExtensionsPickerWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Buscar una extensi\u00f3n"),buttonName:"chat_extension"})};a.prototype.$26=function(){if(b("EventRemindersGating").shouldShowComposer||b("MercuryIDs").isLocalThread(this.props.threadID))return null;var a=this.$30();return a&&!this.$31()?b("React").createElement("li",{className:"_6gd _13gb",key:"eventPlan"},b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null)},b("React").createElement(n,{threadID:a}))):null};a.prototype.$22=function(){if(!b("WorkFileUploadsGating").canUploadFiles)return null;var a=this.props.fileUploaderProps||{};return b("React").createElement("li",{className:"_13gd",key:"files"},b("React").createElement(b("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(a){return this.$2=a}.bind(this)},a)))};a.prototype.$17=function(){var a=this.props.stickerButtonProps;return!a?null:this.$35()};a.prototype.$35=function(){var a=this.props.stickerButtonProps;if(!a)return null;var c={className:"_5e-r",position:"above"};return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{flyoutProps:a,dialogProps:c,flyoutAlignment:"right",key:"sticker",interactionClassName:"_6gd _13ge",iconClassName:"_6gb _6wm4 _6gf _6jtm",flyoutLoader:b("JSResource")("StickersFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Elige un sticker"),buttonName:"sticker"})};a.prototype.$18=function(){var a={getQuery:function(){return this.$4&&this.$4.getValue()}.bind(this),onSelect:this.$36};return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"contentSearch",interactionClassName:"_6gd _13gf",flyoutProps:a,flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _6gs _6jtq",threadFBID:this.$28(),flyoutLoader:b("JSResource")("ChatContentSearchFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Elige un GIF"),buttonName:"gif"})};a.prototype.$19=function(){var a={onSelect:this.$37,getInput:function(){return this.$4}.bind(this)};return b("React").createElement(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,key:"emoji",interactionClassName:"_6gd _13gg",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _3oxr _6jtr",threadFBID:this.$28(),flyoutLoader:b("JSResource")("ChatEmojiFlyout.react").__setRef("ChatTabComposer.react"),dialogProps:{offsetY:10},flyoutProps:a,title:j._("Elige un emoticono"),buttonName:"emoji"})};a.prototype.$27=function(){return this.$38()?this.$39():this.$40()};a.prototype.$38=function(){var a=this.props.composer,b=a.fileUploader.uploadedFiles||{size:0},c=a.sharePreview;a=a.text&&a.text.trim().length>0;return a||b.size>0||!!(c&&c.params&&c.type)};a.prototype.$39=function(){var a=j._("Pulsa \"Enter\" para enviar");return b("React").createElement("li",{className:"_6gd _21u1",key:"send"},b("React").createElement(b("Link.react"),babelHelpers["extends"]({label:"send",className:"_6gb _6wm4 _6987"},b("TooltipData").propsFor(a),{onClick:this.props.handleSendClick}),b("React").createElement(l,{filled:!0,color:this.$9()})))};a.prototype.$40=function(){var a=this.props.thread,c=b("ChatConfig").get("new_dlc")&&!this.props.isFocused?r:this.$9(),d=b("MessengerHotLikeChatSVGIcon.react"),e="_6gb _6wm4";return b("React").createElement("li",{className:"_6gd _5ep3 _13gi",key:"like"},b("React").createElement(b("MessengerHotLikeButton.react"),{className:e,customColor:c,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(a)||void 0,CustomRenderer:d,forGameChat:this.props.forGameChat,location:b("MercuryShareAttachmentRenderLocations").CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID}))};a.prototype.$20=function(){var a;if(!this.props.p2pProps||!this.props.showP2PButton||this.$31()||b("MercuryIDs").isLocalThread(this.props.threadID))return null;var c=this.props.p2pProps;a=(a=this.state.p2pPaymentConfig)!=null?a.currencyCode:a;var d=a===b("P2PPaymentSupportedCurrency").GBP;a=a===b("P2PPaymentSupportedCurrency").EUR;d=b("joinClasses")(c.className,(d?"_33g4":"")+(a?" _33g5":"")+(d?" _6jts":"")+(a?" _6jtt":""));return b("React").createElement("li",{className:"_6gd _13gj",key:"p2p"},b("React").createElement(b("P2PSendMoneyContainerBootloader.react"),babelHelpers["extends"]({},c,{className:d,participantIDs:this.props.participantIDs,p2pPaymentConfig:this.state.p2pPaymentConfig,thread:this.props.thread,threadID:this.props.threadID})))};a.prototype.$24=function(){var a=this.props.threadID;if(b("MercuryIDs").isLocalThread(this.props.threadID)||!a)return null;a={className:"_6gb _6wm4 _5yhk _6jtu",threadID:a,location:void 0,viewer:void 0};var c=b("gkx")("678582");c&&(a.location=b("MessengerQuickCamOrigins").CHAT_TAB,a.viewer=this.props.viewer);c=c?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("ChatTabComposer.react"),placeholder:b("React").createElement("span",{className:a.className})}):b("React").createElement(b("MessengerQuickCamButton.react"),a);return b("React").createElement("li",{className:"_6gd _13gk",key:"quickcam"},c)};a.prototype.$31=function(){return!!this.$41()};a.prototype.$41=function(){return b("getPageIDFromThreadID")(this.props.threadID)};a.prototype.$28=function(){if(this.props.threadID&&!b("MercuryIDs").isLocalThread(this.props.threadID))return b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);return this.props.thread&&this.props.thread.thread_fbid?this.props.thread.thread_fbid:null};a.prototype.$30=function(){var a=this.props,c=a.threadID;a=a.thread;return c&&b("MercuryIDs").isLocalThread(c)&&a&&a.thread_fbid?b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid):c};a.prototype.replyToMention=function(a){this.$4&&this.$4.addMention&&this.$4.addMention(a)};e.exports=a}),null);
__d("isAdsExcelAddinURI",[],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)fbaddins\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}e.exports=a}),null);
__d("isValidURI",[],(function(a,b,c,d,e,f){var g=new RegExp("((^|\\.)instagram\\.com$)|((^|\\.)wit\\.ai$)|((^|\\.)accountkit\\.com$)","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.includes(a.getProtocol())&&g.test(a.getDomain())}e.exports=a}),null);
__d("AsyncSignal",["Promise","ErrorUtils","QueryString","Run","TimeSlice","TrackingConfig","URI","ZeroRewrites","getAsyncParams","isAdsExcelAddinURI","isBonfireURI","isFacebookURI","isMessengerDotComURI","isValidURI","memoize","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g;function a(a,c){this.data=c||{},this.uri=a.toString(),b("TrackingConfig").domain&&this.uri.charAt(0)=="/"&&(this.uri=b("TrackingConfig").domain+this.uri)}a.prototype.setHandler=function(a){this.handler=a;return this};a.prototype.setTimeout=function(a){this.timeout=a;return this};a.prototype.send=function(){b("TimeSlice").guard(this._send.bind(this),"AsyncSignal send",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype._send=function(){__p&&__p();var a=this.handler,c=this.data;c.asyncSignal=(Math.random()*1e4|0)+1;var d=b("ZeroRewrites").rewriteURI(new(b("URI"))(this.uri));d=b("isFacebookURI")(d)||b("isMessengerDotComURI")(d)||b("isBonfireURI")(d)||b("isAdsExcelAddinURI")(d)||b("isValidURI")(d);if(d)Object.assign(c,b("getAsyncParams")("POST"));else throw new Error("'"+this.uri+"' is an external URL, you should not send async signals to offsite links.");var e=b("QueryString").appendToUrl(this.uri,c);g||(g=new(b("Promise"))(function(a){b("Run").onAfterLoad(a)}));d=g.then(function(){return new(b("Promise"))(function(a,b){var c=new Image();c.onload=a;c.onerror=c.onabort=b;c.src=e})});if(a){var f=!1,h=b("memoize")(function(){b("ErrorUtils").applyWithGuard(a,null,[f])});b("promiseDone")(d.then(function(){f=!0,h()},h));this.timeout&&setTimeout(h,this.timeout)}return this};e.exports=a}),null);
__d("LayerAutoFocusReact",["focusWithinLayer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._layer=a,this._subscription=null}a.prototype.enable=function(){this._layer.containsReactComponent&&(this._subscription=this._layer.subscribe("reactshow",this._focus.bind(this)))};a.prototype.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)};a.prototype._focus=function(){var a=this._layer.getRoot();a&&b("focusWithinLayer")(a)};e.exports=a}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatComposer","ChatConfig","FantaMessageActions","FantaTabActions","Keys","LogHistory","MercuryIDs","MercuryMessageActions","MercuryShareAttachmentRenderLocations","MessengerBotMenuDataFetcher","MessengerState.bs","MNCommercePageSetting","P2PGKValues","PhotosUploadWaterfall","React","ReactDOM","SimpleXUIDialog","WaterfallIDGenerator","emptyFunction","getPageIDFromThreadID","getThreadTypeNameFromThreadType","performanceAbsoluteNow","setImmediate","shallowCompare"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ChatComposer").ChatComposer,k="right",l=/^\s*$/,m=b("LogHistory").getInstance("chat_tab_view"),n=b("ChatConfig").get("slc_disappearing_icons"),o=b("ChatConfig").get("single_line_composer"),p=140,q=90;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={showP2PButton:this.$6(),pageID:b("getPageIDFromThreadID")(this.props.threadID),showStructuredMenu:this.$7(),longInput:!1},this.$9=function(a){this.$2=a}.bind(this),this.$10=function(a){this.$3&&this.$3.uploadFiles([].concat(a))}.bind(this),this.$11=function(a){this.$5=a}.bind(this),this.$12=function(a){this.$3=a}.bind(this),this.onSend=function(a){this.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendMessage(a.getDefaultFunnelName())},"ChatTabComposerContainer.react");if(a&&a.profile_ranges&&a.profile_ranges.length){var c=a,d=this.props.thread;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(a,e){new a().setEvent(e.MENTION).setGroupSize(d&&d.participants&&d.participants.length).setNumDelivered((c.profile_ranges||[]).length).setThreadid(d&&d.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(d&&d.thread_type)).setOfflineThreadid(c.offline_threading_id).log()},"ChatTabComposerContainer.react")}o?this.$2&&this.$2.onSend&&this.$2.onSend(a):this.refs.composer&&this.refs.composer.onSend(a)}.bind(this),this.focusInput=function(){var a=this.getInput();a&&a.focus&&a.focus()}.bind(this),this.$14=function(a){a=this.getInput();a&&typeof a.handleSend==="function"&&(a&&a.handleSend())}.bind(this),this.$33=function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).confirmAttachmentPlaceholder(c.upload_id,c),this.$27(c)}.bind(this),this.$35=function(a){var b,c;switch(a.error){case"size-exceeded":b=h._("El archivo que has seleccionado es demasiado grande");c=h._("El archivo que has seleccionado es demasiado grande. El tama\u00f1o m\u00e1ximo es de 25 MB.");break;default:b=h._("Error al subir el archivo"),c=h._("Ha habido un problema al subir el archivo.")}this.$38(b,c);this.$22(a)}.bind(this),this.$32=function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c),this.$26(c)}.bind(this),this.$37=function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("Error al subir el archivo");var d=h._("Ha habido un problema al subir el archivo.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this.$38(a,d);this.$22(c)}.bind(this),this.$34=function(a,c){b("MercuryMessageActions").getForFBID(this.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("Error de carga");var d=h._("Vuelve a intentarlo. Aseg\u00farate de que el archivo que est\u00e1s intentado subir es v\u00e1lido.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,d=c.errorDialogParams.body||d);this.$38(a,d);this.$24&&this.$24(c)}.bind(this),this.$36=function(a,b){this.$28&&this.$28(b)}.bind(this),this.$17=function(a,b){this.$20(a,b)}.bind(this),this.$16=function(a){this.props.onEscape&&this.props.onEscape(a)}.bind(this),this.$18=function(a,c){var d=this.props.threadID;d&&(this.$4=b("setImmediate")(function(){this.$4=null,b("FantaMessageActions").composerTextUpdate(d,a,c)}.bind(this)));this.$8()}.bind(this),this.$20=function(event,a){var c=this.props.threadID;event.keyCode===b("Keys").RETURN&&!event.shiftKey&&(event.preventDefault(),this.$13(a));if(event.keyCode===b("Keys").DOWN&&event.shiftKey&&this.hasEmptyInput()){b("FantaTabActions").minimizeTab(c);return}}.bind(this),this.$13=function(a){var b=this.$40();b==null||b.length===0?this.$41(a,[]):this.$41(a,b)}.bind(this),this.$15=function(a){var b=this.getInput();b&&b.insertEmoji(a)}.bind(this),this.$21=function(a,b,c){this.props.onSendHotLike(a.emoji,b,c,this.focusInput)}.bind(this),this.$23=function(){this.props.onSendMessage("",this.props.composer,this.onSend)}.bind(this),this.$25=function(a){this.props.onSelectSticker(a,b("emptyFunction"))}.bind(this),this.$28=function(a){this.$42(b("PhotosUploadWaterfall").UPLOAD_START,a),this.props.onSendPhoto(a,this.onSend),this.$43("submit",a),this.focusInput()}.bind(this),this.$22=function(a){this.$42(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$43("failed",a)}.bind(this),this.$24=function(a){this.$42(b("PhotosUploadWaterfall").CLIENT_ERROR,a),this.$43("failed",a)}.bind(this),this.$26=function(a){this.$42(b("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,a),this.$43("canceled",a)}.bind(this),this.$27=function(a){this.$42(b("PhotosUploadWaterfall").ALL_UPLOADS_DONE,a);this.$43("completed",a);a=a.image_ids.length||a.attachments.length;this.$44(a)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};a.prototype.componentDidMount=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.FIRSTCHATTABOPEN_WWW,"mount_composer_container",JSON.stringify(this.state),0,a)}.bind(this),"ChatTabComposerContainer.react");this.props.isFocused&&!this.props.isNewEmptyLocalThread&&this.focusInput();this.state.pageID&&b("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(a){this.setState({showStructuredMenu:a})}.bind(this),function(){this.setState({showStructuredMenu:!1})}.bind(this),b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};a.prototype.componentDidUpdate=function(a){var b=this.props.thread;b=b?b.thread_id:null;b===this.props.threadID&&(this.props.fileUploader!==a.fileUploader&&this.$8())};a.prototype.$6=function(){return b("P2PGKValues").P2PVisible&&this.props.viewer!==b("MercuryIDs").getUserIDFromThreadID(this.props.threadID)};a.prototype.$7=function(){var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null||a===void 0?!1:b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(){},function(){},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};a.prototype.render=function(){var a=this.props.composer,c=this.props,d=c.thread;c=c.threadID;var e=c?b("MessengerState.bs").isEmptyLocalThread(this.props.viewer,c):!1;return o?b("React").createElement(j,{composer:a,enableDisappearingIcons:n,fileUploader:this.props.fileUploader,handleSend:this.$13,handleSendClick:this.$14,inputRef:this.$9,isEmptyLocalThread:e,isFocused:this.props.isFocused,defaultText:a.text,onEmojiSelect:this.$15,onEscape:this.$16,onInputKeyDown:this.$17,onTab:this.props.onTab,onTextChange:this.$18,onUploaderMount:this.$12,pageID:this.state.pageID,participantIDs:void 0,disableInput:this.props.disableInput,showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,thread:d,threadID:c,uploadPhotoFn:this.$10,viewer:this.props.viewer,focusInput:this.focusInput,longInput:this.state.longInput,ref:this.$11,forGameChat:this.props.forGameChat}):b("React").createElement(j,{defaultText:a.text,fileUploaderProps:this.$19(),handleSendClick:this.$14,isEmptyLocalThread:e,ref:"composer",composer:this.props.composer,fileUploader:this.props.fileUploader,handleSend:this.$13,inputKeyDown:this.$20,isFocused:this.props.isFocused,onCustomLikeSelect:this.$21,onEmojiSelect:this.$15,onEscape:this.props.onEscape,onFileUploadFail:this.$22,onP2PTrigger:this.$23,onPhotoUploadFail:this.$24,onStickerSelect:this.$25,onTab:this.props.onTab,onUploadCancel:this.$26,onUploadComplete:this.$27,onUploadSubmit:this.$28,thread:d,threadID:c,viewer:this.props.viewer,disableInput:this.props.disableInput,onTextChange:this.$18,p2pProps:this.$29(),pageID:this.state.pageID,participantIDs:void 0,photoUploaderProps:this.$30(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this.$31(),forGameChat:this.props.forGameChat})};a.prototype.getInput=function(){return o?this.$2:this.refs.composer&&this.refs.composer.getInput&&this.refs.composer.getInput()};a.prototype.isUploading=function(){return this.refs.composer.isUploading()};a.prototype.$29=function(){return!this.state.showP2PButton?{}:{button:b("React").createElement("i",{className:"hidden_elem"}),className:"_6ga _6gb _6wm4 _6jtl",flyoutAlignment:k,referrer:b("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.$23}};a.prototype.$31=function(){var a={className:"_6gb _6wm4 _6gf _6jtm",flyoutAlignment:k,threadID:this.props.threadID,onStickerSelect:this.$25};return a};a.prototype.$30=function(){var a={className:"_6gd",customUI:!0,imageClassName:"hidden_elem",linkClassName:"_6gb _6wm4 _6ge _6jtn",threadID:this.props.threadID,onLastUploadCancel:this.$32,onAllUploadsComplete:this.$33,onLastUploadFail:this.$34,onUploadError:this.$35,onSubmit:this.$36};return a};a.prototype.$19=function(){var a=this.$30();a.linkClassName="_6gb _6wm4 _6gg _6jto";a.imagesOnly=!1;a.onLastUploadFail=this.$37;return a};a.prototype.$38=function(a,c){b("SimpleXUIDialog").show(c,a)};a.prototype.$8=function(){if(!this.$5)return;var a=b("ReactDOM").findDOMNode(this.$5);if(!a)return;a=a.clientHeight;!this.state.longInput&&a>p?this.setState({longInput:!0}):this.state.longInput&&a<q&&this.setState({longInput:!1})};a.prototype.hasEmptyInput=function(){return l.test(this.$39())};a.prototype.$39=function(){var a=this.getInput();return a&&a.getValue()||""};a.prototype.$41=function(a,b){this.props.onSendMessage({message:a,mentions:b},this.props.composer,this.onSend);return};a.prototype.$40=function(){var a=this.getInput();return a&&a.getMentions?a.getMentions():null};a.prototype.$42=function(a,c){this.$1==null&&(this.$1=b("WaterfallIDGenerator").generate()),b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$1,step:a,uploader:b("PhotosUploadWaterfall").APP_CHAT},c||{}))};a.prototype.$44=function(a){if(a===0)return;this.$42(b("PhotosUploadWaterfall").POST_PUBLISHED,{count:a});this.$1=b("WaterfallIDGenerator").generate()};a.prototype.$43=function(a,b){m.debug("photo_uploader:"+a,"{}")};e.exports=a}),null);
__d("M4IconSettings.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconSettings");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:"none",stroke:f,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10"};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){var a=!e;return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSVG.bs").make(void 0,[a?b("React").createElement("g",{key:"filled"},b("React").createElement("path",{key:"outer",style:h,d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5\n          \t\t\tH7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3\n          \t\t\tl-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9\n          \t\t\tc0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z"}),b("React").createElement("circle",{key:"inner",style:h,cx:"8",cy:"8",r:"2.5"})):b("React").createElement("path",{key:"all",d:"M15.5,8.9V7.1l-2.2-0.5c-0.1-0.5-0.3-0.9-0.6-1.3l1.2-1.9l-1.2-1.2l-1.9,1.2C10.3,3,9.9,2.8,9.4,2.7L8.9,0.5 H7.1L6.6,2.7C6.1,2.8,5.7,3,5.2,3.2L3.3,2.1L2.1,3.3l1.2,1.9C3,5.7,2.8,6.1,2.7,6.6L0.5,7.1v1.7l2.2,0.5c0.1,0.5,0.3,0.9,0.6,1.3 l-1.2,1.9l1.2,1.2l1.9-1.2c0.4,0.2,0.9,0.4,1.3,0.6l0.5,2.2h1.7l0.5-2.2c0.5-0.1,0.9-0.3,1.3-0.6l1.9,1.2l1.2-1.2l-1.2-1.9 c0.2-0.4,0.4-0.9,0.6-1.3L15.5,8.9z M8,11c-1.7,0-3-1.3-3-3c0-1.7,1.3-3,3-3c1.7,0,3,1.3,3,3C11,9.7,9.7,11,8,11z",fill:f,stroke:f})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatTabMenuBootloader.react",["cssVar","cx","fbt","AutoFocusableLink.react","BootloadOnInteraction.react","CurrentUser","ErrorBoundary.react","JSResource","LazyComponent.react","M4IconSettings.bs","MercuryConfig","MercuryThreadInfo","MessageRequestUtils","MessengerCustomColorUtils.bs","MessengerState.bs","Placeholder.react","React","getPageIDFromThreadID","immutable","isEmpty","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("M4IconSettings.bs").jsComponent,l=b("lazyLoadComponent")(b("JSResource")("MessengerReportNUX.react").__setRef("ChatTabMenuBootloader.react"));j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(){var a=this.props.thread;return!!a&&b("MercuryThreadInfo").showComposer(a)&&!b("isEmpty")(a.participants)&&!b("MessageRequestUtils").isMessageRequest(a)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(a)||b("MercuryThreadInfo").isEmptyLocalThread(a)))&&!(this.props.isPageChat&&a.message_count===0)};a.prototype.render=function(){if(!this.$1())return null;var a=this.props,c=a.highlightNewMessage,d=a.isFocused;a=a.threadID;a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a);a=a&&a.header_color||b("MessengerCustomColorUtils.bs").defaultColor();c=c?"#FFFFFF":d?a:"#bec2c9";d=i._("Opciones");return b("React").createElement("div",{className:"_461_",ref:"menu"},b("React").createElement(b("BootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabMenuBootloader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":d,role:"button"},b("React").createElement(k,{filled:!0,color:c}))}),this.$2())};a.prototype.$2=function(){if(!this.props.showMessengerReportNux||this.props.threadID===null)return null;var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null?null:b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("Placeholder.react"),{fallback:null},b("React").createElement(l,{contextRef:function(){return this.refs.menu}.bind(this),pageID:a,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus})))};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("ChatTitleLink.react",["cx","ChatConfig","ChatEditParticipantsUtils","Link.react","MercuryIDs","MercuryThreadTitle.react","MessengerAdminGroupUtils","MessengerHoverCardLink","React","TrackingNodes","UserAgent","gkx","goURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTitleLink",propTypes:{href:a.string,isNewMessageTab:a.bool,thread:a.object,viewer:a.string},getDefaultProps:function(){return{href:null}},getTitle:function(){return this.refs.threadTitle.getTitle()},render:function(){if(!this.props.thread)return null;var a=this.props,c=a.href,d=a.thread,e=a.viewer;a=babelHelpers.objectWithoutProperties(a,["href","thread","viewer"]);var f="";b("ChatConfig").get("chat_tab_m4_header")&&d&&d.thread_id&&(f=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)}));return b("React").createElement(h,babelHelpers["extends"]({className:"titlebarText"+(b("UserAgent").isBrowser("Chrome")&&!b("UserAgent").isPlatform("Windows")?" fixemoji":"")+(c===null?" noLink":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.TITLE),"data-hover":"tooltip",onClick:function(a){return this._handleClick(a)}.bind(this),"data-hovercard":f.toString(),href:c},a),b("React").createElement(b("MercuryThreadTitle.react"),{ref:"threadTitle",isNewThread:this.props.isNewMessageTab,thread:d,useAndSeparator:!0,useShortName:!d.is_canonical,viewer:e}))},_handleClick:function(a){var c=this.props,d=c.href;c=c.thread;if(!d)return;c&&c.associated_object?b("goURI")(d):b("MessengerAdminGroupUtils").showParticipantsModal(c.is_canonical,this.props.isNewMessageTab,c)&&(b("ChatEditParticipantsUtils").showParticipantsModal(c.thread_id),a.preventDefault())}});var h=function(a){return a.href?b("React").createElement(b("Link.react"),a):b("React").createElement("span",a)};e.exports=c}),null);
__d("MercuryTypingAnimation.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4a0v _1x3z",this.props.className)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("ChatTypingIndicator.react",["cx","fbt","Image.react","MercuryIDs","MercuryTypingAnimation.react","MessengerParticipants.bs","MessengerPersonas.bs","QE2Logger","React","ReactComponentWithPureRenderMixin"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicator",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{isOnline:a.bool,userID:a.string,showName:a.bool},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function(){var a,c=this.getPersona();this.props.userID&&(a=b("MessengerParticipants.bs").getNow(this.props.userID));return!a&&!c?null:b("React").createElement("div",{className:"_4tdt"},i(a,c),this._renderBubble())},getBubble:function(){return this.refs.bubble},getPersona:function(){var a=this.props.userID;return!a?null:b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a))},_renderBubble:function(){var a=this.props.showName;return b("React").createElement("div",{className:"_4tdv"},b("React").createElement("div",{className:"_5wd4 _1nc7 _2cnu"+(a?" _5ysy":"")},b("React").createElement("div",{className:"_5wd9 _n4o"},b("React").createElement("div",{className:"_5w1r _5wdf _3_om"},b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_5x7x",ref:"bubble"})))))}});function i(a,c){var d=c?c.name:a?a.name:null;c=c?c.profile_picture_url:a?a.image_src:null;a=a?a.href:null;d=h._("{name}",[h._param("name",d)]);return b("React").createElement("div",{className:"_31o4 _3njy"},b("React").createElement("a",{"aria-label":d,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":d,"data-tooltip-position":"left",href:a||"#",ref:"link"},b("React").createElement(b("Image.react"),{src:c,ref:"image"})))}e.exports=c}),null);
__d("MessengerTypingUtils.bs",["bs_belt_Map","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return b("bs_belt_Map").keysToArray(b("bs_js_primitive").valFromOption(a));else return[]}f.getTypingUserIDs=a}),null);
__d("ChatTypingIndicators.react",["cx","fbt","ChatConfig","ChatTypingIndicator.react","CurrentUser","DOM","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerPersonas.bs","MessengerState.bs","MessengerTypingUtils.bs","React","ReactDOM","TooltipData","emptyFunction"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:a.func,indicatorsDidShow:a.func,indicatorsDidHide:a.func,rootClassName:a.string,threadID:a.string.isRequired,viewer:a.string.isRequired,typingUserIDs:a.any},getDefaultProps:function(){return{indicatorClass:b("ChatTypingIndicator.react"),indicatorsDidShow:b("emptyFunction"),indicatorsDidHide:b("emptyFunction")}},shouldComponentUpdate:function(a){return a.threadID!==this.props.threadID||a.viewer!==this.props.viewer||a.rootClassName!==this.props.rootClassName||a.typingUserIDs!==this.props.typingUserIDs},componentDidUpdate:function(){__p&&__p();var a=b("MessengerTypingUtils.bs").getTypingUserIDs(this.props.typingUserIDs);a.length>0?this.props.indicatorsDidShow():this.props.indicatorsDidHide();b("MessengerParticipants.bs").getMulti(a,function(c){this.isMounted()&&a.forEach(function(a){var d=c[a],e=this.refs[a]&&this.refs[a].getBubble();if(e&&d){a=b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a));a=a?a.name:d.short_name;b("TooltipData").set(b("ReactDOM").findDOMNode(e),this.renderTooltip(a),"above","left")}}.bind(this))}.bind(this))},_renderContent:function(){var a=b("MercuryIDs").isGroupChat(this.props.threadID);return b("React").createElement("div",{className:this.props.rootClassName},b("MessengerTypingUtils.bs").getTypingUserIDs(this.props.typingUserIDs).sort().map(function(b){return this._renderTypingIndicator(b,!!a)}.bind(this)))},render:function(){if(!b("MercuryIDs").isValid(this.props.threadID))return null;var a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(a&&!a.is_subscribed)return null;a=b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;if(!a&&b("ChatConfig").getBool("chat_tab_has_gradients"))return b("React").createElement("div",{className:"_4gd0"},this._renderContent());else return this._renderContent()},_renderTypingIndicator:function(a,c){var d=this.props.indicatorClass;return b("React").createElement(d,{key:a,ref:a,showName:c,userID:a})},renderTooltip:function(a){var c=b("DOM").create("span");b("ReactDOM").render(b("React").createElement("span",null,h._("{name} est\u00e1 escribiendo...",[h._param("name",a)])),c);return c}});e.exports=c}),null);
__d("M4IconCamcorder.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconCamcorder");function h(a,c,d){var e=a!==void 0?a:!0,f=c!==void 0?c:"blue",h={fill:e?f:"none",stroke:f};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSVG.bs").make(void 0,[b("React").createElement("path",{key:"body",style:h,d:"M9.5,13.5h-7c-1.1,0-2-0.9-2-2v-7c0-1.1,0.9-2,2-2h7c1.1,0,2,0.9,2,2v7C11.5,12.6,10.6,13.5,9.5,13.5z"}),b("React").createElement("line",{key:"focus-ring",stroke:e?"none":f,x1:"13.5",x2:"13.5",y1:"5",y2:"11"}),b("React").createElement("path",{key:"lens",style:h,d:"M15,3.6l-3.5,3V8v1.4l3.5,3c0.2,0.2,0.5,0,0.5-0.3V8V3.9C15.5,3.6,15.2,3.4,15,3.6z"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("M4IconPhone.bs",["React","M4IconSVG.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("M4IconPhone");function h(a,c,d){d=a!==void 0?a:!0;a=c!==void 0?c:"blue";var e={fill:d?a:"none",stroke:a};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("M4IconSVG.bs").make(void 0,[b("React").createElement("path",{key:"all",style:e,d:"M8.8,11.6c0.1,0,0.1,0.1,0.2,0.1c0.4,0.2,0.8,0.1,1-0.3c0.1-0.2,0.2-0.4,0.3-0.6c0.2-0.2,0.5-0.6,0.8-0.7 C11.5,10,11.8,10,12,10c0.4,0,0.9,0.4,1.6,0.8c0.7,0.4,1.2,0.8,1.5,1c0.2,0.2,0.3,0.4,0.3,0.6c0,0.4,0,1.2-0.7,1.9 c-1,1.1-2.5,1.6-4.3,1c-1.8-0.6-4.1-1.7-6-3.7s-3.1-4.2-3.7-6s-0.2-3.3,1-4.3c0.7-0.6,1.4-0.7,1.9-0.7c0.2,0,0.5,0.1,0.6,0.3 c0.2,0.3,0.6,0.8,1,1.5C5.7,3.1,6,3.6,6,4c0,0.3,0,0.6-0.1,0.8C5.8,5.1,5.5,5.4,5.2,5.6C5,5.8,4.8,5.9,4.7,6C4.3,6.1,4.1,6.6,4.3,7 c0,0.1,0.1,0.1,0.1,0.2C5.5,9,7,10.5,8.8,11.6z"})]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.filled,a.color,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("ChatVideoCallButtonBootloader.react",["cx","AutoFocusableLink.react","BootloadOnInteraction.react","JSResource","LazyComponent.react","M4IconCamcorder.bs","M4IconPhone.bs","React","VideoCallWebDriverIDs","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("M4IconCamcorder.bs").jsComponent,j=b("M4IconPhone.bs").jsComponent;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,this.state={RTCComponent:null},b}a.prototype.componentDidMount=function(){this.$1=!0,b("requireWeak")("ChatVideoCallButton.react",function(a){this.$1&&this.setState({RTCComponent:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){if(this.props.isPageChat)return null;var a=this.props.isAudio,c=this.state.RTCComponent;return b("React").createElement("div",{className:"_3a61"+(a?" _461a":"")+(a?"":" _461b"),"data-testID":a?b("VideoCallWebDriverIDs").CHAT_TAB_VOICE_BUTTON:b("VideoCallWebDriverIDs").CHAT_TAB_VIDEO_BUTTON,key:"rtc"+(a?"audio":"video")},c?b("React").createElement(c,this.props):b("React").createElement(b("BootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatVideoCallButtonBootloader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{role:"button"},a?b("React").createElement(j,{color:this.props.color,filled:!0}):b("React").createElement(i,{color:this.props.color,filled:!0}))}))};e.exports=a}),null);
__d("ChatTabHeader.react",["ix","cx","fbt","AutoFocusableLink.react","Bootloader","BootloadOnRender.react","ChatCloseButton.react","ChatConfig","ChatTitleLink.react","CurrentUser","ErrorBoundary.react","EventPlanExperiment","EventReminderStateStore","Image.react","JSResource","LayerFadeOnHide","LazyComponent.react","LoadOnRender.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryThreadInfo","MercuryTypingAnimation.react","MessageRequestUtils","MessagingTag","MessengerAdminGroupUtils","MessengerJoinableModeType","MessengerPresenceProvider.bs","MessengerState.bs","Placeholder.react","QE2Logger","React","SimpleNUXMessage","TooltipData","WorkChatAvailabilityStatusLoader","XUIAmbientNUX.react","asset","getPageIDFromThreadID","gkx","immutable","isEmpty","lazyLoadComponent","requireWeak"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;var k="118809038721180",l=function(a){b("Bootloader").loadModules(["ArchiveWarningReact.bs"],function(b){b=b.jsComponent;return a(b)},"ChatTabHeader.react")},m=b("lazyLoadComponent")(b("JSResource")("ChatExpandTabButton.react").__setRef("ChatTabHeader.react")),n=b("lazyLoadComponent")(b("JSResource")("MessengerReportNUX.react").__setRef("ChatTabHeader.react"));d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(a){j.constructor.call(this,a),this.$1=!1,this.$4=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.props.onClick.apply(null,b)}.bind(this),this.$18=function(){return this.refs.menu}.bind(this),this.$19=function(){b("SimpleNUXMessage").markMessageSeenByUser(k),this.setState({eventPlanNuxSeen:!0})}.bind(this),this.state={eventPlanNuxSeen:b("SimpleNUXMessage").hasUserSeenMessage(k)}}a.prototype.componentDidMount=function(){this.$1=!0,b("requireWeak")("ChatVideoCallButton.react",function(a){this.$1&&this.setState({RTCComponent:a})}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.render=function(){var a=this.$3(),c=this.props.isRaised;return b("React").createElement("div",{className:"_15p4 _6t9f"+(this.props.isRaised?"":" _15p5")+(c||!a?" _2pis":""),onMouseUp:this.$4,ref:"root"},b("React").createElement("div",{"aria-level":"2",className:"titlebarTextWrapper _15p6",role:"heading"},b("React").createElement("div",{className:"_61td",role:c?"presentation":"button",tabIndex:c?-1:0},a,this.$5()),this.props.isTyping&&!this.props.isRaised?b("React").createElement(b("MercuryTypingAnimation.react"),{className:"_15p8"}):null),b("React").createElement("ul",{className:"_32ca"},this.$6(),b("React").createElement("li",{className:"_32cb"},b("React").createElement(b("ChatCloseButton.react"),{active:this.props.isActive,className:"_3olu _3olv",onClick:this.props.onCloseClick}))))};a.prototype.focus=function(){this.refs.root&&this.refs.root.focus()};a.prototype.$7=function(){return this.props.thread?b("MessageRequestUtils").isMessageRequest(this.props.thread):!1};a.prototype.$8=function(){var a;if(this.props.thread===null)return null;var c=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(!c)return null;c=((a=c.marketplace_thread_data)==null?void 0:a.for_sale_item)||((a=c.marketplace_thread_data)==null?void 0:a.buyer_fbid)||((a=c.marketplace_thread_data)==null?void 0:a.seller_fbid);return Boolean(c)};a.prototype.$6=function(){if(!this.props.isRaised)return null;var a=[this.$9(),this.$10(),this.$11(),this.$12(),this.$13(),this.$14(),this.$15()];return a.filter(Boolean)};a.prototype.$14=function(){return this.$16({isAudio:!0})};a.prototype.$13=function(){return this.$16({isAudio:!1})};a.prototype.$16=function(a){__p&&__p();if(this.props.isEmptyChat||this.$7()||this.$8())return null;if(this.props.isPageChat)return null;var c=this.props,d=c.isGroupChat,e=c.onRTCNuxCloseButtonClick,f=c.rtcNuxShown,g=c.thread,h=c.threadID;c=c.viewer;if(d){if(!g||g.participants.length<=1||!b("MercuryThreadInfo").canReply(g))return null;if(g.joinable_mode&&g.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)return null}d=babelHelpers["extends"]({isGroupChat:d,onRTCNuxCloseButtonClick:e,rtcCallData:g&&g.rtc_call_data,rtcNuxShown:f&&a.isAudio,threadID:h,thread:g,viewer:c},a);d.className="_3olv"+(d.isAudio?" _2fpc":"")+(d.isAudio?"":" _2fpd");e=this.state.RTCComponent;return b("React").createElement("li",{className:"_3a61"+(d.isAudio?" _461a":"")+(d.isAudio?"":" _461b"),key:"rtc"+(d.isAudio?"audio":"video")},e?b("React").createElement(e,d):b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),d),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:d.className,role:"button"})}))};a.prototype.$17=function(){var a=this.props.thread;return!!a&&b("MercuryThreadInfo").showComposer(a)&&!b("isEmpty")(a.participants)&&!b("MessageRequestUtils").isMessageRequest(a)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(a)||b("MercuryThreadInfo").isEmptyLocalThread(a)))&&!(this.props.isPageChat&&a.message_count===0)};a.prototype.$15=function(){__p&&__p();if(!this.$17())return null;var a=this.props,c=a.thread;a=a.isNewMessageTab;if(a||!!c&&c.folder===b("MessagingTag").PENDING)return null;a={attachmentsShelf:this.props.attachmentsShelf,hasBlockedMessages:this.props.hasBlockedMessages,isGroupChat:this.props.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:this.props.isMuted,isPageChat:this.props.isPageChat,membershipParticipants:this.props.membershipParticipants,participants:this.props.participants,sheetController:this.props.sheetController,thread:this.props.thread,threadID:this.props.threadID,uri:this.props.uri,viewer:this.props.viewer};a.className="_3olv _1ll-";c=i._("Opciones");var d=!1;if(this.props.threadID){var e=b("EventReminderStateStore").getEvent(this.props.threadID);d=e&&!e.exists&&!this.state.eventPlanNuxSeen&&b("EventPlanExperiment").shouldShowEntryPointNuxWithExposure()}return b("React").createElement("div",{key:"menu"},b("React").createElement("li",{className:"_3a61 _461_",ref:"menu"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a.className,"aria-label":c,role:"button"})})),b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},contextRef:this.$18,onCloseButtonClick:this.$19,shown:d,width:"auto"},i._("Haz clic aqu\u00ed para empezar un nuevo plan.")),this.$20())};a.prototype.$12=function(){if(this.props.isNewMessageTab||this.props.isPageChat||this.$7()||b("gkx")("678583")&&!this.props.isGroupChat||b("gkx")("678584"))return null;var a={className:"_3olv _3jyj",isFBAtWork:this.props.isWorkUser,shouldAddToApprovalQueue:b("MessengerAdminGroupUtils").shouldAddToApprovalQueue(this.props.thread,this.props.viewer),shown:!0,onClick:function(){return this.props.sheetController.openAddFriendsSheet()}.bind(this),thread:this.props.thread,viewer:this.props.viewer},c=i._("A\u00f1adir");return b("React").createElement("li",{className:"_3a61 _4620",key:"add"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),a),loader:b("JSResource")("ChatAddToThreadButton.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":c,className:a.className,role:"button"})}))};a.prototype.$11=function(){var a=this.props,c=a.href,d=a.isNewMessageTab;a=a.isWorkUser;b("QE2Logger").logExposureForUser("messenger_chat_tabs_expand_to_m_dot_com");if(d||this.$7()||a||!b("ChatConfig").getBool("expand_button_in_header"))return null;d={className:"_3olv _6pty _6reg",shown:!0,linkToExpand:c};a=i._("Expandir en una nueva ventana");return b("React").createElement("li",{className:"_3a61 _6pr0",key:"expand"},b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement(b("AutoFocusableLink.react"),{"aria-label":a,className:d.className,href:c,role:"button"})},b("React").createElement(m,d))))};a.prototype.$9=function(){if(!this.props.isViewerEmployee)return null;var a=this.props.participants;a=a?a.length>0&&a.every(function(a){return!!(a&&a.employee)}):!1;return!a?null:b("React").createElement("li",{key:"archiveWarning"},b("React").createElement(b("LoadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{shown:!0}),loader:l,placeholder:b("React").createElement("div",null)}))};a.prototype.$10=function(){if(!this.props.isWorkUser||!this.props.isMultiCompany)return null;var a=b("React").createElement(b("AutoFocusableLink.react"),{className:"_kp6",onClick:this.props.onClick,role:"presentation"});return b("React").createElement("li",{key:"multiCompanyBadge"},b("React").createElement("div",{className:"_3olv"},b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),null,a),loader:b("JSResource")("WorkMultiCompanyChatTooltip.react").__setRef("ChatTabHeader.react"),placeholder:a})))};a.prototype.$21=function(){return b("React").createElement(b("MessengerPresenceProvider.bs").jsComponent,{subscribeToIDs:[b("CurrentUser").getID()]},function(a){return b("React").createElement("span",{className:"_3a61"+(this.props.isRaised?"":" _3-99")},b("React").createElement("span",{className:"_3olv _2nlt"}))}.bind(this))};a.prototype.$22=function(){__p&&__p();if(!b("gkx")("678573"))return null;var a=this.props.threadID?b("MercuryIDs").getUserIDFromThreadID(this.props.threadID):null;if(!this.props.participants)return null;var c=this.props.participants.filter(function(b){return b.fbid===a})[0];if(!c)return null;c=b("WorkChatAvailabilityStatusLoader").isLoaded()&&a?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getDescriptionWithUserName(c.short_name,a):"";return b("React").createElement("span",{className:"_4jft"},b("React").createElement(b("Image.react"),{"data-tooltip-content":c,"data-hover":"tooltip",src:g("550341")}))};a.prototype.$5=function(){var a=this.props.thread,c=this.props.tooltip;a&&a.is_canonical&&(c="");return b("React").createElement(b("ChatTitleLink.react"),babelHelpers["extends"]({href:this.props.isRaised?this.props.href:void 0,isNewMessageTab:this.props.isNewMessageTab,thread:this.props.thread,viewer:this.props.viewer},b("TooltipData").propsFor(c,"above")))};a.prototype.$3=function(){var a=this.props,c=a.isRaised;a=a.thread;return!c&&a&&a.unread_count>0?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_3-8_ _3-99",count:a.unread_count,type:"special"}),loader:b("JSResource")("XUIBadge.react").__setRef("ChatTabHeader.react"),placeholder:b("React").createElement("span",null)}):b("React").createElement(b("React").Fragment,null,this.$22(),this.$21())};a.prototype.$20=function(){if(!this.props.showMessengerReportNux||this.props.threadID===null)return null;var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null?null:b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("Placeholder.react"),{fallback:null},b("React").createElement(n,{contextRef:function(){return this.refs.menu}.bind(this),pageID:a,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus})))};a.propTypes={attachmentsShelf:c.object.isRequired,hasBlockedMessages:c.bool.isRequired,href:c.string,isActive:c.bool.isRequired,isEmptyChat:c.bool,isGroupChat:c.bool,isMuted:c.bool,isPageChat:c.bool,isRaised:c.bool,isTyping:c.bool,isViewerEmployee:c.bool,isWorkUser:c.bool,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onRTCNuxCloseButtonClick:c.func.isRequired,participants:c.arrayOf(c.object),rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,showMessengerReportNux:c.bool.isRequired,thread:c.object,threadID:c.string,tooltip:c.string,uri:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("getGroupNameTooltipFromParticipantIDs",["fbt","MercuryViewer","MessengerParticipants.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=10,i="\n";function a(a,c){__p&&__p();var d=[],e=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==e});if(!a||!a.length){c(null);return}var f=a.length,j=f-h;j>1&&(a=a.slice(0,h));b("MessengerParticipants.bs").getMulti(a,function(a){for(var b in a){var e=a[b];d.push(e.name)}if(j>1){e=g._("y {number of hidden chat participants} m\u00e1s.",[g._param("number of hidden chat participants",j)]);d.push(e)}c(d.join(i))})}function c(a){__p&&__p();var c=[],d=b("MercuryViewer").getID();a=a&&a.filter(function(a){return a!==d});if(!a||!a.length)return null;c=a.map(function(a){a=b("MessengerParticipants.bs").getNow(a);return a&&a.name}).filter(function(a){return!!a});a=a.length-(a.length-c.length)-h;if(a>1){c=c.slice(0,h);a=g._("y {number of hidden chat participants} m\u00e1s.",[g._param("number of hidden chat participants",a)]);c.push(a)}return c.join(i)}e.exports={getGroupNameTooltipFromParticipantIDs:c,getGroupNameTooltipFromParticipantIDsAsync:a}}),null);
__d("ChatTabHeaderContainer.react",["ChatTabHeader.react","CurrentUser","MercuryIDs","MercuryThreadInfo","React","WorkModeConfig","getGroupNameTooltipFromParticipantIDs","getPageIDFromThreadID","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.state=this.calculateState(a)}a.prototype.calculateState=function(a){var c=!1,d;if(a.threadID){var e;c=a.isNewMessageTab?(((e=a.thread)==null?void 0:(e=e.participants)==null?void 0:e.length)||0)>2:b("MercuryIDs").isGroupChat(a.threadID);d=b("getPageIDFromThreadID")(a.threadID)}return{isGroupChat:c,pageID:d}};a.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount(this)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.calculateState(a))};a.prototype.render=function(){var a=this.props.participants&&this.props.participants.toList().toArray(),c=this.props,d=c.isNewMessageTab;c=c.thread;var e;c&&(e=h(c.participants));var f=c&&c.participants&&c.participants.length===0;return b("React").createElement(b("ChatTabHeader.react"),{attachmentsShelf:this.props.attachmentsShelf,hasBlockedMessages:this.props.hasBlockedMessages,href:this.props.href,isActive:this.props.isActive,isEmptyChat:f,isGroupChat:this.state.isGroupChat,isMultiCompany:this.props.isMultiCompany,isMuted:!!c&&b("MercuryThreadInfo").isMuted(c),isNewMessageTab:this.props.isNewMessageTab,isPageChat:!!this.state.pageID,isRaised:this.props.isRaised,isTyping:this.props.isTyping,isViewerEmployee:b("CurrentUser").isEmployee(),isWorkUser:!!b("WorkModeConfig").is_work_user,membershipParticipants:this.props.membershipParticipants,onClick:this.props.onClick,onCloseClick:this.props.onCloseClick,onRTCNuxCloseButtonClick:this.props.onRTCNuxCloseButtonClick,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus,participants:a,ref:"header",rtcNuxShown:this.props.rtcNuxShown,sheetController:this.props.sheetController,showMessengerReportNux:this.props.showMessengerReportNux,thread:c,threadID:d&&c!=null?c.thread_id:this.props.threadID,uri:this.props.uri,tooltip:e,viewer:this.props.viewer})};a.prototype.focus=function(){this.refs.header.focus()};a.propTypes={attachmentsShelf:c.object.isRequired,isActive:c.bool.isRequired,isRaised:c.bool,isTyping:c.bool,onClick:c.func.isRequired,onCloseClick:c.func.isRequired,onMount:c.func,onRTCNuxCloseButtonClick:c.func.isRequired,rtcNuxShown:c.bool.isRequired,sheetController:c.object.isRequired,showMessengerReportNux:c.bool.isRequired,thread:c.object,threadID:c.string,uri:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("ArchiveWarningReact.bs",["cx","React","ReasonReact.bs","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ArchiveWarningReact");function i(a,c){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var c=b("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(a){var d=b("React").createElement("i",{className:"_3olv _14lt"});return b("React").cloneElement(b("React").createElement("div",{className:"_3a61"},d),{"data-tooltip-content":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-content"])),"data-hover":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-hover"])),"data-tooltip-position":b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(c["data-tooltip-position"]))})}else return null},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(a.shown,[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("ChatDetailStack.bs",["ReasonReact.bs","ChatDetailStack.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatDetailStack.react"),{topDetail:a,bottomDetail:c},d)}f.make=a}),null);
__d("ChatTabMenu.bs",["MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerState.bs","bs_js_null_undefined","getPageIDFromThreadID","ChatTabMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k,l,m,n){var o=a!==void 0?b("bs_js_primitive").some(b("bs_js_primitive").valFromOption(a).thread_id):void 0;if(o!==void 0){var p=b("bs_js_primitive").valFromOption(o);p=[b("MercuryIDs").isGroupChat(p),b("MessengerState.bs").isNewEmptyLocalThread(c,p),b("bs_js_primitive").nullable_to_opt(b("getPageIDFromThreadID")(p))!==void 0]}else p=[!1,!0,!1];var q=a!==void 0?b("bs_js_primitive").valFromOption(a).message_count===0:!0;return b("ReasonReact.bs").wrapJsForReason(b("ChatTabMenuBootloader.react"),{autoFocus:!1,hasBlockedMessages:h,highlightNewMessage:k,isEmptyChat:p[1],isEmptyConversation:q,isFocused:j,isGroupChat:p[0],isMultiCompany:i,isPageChat:p[2],membershipParticipants:b("bs_js_null_undefined").fromOption(d),pageUnsubscribeStatus:e,participantsMap:b("bs_js_null_undefined").fromOption(f),showMessengerReportNux:g,isNewMessageTab:l,thread:b("bs_js_null_undefined").fromOption(a),threadID:b("bs_js_null_undefined").fromOption(o),uri:m,viewer:c},n)}f.make=a}),null);
__d("MercuryThreadTitleReact.bs",["ReasonReact.bs","bs_js_null_undefined","MercuryThreadTitle.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadTitle.react"),{className:b("bs_js_null_undefined").fromOption(a),maxTitle:b("bs_js_null_undefined").fromOption(c),thread:d,viewer:e,isNewThread:b("bs_js_null_undefined").fromOption(f),showUnreadCount:b("bs_js_null_undefined").fromOption(g),useShortName:b("bs_js_null_undefined").fromOption(h),useAndSeparator:b("bs_js_null_undefined").fromOption(i)},j)}f.make=a}),null);
__d("ChatThreadName.bs",["cx","React","LinkReact.bs","MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerHoverCardLink","MercuryThreadTitleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("ChatThreadName");function a(a,c,d,e,f,g,i){__p&&__p();return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){__p&&__p();if(a!==void 0){var h=b("bs_js_primitive").valFromOption(a),i=h.thread_id,j=b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,d,f,void 0,"tooltip",d,void 0,void 0,c,void 0,function(a){if(c.length>0){a.stopPropagation();return 0}else return 0},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTitleReact.bs").make("_1ogo",void 0,h,e,g,void 0,!h.is_canonical,!0,[]))]));if(h.is_canonical){h=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(i)});return b("React").cloneElement(j,{"data-hovercard":h,"data-hover":""})}else return j}else return null},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("ChatVideoCallButton.bs",["MercuryIDs","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined","ChatVideoCallButtonBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j){__p&&__p();a=a!==void 0?a:!0;d=d!==void 0?d:function(){return 0};e=e!==void 0?e:!1;i=i!==void 0?i:!0;if(g!==void 0){var k=b("bs_js_primitive").valFromOption(g);k=[b("bs_js_primitive").some(k.thread_id),b("bs_js_primitive").nullable_to_opt(k.rtc_call_data)]}else k=[void 0,void 0];var l=k[1];l=l!==void 0?b("bs_js_primitive").valFromOption(l):{call_state:"NO_ONGOING_CALL",server_info_data:null,initiator_fbid:null};k=b("bs_js_null_undefined").fromOption(k[0]);var m=b("MercuryIDs").isGroupChat(k);return b("ReasonReact.bs").wrapJsForReason(b("ChatVideoCallButtonBootloader.react"),{isAudio:a,isPageChat:c,isGroupChat:m,color:f!==void 0?f:null,onRTCNuxCloseButtonClick:d,rtcNuxShown:e,threadID:k,thread:b("bs_js_null_undefined").fromOption(g),viewer:h,shown:i,rtcCallData:l},j)}f.make=a}),null);
__d("FantaCloseButton.bs",["cx","fbt","bs_curry","React","LinkReact.bs","ReasonReact.bs","TrackingNodes","TrackingNodeTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("FantaCloseButton");function a(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var d=b("TrackingNodes").getTrackingInfo(b("TrackingNodeTypes").CLOSE_BUTTON),e=c?h._("Pulsa \"Esc\" para cerrar"):h._("Cerrar pesta\u00f1a");return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,e,"_40qq _4vu4 button",d,"tooltip",e,void 0,"above",void 0,void 0,function(c){c.stopPropagation();return b("bs_curry")._1(a,c)},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("React").createElement("div",{className:"close _6--c"})]))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("FantaM4Header.bs",["cx","fbt","cssVar","bs_curry","React","bs_belt_Set","bs_belt_Array","MercuryIDs","bs_belt_Option","ChatTabMenu.bs","ReasonReact.bs","bs_js_primitive","ParticipantId.bs","ChatThreadName.bs","ChatDetailStack.bs","FantaCloseButton.bs","ArchiveWarningReact.bs","ChatVideoCallButton.bs","MessageRequestUtils","FantaProfilePresence.bs","MessengerParticipants.bs","getPageIDFromThreadID","MessengerCustomColorUtils.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","getGroupNameTooltipFromParticipantIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").statelessComponent("FantaM4Header");function k(a,c){__p&&__p();if(a!==void 0){a=b("bs_js_primitive").valFromOption(a).valueSeq().filter(function(a){return!(a.image_src==null)}).map(function(a,d,e){d=b("bs_belt_Option").getExn(b("bs_js_primitive").nullable_to_opt(a.image_src));return[d,a.fbId!==c]}).take(4).toArray();var d=a.length>3;d=d?a.filter(function(a){return a[1]}):a;return d.slice(0,3).map(function(a){return a[0]})}else return[]}function l(a,c,d){__p&&__p();if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);var e=a.image_src;if(e==null){a=b("MercuryIDs").getParticipantIDFromFromThreadID(a.thread_id);if(a==null)return k(c,d);else{c=b("MessengerParticipants.bs").getNow(a);if(c==null)return[];else{d=c.image_src;if(d==null)return[];else return[d]}}}else return[e]}else return[]}function m(a){__p&&__p();if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);if(a.is_canonical)return"";else{a=b("getGroupNameTooltipFromParticipantIDs").getGroupNameTooltipFromParticipantIDs(a.participants);if(a==null)return"";else return a}}else return""}function n(a){if(a!==void 0)return b("MessageRequestUtils").isMessageRequest(b("bs_js_primitive").valFromOption(a));else return!1}function o(a,c,d,e,f,g,i,k,o,p,q,r,s,t,u,v,w,x,y,z){__p&&__p();var A=r!==void 0?r:"";return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var j=l(q,o,s),r=q!==void 0?b("bs_js_primitive").nullable_to_opt(b("getPageIDFromThreadID")(b("bs_js_primitive").valFromOption(q).thread_id)):void 0,B=h._("Activo ahora");if(q!==void 0){var C=b("bs_js_primitive").valFromOption(q);C=[C.thread_fbid,C.is_canonical]}else C=[null,!0];var D=C[1],E=C[0],F;if(o!==void 0){C=b("bs_js_primitive").valFromOption(o);var G=C.filter(function(b,a,c){return b.employee});F=C.count()>0&&G.count()===C.count()}else F=!1;var H=m(q);if(q!==void 0){G=b("bs_js_primitive").valFromOption(q).header_color;C=G==null?b("MessengerCustomColorUtils.bs").defaultColor(0):G}else C=b("MessengerCustomColorUtils.bs").defaultColor(0);G=c?C!==void 0?["#FFFFFF",C]:["#bec2c9",""]:C!==void 0&&d?[C,""]:["#bec2c9",""];var I=G[1];C=G[0];var J="_69pt"+(c?" _2mgn":""),K=v?h._("Nuevo mensaje"):b("ReasonReact.bs").element(void 0,void 0,b("ChatThreadName.bs").make(q,A,H,s,"_2mgq",v,[]));G=r!==void 0;var L=n(q),M=L||!(q!==void 0&&!v)?null:b("React").createElement("div",{className:"_69ae"},b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(void 0,void 0,b("ChatVideoCallButton.bs").make(!1,G,void 0,void 0,C,q,s,void 0,[]))),b("React").createElement("div",{className:"_66n5 _1iti"},b("ReasonReact.bs").element(void 0,void 0,b("ChatVideoCallButton.bs").make(!0,G,k,p,C,q,s,void 0,[]))),b("React").createElement("div",{className:"_66n5"},b("ReasonReact.bs").element(void 0,void 0,b("ChatTabMenu.bs").make(q,s,f,t,o,w,a,e,d,c,v,x,[]))));L=b("bs_belt_Option").map(o,function(a){return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(a.toArray(),function(a){return a[0]}),[b("ParticipantId.bs").cmp])});return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerPresenceProvider.bs").make(L),void 0,void 0,function(a){a=q!==void 0?b("MessengerParticipantUtils.bs").findIntersection(s,a,b("bs_js_primitive").valFromOption(q)).length>0&&!y:!1;var c=r!==void 0||!a?null:b("React").createElement("div",{"aria-label":B,role:"presentation"},B);c=v?null:F?b("React").createElement("div",{className:"_69r-"},b("React").createElement("div",{className:"_1v1u"},b("ReasonReact.bs").element(void 0,void 0,b("ArchiveWarningReact.bs").make(F,[]))),c):c;return b("React").createElement("div",{className:J,style:{backgroundColor:I},onClick:i},b("React").createElement("div",{className:"_66n2"},v?null:b("ReasonReact.bs").element(void 0,void 0,b("FantaProfilePresence.bs").make(j,28,u!==void 0?!0:a,!0,A,H,I,e,D,E==null?void 0:b("bs_js_primitive").some(E),[])),b("React").createElement("div",{className:"_66n3"+(v?" _6dtv":"")},b("ReasonReact.bs").element(void 0,void 0,b("ChatDetailStack.bs").make(K,c,[])),M)),b("ReasonReact.bs").element(void 0,void 0,b("FantaCloseButton.bs").make(g,d,[])))}))},j[9],j[10],j[11],j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return o(a.hasBlockedMessages,a.highlightNewMessage,a.isFocused,a.isMultiCompany,b("bs_js_primitive").nullable_to_opt(a.membershipParticipants),a.onClose,a.onHeaderToggle,a.onRTCNuxCloseButtonClick,b("bs_js_primitive").nullable_to_opt(a.participants),a.rtcNuxShown,b("bs_js_primitive").nullable_to_opt(a.thread),a.threadHref,a.viewer,a.pageUnsubscribeStatus,b("bs_js_primitive").nullable_to_opt(a.pageIndicatorDescription),a.isNewMessageTab,a.showMessengerReportNux,a.uri,a.isMessengerOnlyUser,[])});c=28;f.component=j;f.profile_image_size=c;f.getUpTo3Images=k;f.getProfileImages=l;f.getTooltip=m;f.isThreadMessageRequest=n;f.make=o;f.jsComponent=a}),null);
__d("XGroupCallNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groupcall/nux/",{action:{type:"String",required:!0}})}),null);
__d("FantaChatHeaderContainer.react",["cx","AsyncRequest","Bootloader","ChatConfig","ChatTabHeaderContainer.react","FantaM4Header.bs","FantaTabActions","FantaTabSheetActions","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","React","ShortProfiles","XGroupCallNuxController","immutable","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FantaM4Header.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=!1,this.state={rtcNuxShown:!1},this.$7=function(){var a=this.props.threadID;b("FantaTabSheetActions").openAddMoreFriendsSheet(a)}.bind(this),this.$4=function(event){this.props.onClose&&this.props.onClose(),event.preventDefault()}.bind(this),this.$5=function(event){var a=event.target,c=a&&a.classList&&a.classList.contains("button");a=a&&(a.tagName==="svg"||a.ownerSVGElement!=null);if(c||a)return;event.stopPropagation();b("FantaTabActions").minimizeTab(this.props.threadID)}.bind(this),this.$6=function(event){this.$3();var a=event.target;if(!a)return;(a.getAttribute("role")==="presentation"||a.classList&&(a.classList.contains("_15p6")||a.classList.contains("_2nlt")||a.classList.contains("_14lt")))&&(event.stopPropagation(),b("FantaTabActions").minimizeTab(this.props.threadID))}.bind(this),this.$3=function(){if(this.state.rtcNuxShown&&this.$1){this.setState({rtcNuxShown:!1});var a=b("XGroupCallNuxController").getURIBuilder().setString("action","dismiss").getURI();new(b("AsyncRequest"))(a).send()}}.bind(this),c}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.threadHref!==a.threadHref||c.highlightNewMessage!==a.highlightNewMessage||c.isFocused!==a.isFocused||c.viewer!==a.viewer||c.threadID!==a.threadID||c.isLastGroupTab!==a.isLastGroupTab||c.thread!==a.thread||d.rtcNuxShown!==b.rtcNuxShown||c.customColor!==a.customColor||c.blockedIDs!==a.blockedIDs||!c.membershipParticipants&&!!a.membershipParticipants||!!c.membershipParticipants&&!!a.membershipParticipants&&!c.membershipParticipants.equals(a.membershipParticipants)||!c.participants&&!!a.participants||!!c.participants&&!!a.participants&&!c.participants.equals(a.participants)};a.prototype.componentDidMount=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.FIRSTCHATTABOPEN_WWW,"mount_header",JSON.stringify({isNewMessageTab:this.props.isNewMessageTab,hasThread:!!this.props.thread}),0,a)}.bind(this),"FantaChatHeaderContainer.react");this.$1=!0;this.$2()};a.prototype.componentWillUnmount=function(){this.$3(),this.$1=!1};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockedIDs,d=a.composer,e=a.customColor,f=a.highlightNewMessage,g=a.isFocused,h=a.isNewMessageTab,j=a.membershipParticipants,k=a.pageIndicatorDescription,l=a.participants,m=a.thread,n=a.threadHref,o=a.threadID,p=a.uri;a=a.viewer;var q=this.state.rtcNuxShown,r=e?{color:e}:null;c=!!m&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a,c,m);var s=!!m&&m.page_unsubscribe_status;if(b("ChatConfig").get("chat_tab_m4_header")){var t,u=b("MercuryIDs").getUserIDFromThreadID(o);u&&(t=b("ShortProfiles").getNow(u));u=t&&t.is_messenger_only;return b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(i,{hasBlockedMessages:c,highlightNewMessage:f,isMessengerOnlyUser:u,isFocused:g,isMultiCompany:this.props.isMultiCompany,isNewMessageTab:!!h,membershipParticipants:j,onClose:this.$4,onHeaderToggle:this.$5,onRTCNuxCloseButtonClick:this.$3,pageUnsubscribeStatus:s,pageIndicatorDescription:k,participants:l,rtcNuxShown:q,showMessengerReportNux:!0,thread:m,threadHref:n,uri:p,viewer:a}))}return b("React").createElement("div",{className:"clearfix fbNubFlyoutTitlebar titlebar"+(e?" _1m34":""),style:r},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),composer:d,hasBlockedMessages:c,href:n,isActive:g,isMultiCompany:this.props.isMultiCompany,isNewMessageTab:!!h,isRaised:!0,isTyping:!1,membershipParticipants:j,onClick:this.$6,onCloseClick:this.$4,onRTCNuxCloseButtonClick:this.$3,pageUnsubscribeStatus:s,participants:l,rtcNuxShown:q,sheetController:{openAddFriendsSheet:this.$7},showMessengerReportNux:!0,thread:m,threadID:o,uri:p,viewer:a}))};a.prototype.$2=function(){if(this.props.isLastGroupTab){var a=b("XGroupCallNuxController").getURIBuilder().setString("action","should_show").getURI();new(b("AsyncRequest"))(a).setHandler(function(a){a=a.payload.shouldShow;this.$1&&this.setState({rtcNuxShown:a})}.bind(this)).send()}};a.propTypes={blockedIDs:c.any,customColor:c.string,highlightNewMessage:c.bool,isFocused:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,onClose:c.func.isRequired,thread:c.object,threadID:c.string.isRequired,uri:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaComposerGroupedInputUtil",["CacheStorage","UFIGroupedInputTabs"],(function(a,b,c,d,e,f){"use strict";var g=b("UFIGroupedInputTabs").InputTitleEnum,h="last_used_tab_on_chat_composer",i=new(b("CacheStorage"))("localstorage");a=function(a){return i.get(h,g.EMOJI)};c=function(a){return i.set(h,a)};e.exports={getLastUsedChatInputTab:a,setLastUsedChatInputTab:c}}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","React","StickerInterfaces","StickersTypedLogger","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.$4=function(a){this.props.threadID===a&&this.setState({likePreview:null})}.bind(this),this.$5=function(a,c){if(!a)return;new(b("StickersTypedLogger"))().setEvent("click_sticker").setPackid(a).setStickerid(c).log();b("Bootloader").loadModules(["StickersPackInTray","StickersActions","StickersStoreController"],function(c,d,e){c.onIsPackInTray(a,b("StickerInterfaces").MESSAGES,function(b){b.in_sticker_tray?(d.selectTrayPack(a),d.showStickerFlyout(this.props.threadID)):e.showStore(a)}.bind(this))}.bind(this),"FantaConversation.react")}.bind(this),this.state={likePreview:null},this.$1=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return!c.messages.equals(a.messages)||c.threadID!==a.threadID||c.thread!==a.thread||d.likePreview!==b.likePreview};a.prototype.componentDidMount=function(){this.$2(),this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.componentWillUnmount=function(){this.$1.release()};a.prototype.$3=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.$2=function(){this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,b){this.props.threadID===b&&this.setState({likePreview:a})}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$4),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,this.$4))};a.prototype.render=function(){var a=this.props.messages,c=this.props,d=c.forGameChat,e=c.onLoadMoreMessages,f=c.thread;c=c.threadID;var g=this.state.likePreview,h=b("CurrentUser").getID();g&&(a=a.push(g));return f?b("React").createElement(b("ChatConversation.react"),{forGameChat:d,isCanonical:b("MercuryIDs").isCanonical(c),loadMoreMessages:e,maxBubbleWidth:181-this.props.scrollbarPadding,messages:a,onAttachmentLoad:function(){return this.props.onAttachmentLoad()}.bind(this),onMount:b("emptyFunction"),onStickerClick:this.$5,readReceipts:this.props.readReceipts,ref:"conversation",thread:f,threadID:c,viewer:h}):b("React").createElement("div",null)};a.prototype.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};a.propTypes={forGameChat:c.bool.isRequired,messages:c.object.isRequired,onLoadMoreMessages:c.func.isRequired,scrollbarPadding:c.number,thread:c.object,threadID:c.string.isRequired};e.exports=a}),null);
__d("ChatTypingIndicators.bs",["ReasonReact.bs","bs_js_null_undefined","ChatTypingIndicators.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("ChatTypingIndicators.react"),{indicatorClass:b("bs_js_null_undefined").fromOption(a),indicatorsDidShow:b("bs_js_null_undefined").fromOption(c),indicatorsDidHide:b("bs_js_null_undefined").fromOption(d),rootClassName:b("bs_js_null_undefined").fromOption(e),threadID:f,viewer:h,typingUserIDs:g},i)}f.make=a}),null);
__d("ChatTypingIndicatorsWrapper.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","bs_belt_MapString","MessengerState.bs","ChatTypingIndicators.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("ChatTypingIndicatorsWrapper");function h(a,c,d,e,f,h,i){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._4(b("MessengerState.bs").Provider[0],void 0,void 0,b("bs_js_primitive").some(e),function(g){return b("ReasonReact.bs").element(void 0,void 0,b("ChatTypingIndicators.bs").make(a,d,c,f,h,b("bs_belt_MapString").get(g[6],h),e,[]))}))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.indicatorClass),b("bs_js_primitive").nullable_to_opt(a.indicatorsDidHide),b("bs_js_primitive").nullable_to_opt(a.indicatorsDidShow),a.viewer,b("bs_js_primitive").nullable_to_opt(a.rootClassName),a.threadID,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.thread;a=a.threadID;if(c!=null){c=((c=c)!=null?c.is_canonical_neo_user:c)||!1;if(c)return null}else return null;return b("getPageIDFromThreadID")(a)?b("React").createElement("div",{className:"_av1"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MercuryChatTabPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a})})):null};e.exports=a}),null);
__d("XWorkplaceMarketingDefaultController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/workplace/{?*path}/",{path:{type:"String",defaultValue:""},ref:{type:"String"}})}),null);
__d("MercuryLastMessageIndicator.react",["cx","fbt","MercuryIDs","MercuryMessageSourceTags","MercuryViewer","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerTextWithEmoticons.react","React","TooltipData","WorkModeConfig","XWorkplaceMarketingDefaultController","emptyFunction","formatDate","gkx","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("immutable").Set;c=b("React").PropTypes;var k=function(a,c,d){a=b("MessengerReadReceipt.bs").getSeenTimestamp(a,d,c[0]);d=a.action*.001;return{seenTimestamp:d,seenByData:null}},l=function(a,c,d){__p&&__p();var e={};for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;e[i]=b("MessengerParticipants.bs").getNow(i)}i=null;c&&c.custom_nickname&&(i=c.custom_nickname);h={};g=Object.keys(e);for(var f=0;f<g.length;f++){var j=g[f],k=e[j],l;!k?l=b("MessengerParticipants.bs").getDefaultName():(l=k.short_name,i&&i[k.fbid]&&(l=i[k.fbid]));h[j]=l}var m;k=!1;j=!1;n(a,d,c)?j=!0:a.length==1?m=" "+h[a[0]]:a.length==2?m=" "+h[a[0]]+", "+h[a[1]]:a.length==3?m=" "+h[a[0]]+", "+h[a[1]]+", "+h[a[2]]:a.length>3&&(m=" "+h[a[0]]+", "+h[a[1]]+", ",k=!0);return{seenTimestamp:null,seenByData:{seenByAll:j,text:m,showTooltip:k,seenBy:a}}},m=function(a,c,d,e){e=b("MessengerReadReceipt.bs").getSeenBy(a,e,!0);if(e.length===0)return{seenTimestamp:null,seenByData:null};var f=b("MercuryIDs").getUserIDFromThreadID(d);if(f)return k(a,e,d);else return l(e,c)},n=function(a,c,d){var e=d?d.participants.length:0;a=a.length;c&&c.author!=b("MercuryViewer").getID()&&(!d||d.participants.indexOf(c.author)>-1)&&a++;return e>2&&a>=e-1};d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={seenTimestamp:null,seenByData:null},b}a.getDerivedStateFromProps=function(a,b){"use strict";return m(a.readReceipts,a.thread,a.threadID,a.lastMessage)};a.prototype.shouldComponentUpdate=function(a,b){"use strict";__p&&__p();if(a.thread!==this.props.thread||a.threadID!==this.props.threadID||a.lastMessage!==this.props.lastMessage||a.isTyping!==this.props.isTyping||a.readReceipts!==this.props.readReceipts||b.seenTimestamp!==this.state.seenTimestamp)return!0;a=this.state.seenByData;b=b.seenByData;if(!a&&!b)return!1;if(!a||!b)return!0;if(a.seenByAll!==b.seenByAll||a.showTooltip!==b.showTooltip||a.text!==b.text)return!0;return!j(a.seenBy).equals(j(b.seenBy))?!0:!1};a.prototype.componentDidUpdate=function(){"use strict";if(!this.isVisible())return;this.props.indicatorDidShow&&this.props.indicatorDidShow()};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release()};a.prototype.$2=function(){"use strict";return!this.props.lastMessage?[]:this.props.lastMessage.source_tags||this.props.lastMessage.tags||[]};a.prototype.$3=function(){"use strict";if(this.props.isTyping)return b("React").createElement("div",{className:this.$4([])},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},"\xa0"));var a=this.$2(),c=this.state.seenByData,d=this.state.seenTimestamp;if(c)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f"},this.$5(c)));else if(d)return b("React").createElement("div",{className:this.$4(a)},b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$6(d)));else return b("React").createElement("div",{className:this.$4(a)},b("WorkModeConfig").is_work_user?b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_510h"}),b("React").createElement("span",{className:"_510f",ref:"text"},this.$7(a))):null)};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_4gd0"},this.$3())};a.prototype.$6=function(a){"use strict";var c=Date.now()*.001,d;a<c-518400?d="M j":a<c-86400?d="D g:ia":d="g:ia";return h._("Visto: {timestamp}",[h._param("timestamp",b("formatDate")(a,d))])};a.prototype.$7=function(a){"use strict";__p&&__p();if(a.includes(b("MercuryMessageSourceTags").MESSENGER))return b("React").createElement("a",{href:"https://www.facebook.com/workplace/mobile/",className:"fcg",target:"_blank"},h._("Enviado desde el chat de Workplace"));else if(a.includes(b("MercuryMessageSourceTags").MOBILE)){var c="/workplace/mobile";return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Enviado por m\u00f3vil"))}else if(a.includes(b("MercuryMessageSourceTags").EMAIL))return b("React").createElement("span",null,h._("Enviado por correo electr\u00f3nico"));else if(a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)){c=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","last-message-indicator").getURI();return b("React").createElement("a",{href:c,className:"fcg",target:"_blank"},h._("Sent from the desktop app"))}return null};a.prototype.$4=function(a){"use strict";var c=this.props.lastMessage&&this.props.lastMessage.author&&b("MercuryViewer").isViewer(this.props.lastMessage.author);c="_510g"+(c?" _510e":"");var d=null;this.props.isTyping?d=null:this.state.seenByData!==null||this.state.seenTimestamp!==null?d="seen":a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)?d="sentFromMobile":a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?d="sentFromDesktop":a.includes(b("MercuryMessageSourceTags").EMAIL)&&(d="sentFromEmail");return b("joinClasses")(c,d)};a.prototype.isVisible=function(){"use strict";var a=this.$2();return a.includes(b("MercuryMessageSourceTags").MESSENGER)||a.includes(b("MercuryMessageSourceTags").MOBILE)||a.includes(b("MercuryMessageSourceTags").EMAIL)||a.includes(b("MercuryMessageSourceTags").WORK_DESKTOP)?!0:this.state.seenTimestamp!==null||this.state.seenByData!==null};a.prototype.$5=function(a){"use strict";__p&&__p();var c=a.seenByAll;if(c)return h._("Visto por todos");c=a.text;if(!c)return null;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoji:!0,renderEmoticons:!0,text:c});var d=a.showTooltip;if(!d)return h._("Visto por {names}",[h._param("names",c)]);else{d=this.$8(a);return h._("Visto por {names}{=num more link}",[h._param("names",c),h._param("=num more link",d)])}};a.prototype.$8=function(a){"use strict";__p&&__p();if(!a.text||!a.showTooltip)return null;var c={},d=0,e=null;b("MessengerParticipants.bs").getMulti(a.seenBy,function(b){e=a.seenBy.map(function(a){return b[a].name}).join("\r\n"),d=Object.keys(b).length-2});c=Object.assign({"data-tooltip-alignh":"center"},b("TooltipData").propsFor(e,"above"));var f=h._({"*":"{num} m\u00e1s"},[h._param("num",d,[0])]);return b("React").createElement("span",babelHelpers["extends"]({className:"more"},c),f)};a.propTypes={indicatorDidShow:c.func,lastMessage:c.object,readReceipts:c.any,threadID:c.string.isRequired,isTyping:c.bool.isRequired};a.defaultProps={indicatorDidShow:b("emptyFunction")};e.exports=a}),null);
__d("MessengerQuickReplyUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={localizeTitleIfNecessary:function(a){return a.map(function(a){return a.content_type==="location"?Object.assign(a,{title:g._("Enviar ubicaci\u00f3n")}):a})}};e.exports=a}),null);
__d("MessengerViewerContactMethodsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1868889766468115"};c.getQueryID=function(){"use strict";return"177554543035925"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MercuryQuickReply.react",["cx","BootloadedComponent.react","JSResource","MercuryIDs","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerViewerContactMethodsWebGraphQLQuery","React","WebGraphQL","XUISpinner.react","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={viewerEmail:null,viewerPhone:null},b}a.prototype.componentDidMount=function(){this.$1(this.props.lastMessage)!==null&&this.props.quickReplyDidShow()};a.prototype.componentDidUpdate=function(a){this.$1(this.props.lastMessage)!==null&&this.$1(a.lastMessage)===null&&this.props.quickReplyDidShow(),this.$2(this.props.lastMessage)};a.prototype.render=function(){__p&&__p();var a=this.props.lastMessage,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(!a||a.author===c)return null;c=this.$1(a);if(Array.isArray(c)){var d=c.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!d){d=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(c);return b("React").createElement("div",{className:"_419m"},b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MercuryQuickReply.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{className:"_5h-9"}),isSponsored:a.is_sponsored,messageId:a.message_id,options:d,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),threadID:a.thread_id,quickCamOriginLocation:this.props.quickCamOriginLocation,viewer:this.props.viewer,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}))}}return null};a.prototype.$1=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$2=function(a){__p&&__p();a=this.$1(a);if(!a||a.length===0)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.propTypes={quickReplyDidShow:c.func.isRequired,lastMessage:c.object,quickCamOriginLocation:c.oneOf(b("MessengerQuickCamOrigins").getValues()).isRequired,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerTabsThreadSearchLoader",["Promise","Bootloader","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_store:null,_actions:null,_promise:null,getStoreEnforce:function(){b("nullthrows")(this._store,"Tab thread search store is not loaded");return this._store},getActionsEnforce:function(){b("nullthrows")(this._actions,"Tab thread search actions are not loaded");return this._actions},isLoaded:function(){return this._store&&this._actions},load:function(){this._promise||(this._promise=new(b("Promise"))(function(a){b("Bootloader").loadModules(["MessengerThreadSearchActions","MessengerTabsThreadSearchStore"],function(b,c){this._store=c.get(),this._actions=b,a({store:c,actions:b})}.bind(this),"MessengerTabsThreadSearchLoader")}.bind(this)));return this._promise}};e.exports=a}),null);
__d("WorkBotLandingPageHelper",["MessagingGenericAdminTextType","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;function a(a){__p&&__p();var c;if(a.size===0)return!0;if(a.size>1)return!1;a=a.last();c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c===b("MessagingGenericAdminTextType").WORK_BOT_INSTALLED){a=(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.show_landing_page:c:c:c;return a===!0}return!1}e.exports={shouldShowBotLandingPage:a}}),null);
__d("FantaConversationScroller.react",["ix","cx","csx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","BootloadOnRender.react","ChatThread","ChatTypingIndicatorsWrapper.bs","CurrentUser","ErrorBoundary.react","Event","FantaConversation.react","FantaPageGreetingLoader.react","FantaTabActions","Grid.react","Image.react","JSResource","LazyComponent.react","Link.react","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLastMessageIndicator.react","MercuryQuickReply.react","MercuryShareAttachmentRenderLocations","MessengerHotLikePreviewEvents","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerTabsThreadSearchLoader","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","Parent","QE2Logger","React","ReactDOM","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","TimeSlice","WebMessengerConstants","WorkBotLandingPageHelper","XUIButton.react","XUISpinner.react","immutable","asset","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","isEventSupported","joinClasses","performanceAbsoluteNow","promiseDone","setImmediate","shallowEqual","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("ChatThread").ChatThread,m=b("ChatTypingIndicatorsWrapper.bs").jsComponent,n=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,o=b("Grid.react").GridItem;c=b("React").PropTypes;var p=15,q=null,r=20,s=1e3;function t(a){__p&&__p();if(q===null){var c=a.firstElementChild;if(c){b("Style").set(a,"overflow","scroll");var d=c.clientWidth;b("Style").set(a,"overflow","hidden");c=c.clientWidth;q=Math.max(c-d,0);b("Style").set(a,"overflow","")}else q=0}return q}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(a){__p&&__p();k.constructor.call(this,a),this.$9=[],this.state={loadingMessages:!this.props.isEmptyLocalThread,scrollbarPadding:q===null?p:q,hideLastMessageIndicator:!1,searchResults:null},this.$20=function(a){a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a&&(this.$21(),this.$22()&&!this.$23()&&!this.$3&&!this.props.hasFetchedAll&&!(this.state.searchResults&&this.state.searchResults.mid)&&(this.setState({loadingMessages:!0}),this.props.onLoadMoreMessages()),this.$24(),this.$10())}.bind(this),this.$16=function(){__p&&__p();if(!this.refs||this.state.loadingMessages||!this.props.thread){this.$9=[];return}var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getPageIDFromThreadID")(this.props.threadID);if(!a||!c){this.$9=[];return}var d=10,e,f;try{e=a.getBoundingClientRect(),f=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!f||!e)return;var g=[];this.$8.forEach(function(a){if(!f)return;var h=a.message_id,i=f.getMessageElement(h);if(i){i=i.getBoundingClientRect();i.top>e.top-d&&i.bottom<e.bottom+d&&(g.push(h),this.$9.includes(h)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,h,c)},"FantaConversationScroller.react"))}}.bind(this),this);this.$9=g}.bind(this),this.$26=function(){this.$1=null,b("FantaTabActions").scrollBottomChanged(this.props.threadID,this.$6,this.$27)}.bind(this),this.$27=function(){this.$28(!1),this.$18()}.bind(this),this.$29=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){return b.markerEnd(c.FIRSTCHATTABOPEN_WWW,"SUCCESS",0,a)},"FantaConversationScroller.react")},this.$32=function(a){a=b("Parent").byClass(a.target,"._1dlq");a||this.props.onFocus&&this.props.onFocus()}.bind(this),this.$34=function(a){a.target&&a.target.classList&&a.target.classList.contains("_5wd4")&&(this.props.onFocus&&this.props.onFocus())}.bind(this),this.$6=!0}a.prototype.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return d.hasFetchedAll!==a.hasFetchedAll||d.isFocused!==a.isFocused||!d.messages.equals(a.messages)||d.showContextBanner!==a.showContextBanner||d.readReceipts!==a.readReceipts||d.thread!==a.thread||d.threadID!==a.threadID||e.loadingMessages!==c.loadingMessages||e.hideLastMessageIndicator!==c.hideLastMessageIndicator||!b("shallowEqual")(e.searchResults,c.searchResults)||d.jumpToMessage!==a.jumpToMessage};a.prototype.componentDidMount=function(){__p&&__p();var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.FIRSTCHATTABOPEN_WWW,"mount_conversation_scroller",JSON.stringify({messageSize:this.props.messages.size,hasThread:!!this.props.thread}),0,a)}.bind(this),"FantaConversationScroller.react");this.$7=new(b("SubscriptionsHandler"))();this.$11();this.$12();this.$13();b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14());this.setState({scrollbarPadding:t(this.refs.scrollContainer),searchResults:this.$15()});this.$10=b("throttle")(this.$16,s);this.$8=this.props.messages.filter(function(a){return a.is_sponsored});this.$10();this.$17()};a.prototype.componentDidUpdate=function(a){__p&&__p();this.$13();if(this.$3){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer),d=this.$3||0;c=c.scrollHeight-d;this.scrollToPosition(c,!1);this.$3=null}if(!a.messages.equals(this.props.messages)){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$14());d=a.messages.last();c=this.props.messages.last();if(d!==c&&c&&c.author){a=b("MercuryIDs").getUserIDFromParticipantID(c.author);a===b("CurrentUser").getID()&&(this.scrollToBottom(!1),this.$18())}}this.$19();this.$10()};a.prototype.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1),this.$7.release(),b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this.state.loadingMessages&&a.messages.size>0&&!a.messages.equals(this.props.messages);if(c||a.hasFetchedAll||a.showContextBanner){this.setState({loadingMessages:!1});c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);var d=c.scrollHeight;c=b("Scroll").getTop(c);this.$3=d-c}this.$8=a.messages.filter(function(a){return a.is_sponsored})};a.prototype.$15=function(){return b("MessengerTabsThreadSearchLoader").isLoaded()?b("MessengerTabsThreadSearchLoader").getStoreEnforce().getThreadState(this.props.threadID):null};a.prototype.$17=function(){(b("gkx")("678588")||b("MercuryConfig").M3CRE)&&b("promiseDone")(b("MessengerTabsThreadSearchLoader").load(),function(a){var b=a.store;a.actions;this.$7.addSubscriptions(b.get().addListener("change",function(){return this.setState({searchResults:this.$15(),loadingMessages:!1})}.bind(this)))}.bind(this))};a.prototype.$13=function(a){a===void 0&&(a=!1),this.$6&&b("TimeSlice").guard(function(){this.scrollToBottom(a)}.bind(this),"post load chat animations",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.renderGroupWave=function(){var a=this.props.thread;return b("MercuryIDs").isLocalThread(this.props.threadID)&&b("gkx")("678589")&&a&&!a.associated_object&&!a.is_canonical&&!a.thread_fbid?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:b("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:a,m4Thread:l!=null}):null};a.prototype.maybeRenderNullStateWave=function(){__p&&__p();var a=this.props,c=a.thread;a=a.threadID;if(!c||!c.is_canonical||c.timestamp)return null;b("QE2Logger").logExposureForUser("wave_in_www_null_state");if(!b("MercuryConfig").MNWNS)return null;c=b("MercuryIDs").getParticipantIDFromFromThreadID(a);c=c?b("MessengerParticipants.bs").getNow(c):null;c=c?c.short_name:null;return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerNewWavePrompt.react").__setRef("FantaConversationScroller.react"),threadID:a,recipientName:c,entrypoint:"canonical_null_state"})};a.prototype.$24=function(){__p&&__p();var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d;try{c=c.getBoundingClientRect(),d=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!d||!c)return;var e=[],f=b("MessengerVideoAutoplayStore").getMessageIDs(a),g=f||this.$14()||b("immutable").List();g.map(function(a){var c=b("MercuryAttachment").getVideoElem(a,d);c&&e.push([a,c.getBoundingClientRect()])});e.length&&b("MessengerVideoAutoplayActions").onScroll(a,f?null:g,b("immutable").Map(e),c)};a.prototype.$14=function(){return this.props.messages.filter(function(a){return b("MercuryAttachment").isSingleVideoAttachment(a)||b("MercuryAttachment").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.$25=function(a,c){__p&&__p();var d=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!d)return;var e=b("ReactDOM").findDOMNode(this.refs.scrollContainer),f=b("ReactDOM").findDOMNode(this.refs.conversation);d=d.getMessageComponent(a);a=b("ReactDOM").findDOMNode(d);if(!a||!f||!e)return;f=f.getBoundingClientRect().top;a=a.getBoundingClientRect().top;a=Math.abs(a-f)-e.getBoundingClientRect().height/2;this.$6=!1;this.scrollToPosition(Math.max(a,0),!1);b("CurrentUser").isWorkUser()&&d.highlightMessage();var g=c;g&&b("setImmediate")(function(){return g()})};a.prototype.scrollToBottom=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.scrollToPosition(c.scrollHeight,a)};a.prototype.scrollToPosition=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.prototype.$23=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);a=a===0?0:a||r;return b("Scroll").getTop(c)+c.clientHeight>=c.scrollHeight-a};a.prototype.$22=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);return b("Scroll").getTop(a)<a.clientHeight};a.prototype.$18=function(){var a=this.$6;this.$23()?this.$6=!0:this.$6=!1;a!==this.$6&&(this.$1=b("setImmediate")(this.$26))};a.prototype.$11=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!a)return;var c=b("isEventSupported")("mousewheel")?"mousewheel":b("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",d=function(){this.$18()}.bind(this),e=function(){a.addEventListener(c,d,{passive:!0})},f=function(){a.removeEventListener(c,d,{passive:!0})};this.$7.addSubscriptions(b("Arbiter").subscribe("overflow-applied-to-body",function(){return this.$13()}.bind(this)),b("Event").listen(a,"mousedown",d),b("Event").listen(a,"mouseup",d),b("Event").listen(a,"mouseenter",e),b("Event").listen(a,"mouseleave",f),{cancel:f},b("Event").listen(a,"scroll",b("throttle")(this.$20,50)));e=b("ScrollBoundaryContain").applyToElem(a);e&&this.$7.addSubscriptions(e)};a.prototype.$12=function(){this.$7.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(a,b){this.props.threadID===b&&(this.$28(!1),clearInterval(this.$4),this.$4=setInterval(function(){this.$28(!1)}.bind(this),50))}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){clearInterval(this.$4)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(a){this.props.threadID===a&&clearInterval(this.$4)}.bind(this)))};a.prototype.$30=function(){return b("CurrentUser").isWorkUser()&&b("gkx")("678590")?n(this.props.messages):this.props.messages.size===0};a.prototype.$31=function(){return b("CurrentUser").isWorkUser()&&b("gkx")("678590")?n(this.props.messages):!1};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.forGameChat,d=a.hasFetchedAll,e=a.isEmptyLocalThread,f=a.messages,g=a.showContextBanner,h=a.thread;a=a.threadID;var i=b("CurrentUser").getID();e=e||d||g;d=this.state.loadingMessages||!h?b("React").createElement("div",{className:"_1xdl"},b("React").createElement(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"})):null;d||(this.$29(),this.$29=b("emptyFunction"));g=function(){return this.$13()}.bind(this);var k=this.$30()?b("React").createElement(b("FantaPageGreetingLoader.react"),{thread:h,threadID:a}):null;e=e?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:!1,location:b("MercuryShareAttachmentRenderLocations").CHAT,viewer:i,thread:h,threadID:a}):null;var n=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Inicio de la conversaci\u00f3n de chat")),p=b("React").createElement("div",{className:b("joinClasses")("accessible_elem","_2kwv")},j._("Fin de la conversaci\u00f3n de chat")),q=null,r=this.state.searchResults;if(r&&r.messages){var s=j._("Cargar m\u00e1s...");q=b("React").createElement(b("React").Fragment,null,r.upExhausted?null:b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:s,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,this.props.threadID)}.bind(this),type:"primary",use:"default"}),b("React").createElement(b("FantaConversation.react"),{forGameChat:c,onAttachmentLoad:g,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation",messages:r.messages,onLoadMoreMessages:b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext,hasFetchedAll:this.props.hasFetchedAll,isFocused:this.props.isFocused,onFocus:this.props.onFocus,readReceipts:this.props.readReceipts,showContextBanner:this.props.showContextBanner,thread:this.props.thread,threadID:this.props.threadID}),r.downExhausted?null:b("React").createElement(b("XUIButton.react"),{className:"_41jf",label:s,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,this.props.threadID)}.bind(this),type:"primary",use:"default"}),b("React").createElement(m,{threadID:a,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return this.setState({hideLastMessageIndicator:!0},function(){this.$13(!0)}.bind(this))}.bind(this),indicatorsDidHide:function(){return this.setState({hideLastMessageIndicator:!1})}.bind(this),rootClassName:void 0,viewer:i}))}else q=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("FantaConversation.react"),babelHelpers["extends"]({forGameChat:c,onAttachmentLoad:g,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),b("React").createElement(b("MercuryQuickReply.react"),{lastMessage:f.size>0?f.last():void 0,threadID:a,quickReplyDidShow:function(){return this.$13(!0)}.bind(this),viewer:i,quickCamOriginLocation:b("MessengerQuickCamOrigins").CHAT_TAB}),b("React").createElement(m,{threadID:a,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return this.setState({hideLastMessageIndicator:!0},function(){this.$13(!0)}.bind(this))}.bind(this),indicatorsDidHide:function(){return this.setState({hideLastMessageIndicator:!1})}.bind(this),rootClassName:void 0,viewer:i}),this.renderGroupWave(),this.maybeRenderNullStateWave(),b("React").createElement(b("MercuryLastMessageIndicator.react"),{isTyping:this.state.hideLastMessageIndicator,indicatorDidShow:function(){this.$13(!0)}.bind(this),indicatorWillShow:b("emptyFunction"),lastMessage:f.size>0?f.last():null,readReceipts:this.props.readReceipts,thread:h,threadID:a}));r=b("React").createElement("div",{className:"_1xdm"+(d?" _1xdw":"")},b("React").createElement("div",{className:"_1xdx"},b("React").createElement("div",{className:"_1xe8"})),n,e,d,b("React").createElement("div",{style:f.size>0?{height:"176px"}:d?{height:"168px"}:{height:"192px"},className:"_1xdm"},this.$31()?null:q,b("gkx")("678591")&&b("React").createElement(b("ErrorBoundary.react"),{project:"omnim"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("FantaConversationScroller.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return this.$13(!0)}.bind(this)})}))),p);return l!=null?b("React").createElement(l,{onClick:this.$32,spacerContent:b("React").createElement(b("React").Fragment,null,n,e,k,d),scrollRef:function(a){this.refs.scrollContainer=a}.bind(this)},q,b("gkx")("678591")&&b("React").createElement(b("ErrorBoundary.react"),{project:"omnim"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("FantaConversationScroller.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return this.$13(!0)}.bind(this)})})),p,this.$33()):b("React").createElement("div",{className:"_2v5j"},b("React").createElement("div",{className:"fbNubFlyoutBody scrollable",onClick:this.$34,ref:"scrollContainer",role:"button",tabIndex:"0"},b("React").createElement("div",{className:"fbNubFlyoutBodyContent"},k,b("React").createElement(b("Grid.react"),{className:"conversationContainer",role:"log",cols:1},b("React").createElement(o,{alignv:"bottom"},r)))),this.$33())};a.prototype.$33=function(){return this.state.searchResults&&this.state.searchResults.messages?b("React").createElement(b("Link.react"),{className:"_2llh",onClick:function(){b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null),this.$6=!0}.bind(this)},b("React").createElement(b("Image.react"),{className:"_2llt",src:g("415098")})):null};a.prototype.$19=function(){var a=this.props.jumpToMessage;if(!a)return;this.props.messages.some(function(b){return b.message_id===a})||this.state.searchResults&&this.state.searchResults.messages&&this.state.searchResults.messages.some(function(b){return b.message_id===a})?this.$25(a,function(){return b("FantaTabActions").wipeJumpToMessage(this.props.threadID)}.bind(this)):b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,a)};a.prototype.$21=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer),c=b("getElementPosition")(a);b("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:b("Scroll").getTop(a),top:c.y,viewHeight:c.height})};a.prototype.$28=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.$35(c.scrollHeight,a)};a.prototype.$35=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$5&&this.$5.stop();c===!0?this.$5=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};a.propTypes={forGameChat:c.bool.isRequired,hasFetchedAll:c.bool.isRequired,isEmptyLocalThread:c.bool.isRequired,isFocused:c.bool.isRequired,messages:c.object.isRequired,onFocus:c.func,onLoadMoreMessages:c.func.isRequired,showContextBanner:c.bool,thread:c.object,threadID:c.string.isRequired,jumpToMessage:c.string};e.exports=a}),null);
__d("FantaDragAndDrop.react",["Bootloader","JSResource","MercuryShareAttachmentRenderLocations","MessengerEnvironment","Placeholder.react","React","emptyFunction","ifRequired","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=960;c=b("React").PropTypes;var i=b("lazyLoadComponent")(b("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"));d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){var b=this.props.composer;this.$5(function(c){c.removeSharePreview(a,b)})}.bind(this),this.$3=function(a,b){var c=this.props.composer;this.$5(function(d){d.loadedShareData(a,b,c)})}.bind(this),this.$4=function(a){var b=this.props.composer;this.$5(function(c){c.loadingShareData(a,b)})}.bind(this),b}a.prototype.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDrop.react")};a.prototype.shouldComponentUpdate=function(a){var b=this.props,c=b.composer,d=a.composer;c=c.sharePreview;d=d.sharePreview;return b.threadID!==a.threadID||!!(!c&&d)||!!(c&&d&&!c.equals(d))};a.prototype.render=function(){var a=this.props,c=a.composer;a=a.threadID;c=c.sharePreview;var d=c.share;c=c.uri;return b("React").createElement("div",{className:"fbNubFlyoutAttachments"},b("React").createElement("div",{className:"chatAttachmentShelf"},d||c?b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null)},b("React").createElement(i,{onClose:this.$2,onLoaded:this.$3,onLoading:this.$4,threadID:a,imageSize:{width:h,height:h},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:d,uri:c})):null))};a.prototype.$5=function(a){b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"FantaDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"FantaDragAndDrop.react")})};a.propTypes={composer:c.object.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","ChatConfig","JSResource","LazyComponent.react","React","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=b("ChatConfig").get("chat_tab_m4_header")?b("JSResource")("FantaM4TabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react"):b("JSResource")("FantaMercuryTabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react");return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{items:this.props.items,tabContents:this.props.tabContents}),loader:a,placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("FantaTab.react",["cx","EventProfiler","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=!1,b}a.prototype.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};a.prototype.render=function(){var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,h=a.MinimizedComponent,i=a.raisedTabCount,j=a.tab,k=a.tabContent;a=a.forGameChat;h=j.isMinimized?h:f;f=j.id+(j.isMinimized?"-minimized":"-maximized");var l=this.$1&&!j.isMinimized;this.$1=j.isMinimized;return b("React").createElement("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(j.isMinimized?" _3001":"")},b("React").createElement(h,{isFocused:c,isHovered:j.isHovered||l,isLastTab:d,isLastTabOfType:e,key:f,messengerState:g,raisedTabCount:i,tab:j,tabContent:k,forGameChat:a}))};e.exports=a}),null);
__d("FantaTabGroup.react",["cx","FantaTab.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.count();return b("React").createElement("div",{className:"_59v1"},a,k.map(function(a){return b("React").createElement(b("FantaTab.react"),{forGameChat:!1,isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,key:a.id,messengerState:e,MainComponent:d,MinimizedComponent:f,raisedTabCount:m,tab:a,tabContent:h&&h.get(a.id)})}).toArray())};a.prototype.$1=function(a,c){return!a.isEmpty()?b("React").createElement("div",{className:"_1kws"},b("React").createElement(c,{items:a,tabContents:this.props.tabContents})):null};function a(){h.apply(this,arguments)}a.propTypes={MainComponent:c.func.isRequired,messengerState:c.array,MinimizedComponent:c.func.isRequired,OverflowComponent:c.func.isRequired,tabContents:c.object,tabGroup:c.object.isRequired};e.exports=a}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MercuryThreadActions").get();c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$3=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),this.$4=function(a){var c=this.props.thread;c=!!c&&b("MessageRequestUtils").isFiltered(c);var d=b("CurrentUser").getID();d=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,d);a==="hide"&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(d).setEntryPoint("inbox_banner").log()}.bind(this),this.$1=function(){__p&&__p();var a=this.props,c=a.thread,d=a.threadID;a=!!c&&b("MessageRequestUtils").isFiltered(c);var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,e);if(a)b("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(a){a.show(d,this.$3,this.$4,function(){return b("FantaTabActions").closeTab(d)})}.bind(this),"FantaPendingActions.react");else{var f=b("MercuryIDs").isGroupChat(d);b("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(a){a.show(c,d,function(){return b("FantaTabActions").closeTab(d)},f)},"FantaPendingActions.react")}new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(e).setEntryPoint(null).log()}.bind(this),this.$2=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c);h.changeFolder(this.props.threadID,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()}.bind(this),c}a.prototype.render=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:b("React").createElement("div",{style:{height:27}}),component:b("React").createElement(b("LazyComponent.react"),{isFiltered:a,onDeleteClick:this.$1,onReplyClick:this.$2})})};e.exports=a}),null);
__d("FantaTabComposer.react",["ChatTabComposerContainer.react","MessengerState.bs","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$2=function(a){this.$1=a}.bind(this),b}a.prototype.componentDidMount=function(){var a=this.props.participants;this.props.isFocused&&a.length>0&&!this.props.isEmptyLocalThread&&this.focusInput()};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!this.props.isEmptyLocalThread&&this.focusInput()};a.prototype.shouldComponentUpdate=function(a){var b=this.props;return!b.composer.equals(a.composer)||b.disableInput!==a.disableInput||!b.fileUploader&&!!a.fileUploader||b.fileUploader&&!b.fileUploader.equals(a.fileUploader)||b.isEmptyLocalThread!==a.isEmptyLocalThread||b.isFocused!==a.isFocused||b.isNewEmptyLocalThread!==a.isNewEmptyLocalThread||b.threadID!==a.threadID||b.viewer!==a.viewer||b.forGameChat!==a.forGameChat||b.participants.length!==a.participants.length};a.prototype.render=function(){var a=this.props,c=a.participants,d=a.threadID,e=a.viewer,f=a.isFocused;return c.length===0?b("React").createElement("div",null):b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:e},function(a){return b("React").createElement(b("ChatTabComposerContainer.react"),{composer:this.props.composer,disableInput:this.props.disableInput,fileUploader:this.props.fileUploader,isFocused:f,onEscape:this.props.onEscape,onSelectSticker:this.props.onSelectSticker,onSendHotLike:this.props.onSendHotLike,onSendPhoto:this.props.onSendPhoto,onTab:this.props.onTab,onSendMessage:this.props.onSendMessage,isNewEmptyLocalThread:this.props.isNewEmptyLocalThread,ref:this.$2,thread:b("MessengerState.bs").threads(a)[d],threadID:d,viewer:e,forGameChat:this.props.forGameChat})}.bind(this))};a.prototype.focusInput=function(){this.$1&&this.$1.focusInput()};a.prototype.hasEmptyInput=function(){var a=this.$1;return!a?!1:a.hasEmptyInput()};e.exports=a}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",{className:"_w_z"},b("React").createElement(b("XUISpinner.react"),null))};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","CurrentUser","FantaTabSheetPlaceholder.react","JSResource","LazyComponent.react","MercuryIDs","MercurySheetPolicy","MessengerParticipants.bs","MessengerState.bs","Placeholder.react","React","ReasonBootloadOnRender.react","ReasonResource","emptyFunction","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react")),j=b("lazyLoadComponent")(b("JSResource")("ChatGroupNameComposerTabSheet.react").__setRef("FantaTabSheet.react"));c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};a.prototype.maybeRenderMontage=function(){var a=this.props,c=a.threadID;a=a.tabContent;return a.isMontageOpen?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:"Montage",threadID:c,onResize:b("emptyFunction")}):null};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.tabContent;a=a.composerComponent;var e=d.loggingID,f=d.openSheet,g=d.privacyController,h=d.thread,k=d.typeahead,l;switch(f){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:f,thread:h,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:var m=b("MercuryIDs").getUserIDFromThreadID(c);if(m){m=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(m));m&&g&&(l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),gender:m.gender,key:f,privacyActionController:g,shortName:m.short_name}))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,privacyController:g,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,threadID:c});break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:f,loggingID:e,thread:h,threadID:c,typeahead:k,composerComponent:a,tabContent:d});break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement(b("FantaTabSheetPlaceholder.react"),null),key:f,loggingID:e,thread:h,threadID:c,typeahead:k});break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,participants:d.participants,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,thread:h,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f});break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f});break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f}));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f});break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,threadID:c});break;case b("MercurySheetPolicy").sheets.ChatAppointmentBanner:if(h){m=b("MessengerState.bs").getCurrentlyLoadedMessages(b("CurrentUser").getID(),c);l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatAppointmentBannerRoot.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),pageID:h.other_user_fbid,userID:b("CurrentUser").getID(),count:100,messageList:m,appointmentBannerDidUpdate:b("emptyFunction"),key:f,threadID:c})}break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(h){g=h.rtc_call_data;e=h.thread_fbid;l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,rtcCallData:g,threadFBID:e})}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(h){k=h.associated_object;l=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").createElement("div",null),key:f,associatedObject:k})}break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:h&&(l=b("React").createElement(b("ReasonBootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{thread:h}),loader:b("ReasonResource")(b("JSResource")("MentorshipProgramSheet.bs").__setRef("FantaTabSheet.react")),placeholder:b("React").createElement("div",null)}));break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:h&&h.work_associated_group&&(l=b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null),key:f},b("React").createElement(i,{group:h.work_associated_group,imageURL:h.image_src,name:h.name})));break;case b("MercurySheetPolicy").sheets.ChatGroupNameComposerTabSheet:l=b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null),key:f},b("React").createElement(j,{threadID:c,composerComponent:a}));break}d=this.maybeRenderMontage();if(l)return b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},l));else if(d)return d;return null};function a(){h.apply(this,arguments)}a.propTypes={threadID:c.string.isRequired,tabContent:c.object.isRequired};e.exports=a}),null);
__d("WorkChatUtils",["CurrentUser","MessengerState.bs","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={shouldForceGroupName:function(a){if(!b("CurrentUser").isWorkUser()||!b("gkx")("679515")||!a)return!1;var c=a.thread;a=a.typeahead;if(!c)return!0;var d=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),c.thread_id);a=a?a.getSelectedParticipantIDs().length:0;return d&&(c.participants.length>=3||a>=2)},shouldGiveGroupNameOption:function(a){if(!b("CurrentUser").isWorkUser()||!b("gkx")("679515")||!a)return!1;a=a.thread;if(!a)return!1;var c=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a.thread_id);return!c&&a.participants.length>=3}};e.exports=a}),null);
__d("FantaTabMain.react",["cssVar","cx","fbt","invariant","Bootloader","BootloadOnRender.react","ChatBehavior","ChatConfig","ChatTabBlinking","CurrentUser","DragDropTarget","Event","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FantaWebDriverIDs","FBIDCheck","JSResource","Keys","LazyComponent.react","MercuryIDs","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerCustomColorUtils.bs","MessengerGroupCreationEntryPoint","MessengerParticipants.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerState.bs","MNCommercePageSetting","Parent","Placeholder.react","React","ReactDOM","ShortProfiles","SimpleXUIDialog","TrackingNodes","WorkBotLandingPageHelper","WorkChatAvailabilityStatusLoader","WorkChatUtils","WorkFileUploadsGating","XUISpinner.react","convertMIGColorToFIGColor","getPageIDFromThreadID","getVendorPrefixedEventName","gkx","immutable","joinClasses","lazyLoadComponent","performanceAbsoluteNow","promiseDone","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerPresenceProvider.bs").jsComponent,m=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,n=b("lazyLoadComponent")(b("JSResource")("FantaPageComposerNullState.react").__setRef("FantaTabMain.react")),o=/\D+/g,p=b("ChatConfig").get("compact.content.m4");c=b("React").PropTypes;var q=b("lazyLoadComponent")(b("JSResource")("WorkChatNewChatReact").__setRef("FantaTabMain.react")),r=function(a){a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);return a&&b("gkx")("678573")&&b("WorkChatAvailabilityStatusLoader").isLoaded()?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getIsDoNotDisturb(a):!1};function s(a,c,d){__p&&__p();var e={};if(b("ChatConfig").getBool("dark_test_gradients")){c?e.backgroundImage="linear-gradient("+c+", "+c+")":e.backgroundImage="linear-gradient("+d+", "+d+")";return e}if(a){c?e.backgroundColor=c:e.backgroundColor=d;if(a.length&&a.length>0)if(a.length===1)e.backgroundColor=a[0];else if(a.length===2)e.backgroundImage="linear-gradient("+a[0]+", "+a[1]+")";else{var f=a.length,g=100/(f-1);f=a.map(function(a,b){return a+" "+b*g+"%"}).join(", ");e.backgroundImage="linear-gradient("+f+")"}}else c?e.backgroundColor=c:e.backgroundColor=d;return e}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$10=null,this.state={closing:!1,disableInput:!1,isDoNotDisturb:r(this.props)},this.$23=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);if(!a||!c){if(this.$9){clearTimeout(this.$9);this.$9=null;return}b("FantaTabActions").hoveredTab(this.props.tab.id)}}.bind(this),this.$24=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(this.$9&&clearTimeout(this.$9),this.$9=setTimeout(function(){this.$9=null,b("FantaTabActions").unhoveredTab(this.props.tab.id)}.bind(this),500))}.bind(this),this.$21=function(event){var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id);(!a||!c)&&(!event.relatedTarget||!event.target?this.$7=setTimeout(function(){this.$7=null,this.$25(this.props.tab.id)}.bind(this),100):this.$25(this.props.tab.id))}.bind(this),this.$22=function(event){if(this.$7){clearTimeout(this.$7);this.$7=null;return}var a=!!b("Parent").byClass(event.target,"fantaTabMain-"+this.props.tab.id),c=!!b("Parent").byClass(event.relatedTarget,"fantaTabMain-"+this.props.tab.id),d=event.target;d&&d.classList&&(d.classList.contains("_3olu")||d.classList.contains("_61td")||d.classList.contains("_40qq")||d.classList.contains("_4zs3"))||(!a||!c)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),this.$27=function(a){b("FantaMessageActions").linkPreview(this.props.tab.id,a)}.bind(this),this.$26=function(a){var c=this.props.tabContent;c=c||{};c=c.composer;var d=this.props.tab.id;c&&b("FantaMessageActions").prepareFilesForSend(d,a,c)}.bind(this),this.$18=function(a){a.keyCode===b("Keys").ESC&&(this.$2(!0),a.preventDefault(),a.stopPropagation())}.bind(this),this.$19=function(a){a.keyCode===b("Keys").TAB&&this.$20(a)}.bind(this),this.$20=function(event){var a=this.props.raisedTabCount;a>1&&(event.preventDefault(),this.$3(event.ctrlKey,event.shiftKey))}.bind(this),this.$2=function(a){var c=this.props,d=c.tab;c=c.tabContent;!c||c&&c.composer.text.length===0&&!this.$28()?(this.$29(),a?b("FantaTabActions").closeAndTabNext(d.id):b("FantaTabActions").closeTab(d.id)):this.$30();this.$31()}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.$2=b("throttle")(this.$2,100),this.$3=b("throttle")(this.$3,100)};a.prototype.componentDidMount=function(){var a=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerPoint(c.FIRSTCHATTABOPEN_WWW,"mount_fanta_main",JSON.stringify({messageSize:this.props.messages?this.props.messages.size:0,hasThread:!!this.props.thread}),0,a)}.bind(this),"FantaTabMain.react");this.$11();this.$12();this.$13(this.props.tab.id);this.$14();this.$15();this.$16()};a.prototype.componentDidUpdate=function(a){this.$12();if(b("gkx")("678573")&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&a.thread!==this.props.thread){var c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);var d=b("WorkChatAvailabilityStatusLoader").getActionsEnforce();a&&d.unsubscribeUser(a,this);c&&(d.subscribeUser(c,this),b("WorkChatAvailabilityStatusLoader").getStoreEnforce().fetchUsers([c]))}};a.prototype.componentWillUnmount=function(){this.$4&&this.$4.disable();this.$10&&this.$10.remove();var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("WorkChatAvailabilityStatusLoader").getActionsEnforce().unsubscribeUser(a,this)};a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.messages.equals(a.messages)||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.fbid!==a.fbid||c.blockedIDs!==a.blockedIDs||c.readReceipts!==a.readReceipts||c.ignoredIds!==a.ignoredIds||d.closing!==b.closing||d.disableInput!==b.disableInput||d.isDoNotDisturb!==b.isDoNotDisturb};a.prototype.$12=function(){__p&&__p();if(b("ChatConfig").get("chat_tab_m4_header"))return;var a=this.props,c=a.tab;a=a.thread;c=c.id;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==void 0){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return this.props.isFocused}.bind(this),isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.$17=function(){var a=this.props.tabContent&&this.props.tabContent.nullStateCTA;if(!a)return!1;if(this.props.thread&&this.props.thread.message_count===0)return!0;return b("CurrentUser").isWorkUser()&&b("gkx")("678590")?m(this.props.messages):!1};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.blockedIDs,d=a.forGameChat,e=a.hasFetchedAll,f=a.isFocused,g=a.isHovered,h=a.isLastGroupTab,k=a.messages,m=a.onLoadMoreMessages,o=a.onSelectSticker,r=a.onSendHotLike,t=a.onSendMessage,u=a.onSendPhoto,v=a.readReceipts,w=a.showContextBanner,x=a.tab,y=a.tabContent,z=a.thread,A=x.id,B=b("CurrentUser").getID();a=y&&y.composer.fileUploader;y&&y.composer.sharePreview;x=z&&(b("ChatConfig").getBool("dark_test_gradients")?b("convertMIGColorToFIGColor")(z.solid_color):b("convertMIGColorToFIGColor")(z.header_color));var C=y&&y.nullStateCTA,D=this.$17(),E=z&&z.participants||[],F=y&&y.threadPreviewRecipients||b("immutable").List();E=E.length>0?E:F.toArray();F=(F=this.props)!=null?(F=F.thread)!=null?F.other_user_fbid:F:F;F=F?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(F)):null;var G=b("getPageIDFromThreadID")(this.props.tab.id),H=b("MessengerState.bs").isEmptyLocalThread(B,A),I=b("MessengerState.bs").isNewEmptyLocalThread(B,A),J=y&&b("WorkChatUtils").shouldForceGroupName(y)&&!y.newGroupChatName;D=z&&b("MessageRequestUtils").isMessageRequest(z)?b("React").createElement(b("FantaPendingActions.react"),{thread:z,threadID:A}):D&&C?b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",{className:"_2xh0"},b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("XUISpinner.react"),{size:"small"})))},b("React").createElement(n,{threadID:A,nullStateCTA:C,pageName:F&&F.short_name})):J?b("React").createElement("div",{className:"fbNubFlyoutComposerDisabledWithoutName"},i._("Asigna un nombre a tu chat para empezar a enviar mensajes.")):y?b("React").createElement("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":""),"data-testid":b("FantaWebDriverIDs").COMPOSER_ROOT},b("React").createElement(b("FantaTabComposer.react"),{composer:y.composer,disableInput:this.state.disableInput,fileUploader:a,forGameChat:d,isEmptyLocalThread:H,isFocused:f&&!b("WorkChatUtils").shouldForceGroupName(y),isNewEmptyLocalThread:I,onEscape:this.$18,onKeyDown:this.$18,onKeyPress:this.$19,onSelectSticker:o,onSendHotLike:r,onSendMessage:t,onSendPhoto:u,onTab:this.$20,participants:E,ref:"composer",threadID:A,viewer:B})):null;var K;C=b("MercuryIDs").getUserIDFromThreadID(A);C&&(K=b("ShortProfiles").getNow(C));var L=K&&K.is_messenger_only;!y&&j(0,6156);F=b("React").createElement(b("FantaTabSheet.react"),{tabContent:y,threadID:A,composerComponent:this.refs.composer});a=(J=z)!=null?J.marketplace_thread_data:J;o=(I=a)!=null?I.for_sale_item:I;t=(r=a)!=null?r.buyer_fbid:r;E=(u=a)!=null?u.seller_fbid:u;var M;o&&t&&E&&(M=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{buyerID:t,forSaleItem:o,renderLocation:"chat",sellerID:E})}));var N=z&&b("ChatConfig").getBool("chat_tab_has_gradients")&&(b("ChatConfig").getBool("dark_test_gradients")||z.gradient_colors&&z.gradient_colors.length>1);C=z&&b("ChatConfig").getBool("chat_tab_has_gradients")?s(z.gradient_colors,z.solid_color,b("MessengerCustomColorUtils.bs").defaultColor()):void 0;J=y&&y.isMultiCompany;I=!!y&&!!y.openSheet;var O=y&&y.joinableInterstitialData?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{data:y.joinableInterstitialData,isActive:f,onClose:this.$2})}):b("React").createElement("div",{className:(I?"_6vu4":"")+(p?" _6vu5":"")+(b("ChatConfig").get("chat_tab_m4_header")?" _6z9d":"")+" fbNubFlyoutInner _6vu1"},b("React").createElement(b("FantaChatHeaderContainer.react"),{blockedIDs:c,composer:y.composer,customColor:x,highlightNewMessage:y&&y.highlightNewMessage,isDoNotDisturb:this.state.isDoNotDisturb,isFocused:f,isLastGroupTab:h,isMultiCompany:J,isNewMessageTab:y&&y.isNewMessageTab,membershipParticipants:y.membershipParticipants,onClose:this.$2,pageIndicatorDescription:y.pageIndicatorDescription,participants:y.participants,thread:z,threadHref:y&&y.threadHref,threadID:A,uri:y.uri,viewer:B}),b("gkx")("678583")&&H?b("React").createElement("div",{className:"_1ia _2sz2 fbNubFlyoutBody",style:C},b("React").createElement(b("Placeholder.react"),{fallback:b("React").createElement("div",null)},b("React").createElement(q,{viewer:B,onSelect:function(a,c){b("FantaTabActions").openTab(a),this.$2()}.bind(this),hideClearButton:!0,placeholder:i._("Busca compa\u00f1eros de trabajo"),entryPoint:b("MessengerGroupCreationEntryPoint").GCF_CHAT_SIDEBAR}))):b("React").createElement("div",{className:"_1ia _2sz2",ref:function(a){this.$5=a}.bind(this),style:C},F,b("React").createElement(b("FantaConversationScroller.react"),{forGameChat:d,hasFetchedAll:e,isFocused:f,isEmptyLocalThread:H,messages:k,onFocus:function(){return this.refs.composer&&this.refs.composer.focusInput()}.bind(this),onLoadMoreMessages:m,readReceipts:v,showContextBanner:w,thread:z,threadID:A,viewer:B,jumpToMessage:y.jumpToMessage}),b("React").createElement("div",{className:"_2hc2"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{isVisible:!0,otherUserID:b("MercuryIDs").getUserIDFromThreadID(A),threadID:A})})),b("React").createElement("div",{className:"_4g6x"},b("React").createElement("div",{className:"_4g6y"},b("React").createElement("div",{className:"_4g6z _4g71"},i._("Coloca los enlaces o archivos aqu\u00ed")),b("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},i._("Coloca los archivos aqu\u00ed")),b("React").createElement("div",{className:"_4g6z _4g6- _4g70"},i._("Coloca el enlace aqu\u00ed")))),G?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{originalElement:D,pageID:G,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(r=this.props)!=null?(r=r.thread)!=null?r.thread_fbid:r:r,threadID:A}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react"),placeholder:b("React").createElement("div",null)}):D,b("React").createElement(b("FantaDragAndDrop.react"),{composer:y.composer,threadID:A}),M));return b("React").createElement(l,{subscribeToIDs:[B]},function(a){return b("React").createElement("div",{className:b("joinClasses")((this.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(z&&!L&&b("MessengerParticipantUtils.bs").findIntersection(B,a,z).length>0&&!this.state.isDoNotDisturb?" _4-0b":"")+(this.state.isDoNotDisturb?" _1oh2":"")+" fbNub _50-v"+(f?" focusedTab":"")+(g?" hoveredTab":"")+" opened _27_3"+(b("ChatConfig").get("single_line_composer")?" _68h9":"")+((b("gkx")("692188")?N:!1)?" _3hx-":"")+((b("gkx")("692188")?!N:!1)?" _3fr9":""),"fantaTabMain-"+A),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:this.$21,onFocus:this.$22,onKeyDown:this.$18,onKeyPress:this.$19,onMouseEnter:this.$23,onMouseLeave:this.$24,ref:"root"},b("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary"},b("React").createElement("div",{className:"fbNubFlyoutOuter"},O)))}.bind(this))};a.prototype.$15=function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("gkx")("678573")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){var c=b.store;b._;this.$10=c.addListener(function(){this.setState({isDoNotDisturb:c.getIsDoNotDisturb(a)})}.bind(this))}.bind(this))};a.prototype.$25=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$9&&(clearTimeout(this.$9),this.$9=null),setTimeout(function(){b("FantaTabActions").unhoveredTab(a)})};a.prototype.$16=function(){var a=b("getPageIDFromThreadID")(this.props.tab.id);a&&b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(a){this.setState({disableInput:a})}.bind(this),function(){this.setState({disableInput:!1})}.bind(this),b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};a.prototype.$11=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$4){var a=b("ReactDOM").findDOMNode(this.$5);if(a){a=new(b("DragDropTarget"))(a);this.$4=a;a.setOnFilesDropCallback(this.$26);a.setOnURLDropCallback(this.$27);a.enable()}}};a.prototype.$3=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};a.prototype.$29=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMain.react")};a.prototype.$28=function(){return this.$32()||this.$33()};a.prototype.$32=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};a.prototype.$33=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};a.prototype.$34=function(a){var c=this.props.tab,d=b("ReactDOM").findDOMNode(this.refs.root);this.$1=setTimeout(function(){return a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id)},1.2*Number("200ms".replace(o,"")));if(d)var e=b("Event").listen(d,b("getVendorPrefixedEventName")("animationend"),function(d){d.animationName==="closeChatTab"&&(a?b("FantaTabActions").closeAndTabNext(c.id):b("FantaTabActions").closeTab(c.id),clearTimeout(this.$1),e.remove())}.bind(this));this.$31();this.setState({closing:!0})};a.prototype.$30=function(a){var c=this.props.tab,d=c.id;b("FantaTabActions").blurTab(d);c=i._("\u00bfSeguro que quieres cerrar esta ventana del chat?");var e=i._("No has enviado tu mensaje.");b("SimpleXUIDialog").showConfirm(c,e,function(c){c?(this.$29(),a?b("FantaTabActions").closeAndTabNext(d):b("FantaTabActions").closeTab(d)):b("FantaTabActions").focusTab(d)}.bind(this),{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.prototype.$14=function(){this.$8=Math.floor(Date.now()/1e3)};a.prototype.$31=function(){var a=this.props,c=a.thread,d=a.tab,e=c?c.other_user_fbid:null,f=Math.floor(Date.now()/1e3),g=this.$8;c&&e&&!b("FBIDCheck").isUser_deprecated(e)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(a,b,h,i,j){a.log(e,b.CLICK,h.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint}),i.notify(j.MESSAGES_FANTA_TAB_CLOSE,e,{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint})},"FantaTabMain.react")};a.prototype.$13=function(a){__p&&__p();if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions"],function(c,d,e,f){__p&&__p();var g=f.get();b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(f){var h=this.props,i=h.fbid,j=h.ignoredIds;b("MessengerState.bs").compute(i,function(h){h=h.blocked_ids;e.isPresentInGroupThread(i,h,f)?c.show(e.participantsInGroupThread(i,h,f),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a)||g.leaveGroup(a)}):b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(i,j,f)&&f.folder==="inbox"&&d.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(i,j,f),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){g.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})}.bind(this))}.bind(this),"FantaTabMain.react")};a.propTypes={hasFetchedAll:c.bool.isRequired,isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,messages:c.object,onLoadMoreMessages:c.func.isRequired,onSelectSticker:c.func.isRequired,onSendHotLike:c.func.isRequired,onSendMessage:c.func.isRequired,onSendPhoto:c.func.isRequired,raisedTabCount:c.number,showContextBanner:c.bool,tab:c.object.isRequired,tabContent:c.object,thread:c.object,forGameChat:c.bool.isRequired};e.exports=a}),null);
__d("FantaTabMainLoader.react",["Bootloader","FantaAppStore","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","MessengerState.bs","React","TimeSlice","emptyFunction","immutable","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();a=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;if(a){var c=a.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(c)})}h=b("emptyFunction")};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=this.props.tab;b("FantaGetMessageActions").fetchMoreMessages(a.id)}.bind(this),this.$2=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendSticker(d.id,a,c)}.bind(this),this.$3=function(a,c,d,e){var f=this.props.tab;b("FantaMessageActions").sendHotLike(f.id,a,c,d,e)}.bind(this),this.$4=function(a,c,d){var e=this.props.tab;b("FantaMessageActions").sendMessage(e.id,a,c,d)}.bind(this),this.$5=function(a,c){var d=this.props.tab;b("FantaMessageActions").sendPhoto(d.id,a,c)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};a.prototype.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.render=function(){var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.raisedTabCount,h=a.tab,i=a.tabContent;a=a.forGameChat;var j=i.hasFetchedAll,k=i.showContextBanner,l=i.thread,m=i.threadPreviewID,n=i.messages;m=m?h.id+"-"+m:h.id;if(!i)return b("React").createElement("div",{key:"noContent-"+m});n||(n=b("immutable").List());return b("React").createElement(b("FantaTabMain.react"),{blockedIDs:b("MessengerState.bs").blockedIds(f),fbid:b("MessengerState.bs").fbid(f),forGameChat:a,hasFetchedAll:j,ignoredIds:b("MessengerState.bs").ignoredIds(f),isFocused:c,isHovered:d,isLastGroupTab:e,key:m,messages:n,onLoadMoreMessages:this.$1,onSelectSticker:this.$2,onSendHotLike:this.$3,onSendMessage:this.$4,onSendPhoto:this.$5,raisedTabCount:g,readReceipts:b("MessengerState.bs").readReceiptsPerThread(f),showContextBanner:k,tab:h,tabContent:i,thread:l})};a.propTypes={isFocused:c.bool.isRequired,isHovered:c.bool.isRequired,isLastTabOfType:c.bool.isRequired,messengerState:c.array,raisedTabCount:c.number,tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:b("bs_js_null_undefined").fromOption(c),count:b("bs_js_null_undefined").fromOption(d),maxcount:b("bs_js_null_undefined").fromOption(e),type:b("bs_js_null_undefined").fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("FantaM4HeaderMinimized.bs",["cx","fbt","cssVar","bs_block","bs_curry","React","bs_belt_Set","bs_belt_Option","ReasonReact.bs","bs_js_primitive","FantaM4Header.bs","ParticipantId.bs","XUIBadgeReact.bs","ChatThreadName.bs","ChatDetailStack.bs","FantaCloseButton.bs","FantaProfilePresence.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReasonReact.bs").reducerComponentWithRetainedProps("FantaM4HeaderMinimized");function k(a,c,d,e,f,g,i,k,l){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],function(a){var c=a[1];if(!a[0][2][0]&&c[2][0]){b("bs_curry")._1(c[3],0);setTimeout(function(){return b("bs_curry")._1(c[3],1)},1e3);return 0}else return 0},j[6],j[7],function(j){__p&&__p();var l=b("FantaM4Header.bs").getProfileImages(f,e,g),m=f!==void 0?b("bs_js_primitive").valFromOption(f).unread_count:0,n=b("FantaM4Header.bs").getTooltip(f);if(f!==void 0){var o=b("bs_js_primitive").valFromOption(f).header_color;o=o==null?"#0084ff":o}else o="#0084ff";var p=a&&j[1][0];p=p&&o!==void 0?[o,"_69pt _2mgn _6d6l"]:["","_69pt _6d6l"];var q=p[0];if(f!==void 0){o=b("bs_js_primitive").valFromOption(f);o=[o.thread_fbid,o.is_canonical]}else o=[null,!0];var r=o[1],s=o[0];o=b("bs_belt_Option").map(f,function(a){return b("bs_belt_Set").fromArray(a.participants,[b("ParticipantId.bs").cmp])});o=i?null:b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerPresenceProvider.bs").make(o),void 0,void 0,function(a){return b("ReasonReact.bs").element(void 0,void 0,b("FantaProfilePresence.bs").make(l,20,f!==void 0?b("MessengerParticipantUtils.bs").areParticipantsInThread(g,a,b("bs_js_primitive").valFromOption(f))&&!k:!1,!0,"",n,q,!1,r,s==null?void 0:b("bs_js_primitive").some(s),[]))}));var t=i?h._("Nuevo mensaje"):b("ReasonReact.bs").element(void 0,void 0,b("ChatThreadName.bs").make(f,"",n,g,"_2mgq",i,[]));j=m>0&&!(a&&j[1][0]);return b("React").createElement("div",{className:p[1],style:{backgroundColor:q},onClick:d},b("React").createElement("div",{className:"_66n2"},o,b("React").createElement("div",{className:"_66n3"},b("ReasonReact.bs").element(void 0,void 0,b("ChatDetailStack.bs").make(t,null,[])),j?b("ReasonReact.bs").element(void 0,void 0,b("XUIBadgeReact.bs").make(0,"_429n",m,99,[])):null)),b("ReasonReact.bs").element(void 0,void 0,b("FantaCloseButton.bs").make(c,!1,[])))},function(){return[!1]},[a],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.highlightNewMessage,a.onClose,a.onHeaderToggle,b("bs_js_primitive").nullable_to_opt(a.participants),b("bs_js_primitive").nullable_to_opt(a.thread),a.viewer,a.isNewMessageTab,a.isMessengerOnlyUser,[])});c=20;d=1e3;f.component=j;f.small_profile_image_size=c;f.blink_threshold_ms=d;f.make=k;f.jsComponent=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","Bootloader","ChatBehavior","ChatConfig","ChatTabBlinking","ChatTabHeaderContainer.react","CurrentUser","FantaAvailableStatus","FantaM4HeaderMinimized.bs","FantaTabActions","MercuryIDs","React","ReactDOM","ShortProfiles","SimpleXUIDialog","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("FantaM4HeaderMinimized.bs").jsComponent,k=b("ChatConfig").get("chat_tab_m4_header");c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={closing:!1},this.$5=function(event){var a=this.props,c=a.tab;a=a.tabContent;!a||a&&a.composer.text.length===0&&!this.$7()?(this.$8(),b("FantaTabActions").closeTab(c.id)):this.$9()}.bind(this),this.$6=function(event){var a=event.target;a&&a.classList&&!a.classList.contains("button")&&(event.stopPropagation(),b("FantaTabActions").unminimizeTab(this.props.tab.id),b("FantaTabActions").focusTab(this.props.tab.id))}.bind(this),c}a.prototype.componentDidMount=function(){this.$3()};a.prototype.componentDidUpdate=function(){this.$3()};a.prototype.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};a.prototype.$3=function(){__p&&__p();if(k)return;var a=this.props,c=a.tab;a=a.tabContent;c=c.id;if(!a)return;a=a.thread;if(!a)return;var d=this.refs.root&&b("ReactDOM").findDOMNode(this.refs.root);if(!d)return;a=a.unread_count;if(a!==void 0){a=!!a&&(!b("ChatBehavior").showsTabUnreadUI||b("ChatBehavior").showsTabUnreadUI());a?b("ChatTabBlinking").blinkTab(c,{getTabElem:function(){return d},isFocused:function(){return!1},isHovered:function(){return!1}}):b("ChatTabBlinking").unblinkTab(c)}};a.prototype.$4=function(){var a=this.props.tabContent,c=a&&a.thread,d=a&&a.thread&&a.thread.header_color,e=d?{color:d}:null,f=b("CurrentUser").getID();if(k){var g=a?b("MercuryIDs").getUserIDFromThreadID(a.id):null;g=g?b("ShortProfiles").getNow(g):null;g=g&&g.is_messenger_only;return b("React").createElement("div",{className:"clearfix titlebar"},b("React").createElement(j,{highlightNewMessage:a&&a.highlightNewMessage,isNewMessageTab:a&&a.isNewMessageTab,onClose:this.$5,onHeaderToggle:this.$6,isMessengerOnlyUser:g,participants:a&&a.participants,thread:c,viewer:f}))}return b("React").createElement("div",{className:(this.state.closing?"_2suj":"")+" clearfix fbNubFlyoutTitlebar titlebar"+(d?" _1m34":""),style:e},b("React").createElement(b("ChatTabHeaderContainer.react"),{attachmentsShelf:document.createElement("div"),hasBlockedMessages:!1,href:a&&a.threadHref,isActive:!1,isNewMessageTab:!!(a&&a.isNewMessageTab),isRaised:!1,isTyping:!1,membershipParticipants:a&&a.membershipParticipants,onClick:this.$6,onCloseClick:this.$5,onRTCNuxCloseButtonClick:b("emptyFunction"),participants:a&&a.participants,pageUnsubscribeStatus:!1,rtcNuxShown:!1,sheetController:{},showMessengerReportNux:!1,showAddFriend:b("emptyFunction"),thread:c,threadID:this.props.tab.id,viewer:f}))};a.prototype.render=function(){var a=this.props,c=a.tab;a=a.tabContent;c=c.id;a=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").createElement("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(a?" _4-0b":"")+" _27_3",ref:"root"},this.$4())};a.prototype.$8=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMinimized.react")};a.prototype.$7=function(){return this.$10()||this.$11()};a.prototype.$10=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};a.prototype.$11=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};a.prototype.$9=function(){var a=this.props.tab,c=h._("\u00bfSeguro que quieres cerrar esta ventana del chat?");b("FantaTabActions").blurTab(a.id);var d=h._("No has enviado tu mensaje.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeTab(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};a.propTypes={tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","CurrentUser","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessengerState.bs","PresenceState","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerState.bs").jsComponent,i=function(a){b("Bootloader").loadModules(["MessengerReasonDialogContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"FantaMercuryTabsWithMain.react")};g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("FantaAppStore")]};a.calculateState=function(){return{tabGroup:b("FantaAppStore").getState().tabGroup,tabContents:b("FantaAppStore").getState().mercury.tabContents}};a.prototype.componentDidMount=function(){this.props.loadDataOnMount&&b("FantaTabActions").loadFromData(b("FantaCookieUtil").convertCookieData(b("PresenceState").get()))};a.prototype.render=function(){return b("React").createElement(h,{fbid:b("CurrentUser").getID()},function(a){return[b("React").createElement(b("FantaTabGroup.react"),{key:"tabgroup",messengerState:a,MainComponent:b("FantaTabMainLoader.react"),MinimizedComponent:b("FantaTabMinimized.react"),OverflowComponent:b("FantaMercuryTabOverflowBootloader.react"),tabGroup:this.state.tabGroup,tabContents:this.state.tabContents,isLastOfTypeChecker:this.$1}),b("React").createElement(b("LoadOnRender.react"),{key:"dialog",component:b("React").createElement(b("LazyComponent.react"),null),loader:i,placeholder:b("React").createElement("span",null)})]}.bind(this))};a.prototype.$1=function(a){return b("MercuryIDs").isGroupChat(a.id)};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("FantaTabsReactApp",["ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","UserActivity","gkx","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=500,i;g=babelHelpers.inherits(a,b("FantaTabsAppBase"));g&&g.prototype;a.prototype.initializeFantaData=function(a){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,g,j){__p&&__p();f.loadFromData(d.convertCookieData(j.get(),null,a)),j.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),j.registerStateStorer(function(a){if(!b("UserActivity").isOnTab()&&!b("UserActivity").isActive(h)&&!b("gkx")("678595"))return a;var e=c.getState().tabGroup;if(!i||i&&!i.equals(e)){i=e;return d.createCookieData(e,a)}else return a}),g.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};a.prototype.initializeFantaUI=function(){__p&&__p();d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(a,c,d,e,f,g,h){__p&&__p();g.init();h.init();b("ReactDOM").render(this.getViewComponent(),this.tabsElem);c.onMessagesReceived(function(a,c){b("setImmediate")(function(){d.receivedNewMessage(a,c)})});f.init(this.tabsElem);b("ChatPerfInstrumentation").logInitUI();e=a.getState().tabGroup.tabs;e.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};a.prototype.getViewComponent=function(){return b("React").createElement(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};function a(){g.apply(this,arguments)}e.exports=new a()}),null);
__d("ChatInitialDataTransformer.bs",["bs_array","bs_js_dict","bs_caml_array","bs_caml_format","bs_js_primitive","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];b("bs_array").iter(function(a){__p&&__p();if(a==null)return 0;else{var k=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),l=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a),m=b("MessengerServerPayloadTransformer.bs").transformThread(c,a,d);e.push(m);var n=b("MessengerServerPayloadTransformer.bs").transformMessages(c,a,d);n!==void 0&&b("bs_array").iter(function(a){f.push(a);return 0},n);n=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);n!==void 0&&(b("bs_js_primitive").valFromOption(n).has_previous_page||(k==null?l==null||j.push({type:"thread",fbid:l}):j.push({type:"thread",fbid:k})));n=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(n!==void 0){n=b("bs_js_primitive").valFromOption(n);k==null||(g[k]=n);l==null||(g[l]=n)}k=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(k.length>=1){l=b("bs_caml_array").caml_array_get(k,0);if(m.is_canonical){n=m.other_user_fbid;n==null||h.push({other_user_fbid:n,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}else{k=m.thread_fbid;k==null||h.push({other_user_fbid:null,thread_fbid:k,time:b("bs_caml_format").caml_float_of_string(l.timestamp_precise)})}}n=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);return b("bs_array").iter(function(a){i[a.fbid]=a;return 0},n)}},a.threads);return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment;g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h)}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MercuryAudienceRestrictedTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.minQueryLength=2,g.constructor.call(this,a),this.$MercuryAudienceRestrictedTypeaheadDataSource1=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource2=!1,this.$MercuryAudienceRestrictedTypeaheadDataSource3={},this.$MercuryAudienceRestrictedTypeaheadDataSource4=!0,this.queryCache={},this.localCache={},this.queryIDs={}}a.prototype.dirty=function(){"use strict";return this};a.prototype.buildData=function(a){"use strict";return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource3[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c&&(c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C)});return a};a.prototype.isBootstrapped=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource1};a.prototype.isBootstrapping=function(){"use strict";return this.$MercuryAudienceRestrictedTypeaheadDataSource2};a.prototype.processEntries=function(a,c){"use strict";a=a&&a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){a=this.getEntry(a);b=this.getEntry(b);return a&&a.index&&b&&b.index?a.index-b.index:0}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setQueryData=function(a,b){"use strict";return g.setQueryData.call(this,a)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$MercuryAudienceRestrictedTypeaheadDataSource4=a};e.exports=a}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null,REMOVE_SUGGESTIONS_BY_TYPE:null});var g={Types:a,saveAllSuggestions:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.SAVE_ALL_SUGGESTIONS,threadID:a,suggestions:c})},removeAllSuggestions:function(a){a&&b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_ALL_SUGGESTIONS,threadID:a})},removeSuggestionsByType:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_SUGGESTIONS_BY_TYPE,threadID:a,typeID:c})}};e.exports=g}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}e.exports={parseCustomizations:a}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return void 0;var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MessageThreadReadStateEffect",[],(function(a,b,c,d,e,f){"use strict";var g={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};a=function(a,b){var c=b.messageMetadata.skipBumpThread;a=a!==b.messageMetadata.actorFbId?g.MARK_UNREAD:g.KEEP_AS_IS;c&&(a=g.KEEP_AS_IS);return b.messageMetadata.threadReadStateEffect?b.messageMetadata.threadReadStateEffect:a};e.exports={MessageThreadReadStateEffectType:g,extractThreadStateEffectFromDelta:a}}),null);
__d("MercurySyncNewMessageTransformer",["Bootloader","FBIDCheck","IrisProtocolMessageLifetime","MercuryActionType","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MessageThreadReadStateEffect","MessagingTag","MessengerRealtimeAttachmentTransformer.bs","PageCommItemStatus","PagesCommsInboxTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessageThreadReadStateEffect").MessageThreadReadStateEffectType,h=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta,i=function(a){var b={};try{b=JSON.parse(a)}catch(a){}return b};function a(a,c){__p&&__p();var d=parseInt(c.messageMetadata.timestamp,10),e=c.messageMetadata.skipBumpThread,f=h(a,c),j=f===g.MARK_UNREAD&&a!==c.messageMetadata.actorFbId.toString(),k=c.messageMetadata.messageId,l=[];c.attachments&&(l=c.attachments.map(function(c){__p&&__p();var d;c.mercury?d=c.mercury:d=i(c.mercuryJSON);if(!d)return null;c=d.extensible_attachment;var e=d.blob_attachment;d=d.sticker_attachment;if(!c&&!e&&!d)return null;var f=b("FBIDCheck").isUser_deprecated(a);c?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:c},k,f):e?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{blob_attachments:[e]},k,f):c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{sticker:d},k,f);return c.length>0?c[0]:null}));var m=!b("FBIDCheck").isUser_deprecated(a);if(m&&c.messageMetadata.actorFbId!=a){var n=b("PagesCommsInboxTypedLogger");b("Bootloader").loadModules(["PagesCommsInboxFunnel","PagesCommsInboxLoggerEvent","PagesCommsInboxLoggerPlatform"],function(b,e,f){new n().setFunnel(b.USER_SEND_TO_PAGE).setCustomerID(c.messageMetadata.threadKey.otherUserFbId).setMessageID(k).setEvent(e.CLIENT_RECEIVED_NEW_DELTA).setClientTime(d).setPageID(a).setMessagingPlatform(f.MESSENGER).log()},"MercurySyncNewMessageTransformer")}l=l.filter(Boolean);var o=c.messageMetadata.tags?c.messageMetadata.tags[0]:void 0,p=null;if(c.data&&c.data.adminSignatureCreatorID){var q=c.data;p={creatorID:q.adminSignatureCreatorID||null,creatorName:q.adminSignatureCreatorName||null,creatorType:q.adminSignatureCreatorType||null,labelType:q.adminSignatureLabelType||null,pageID:q.adminSignaturePageID||null,profileURI:q.adminSignatureProfileURI||null}}return{message_id:k,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(c.messageMetadata.actorFbId),author_email:c.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:c.ttl?b("IrisProtocolMessageLifetime")[c.ttl]:0,timestamp:d,is_unread:j,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,source:o,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:b("MessagingTag").INBOX,thread_fbid:c.messageMetadata.threadKey.threadFbId,other_user_fbid:c.messageMetadata.threadKey.otherUserFbId,body:c.body!==void 0?c.body:"",html_body:null,subject:null,has_attachment:l.length>0,attachments:l,ranges:void 0,thread_id:null,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:!!(c.data&&c.data.is_sponsored&&c.data.is_sponsored==="true")||!!(c.untypedData&&c.untypedData.is_sponsored&&c.untypedData.is_sponsored==="true"),commerce_message_type:c.data?c.data.commerce_message_type:null,customizations:c.data&&c.data.customization?b("MercuryMessageCustomizations").parseCustomizations(c.data.customization):null,platform_xmd:c.data&&c.data.platform_xmd?c.data.platform_xmd:null,profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),message_source:c.data&&c.data.message_source_data?i(c.data.message_source_data).message_source:null,skip_bump_thread:e,thread_read_state_effect:f,montage_reply_data:c.data&&c.data.montage_reply_data?i(c.data.montage_reply_data):null,meta_ranges:c.data&&c.data.meta_ranges?i(c.data.meta_ranges):null,creator_info:p,comm_status:m?b("PageCommItemStatus").TODO:null}}e.exports={transform:a}}),null);
__d("MercurySyncAdminTextMessageTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={message_type:c.type,untypedData:c.untypedData};a.log_message_type=b("MercuryLogMessageType").GENERIC_ADMIN_TEXT;return a}e.exports={transform:a}}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPT_IN:0,OPT_OUT:1})}),null);
__d("LiveLocationStopReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXPIRED:1,CANCELED:2,ARRIVED:3})}),null);
__d("MercurySyncClientPayloadTransformer",["invariant","ClientSyncProtocol_GroupsSyncAction","DateConsts","LiveLocationStopReason","MercuryActionType","MercuryIDs","MercuryParticipantTypes","MercurySyncNewMessageTransformer","MessageLiveLocationClientSyncProtocolStopReason","MessengerGroupsSyncStatus","MessengerParticipants.bs","PageCommItemStatus","RepliedToMessageStatusForGraphQL","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("keyMirror")(b("LiveLocationStopReason")),i=8;function a(a,b){__p&&__p();a=a.payload;a=JSON.parse(String.fromCharCode.apply(null,a));a=a&&a.deltas;a=a[0];if(a.deltaMessageReaction)return t(a.deltaMessageReaction);else if(a.liveLocationData)return v(a.liveLocationData);else if(a.deltaUpdateGroupEventRSVPStatus){var c=a.deltaUpdateGroupEventRSVPStatus;return u(c)}else if(a.deltaPageThreadFollowUpData)return z(a.deltaPageThreadFollowUpData);else if(a.deltaChangeViewerStatus)return r(a.deltaChangeViewerStatus,b);else if(a.deltaMontageDirectExpire)return s(a.deltaMontageDirectExpire);else if(a.deltaMessageReply)return o(a.deltaMessageReply,b);else if(a.deltaUpdateGroupsSyncStatus)return p(a.deltaUpdateGroupsSyncStatus);else if(a.deltaUpdateGroupsSyncMetadata)return q(a.deltaUpdateGroupsSyncMetadata);else if(a.deltaGroupThreadDescription)return w(a.deltaGroupThreadDescription);else if(a.deltaUpdateThreadTheme)return n(a.deltaUpdateThreadTheme);else if(a.deltaUpdatePinnedThread)return x(a.deltaUpdatePinnedThread);else if(a.deltaUpdatePrivateGroupJoinableLink)return A(a.deltaUpdatePrivateGroupJoinableLink);else if(a.deltaOmniMDirectivesV2)return l(a.deltaOmniMDirectivesV2);else if(a.deltaMontageMessageDelete)return j(a.deltaMontageMessageDelete);else if(a.deltaNewMontageMessage)return k(a.deltaNewMontageMessage);else if(a.deltaPromoteGroupThreadAdmin)return B(a.deltaPromoteGroupThreadAdmin);else if(a.deltaPageUnSubscribeStatus)return C(a.deltaPageUnSubscribeStatus);else if(a.deltaRecallMessageData)return D(a.deltaRecallMessageData);else return y(a)}function j(a){var c=a.threadFbid;a=a.messageFbid;return{action_type:b("MercuryActionType").DELETE_MONTAGE_MESSAGES,threadFBID:c.toString(),messageFBID:a.toString()}}function k(a){return{action_type:b("MercuryActionType").NEW_MONTAGE_MESSAGE,thread_fbid:a.messageMetadata.threadFbid.toString(),actor_fbid:a.messageMetadata.actorFbid.toString(),message_fbid:a.messageMetadata.messageFbid.toString()}}function l(a){__p&&__p();if(a.directives&&a.directives[0]){a=(a=a.directives[0])!=null?(a=a.data)!=null?(a=a.add_actions)!=null?a.actions:a:a:a;if(a&&a[0]&&a[0].thread_key){var c=a[0].thread_key,d,e;if(c.thread_fbid)d=c.thread_fbid,e=b("MercuryIDs").getThreadIDFromThreadFBID(d);else if(c.other_user_fbid)d=c.other_user_fbid,e=b("MercuryIDs").getThreadIDFromUserID(d);else return null;return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:d,thread_id:e,suggestions:a}}}return null}function m(a){return"#"+a.slice(2)}function n(a){__p&&__p();var c=a.themeId,d=a.threadKey,e=a.fallbackColor;a=a.gradientColors;d=d.threadFbId||d.otherUserFbId;if(!d)return null;e=e&&m(e);var f=a&&a.length>0;if(f){f=a.map(m);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),theme_id:c,solid_color:e,header_color:f[0],footer_color:f[f.length-1],gradient_colors:f}}else return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),theme_id:c,solid_color:e,header_color:e,footer_color:e,gradient_colors:[]}}function o(a,c){__p&&__p();var d=a.message,e=a.repliedToMessage;d=b("MercurySyncNewMessageTransformer").transform(c,d);if(e){c=b("MercurySyncNewMessageTransformer").transform(c,e);e=null;if(a.status!==void 0&&a.status!==null)switch(a.status){case 0:e=b("RepliedToMessageStatusForGraphQL").VALID;break;case 1:e=b("RepliedToMessageStatusForGraphQL").DELETED;break;case 2:e=b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE;break;default:g(0,3333)}d.replied_to_message={status:e,message:c}}return d}function p(a){var c=a.threadKey,d=a.actorFbid;a=a.groupsSyncStatus;c=c.threadFbId||c.otherUserFbId;if(!c)return null;a=b("MessengerGroupsSyncStatus")[a];return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:c.toString(),actor_fbid:d.toString(),groups_sync_status_string:a}}function q(a){__p&&__p();var c=a.threadKey,d=a.actorFbid,e=a.syncAction,f=a.sourceSurface;a=a.syncedFbGroupId;c=c.threadFbId||c.otherUserFbId;if(!c)return null;var g;switch(e){case b("ClientSyncProtocol_GroupsSyncAction").OPT_IN:g=b("MessengerGroupsSyncStatus").OPT_IN;break;case b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT:g=b("MessengerGroupsSyncStatus").OPT_OUT;break;default:return null}return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:c.toString(),actor_fbid:d.toString(),groups_sync_action:g,source_surface:f,fb_group_id:a.toString()}}function r(a,c){var d=a.actorFbid,e=a.canViewerReply,f=a.reason;a=a.threadKey;if(!d)return null;var g=d.toString();g=b("MercuryIDs").getParticipantIDFromUserID(g===c?a.otherUserFbId:c);c=b("MessengerParticipants.bs").getNow(g);return!!c&&b("MercuryParticipantTypes").PAGE===c.type?null:{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:e,reason:f,message_blocked_ids:[g],other_user_fbid:a.otherUserFbId.toString()}}function s(a){var c=a.threadKey.threadFbId||a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:a.messageId,timestamp:a.timestamp,thread_fbid:c.toString(),keep_expiry_timestamp:a.keepExpiryTimestamp}}function t(a){var c=a.messageId,d=a.offlineThreadingId,e=a.reaction,f=a.senderId,g=a.userId;a=a.threadKey.threadFbId||a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c,offlineThreadingId:d,reaction:e,senderId:f,thread_fbid:a.toString(),userId:g}}function u(a){var c=a.threadKey&&a.threadKey.threadFbId;if(!c)return null;var d=a.actorFbId;a=a.rsvpStatus;return!d?null:{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,thread_fbid:c.toString(),actor_fbid:d.toString(),rsvp_status:a}}function v(a){__p&&__p();var c=a.threadKey;if(!c)return null;c=c.threadFbId||c.otherUserFbId;if(!c)return null;if(!a.messageLiveLocations||a.messageLiveLocations.length!==1)return null;a=a.messageLiveLocations[0];var d=a.expirationTime,e=a.stopReason!=null||Date.now()/b("DateConsts").MS_PER_SEC>d,f=function(a){return a/Math.pow(10,i)},g=a.coordinate?{latitude:f(a.coordinate.latitude),longitude:f(a.coordinate.longitude)}:null,j=null;a.destination&&(j={latitude:f(a.destination.latitude),longitude:f(a.destination.longitude),label:a.destination.label});f=null;switch(a.stopReason){case b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED:f=h.EXPIRED;break;case b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED:f=h.CANCELED;break;case b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED:f=h.ARRIVED;break}return{action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:c.toString(),messageId:a.messageId,liveLocation:{live_location_id:a.id.toString(),is_expired:e,expiration_time:d,sender:{id:a.senderId.toString()},coordinate:g,location_title:a.locationTitle,sender_destination:j,stop_reason:f}}}function w(a){var c=a.threadKey;a=a.threadDescription;c=c.threadFbId;return!c?null:{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:c.toString(),group_thread_description_string:a}}function x(a){var c=a.threadKey;a=a.isPinned;c=c.threadFbId||c.otherUserFbId;return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:c.toString(),is_pinned:a}}function y(a){a=a&&a.deltaPaymentPinProtectionStatusData;var c=a&&a.threadKey&&a.threadKey.otherUserFbId;a=a&&a.isPinProtected;if(!c)return null;c=c.toString();return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:c,is_pin_protected:a}}function z(a){var c=a.threadKey.otherUserFbId;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:a.isFollowUp?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:c.toString()}}function A(a){var c=a.threadKey;a=a.privateGroupLink;c=c.threadFbId;return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:a,thread_fbid:c.toString()}}function B(a){return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:a.threadKey.threadFbId.toString(),promoted_admins:a.promotedAdmins.map(function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}})}}function C(a){return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:a.unSubscribeStatus,thread_fbid:a.threadKey.otherUserFbId.toString()}}function D(a){var c=a.threadKey,d=a.messageID;a=a.deletionTimestamp;c=c.threadFbId||c.otherUserFbId;return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:c.toString(),messageId:d,removed_timestamp:a}}e.exports={transform:a}}),null);
__d("MercurySyncDeliveryReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{delivery_receipts:[{other_user_fbid:a.threadKey.otherUserFbId?a.threadKey.otherUserFbId:"",thread_fbid:a.threadKey.threadFbId?a.threadKey.threadFbId:"",time:parseInt(a.deliveredWatermarkTimestampMs,10)}]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderChangeTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:a.threadKey.otherUserFbId,new_folder:b("MessagingTag").IRIS_MAPPING[a.folder]}}e.exports={transform:a}}),null);
__d("MercurySyncMarkFolderSeenTransformer",["MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_SEEN,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.timestamp,10)}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkReadTransformer",["MercuryActionType","MercuryGlobalActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.folders&&a.folders.length>0?a.folders.map(function(c){return{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("MessagingTag").IRIS_MAPPING[c],timestamp:parseInt(a.watermarkTimestamp,10)}}):a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!0,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMarkUnreadTransformer",["MercuryActionType","MessagingTag"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(c){return{action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:parseInt(a.watermarkTimestamp,10),folder:b("MessagingTag").INBOX}})}e.exports={transform:a}}),null);
__d("MercurySyncMessageDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:a.messageIds,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId}}e.exports={transform:a}}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("MercurySyncPagesManagerEventTransformer",["MercuryActionType","PagesMessagingEventType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=JSON.parse(a.jsonBlob),d=c&&c.type;if(!d)return void 0;switch(d){case b("PagesMessagingEventType").FLAG:d=!!(c&&c.flagData&&c.flagData.state);c={action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:d,other_user_fbid:a.threadKey.otherUserFbId,thread_fbid:a.threadKey.threadFbId};return c;default:return void 0}}e.exports={transform:a}}),null);
__d("MercurySyncParticipantLeftGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c.leftParticipantFbId)]};a.log_message_type=b("MercuryLogMessageType").UNSUBSCRIBE;return a}e.exports={transform:a}}),null);
__d("MercurySyncParticipantsAddedToGroupThreadTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={added_participants:c.addedParticipants.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})};a.log_message_type=b("MercuryLogMessageType").SUBSCRIBE;return a}e.exports={transform:a}}),null);
__d("MercurySyncRTCEventLogTransformer",["MercuryActionType","MercuryIDs","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=b("MercurySyncNewMessageTransformer").transform(a,c),e=c.messageMetadata.actorFbId;a=e===a?c.messageMetadata.threadKey.otherUserFbId:a;var f=c.eventType==="VOICE_EVENT"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;d.action_type=b("MercuryActionType").LOG_MESSAGE;d.log_message_body=c.messageMetadata.adminText;d.log_message_data={answered:c.duration>0,callee:b("MercuryIDs").getParticipantIDFromUserID(a),caller:b("MercuryIDs").getParticipantIDFromUserID(e)};d.log_message_type=f;return d}e.exports={transform:a}}),null);
__d("MercurySyncReadReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={watermark:parseInt(a.watermarkTimestampMs,10),action:parseInt(a.actionTimestampMs,10)},c=a.threadKey.otherUserFbId||a.actorFbId;a=a.threadKey.otherUserFbId||a.threadKey.threadFbId;var d={roger:{}};d.roger[a]={};d.roger[a][c]=b;return d}e.exports={transform:a}}),null);
__d("MercurySyncReplaceMessageTransformer",["MercuryActionType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){c=Object.assign({},c.newMessage,c);return Object.assign(b("MercurySyncNewMessageTransformer").transform(a,c),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:c.replacedMessageId})}e.exports={transform:a}}),null);
__d("MercurySyncRtcCallDataTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.messageMetadata.threadKey&&a.messageMetadata.threadKey.threadFbId?a.messageMetadata.threadKey.threadFbId.toString():void 0,d=a.initiator&&a.initiator.userFbId?a.initiator.userFbId.toString():void 0;return{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:c,call_state:a.callState,server_info_data:a.serverInfoData,initiator_fbid:d}}e.exports={transform:a}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MercurySyncThreadActionTransformer",["MercuryActionType","MessagingThreadAction"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,archived:a.action===b("MessagingThreadAction").ACTION_ARCHIVED};return a}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsAddToGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").ADD_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,added_admin_ids:a.addedAdmins.map(function(a){return a.userFbId})}}e.exports={transform:a}}),null);
__d("MercurySyncThreadAdminsRemovedFromGroupTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_admin_ids:a.removedAdminFbIds}}e.exports={transform:a}}),null);
__d("MercurySyncThreadApprovalModeTransformer",["MercuryActionType","MessengerApprovalModeTypes"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,approval_mode:b("MessengerApprovalModeTypes")[a.mode]}}e.exports={transform:a}}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MercurySyncThreadApprovalQueueTransformer",["MercuryActionType","MercuryIDs","MessengerApprovalQueueTypes","MessengerGroupRequestSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){switch(a){case"ADD":return b("MessengerGroupRequestSource").ADD;case"JOIN_THROUGH_LINK":return b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;default:return b("MessengerGroupRequestSource").ADD}}function a(a){if(a.inviterFbId)return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_group_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?a.recipientFbId:null,added_group_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?{requester:{id:a.recipientFbId},inviter:{id:a.inviterFbId},request_source:g(a.requestSource),request_timestamp:a.requestTimestamp}:null};var c=b("MercuryIDs").getParticipantIDFromUserID(a.recipientFbId);return{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,removed_id:a.action===b("MessengerApprovalQueueTypes").REMOVED?c:null,added_id:a.action===b("MessengerApprovalQueueTypes").REQUESTED?c:null}}e.exports={transform:a}}),null);
__d("MercurySyncThreadDeleteTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.threadKeys.map(function(a){return{action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:a.otherUserFbId,thread_fbid:a.threadFbId}})}e.exports={transform:a}}),null);
__d("MercurySyncThreadJoinableModeTransformer",["MercuryActionType","MessengerJoinableModeType"],(function(a,b,c,d,e,f){"use strict";function a(a){return{action_type:b("MercuryActionType").JOINABLE_MODE,action_id:null,thread_fbid:a.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:b("MessengerJoinableModeType")[a.mode],link:a.link}}}e.exports={transform:a}}),null);
__d("MercurySyncThreadMuteSettingsTransformer",["MercuryActionType"],(function(a,b,c,d,e,f){"use strict";function a(a){a={action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:a.threadKey.threadFbId,other_user_fbid:a.threadKey.otherUserFbId,mute_until:parseInt(a.expireTime,10)};return a}e.exports={transform:a}}),null);
__d("MercurySyncThreadNameTransformer",["MercuryActionType","MercuryLogMessageType","MercurySyncNewMessageTransformer"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a=b("MercurySyncNewMessageTransformer").transform(a,c);a.action_type=b("MercuryActionType").LOG_MESSAGE;a.log_message_body=c.messageMetadata.adminText;a.log_message_data={name:c.name};a.log_message_type=b("MercuryLogMessageType").THREAD_NAME;return a}e.exports={transform:a}}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=new a({strict:!1})}),null);
__d("MontageActions",["Bootloader","CurrentUser","MercuryServerPayloadPreprocessor","MontageDispatcher","WebGraphQL","keyMirror","promiseDone","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null,HANDLE_ACTION:null}),h=new Set();a={Types:g,requestUpdate:function(a){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},montageThreadChanged:function(a,c){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},hasUpdated:function(a){b("MontageDispatcher").dispatch({type:g.HAS_UPDATED,threadFBID:a})},loadMontageThreadForActor:function(a){if(h.has(a))return;h.add(a);b("Bootloader").loadModules(["MessengerMontageThreadQueryWebGraphQLQuery"],function(c){c=b("WebGraphQL").exec(new c({id:a}));b("promiseDone")(c,function(c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({current_montage_thread:c}),h["delete"](a)})},"MontageActions")},deleteMontage:function(a,c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_delete_message_delta:c})},handleNewMontageDelta:function(a,c){b("Bootloader").loadModules(["MessengerNewMontageMessageWebGraphQLQuery"],function(a){a=b("WebGraphQL").exec(new a({id:c.message_fbid}));b("promiseDone")(a,function(a){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_new_message_delta:a.montage_message})})},"MontageActions")},updatePollStickerChoice:function(a){b("Bootloader").loadModules(["MessengerState.bs","MessengerMontagePollVoteMutationWebGraphQLMutation"],function(c,d){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_poll_sticker_vote:[a]});c=b("WebGraphQL").exec(new d({input:{client_mutation_id:b("uniqueID")(),story_card_poll_id:a.pollID,option:a.optionVotedIndex,actor_id:b("CurrentUser").getID()}}));b("promiseDone")(c,function(a){},function(a){})},"MontageActions")}};e.exports=a}),null);
__d("MercurySyncDispatcher",["Bootloader","MercuryActionType","MercuryDelayedDispatcher","MercuryGlobalActionType","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncAdminTextMessageTransformer","MercurySyncClientPayloadTransformer","MercurySyncDeliveryReceiptTransformer","MercurySyncDeltaTypes","MercurySyncMarkFolderChangeTransformer","MercurySyncMarkFolderSeenTransformer","MercurySyncMarkReadTransformer","MercurySyncMarkUnreadTransformer","MercurySyncMessageDeleteTransformer","MercurySyncNewMessageTransformer","MercurySyncPagesManagerEventTransformer","MercurySyncParticipantLeftGroupThreadTransformer","MercurySyncParticipantsAddedToGroupThreadTransformer","MercurySyncReadReceiptTransformer","MercurySyncReplaceMessageTransformer","MercurySyncRtcCallDataTransformer","MercurySyncRTCEventLogTransformer","MercurySyncThreadActionTransformer","MercurySyncThreadAdminsAddToGroupTransformer","MercurySyncThreadAdminsRemovedFromGroupTransformer","MercurySyncThreadApprovalModeTransformer","MercurySyncThreadApprovalQueueTransformer","MercurySyncThreadDeleteTransformer","MercurySyncThreadJoinableModeTransformer","MercurySyncThreadMuteSettingsTransformer","MercurySyncThreadNameTransformer","MontageActions","MSuggestionActions","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="FOLDER_MONTAGE";a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryDelayedDispatcher").getForFBID(this.$1),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1)}a.prototype.process=function(a){__p&&__p();var c,d;switch(a["class"]){case b("MercurySyncDeltaTypes").NewMessage:c=b("MercurySyncNewMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ReplaceMessage:c=b("MercurySyncReplaceMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").DeliveryReceipt:c=b("MercurySyncDeliveryReceiptTransformer").transform(a);this.$3.handleUpdate(c);break;case b("MercurySyncDeltaTypes").MarkRead:c=b("MercurySyncMarkReadTransformer").transform(a);var e=[],f=[];c.forEach(function(a){a.action_type===b("MercuryGlobalActionType").MARK_ALL_READ?e.push(a):f.push(a)});e.length&&this.$5(e);f.length&&this.$6(f);break;case b("MercurySyncDeltaTypes").MarkUnread:c=b("MercurySyncMarkUnreadTransformer").transform(a);this.$6(c);break;case b("MercurySyncDeltaTypes").ParticipantLeftGroupThread:c=b("MercurySyncParticipantLeftGroupThreadTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:c=b("MercurySyncParticipantsAddedToGroupThreadTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").RTCEventLog:c=b("MercurySyncRTCEventLogTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadName:c=b("MercurySyncThreadNameTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").ReadReceipt:c=b("MercurySyncReadReceiptTransformer").transform(a);this.$3.handleUpdate(c);break;case b("MercurySyncDeltaTypes").AdminTextMessage:c=b("MercurySyncAdminTextMessageTransformer").transform(this.$1,a);this.$4(c);break;case b("MercurySyncDeltaTypes").MessageDelete:d=a.threadKey.threadFbId;c=b("MercurySyncMessageDeleteTransformer").transform(a);d&&a.folder&&a.folder===g?b("MontageActions").requestUpdate(d):this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadAction:c=b("MercurySyncThreadActionTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadDelete:c=b("MercurySyncThreadDeleteTransformer").transform(a);this.$6(c);break;case b("MercurySyncDeltaTypes").AdminAddedToGroupThread:c=b("MercurySyncThreadAdminsAddToGroupTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread:c=b("MercurySyncThreadAdminsRemovedFromGroupTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ThreadMuteSettings:c=b("MercurySyncThreadMuteSettingsTransformer").transform(a);this.$6([c]);break;case b("MercurySyncDeltaTypes").PagesManagerEvent:c=b("MercurySyncPagesManagerEventTransformer").transform(a);if(!c)return;this.$6([c]);break;case b("MercurySyncDeltaTypes").JoinableMode:c=b("MercurySyncThreadJoinableModeTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ApprovalMode:c=b("MercurySyncThreadApprovalModeTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ApprovalQueue:c=b("MercurySyncThreadApprovalQueueTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").ClientPayload:c=b("MercurySyncClientPayloadTransformer").transform(a,this.$1);if(!c)return;switch(c.action_type){case b("MercuryActionType").DELETE_MONTAGE_MESSAGES:b("gkx")("678586")&&b("MontageActions").deleteMontage(this.$1,c);b("MontageActions").requestUpdate(c.threadFBID);break;case b("MercuryActionType").NEW_MONTAGE_MESSAGE:b("gkx")("678586")&&b("MontageActions").handleNewMontageDelta(this.$1,c);b("MontageActions").requestUpdate(c.thread_fbid);break;case b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS:b("MSuggestionActions").saveAllSuggestions(c.thread_id,c.suggestions);var h=c.suggestions;b("gkx")("678669")&&b("Bootloader").loadModules(["OmniMEventTypedLoggerUtils","OmniMLoggerEvents"],function(a,b){a.logOmniMBar(h.map(function(a){return a.id}),b.SUGGESTIONS_RECEIVED)},"MercurySyncDispatcher");break;default:this.$4(c);break}break;case b("MercurySyncDeltaTypes").GenieMessage:c=b("MercurySyncNewMessageTransformer").transform(this.$1,a.deltaNewMessage);this.$4(c);break;case b("MercurySyncDeltaTypes").MontageMessage:d=a.newMessage.messageMetadata.actorFbId;d&&b("MontageActions").requestUpdate(d);break;case b("MercurySyncDeltaTypes").RtcCallData:c=b("MercurySyncRtcCallDataTransformer").transform(a);this.$4(c);break;case b("MercurySyncDeltaTypes").MarkFolderSeen:c=b("MercurySyncMarkFolderSeenTransformer").transform(a);this.$5(c);break;case b("MercurySyncDeltaTypes").ThreadFolder:c=b("MercurySyncMarkFolderChangeTransformer").transform(a);this.$6([c]);break;default:break}};a.prototype.$4=function(a){var c=a.other_user_fbid||a.thread_fbid;this.$2.handleUpdateWaitForThread({actions:[a],payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE},c)};a.prototype.$5=function(a){this.$3.handleUpdate({global_actions:a,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};a.prototype.$6=function(a){this.$3.handleUpdate({actions:a,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE})};var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryTypeaheadDataSource",["CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig"],(function(a,b,c,d,e,f){__p&&__p();var g,h=[],i={},j={},k={},l=[],m=[],n=[],o=!1,p=!1;c=babelHelpers.inherits(a,b("DataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.kanaNormalization=!0,g.constructor.call(this,a),this.showDefaultList=a.showDefaultList||!1}a.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=h;this.localCache=j;this.queryCache=i;this.queryIDs=k;this.defaultList=l;this.topEntryIDs=m;this.nullStateExclusions=n;return this};a.prototype.bootstrap=function(){"use strict";if(o||p)return!1;p=!0;b("ShortProfiles").fetchAll().then(function(){this.updateBootstrapData(),p=!1,o=!0,this.showDefaultList&&this.inform("show-default",{impressions:this.defaultList})}.bind(this),function(){}.bind(this));return!0};a.prototype.updateBootstrapData=function(){"use strict";__p&&__p();var a=this.getCachedShortProfileIDs(),c=b("WorkModeConfig").is_work_user?b("MercuryParticipantTypes").FB4C:b("MercuryParticipantTypes").FRIEND;a=a.map(function(a){var d=b("ShortProfiles").getNow(a),e=a==b("CurrentUser").getID()?c:d.type,f=[d.additionalName,d.alternateName].concat(d.searchTokens||[]).join(" "),g=d.name,h=null;return{uid:a,index:b("OrderedFriendsList").getActiveRank(a),text:g,subtext:h,tokens:f,localized_text:d.name,additional_text:d.additionalName,photo:d.thumbSrc,render_type:e,type:b("MercuryTypeaheadConstants").USER_TYPE}});a.length&&this.addEntries(a);if(!this.showDefaultList)return;m=a.sort(function(a,b){return a.index-b.index}).map(function(a){return a.uid});this.defaultList=this.buildData(m.slice(0,5));this.topEntryIDs=m};a.prototype.updateDefaultList=function(a){"use strict";if(!a)return;this.nullStateExclusions.includes(a)?this.nullStateExclusions=this.nullStateExclusions.filter(function(b){return b!==a}):this.nullStateExclusions.push(a);l=this.topEntryIDs.filter(function(a){return!this.nullStateExclusions.includes(a)}.bind(this));this.defaultList=this.buildData(l.slice(0,5))};a.prototype.query=function(a,b,c,d){"use strict";b=b||a.length===1;return g.query.call(this,a,b,c,d)};a.prototype.getQueryData=function(a,b){"use strict";return babelHelpers["extends"]({},g.getQueryData.call(this,a,b))};a.prototype.setEntry=function(a,b){"use strict";this.$MercuryTypeaheadDataSource1[a]=b};a.prototype.getEntry=function(a){"use strict";return this.$MercuryTypeaheadDataSource1[a]||null};a.prototype.getCachedShortProfileIDs=function(){"use strict";var a=b("ShortProfiles").getCachedProfileIDs();a=a.filter(function(a){var c=b("ShortProfiles").getNow(a);return a==b("CurrentUser").getID()||c.type===b("MercuryParticipantTypes").FRIEND||c.type===b("MercuryParticipantTypes").FB4C});return a};a.prototype.isBootstrapped=function(){"use strict";return o};a.prototype.isBootstrapping=function(){"use strict";return p};a.prototype.processEntries=function(a,c){"use strict";a=a.map(function(a){a.index==null&&(a.render_type===b("MercuryParticipantTypes").FRIEND||a.render_type===b("MercuryParticipantTypes").FB4C)&&(a.index=b("OrderedFriendsList").getActiveRank(a.uid));return a});return g.processEntries.call(this,a)};a.prototype.mergeUids=function(a,b,c,d){"use strict";b=b.sort(function(a,b){return this.getEntry(a).index-this.getEntry(b).index}.bind(this));return g.mergeUids.call(this,a,b,c,d)};a.prototype.setShowDefaultList=function(a){"use strict";this.showDefaultList=a};e.exports=a}),null);
__d("ChatTabTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("MercuryTypeaheadDataSource"));g=c&&c.prototype;function a(a){"use strict";a=a||{},a.maxResults=b("MercuryTypeaheadConstants").COMPOSER_CHATTAB_MAX,a.showDefaultList=b("MercuryConfig").ChatComposer,g.constructor.call(this,a),this.$ChatTabTypeaheadDataSource1=!0}a.prototype.buildData=function(a){"use strict";__p&&__p();var c=[],d=[],e=[],f=[],h=[],i=[],j=[],k=!this.$ChatTabTypeaheadDataSource1;a.forEach(function(a){__p&&__p();var i=g.getEntry.call(this,a);switch(i.render_type){case b("MercuryTypeaheadConstants").FRIEND_TYPE:c.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:this.$ChatTabTypeaheadDataSource1&&d.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:f.push(a);break;case b("MercuryTypeaheadConstants").PAGE_TYPE:k||h.push(a);break;case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:i=!k||i.can_add_to_group_chat;i&&j.push(a);break;default:break}}.bind(this),this);a=i.concat(c,f,d,h,e,j);return g.buildData.call(this,a)};a.prototype.query=function(a,b,c,d){"use strict";return g.query.call(this,a,b,c,d)};a.prototype.respond=function(a,b,c){"use strict";return g.respond.call(this,a,b,c)};a.prototype.setShowThreads=function(a){"use strict";this.$ChatTabTypeaheadDataSource1=a};e.exports=a}),null);
__d("ReactDOMRe.bs",["React","ReactDOM","bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=document.getElementsByClassName(c);if(d.length!==0){b("ReactDOM").render(a,d[0]);return 0}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.renderToElementWithClassName: no element of class "+(c+" found in the HTML.")]}function c(a,c){var d=document.getElementById(c);if(d==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.renderToElementWithId : no element of id "+(c+" found in the HTML.")];else{b("ReactDOM").render(a,d);return 0}}function d(a,c){var d=document.getElementsByClassName(c);if(d.length!==0){b("ReactDOM").hydrate(a,d[0]);return 0}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.hydrateToElementWithClassName: no element of class "+(c+" found in the HTML.")]}function e(a,c){var d=document.getElementById(c);if(d==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"ReactDOMRe.hydrateToElementWithId : no element of id "+(c+" found in the HTML.")];else{b("ReactDOM").hydrate(a,d);return 0}}function g(a,c,d){a=[a,c].concat(d);return b("React").createElement.apply(null,a)}function h(a,b){return Object.assign(Object.assign({},a),b)}function i(a,b,c){var d={};d[b]=c;return h(a,d)}i=[h,i];f.renderToElementWithClassName=a;f.renderToElementWithId=c;f.hydrateToElementWithClassName=d;f.hydrateToElementWithId=e;f.createElementVariadic=g;f.Style=i}),null);